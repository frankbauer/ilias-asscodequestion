{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Terminal.vue?d9cd","webpack:///./src/components/CodeBlocksSettings.vue?dae1","webpack:///./src/lib/BlocklyHelper.ts","webpack:///./src/components/CodeBlockButton.vue?86c3","webpack:///./src/components/PlaygroundCanvas.vue?9af5","webpack:///./src/components/ErrorTip.vue?97bb","webpack:///./src/locales sync [A-Za-z0-9-_,\\s]+\\.json$/","webpack:///./src/components/RandomizerSettings.vue?53b8","webpack:///./src/lib/glsl/glsl.js","webpack:///./src/lib/ICompilerRegistry.ts","webpack:///./src/components/CodeBlocks.vue?730d","webpack:///./src/components/CodeBlock.vue?f601","webpack:///./src/components/ErrorTip.vue?7bbc","webpack:///./src/components/ErrorTip.vue?ae25","webpack:///./src/components/ErrorTip.vue?9de3","webpack:///./src/components/ErrorTip.vue?cdc8","webpack:///./src/components/CodeBlockButton.vue?c9fa","webpack:///./src/components/CodeBlockButton.vue?8dde","webpack:///./src/components/CodeBlockButton.vue?3b91","webpack:///./src/components/CodeBlockButton.vue?5062","webpack:///./src/components/CodeBlock.vue?2089","webpack:///./src/components/CodeBlock.vue?f7f2","webpack:///./src/components/CodeBlock.vue?4831","webpack:///./src/components/BaseBlock.vue?b9c1","webpack:///./src/components/BaseBlock.vue","webpack:///./src/components/BaseBlock.vue?2d8c","webpack:///./src/components/CodePlayground.vue?7d43","webpack:///./src/lib/ICodeBlocks.ts","webpack:///./src/AppEditor.vue?6f5a","webpack:///./src/components/TipTap.vue?5d31","webpack:///./src/components/CodeBlockContainer.vue?5810","webpack:///./src/lib/IBlocklyHelper.ts","webpack:///./src/plugins/uuid.ts","webpack:///./src/plugins/quasar.ts","webpack:///./src/plugins/codemirror.ts","webpack:///./src/plugins/codeBlocks.ts","webpack:///./src/plugins/compilerState.ts","webpack:///./src/plugins/highlight.ts","webpack:///./src/plugins/tagger.ts","webpack:///./src/compiler/doppio.v001.js","webpack:///./src/compiler/teavm.v100.ts","webpack:///./src/compiler/teavm.v101.ts","webpack:///./src/compiler/java.ts","webpack:///./src/compiler/javascript.v100.ts","webpack:///./src/compiler/javascript.v101.ts","webpack:///./src/compiler/javascript.v102.ts","webpack:///./src/compiler/javascript.ts","webpack:///./src/compiler/python.v100.ts","webpack:///./src/compiler/python.v101.ts","webpack:///./src/compiler/python.v102.ts","webpack:///./src/compiler/python.ts","webpack:///./src/compiler/glsl.v100.ts","webpack:///./src/compiler/glsl.ts","webpack:///./src/lib/CompilerRegistry.ts","webpack:///./src/lib/scriptBlock.ts","webpack:///./src/App.vue?1ef8","webpack:///./src/components/CodeBlocks.vue?0ef7","webpack:///./src/components/CodeBlockContainer.vue?bc49","webpack:///./src/lib/BlockloadManagers/PositioningManager.ts","webpack:///./src/lib/BlockloadManagers/BlocklyManager.ts","webpack:///./src/components/CodeBlockContainer.vue?2263","webpack:///./src/components/CodeBlockContainer.vue?e345","webpack:///./src/components/CodeBlockContainer.vue?c445","webpack:///./src/components/CodeBlocksSettings.vue?9310","webpack:///./src/components/RandomizerSettings.vue?6ff8","webpack:///./src/components/RandomizerSetEditor.vue?d05a","webpack:///./src/components/RandomizerSetEditor.vue?8956","webpack:///./src/components/RandomizerSetEditor.vue?515c","webpack:///./src/components/RandomizerSetEditor.vue","webpack:///./src/components/RandomizerSettings.vue?ec21","webpack:///./src/components/RandomizerSettings.vue?17b7","webpack:///./src/components/RandomizerSettings.vue?d205","webpack:///./src/components/CodeBlocksSettings.vue?dd5d","webpack:///./src/components/CodeBlocksSettings.vue?d44b","webpack:///./src/components/CodeBlocksSettings.vue?da51","webpack:///./src/components/CodePanel.vue?ce78","webpack:///./src/components/CodePanel.vue?8d00","webpack:///./src/components/CodePanel.vue?2070","webpack:///./src/components/CodePanel.vue?4ef9","webpack:///./src/components/CodePlayground.vue?508f","webpack:///./src/components/PlaygroundCanvas.vue?0df8","webpack:///./src/components/PlaygroundCanvas.vue?3d8f","webpack:///./src/components/PlaygroundCanvas.vue?53fd","webpack:///./src/components/PlaygroundCanvas.vue?ce4c","webpack:///./src/components/CodePlayground.vue?6377","webpack:///./src/components/CodePlayground.vue?9969","webpack:///./src/components/CodePlayground.vue?32a7","webpack:///./src/components/CodeREPL.vue?cc12","webpack:///./src/components/Terminal.vue?5616","webpack:///./src/components/Terminal.vue?a698","webpack:///./src/components/Terminal.vue?2dfc","webpack:///./src/components/Terminal.vue?064a","webpack:///./src/components/CodeREPL.vue?40f0","webpack:///./src/components/CodeREPL.vue?df8e","webpack:///./src/components/CodeREPL.vue","webpack:///./src/components/SimpleText.vue?9ccf","webpack:///./src/components/TipTap.vue?0b2c","webpack:///./src/components/TipTap.vue?f154","webpack:///./src/components/TipTap.vue?041e","webpack:///./src/components/TipTap.vue?fbce","webpack:///./src/components/SimpleText.vue?b0a8","webpack:///./src/components/SimpleText.vue?d8f3","webpack:///./src/components/SimpleText.vue","webpack:///./src/components/CodeBlocks.vue?bdc4","webpack:///./src/components/CodeBlocks.vue?f12a","webpack:///./src/components/CodeBlocks.vue?73e2","webpack:///src/App.vue","webpack:///./src/App.vue?099c","webpack:///./src/App.vue?7d8b","webpack:///./src/AppEditor.vue?2526","webpack:///./src/components/CodeBlocksEditor.vue?ed7f","webpack:///./src/components/CodeBlocksEditor.vue","webpack:///./src/components/CodeBlocksEditor.vue?6cf9","webpack:///src/AppEditor.vue","webpack:///./src/AppEditor.vue?1c67","webpack:///./src/AppEditor.vue?6d6f","webpack:///./src/lib/BlockloadManagers/BlockManager.ts","webpack:///./src/lib/BlockloadManagers/PlaygroundManager.ts","webpack:///./src/lib/BlockloadManagers/REPLManager.ts","webpack:///./src/lib/codeBlocksManager.ts","webpack:///./src/main.ts","webpack:///./src/App.vue?40d9","webpack:///./src/components/CodePlayground.vue?7cfb","webpack:///./src/lib/jquery.terminal.js","webpack:///./src/components/CodePanel.vue?57e3","webpack:///./src/components/CodeBlock.vue?6b7e","webpack:///./src/plugins/i18n.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","ColorThemeSelection","label","ColorHues","PredefinedBlockTypes","keys","map","ret","$l","ColorSelection","ColorSelectionWithNone","blockStyles","colour_blocks","colourPrimary","Colour","colourSecondary","colourTertiary","hat","list_blocks","List","logic_blocks","Logic","loop_blocks","Loop","math_blocks","Math","procedure_blocks","Procedure","text_blocks","Text","variable_blocks","Variable","variable_dynamic_blocks","Variable_dynamic","hat_blocks","categoryStyles","colour_category","colour","list_category","logic_category","loop_category","math_category","procedure_category","text_category","variable_category","variable_dynamic_category","BlocklyHelper","a","items","item","serializeToolboxItem","join","res","color","custom","this","serializeToolboxItems","serializeToolboxCategory","toolbox","catCount","categories","serializeToolboxCategories","cat","bl","cp","JSON","toHTMLColor","stringify","getBlockDescription","bls","xml","replace","cc","codeUndefines","Blockly","prepareBlocklyCode","codeString","_code","Function","$CodeBlock","itemForValue","forEach","cl","toColor","blocklyHelper","webpackContext","req","id","webpackContextResolve","mod","require","define","CodeMirror","words","str","obj","split","defineMode","config","parserConfig","curPunc","indentUnit","statementIndentUnit","dontAlignCalls","keywords","builtin","blockKeywords","atoms","hooks","multiLineStrings","indentStatements","isOperatorChar","tokenBase","stream","state","ch","next","tokenize","tokenString","test","eatWhile","eat","tokenComment","skipToEnd","cur","current","propertyIsEnumerable","quote","escaped","end","maybeEnd","Context","indented","column","align","prev","pushContext","col","indent","context","popContext","startState","basecolumn","startOfLine","token","ctx","sol","indentation","eatSpace","style","textAfter","Pass","firstChar","charAt","closing","electricChars","blockCommentStart","blockCommentEnd","lineComment","fold","cppHook","skipTo","eol","def","mimes","add","prop","helperType","registerHelper","defineMIME","modeProps","ErrorSeverity","render","_vm","_h","$createElement","_c","_self","class","typeName","directives","rawName","expression","attrs","block","isBookmarkPanel","ref","boxClass","options","namePrefix","parentID","on","onCodeReady","onCodeFocus","onCodeChangeDefered","onCodeKeyHandle","staticClass","_v","_s","$t","altCode","altOptions","onAltCodeReady","onAltCodeFocus","onAltCodeChangeDefered","_e","staticRenderFns","severityClass","severityIcon","_l","iconForSeverity","severity","classForSeverity","component","QIcon","QTooltip","iconName","onClick","bookmarked","uuid","appSettings","$GlobalEventHub","$emit","bookmarkMe","$on","onBookmark","$off","required","default","QBtn","ErrorTipCtor","extend","codeUpdateTimer","codeUpdateStartTime","continuousCodeUpdateTimer","codeNeedsTagUpdate","altCodeUpdateTimer","altCodeUpdateStartTime","canBookmark","editMode","codemirror","allMarks","getDoc","getAllMarks","className","$tagger","rnd","templ","clear","altcodemirror","clearGutter","editor","display","input","textarea","codeBox","$el","querySelectorAll","el","trim","$","text","content","iliasTypeNr","updateDiagnosticDisplay","onCodeChange","whenBlockIsReady","altBox","$nextTick","onAltCodeChange","alternativeContent","updateTagDisplay","updateHeight","newCode","now","Date","getTime","doIt","lineCountHint","doc","size","firstLineNumber","firstLine","tb","querySelector","emitWhenTypingInViewMode","indexOf","arguments","didAddText","keyCode","visibleLines","static","setSize","round","max","scopeUUID","replaceTemplateTagInString","newValue","randomizer","active","clearTagMarkers","getMarkers","markText","start","inclusiveLeft","inclusiveRight","title","startStyle","endStyle","hookClick","val","errors","clearErrorDisplay","first","line","info","lineInfo","element","gutterMarkers","$component","setGutterMarker","propsData","$mount","$refs","hasAlternativeContent","tagSet","hidden","readonly","toLowerCase","actualContent","theme","lineNumbers","tabSize","autoCloseBrackets","readOnly","gutters","refresh","readyWhenMounted","buildIt","log","addKeyMap","cMirror","Tab","execCommand","replaceTemplateTags","BaseBlock","validator","b","components","CodeBlockButton","muteReadyState","readyCount","whenBlockIsDestroyed","KnownBlockTypes","CodeOutputTypes","CodeExpansionType","BlockPrimaryColors","BlockSecondaryColors","BlockTertiaryColors","BlockOutputTypes","BlockSequenceTypes","BlockArgumentTypes","KnownBlocklyTypes","use","plugins","Dialog","animations","lang","set","mimeTypesForLanguage","mime","displayName","css","fortran","glsl","html","java","javascript","perl","php","python","loadSettings","scope","baseurl","settings","opt","outputObject","magicString","resultData","Array","isArray","json","idx","DATA","AUTO","MAGIC","substr","pString","parse","ee","parsedString","too","language","k","sort","refreshAllCodeMirrorsSync","find","globalState","SEVERITY_ERROR","SEVERITY_WARNING","Warning","$SEVERITY_ERROR","$SEVERITY_WARNING","$compilerState","globalStateHidden","globalStateMessage","runButtonForceHide","methods","hideGlobalState","displayGlobalState","setAllRunButtons","what","configure","useBR","registerLanguage","reg_hl","reg_code","$vue","processElements","inLang","elements","hasAttribute","processElement","processElementSimple","txt","innerHTML","m1","m2","m3","m4","m5","highlight","highlightAuto","MathJax","Hub","Register","StartupHook","highlightAll","highlightElement","hljs","$hljs","directive","binding","componentUpdated","randomAndTemplateTag","lines","markers","regex","RegExp","exec","index","lastIndex","marker","h","$uuid","v4","calle","processString","m0","tags","inTag","innerText","onclick","clickFunction","values","tagEl","$q","dialog","i18n","persistent","prompt","model","ok","icon","cancel","onOk","replaceTemplateTag","onCancel","onDismiss","me","self","highlighted","javaRunOverhead","runJavaWorker","questionID","callingCodeBlocks","max_ms","log_callback","info_callback","err_callback","compileFailedCallback","finishedExecutionCB","forceReload","exp","match","worker","Worker","Vue","timer","addEventListener","stdout","stderr","postMessage","cmd","terminate","JavaExec","setRunButton","showMessage","msg","enabled","singleton","loadedlibs","version","canRun","canStop","allowsContinousCompilation","allowsPersistentArguments","allowsMessagePassing","acceptsJSONArgument","allowsREPL","didPreload","requestedPreload","isReady","isRunning","preload","triggerResourceLoad","lock","initialize","initFileSystems","reroutStdStreams","ready","compileAndRun","args","runCreate","created","teaVMRunOverhead","experimental","deprecated","teaworker","sessionCompileListener","sessionID","sessionWorker","createTeaWorker","whenReady","command","mainClass","url","executionFinished","booted","compilerTimeout","time","replaceRec","getMainClass","regexpMainClass","myListener","phase","lineNumber","startLineNumber","startColumn","endLineNumber","endColumn","kind","humanReadable","runTimeout","removeEventListener","status","runListener","workerrun","runStart","javaCompiler_V100","keepAlive","didReceiveMessage","postMessageFunction","wr","dequeuePostponedMessages","whenFinishedHandler","beforeStartHandler","messagePosting","allowMessagePassing","javaCompiler_V101","versions","JavaCompilers","runJavaScriptWorker","not_allowed_keywords","prefixCode","postfixCode","URL","createObjectURL","Blob","testTimeout","testTimeoutIntern","onmessage","lineno","colno","javascriptCompiler_V100","startTime","performance","triggerTimeout","startExecution","willStartExecution","workerLibraries","$compilerRegistry","loadLibraries","libraries","compilerRegistry","registerDOMLib","javascriptCompiler_V101","javascriptCompiler_V102","JavascriptCompilers","runPythonWorker","prog","maxRuntime","logCallback","infoCallback","errCallback","finishCallback","replaceAllPoly","pyInp","messageData","pyProg","maxMS","stdOut","pythonCompiler_V100","legacy","spareWorker","runningWorker","pythonCompiler_V101","pythonLegacyCompiler_V101","legacyPython","python3","getWorker","setReady","interpreter","names","withREPL","onStateChange","onLog","onError","sub","incomplete","fatal","pythonCompiler_V102","PythonCompilers","runGLSLWorker","outputData","blocks","filter","hasCode","v100","GLSLCompilers","compilers","loadedURIs","updateMappings","afterLoadFinished","isLoadingLibs","langs","libs","utility","registerSingle","v","registerLibs","compilerInfo","cmps","languageType","oldVersion","newVersion","oldName","newName","loadedName","uri","order","onBuildSandboxEnv","didLoad","sandbox","domLibs","getLibObjects","uris","reduce","concat","domLibraries","whenLoaded","urisForDOMLibs","dlibs","loadURIs","loadCount","u","loadLib","register","Chart","THREE","Phaser","IsometricMapGame","d3","addUpdateMapping","brain","tf","legacyCodeTemplate","prefix","postfix","v101CodeTemplate","v102CodeTemplate","jsErrorParser","columnNumber","stack","Number","$jsErrorParser","sandboxProxies","WeakMap","compileCode","addLoadedToSandbox","create$","getElementById","getElementsByClassName","has","sandboxProxy","Proxy","unscopables","fkt","didInit","_runConfig","queuedMessages","queuedIncomingMessages","init","update","requestsOriginalVersion","dequeueIncoming","pushError","rebuild","lazyInit","addArgumentsTo","cfg","doPostMessageToWorker","onMessage","beforeStart","whenFinished","canvasElement","runner","arunner","run","outputElement","parents","reset","output","processedOutput","initialOutput","parseError","onParseError","staticStyle","addonClass","backgroundColorClass","blockInfo","hasBookmark","panelBlock","onCompilerChange","onCompilerVersionChange","onRunStateChange","onContinousCompileStateChange","onMessagePassingChange","onKeepAliveChange","onPersistentArgumentsChange","onLanguageChange","onCharacterLimitChange","onTimeoutChange","onWorkerLibChange","onDomLibChange","onThemeChange","onOutputParserChange","onTypeChange","onVisibleLinesChange","onPlacementChange","onScriptVersionChange","moveUp","moveDown","removeBlock","onSetAutoReset","onSetGenerateTemplate","themeForBlock","mimeType","activeTagSet","continuousCompile","blockBecameReady","onViewCodeChange","finalOutputObject","eventHub","onPlaygroundChangedOutput","onRunFromPlayground","callback","$$v","$set","showGlobalMessages","stop","addNewBlock","hasREPL","center","domProps","outputHTML","colorClass","bgClass","types","scopedSlots","_u","fn","showTypeInfoDialog","proxy","typeObj","validNumber","hasAltComntent","scriptVersions","scriptVersionObj","shouldAutoReset","shouldGenerateTemplate","canDefinePlacement","width","height","alignments","canMoveUp","canMoveDown","expanded","toggleExpanded","$event","composing","serializedOptions","_t","inBlock","positioninLoadManager","customBlocks","arr","prepareCode","message0","args0","nextStatement","previousStatement","toString","blockly","toolboxInput","toolboxStr","defaultToolbox","toolboxOverride","useOverride","codes","loadFromDatablock","showControls","isTrue","loadCustomBlocks","loadToolbox","loadOverrideToolbox","loadCode","_expanded","blocklyLoader","loaders","blockTag","frank","settingsMenu","PLAYGROUND","TEXT","BLOCKHIDDEN","BLOCKSTATIC","BLOCK","BLOCKLY","REPL","scriptVersion","isNaN","refreshAllCodeMirrors","isLast","objIn","extended","path","nr","filteredCopy","shouldAutoreset","generateTemplate","toArray","cm","QCard","QCardSection","QSelect","QPopupProxy","QInput","QToggle","QSlideTransition","QBanner","QItem","QItemSection","QItemLabel","languageHasCompiler","runCode","canContinousCompile","compiledLanguages","compilerLanguageObj","compilerVersions","compilerVersion","_g","_b","itemProps","itemEvents","isDeprecatedVersion","compilerLanguage","isExperimentalVersion","accepstArguments","showArgsInfoDialog","canPersistentArguments","persistentArguments","showPersistentArgsInfoDialog","messagePassing","showMessagesInfoDialog","showAliveInfoDialog","maxCharacters","outputParsers","outputParser","themes","codeTheme","solutionTheme","domLibrary","workerLibrary","addTag","tagClass","removeTag","addSet","isVisible","isCompleteSet","setVisible","getFullSet","removeSet","onShow","knownTags","_newTagName","previewIndex","sets","flat","ct","odata","RandomizerSetEditor","QList","QAvatar","languages","getCompiler","knownLanguages","versionsForLanguage","cmp","compiler","executionTimeout","vv","workerLibs","solution","continuousCompilation","showInfoDialog","RandomizerSettings","onExpandClick","saveBlock","visibleLinesNow","noContent","codeExpanded","actualAltContent","themeForCodeBlock","getThemeForBlock","_blockErrors","panelWidth","CodeBlock","runCount","emitRun","onCanvasChange","onDidInit","isExpandedAuto","setExpandedAuto","isExpandedLarge","setExpandedLarge","isExpandedTiny","setExpandedTiny","innerPlaygroundContainer","canvas","scopeSelector","whenMounted","isPreparingRun","lastRun","needsCodeRebuild","initAndRebuildErrors","TINY","LARGE","resetBeforeRun","updateErrors","hasErrors","onFinalOutputObject","setExpanded","rebuildCode","reInitCode","onNextTick","invalidate","doInit","can","jStr","originalMode","PlaygroundCanvas","QBtnGroup","canStartREPL","emitStop","_m","sleep","term","echo","welcomeMessage","ps1","ps2","unlock","pause","set_prompt","newline","resume","terminal","greetings","waitReady","Terminal","updatedContentDefered","previewValue","updatedContent","eb","editBox","QField","textUpdateTimer","textUpdateStartTime","newVal","TipTap","formatOutput","didInitialize","sansoutput","didClip","_finalOutputObject","didRunOnce","bookmarkedBlock","triggerRecompileWhenFinished","randomizerActive","nfo","newOutput","format_info","formatedText","format_error","last","nextLine","infoErrorOutput","processed","playgrounds","processMixedOutput","onRunFinished","resetOutput","clearDiagnostics","_args","initArgsForLanguage","runOptions","logInfo","logError","processDiagnostics","success","overrideOutput","returnState","finishedExecution","storeDefaultArgs","clearDefaultArgs","runConfig","blockid","completeSource","ctrlKey","metaKey","preventDefault","onkey","onBookmarkBlock","forceRun","CodeBlockContainer","CodeBlocksSettings","CodePlayground","SimpleText","CodePanel","CodeREPL","QLayout","QPageContainer","blockById","alts","textContent","blockLoader","playgroundLoader","REPLLoader","replaceRandomTagsInString","so","recreateScriptObject","lineCount","newType","oldType","useShadowDOM","shadowRoot","outerHTML","parent","parentElement","rewrap","replaceChild","shadow","attachShadow","each","st","link","cloneNode","inData","dataset","tagName","randomizerPreviewIndex","randomizerKnownTags","randomizerSets","question","cInfo","mapLibrary","blIn","as","toUpperCase","loader","constructBlock","MainBlock","defaultArgs","id1","id2","swap","props","AppEditor","App","instantiateVue","CodeBlocksManager","allCodeBlockParents","cbm","String","search","replacement","pattern","newstr","productionTip","mount","mountInElement","mountCodeBlocks","sprintf","cache","format","parse_tree","argv","arg","pad","pad_character","pad_length","cursor","tree_length","node_type","get_type","fromCharCode","parseInt","toExponential","parseFloat","toFixed","str_repeat","fmt","_fmt","arg_names","field_list","replacement_field","field_match","vsprintf","_argv","variable","multiplier","global","factory","root","jquery","wcwidth","debug","DelayQueue","callbacks","Callbacks","resolved","fire","omap","text_length","Clone","clone_object","tmp","clone_array","array","is_function","clone","localStorage","Map","delete","hasLS","testKey","storage","setItem","removeItem","hasCookies","cookie","isLS","wls","wc","dt","setTime","toGMTString","rls","rc","nn","ca","dls","dc","Storage","remove","debounce","FUNC_ERROR_TEXT","isObject","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","nativeMax","nativeMin","min","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","flush","debounced","isInvoking","jQuery","make_callback_plugin","factory_settings","noop","destroy","trigger","unbind","data_name","$this","handler","fireWith","removeData","jquery_resolve","defer","Deferred","unpromise","catch","done","when","everyTime","interval","times","belay","oneTime","stopTime","guid","powers","timeParse","num","mult","counter","isFunction","constructor","$timers","$timerID","inProgress","setInterval","timers","clearInterval","_fn","lab","navigator","userAgent","one","els","undef","nativeSplit","compliantExecNpcg","separator","limit","separator2","lastLength","flags","ignoreCase","multiline","sticky","lastLastIndex","source","caret","pos","isContentEditable","contentEditable","getSelection","is","focus","range1","getRangeAt","range2","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","selectionStart","selection","createRange","body","createTextRange","moveToElementText","setEndPoint","range","bookmark","duplicate","getBookmark","moveToBookmark","moveStart","collapse","focusNode","setSelectionRange","select","resizer","ResizeObserver","observe","iframe","addClass","appendTo","contentWindow","observer","unobserve","off","touch_scroll","origin","previous","originalEvent","touches","is_fully_in_viewport","is_visible","node","container","box","getBoundingClientRect","viewport","top","bottom","IntersectionObserver","item_observer","entries","isIntersecting","ratio","entity_re","combine_chr_re","astral_symbols_re","emoji_re","mobile_re","tablet_re","format_split_re","format_parts_re","format_re","format_exist_re","format_full_re","format_begin_re","format_start_re","format_end_re","self_closing_re","color_re","url_re","url_nf_re","email_re","url_full_re","email_full_re","command_re","extended_command_re","format_exec_split_re","format_exec_re","float_re","re_re","string_re","unclosed_strings_re","broken_image","use_broken_image","animation_supported","animation","domPrefixes","elm","animationName","agent","is_IE","is_IEMobile","is_ch_unit_supported","div","is_css_variables_supported","CSS","supports","is_android","is_key_native","KeyboardEvent","proto","getOwnPropertyDescriptor","is_browser","is_mobile","check","platform","maxTouchPoints","vendor","opera","ch_unit_bug","isPlainObject","setProperty","getPropertyValue","a11y_hide","attr","role","base","space","abs","excepctions","alert_exception","Exception","exception_message","generate_id","firstPart","random","secondPart","scrollbar_event","left","offset","outerWidth","clientX","fileName","Cycle","rotate","skip","defined","append","front","restart","Boolean","Stack","is_array","pop","WorkerCache","validation","action","onCache","_onCache","_action","_validation","_cache","History","memory","storage_key","new_data","position","old","purge","enable","disable","toggle","OutputLines","_settings","_lines","_snapshot","FormatBuffer","_options","_format_cache","_output_buffer","with_prompt","escape_brackets","string","validate","valid","make_snapshot","snapshot","get_partial","update_snapshot","limit_snapshot","clear_snapshot","get_snapshot","acc","some","is_promise","import","has_newline","last_line","onClear","len","valid_index","cols","lines_to_show","outputLimit","pivot","NEW_LINE","raw","use_cache","useCache","empty","raw_lines","formatted","finalize","clear_cache","is_empty","cmd_index","defaults","mask","caseSensitiveSearch","historySize","history","onPositionChange","onCommandChange","inputStyle","mobileDelete","onPaste","clickTimeout","holdTimeout","holdRepeatTimeout","mobileIngoreAutoSpace","repeatTimeoutKeys","tabindex","tabs","mobile_ignore_key","maybe_data","wrapper","clip","num_chars","char_width","last_rendered_prompt","prompt_last_line","just_prompt_len","cursor_line","$node","autocapitalize","autocorrect","spellcheck","insertAfter","blur","removeAllRanges","before","prompt_len","backup_prompt","last_command","restart_animation","extra_prompt_margin","prompt_node","reverse_search","rev_search_str","reverse_search_position","kill_text","formatted_position","paste_count","line_marker","line_marker_re","empty_marker_re","get_char_pos","closest","prevAll","prevUntil","key_mapping","ie_key_fix","get_key","combo","shiftKey","altKey","keycodes","3","6","8","9","12","13","16","17","18","19","20","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","48","49","50","51","52","53","54","55","56","57","91","93","144","145","181","182","183","186","187","188","189","190","191","192","219","220","221","222","224","225","246","247","248","249","250","251","letter","keymap","reversed_keycodes","which","default_keymap","delete_forward","clipboard","hold","historyFilter","prev_command","no_keydown","commands","draw_prompt","insert","backspace_key","up_arrow","prev_history","down_arrow","next_history","reverse_history_search","draw_reverse_prompt","redraw","right","re","bare_text","return_true","home","paste_event","delete_backward","get_selected_html","text_to_clipboard","substring","isenabled","paste","fix_textarea","first_up_history","have_newlines","have_wrapping","lengths","wrap","simple_split_command_line","split_equal","escape_regex","unescape_brackets","formatting","strip","splitted","diff","left_over","after","$line","ending","next_broken","lastIndexOf","sum","mobile_focus","$clip","fix_cursor","getComputedStyle","_class","position_only","removeClass","new_cursor","insertBefore","animating","blink","toggleClass","clear_reverse_state","save_string","history_data","get_char_width","$prompt","get_num_chars","floor","process_cmd_line","skip_empty","nextUntil","first_len","strlen","cmd_line_worker","_previous_value","_cols","split_command_line","skip_formatted_position","escape_formatting","format_options","unixFormattingEscapeBrackets","apply_formatters","normalize","encoded","encode","charWidth","allowedAttributes","partition","is_multiline","is_emoji_formatting","is_formatting","prev_prompt_data","draw_cursor_line","end_line","cursor_end_line","empty_cursor","before_str","c_before","cursor_len","lines_after","last_ins","lines_before","original_string","from_last","last_len","new_pos","line_index","current_len","strings","redrawError","in_line","find_position","make_guess","opts","search_pos","guess","next_guess","codepoint_len","binary_search","chars","split_characters","format_prompt","have_formatting","format_split","encoded_last_line","crlf","spans","hide","show","fire_change_command","option","stay","removed","silent","new_keymap","original","bare_command","keypress_event","keydown_event","input_event","include_prompt","__set_prompt_margin","user_prompt","should_redraw","relative","display_position","new_formatted_pos","command_len","visible","resize","new_num_chars","invoke_key","shortcut","warn","ctrl","alt","meta","Event","documentElement","new_mask","skip_insert","prev_key","skip_keypress","dead_key","single_key","no_keypress","no_key","backspace","process","hold_pause","is_backspace","is_single","is_delay_key","specials","clear_reverse_search_key","skip_keydown","fake","exception","keydown","clear_hold","is_terminal_selected","keypress","normalized","inArray","chr","skip_input","finalize_input_event","keycode","get_next_character","charCodeAt","was_down","count","$target","is_prompt","down","button","count_selfclosing_formatting","entities","render_entities","_","hex","entity","safe","char_len","make_re_fn","starts_with","make_next_char_fun","tests","match_entity","match_combo","match_emoji","astral_match","normalize_position","char_width_prop","extra_css","bare","wide_characters","specs","spec","make_string","compare_fn","more_args","mid","startContainer","sel","rangeCount","cloneContents","with_selection","ranges","addRange","process_selected_line","$self","hasClass","process_div","process_selected_html","$html","$cmd_lines","support_copy","queryCommandSupported","$textarea","had_focus","writeText","$text","get_textarea_selection","selectionEnd","clear_textarea_selection","common_string","matchCase","string_case","candidate","candidateLower","currentLower","trigger_terminal_change","terminals","onTerminalChange","setBaseAndExtent","setStart","childNodes","process_command","quotes","rest","args_quotes","date","color_names","valid_color","unclosed_strings","special","is_extended_command","each_extended_command","parts","tracking_replace","rex","rep_string","new_string","new_position","last_index","c0","rep_len","iterate_formatting","is_space","is_open_formatting","is_escape_bracket","is_text","not_formatting","opening","next_iteration","char","is_next_space","prev_space","is_last","in_text","space_count","re_ent","braket","start_index","end_index","prev_index","start_formatting","end_formatting","semicolons","amp","keep_words","prev_format","first_index","line_length","last_bracket","can_break","stripped","text_len","new_index","after_index","closed_formatting","matched","sp","nested_formatting","class_i","attrs_i","unique","update_style","new_style","old_style","parse_style","stringify_formatting","stringify_attrs","stringify_class","stringify_styles","ignore","stringify_style","klass","get_inherit_style","update_attrs","new_attrs","classes","__inherit__","test_lengths","formatter","__no_warn__","should_format","have_any","formatters","apply_function_formatter","__meta__","found_position","partials","this_len","length_before","loop","position_partial","partial","linksNoReferrer","linksNoFollow","escape","anyLinks","filter_attr_names","allowed","filters","clean_data","add_attrs","rel_attr","unshift","is_path","with_url_validation","valid_href","valid_src","background","data_text","pre_process_link","pre_process_image","style_str","text_decoration","extra","columns","no_formatting","column_limit","whole","bracket","last_id","parse_argument","strict","parse_string","parse_arguments","split_arguments","parse_command","split_command","parse_options","boolean","single","extended_command","invokeMethods","deferred","change_hash","eval","iterator","replacer","new_formatter","warnings","ids","terminal_ready","get_char_size","rect","visiblity","temp","char_size","get_num_rows","same","same_case","is_object","is_deferred","jrpc","method","params","validJSONRPC","response","isNumeric","ajax","beforeSend","jxhr","jqXHR","content_type","getResponseHeader","contentType","dataType","async","rpc","version_set","copyright","version_string","reg","name_ver","signatures","exit","maskChar","checkArity","exceptionHandler","pauseEvents","softPause","mousewheel","touchscroll","cancelableAjax","processArguments","execAnimation","execAnimationDelay","processRPCResponse","completionEscape","convertLinks","scrollObject","historyState","importHistory","echoCommand","scrollOnEcho","login","unixFormatting","escapeBrackets","ansiParser","ansiArt","onAjaxError","pasteImage","scrollBottomOffset","wordAutocomplete","caseSensitiveAutocomplete","describe","onRPCError","doubleTab","doubleTabEchoCommand","completion","onInit","onBlur","onFocus","onExit","onPush","onPop","renderHandler","onAfterRedraw","onEchoCommand","onFlush","onBeforeCommand","onAfterCommand","onBeforeEcho","onAfterEcho","onBeforeLogin","onAfterLogout","onBeforeLogout","comletionParameters","wrongPasswordTryAgain","wrongPassword","ajaxAbortError","wrongArity","commandNotFound","oneRPCWithIgnore","oneInterpreterFunction","loginFunctionMissing","noTokenError","serverResponse","wrongGreetings","notWhileLogin","loginIsNotAFunction","canExitError","invalidCompletion","invalidSelector","invalidTerminalId","password","recursiveLoop","notAString","invalidStrings","defunctTerminal","requests","save_state","hash_commands","fire_hash_change","first_instance","init_interpreter","StorageHelper","get_processed_command","preprocess_value","Animation","is_node","unmount","prepare_render","replaceWith","get_node","Element","display_object","print_line","url_spec","file","display_json_rpc_error","at","make_basic_json_rpc","auth","display_exception","ajax_error","make_object_interpreter","arity","fallback","user_command","onCommandNotFound","xhr","responseText","make_json_rpc_object","jrpc_success","jrpc_request","jrpc_response","procs","field","interpreter_object","proc","args_len","help","found","make_interpreter","user_intrp","fn_interpreter","rpc_count","recur","interpreters","new_obj","make_json_rpc_login","user","passwd","links","linkify","should_wrap","line_cache","process_extended_commands","line_settings","clear_exec","prev_exec_cmd","process_line","stringify_value","buffer","raw_string","keepWords","scroll","command_line","detached_output","detach","rows","fire_event","limit_lines","$lines","for_remove","show_greetings","signature","echo_command","get_command","have_scrollbar","fill","restore_state","command_idx","import_view","export_view","make_label_error","maybe_update_hash","location","hash","first_command","resume_callbacks","init_state","execHash","before_async_exec","saved_change_hash","after_exec","is_animation_promise","invoke","force_awake","paused","ghost","level","logout","in_login","get_token","set_token","global_logout","clear_loging_storage","global_login_fn","prefix_name","maybe_append_name","interpreter_name","prepare_top_interpreter","login_name","context_callback_proxy","terminal_init_keymap","fun","init_queue","onStart","skip_local","scroll_to_view","scroll_to","it","make_cursor_visible","replace_hash","replaceState","new_hash","hashchange","decodeURIComponent","onPause","was_paused","echo_delay","user_key_down","get_position","set_command","orignal","caseSensitive","before_cursor","complete","word","scroll_to_bottom","key_down","readyState","abort","tab_count","key_press","typed","finish_typing_fn","formattted","get_prompt","char_i","new_prompt","is_bottom","delay","typed_prompt","typed_message","typing","typed_enter","helper","with_typing","else_fn","finalize_fn","when_ready","locals","queue","body_terminal","selector","public_api","terminal_id","scrollTop","user_export","view","ignore_hash","exec_settings","cmd_ready","delayed_commands","autologin","infinite","logins","popUserPass","login_callback","set_mask","pass","cmd_strings","double_quotes","single_quote","prev_string","sensitive","matched_strings","slash","pre","post","to_insert","set_position","reverse","common","set_interpreter","overwrite_interpreter","numChars","numRows","num_rows","geometry","padding","old_width","old_height","history_state","setImmediate","clear_history_state","x","animate","freeze","frozen","enter","get_output","new_num_rows","appending_to_partial","children","last_row","cmd_prompt","cmd_outer","last_row_rect","partial_width","prompt_margin","cmd_cursor","self_offset","e1","e2","remove_line","arg_defined","ansi","$images","img","Image","echo_promise","last_newline","finish","trace","amount","local","local_name","intrp","read","infiniteLogin","push_settings","object_or_name","font_resizer","blur_terminal","focus_terminal","visibility_observer","scroll_marker","is_bottom_observer","mutation_observer","disconnect","$body","removeAttr","defunct","elem","scrollHeight","is_bottom_detected","scroll_height","scroll_top","offsetHeight","copy","get_output_buffer","clear_buffer","command_queue","need_char_size_recalculate","old_enabled","ignoreSystemDescribe","base_interpreter","parseObject","is_type","echo_image","image","data_uri","blob","webkitURL","ignoreEvents","clipboardData","getAsFile","getAsString","getData","elementFromPoint","clientY","onResize","was_ctx_event","$win","move","SENSITIVITY","HOLD_TIME","touch_event","point","y","diff_x","diff_y","click","ignore_elements","mousedown","mouseup","dblclick","event_name","is_context_event","buttons","cmd_offset","cmd_rect","top_limit","pageY","pageX","content_width","diff_h","diff_w","ceil","calculate_char_size","create_resizers","bottom_detect","intersections","intersectionRatio","create_bottom_detect","observe_visibility","was_enabled","visibility_checker","in_dom","MutationObsrv","MutationObserver","WebKitMutationObserver","exec_spec","childList","delta","stopPropagation","onmousewheel","wheelDelta","deltaY","detail","loadLocaleMessages","locales","messages","locale","I18n","$v","fallbackLocale"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-a6f16fe6\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"Customizing/global/plugins/Modules/TestQuestionPool/Questions/assCodeQuestion/codeblocks/0.2.13/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=style&index=0&id=74271390&lang=sass&scoped=true&\"","import Vue from 'vue'\nimport '../styles/blockly.styl' \n\nimport {\n    IBlocklyToolbox,\n    IBlocklyToolboxItem,\n    IBlocklyToolboxCategory,\n    BlockPrimaryColors,\n    KnownBlocklyTypes,\n    BlockArgumentTypes,\n    IBlockDefinition,\n    IBlockLine,\n    IBlockArgument,\n    BlockSecondaryColors,\n    BlockTertiaryColors,\n} from '@/lib/IBlocklyHelper'\nimport { IListItemData } from './ICompilerRegistry'\n\nexport const ColorThemeSelection: IListItemData[] = [\n    { label: 'Colors', value: '{!PrimaryColors.Colour}' },\n    { label: 'Arrays', value: '{!PrimaryColors.List}' },\n    { label: 'Logic', value: '{!PrimaryColors.Logic}' },\n    { label: 'Loops', value: '{!PrimaryColors.Loop}' },\n    { label: 'Math', value: '{!PrimaryColors.Math}' },\n    { label: 'Procedures', value: '{!PrimaryColors.Procedure}' },\n    { label: 'String', value: '{!PrimaryColors.Text}' },\n    { label: 'Variables', value: '{!PrimaryColors.Variable}' },\n    { label: 'Variables (dynamic)', value: '{!PrimaryColors.Variable_dynamic}' },\n]\n\nexport const ColorHues: IListItemData[] = [\n    { label: '0', value: '0' },\n    { label: '15', value: '15' },\n    { label: '30', value: '30' },\n    { label: '45', value: '45' },\n    { label: '60', value: '60' },\n    { label: '75', value: '75' },\n    { label: '90', value: '90' },\n    { label: '105', value: '105' },\n    { label: '120', value: '120' },\n    { label: '135', value: '135' },\n    { label: '150', value: '150' },\n    { label: '165', value: '165' },\n    { label: '180', value: '180' },\n    { label: '195', value: '195' },\n    { label: '210', value: '210' },\n    { label: '225', value: '225' },\n    { label: '240', value: '240' },\n    { label: '255', value: '255' },\n    { label: '270', value: '270' },\n    { label: '285', value: '285' },\n    { label: '300', value: '300' },\n    { label: '315', value: '315' },\n    { label: '330', value: '330' },\n    { label: '345', value: '345' },\n]\n\nexport const PredefinedBlockTypes: IListItemData[] = Object.keys(KnownBlocklyTypes).map((key) => {\n    const ret: IListItemData = {\n        label: Vue.$l(`Blockly.BlockTypeNames.${key}`),\n        value: KnownBlocklyTypes[key],\n    }\n    return ret\n})\n\nexport const ColorSelection: IListItemData[] = [...ColorThemeSelection, ...ColorHues]\n\nexport const ColorSelectionWithNone: IListItemData[] = [\n    { label: 'None', value: '' },\n    ...ColorSelection,\n]\n\nexport const PredefinedArgumentTypes: IListItemData[] = Object.keys(BlockArgumentTypes).map(\n    (key) => {\n        const ret: IListItemData = {\n            label: Vue.$l(`Blockly.ArgumentTypeNames.${key}`),\n            value: key,\n        }\n        return ret\n    }\n)\n\nexport const blockStyles = {\n    colour_blocks: {\n        colourPrimary: BlockPrimaryColors.Colour,\n        colourSecondary: BlockSecondaryColors.Colour,\n        colourTertiary: BlockTertiaryColors.Colour,\n        hat:'cap',\n    },\n    list_blocks: {\n        colourPrimary: BlockPrimaryColors.List,\n        colourSecondary: BlockSecondaryColors.List,\n        colourTertiary: BlockTertiaryColors.List,\n        hat:'cap',\n    },\n    logic_blocks: {\n        colourPrimary: BlockPrimaryColors.Logic,\n        colourSecondary: BlockSecondaryColors.Logic,\n        colourTertiary: BlockTertiaryColors.Logic,\n        hat:'cap',\n    },\n    loop_blocks: {\n        colourPrimary: BlockPrimaryColors.Loop,\n        colourSecondary: BlockSecondaryColors.Loop,\n        colourTertiary: BlockTertiaryColors.Loop,\n        hat:'cap',\n    },\n    math_blocks: {\n        colourPrimary: BlockPrimaryColors.Math,\n        colourSecondary: BlockSecondaryColors.Math,\n        colourTertiary: BlockTertiaryColors.Math,\n        hat:'cap',\n    },\n    procedure_blocks: {\n        colourPrimary: BlockPrimaryColors.Procedure,\n        colourSecondary: BlockSecondaryColors.Procedure,\n        colourTertiary: BlockTertiaryColors.Procedure,\n        hat:'cap',\n    },\n    text_blocks: {\n        colourPrimary: BlockPrimaryColors.Text,\n        colourSecondary: BlockSecondaryColors.Text,\n        colourTertiary: BlockTertiaryColors.Text,\n        hat:'cap',\n    },\n    variable_blocks: {\n        colourPrimary: BlockPrimaryColors.Variable,\n        colourSecondary: BlockSecondaryColors.Variable,\n        colourTertiary: BlockTertiaryColors.Variable,\n        hat:'cap',\n    },\n    variable_dynamic_blocks: {\n        colourPrimary: BlockPrimaryColors.Variable_dynamic,\n        colourSecondary: BlockSecondaryColors.Variable_dynamic,\n        colourTertiary: BlockTertiaryColors.Variable_dynamic,\n        hat:'cap',\n    },\n    hat_blocks: {\n        colourPrimary: '330',\n        colourSecondary: '330',\n        colourTertiary: '330',\n        hat: 'cap',\n    },\n}\n\nexport const categoryStyles = {\n    colour_category: { colour: blockStyles.colour_blocks.colourPrimary },\n    list_category: { colour: blockStyles.list_blocks.colourPrimary },\n    logic_category: { colour: blockStyles.logic_blocks.colourPrimary },\n    loop_category: { colour: blockStyles.loop_blocks.colourPrimary },\n    math_category: { colour: blockStyles.math_blocks.colourPrimary },\n    procedure_category: { colour: blockStyles.procedure_blocks.colourPrimary },\n    text_category: { colour: blockStyles.text_blocks.colourPrimary },\n    variable_category: { colour: blockStyles.variable_blocks.colourPrimary },\n    variable_dynamic_category: {\n        colour: blockStyles.variable_dynamic_blocks.colourPrimary,\n    },\n}\n\n//export const theme = new Blockly.Theme('CodeBlocks', blockStyles as any, categoryStyles)\n\nexport class BlocklyHelper {\n    \n    public toArgumentDescription(a: BlockArgumentTypes) {\n        const n = Vue.$l(`Blockly.ArgumentTypeNames.${a}`)\n        return n ? `${n} (${a})` : a\n    }\n    private serializeToolboxItem(i: IBlocklyToolboxItem): string {\n        return `<block type=\"${i.type}\"></block>`\n    }\n    private serializeToolboxItems(items: IBlocklyToolboxItem[]): string {\n        return items.map((item) => this.serializeToolboxItem(item)).join('\\n')\n    }\n    private serializeToolboxCategory(i: IBlocklyToolboxCategory): string {\n        let res = `<category name=\"${i.name}\"`\n        if (i.color && i.color != '') {\n            res += ` colour=\"${i.color}\"`\n        }\n        if (i.custom && i.custom != '') {\n            res += ` custom=\"${i.custom}\"`\n        }\n        res += `>${this.serializeToolboxItems(i.items)}</category>`\n        return res\n    }\n    private serializeToolboxCategories(items: IBlocklyToolboxCategory[]): string {\n        return items.map((item) => this.serializeToolboxCategory(item)).join('\\n')\n    }\n\n    public serializeToolbox(toolbox: IBlocklyToolbox): string {\n        const catCount = toolbox.categories.length\n        if (toolbox.categories && catCount > 1) {\n            return `${this.serializeToolboxCategories(toolbox.categories)}`\n        } else if (catCount === 1) {\n            const cat = toolbox.categories[0]\n            if (cat.color === undefined || cat.color == '' || cat.name == '') {\n                return '' + this.serializeToolboxItems(cat.items)\n            } else {\n                return '' + this.serializeToolboxCategories(toolbox.categories)\n            }\n        } else {\n            return ''\n        }\n    }\n\n    public getBlockDescription(bl: IBlockDefinition): object {\n        const cp = { ...bl.JSON }\n        cp.colour = this.toHTMLColor(cp.colour)\n        return cp\n    }\n\n    public serializeCustomBlock(bl: IBlockDefinition): string {\n        return JSON.stringify(this.getBlockDescription(bl))\n    }\n\n    public serializeCustomBlocks(bls: IBlockDefinition[]): string {\n        return JSON.stringify(bls.map((bl) => this.getBlockDescription(bl)))\n    }\n\n    get codeUndefines(): string {\n        return 'const window = undefined; const Window = undefined; const document = undefined;const $ = undefined;const _ = undefined;'\n    }\n\n    public removeSelfClosingTags(xml: string): string {\n        //console.log(xml, '\\n', xml.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>'))\n        return xml.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>')\n    }\n\n    public prepareCode(cc: string): string {\n        return `\"use strict\"; ${this.codeUndefines} return function(){ return {o: ${cc}}.o}.call({})`\n    }\n\n    public prepareBlocklyCode(cc: string): string {\n        return `var Blockly = B;${this.codeUndefines}return { o:function(block) { ${cc} }}.o`\n    }\n\n    public compile(bl: IBlockDefinition, Blockly: any): any | undefined {\n        const cc = this.prepareBlocklyCode(bl.codeString)\n        bl._code = undefined\n        try {\n            //console.log(cc, Blockly)\n            const code = new Function('B', cc)\n            bl._code = code(Blockly)\n        } catch (e) {\n            bl._code = undefined\n            console.error('Error Compiling', cc, e)\n            return e + ''\n        }\n        return undefined\n    }\n\n    public itemForValue(items: IListItemData[], value: string): IListItemData {\n        return Vue.$CodeBlock.itemForValue(items, value)\n    }\n\n    public toColorCode(color: string): string | undefined {\n        if (color === '') {\n            return undefined\n        }\n        return color\n    }\n\n    public toColor(color: string | undefined): string {\n        if (color === undefined) {\n            return ''\n        }\n        Object.keys(BlockPrimaryColors).forEach((key) => {\n            if (color == `{!PrimaryColors.${key}}`) {\n                color = BlockPrimaryColors[key]\n            }\n        })\n        return color\n    }\n\n    public toHTMLColor(color: string | undefined): string {\n        const cl = this.toColor(color)\n        if (cl.length > 0 && cl[0] != '#' && cl[0] != 'h' && cl[0] != 'r') {\n            return `hsl(${cl}, 100%, 50%)`\n        }\n        return cl\n    }\n\n    mounted() {}\n}\n\nexport const blocklyHelper = new BlocklyHelper()\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=style&index=0&id=0bd2a5d9&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=style&index=0&id=140fcf80&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=style&index=0&lang=sass&\"","var map = {\n\t\"./de.json\": \"6ce2\",\n\t\"./en.json\": \"edd4\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"49f8\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=style&index=0&id=8b99c0d6&lang=stylus&scoped=true&\"","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n    if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n      mod(require(\"codemirror\"));\n    else if (typeof define == \"function\" && define.amd) // AMD\n      define([\"codemirror\"], mod);\n    else // Plain browser env\n      mod(CodeMirror);\n  })(function(CodeMirror) {\n  \"use strict\";\n  \n  CodeMirror.defineMode(\"clike\", function(config, parserConfig) {\n    var indentUnit = config.indentUnit,\n        statementIndentUnit = parserConfig.statementIndentUnit || indentUnit,\n        dontAlignCalls = parserConfig.dontAlignCalls,\n        keywords = parserConfig.keywords || {},\n        builtin = parserConfig.builtin || {},\n        blockKeywords = parserConfig.blockKeywords || {},\n        atoms = parserConfig.atoms || {},\n        hooks = parserConfig.hooks || {},\n        multiLineStrings = parserConfig.multiLineStrings,\n        indentStatements = parserConfig.indentStatements !== false;\n    var isOperatorChar = /[+\\-*&%=<>!?|\\/]/;\n  \n    var curPunc;\n  \n    function tokenBase(stream, state) {\n      var ch = stream.next();\n      if (hooks[ch]) {\n        var result = hooks[ch](stream, state);\n        if (result !== false) return result;\n      }\n      if (ch == '\"' || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      }\n      if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n        curPunc = ch;\n        return null;\n      }\n      if (/\\d/.test(ch)) {\n        stream.eatWhile(/[\\w\\.]/);\n        return \"number\";\n      }\n      if (ch == \"/\") {\n        if (stream.eat(\"*\")) {\n          state.tokenize = tokenComment;\n          return tokenComment(stream, state);\n        }\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return \"comment\";\n        }\n      }\n      if (isOperatorChar.test(ch)) {\n        stream.eatWhile(isOperatorChar);\n        return \"operator\";\n      }\n      stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n      var cur = stream.current();\n      if (keywords.propertyIsEnumerable(cur)) {\n        if (blockKeywords.propertyIsEnumerable(cur)) curPunc = \"newstatement\";\n        return \"keyword\";\n      }\n      if (builtin.propertyIsEnumerable(cur)) {\n        if (blockKeywords.propertyIsEnumerable(cur)) curPunc = \"newstatement\";\n        return \"builtin\";\n      }\n      if (atoms.propertyIsEnumerable(cur)) return \"atom\";\n      return \"variable\";\n    }\n  \n    function tokenString(quote) {\n      return function(stream, state) {\n        var escaped = false, next, end = false;\n        while ((next = stream.next()) != null) {\n          if (next == quote && !escaped) {end = true; break;}\n          escaped = !escaped && next == \"\\\\\";\n        }\n        if (end || !(escaped || multiLineStrings))\n          state.tokenize = null;\n        return \"string\";\n      };\n    }\n  \n    function tokenComment(stream, state) {\n      var maybeEnd = false, ch;\n      while (ch = stream.next()) {\n        if (ch == \"/\" && maybeEnd) {\n          state.tokenize = null;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return \"comment\";\n    }\n  \n    function Context(indented, column, type, align, prev) {\n      this.indented = indented;\n      this.column = column;\n      this.type = type;\n      this.align = align;\n      this.prev = prev;\n    }\n    function pushContext(state, col, type) {\n      var indent = state.indented;\n      if (state.context && state.context.type == \"statement\")\n        indent = state.context.indented;\n      return state.context = new Context(indent, col, type, null, state.context);\n    }\n    function popContext(state) {\n      var t = state.context.type;\n      if (t == \")\" || t == \"]\" || t == \"}\")\n        state.indented = state.context.indented;\n      return state.context = state.context.prev;\n    }\n  \n    // Interface\n  \n    return {\n      startState: function(basecolumn) {\n        return {\n          tokenize: null,\n          context: new Context((basecolumn || 0) - indentUnit, 0, \"top\", false),\n          indented: 0,\n          startOfLine: true\n        };\n      },\n  \n      token: function(stream, state) {\n        var ctx = state.context;\n        if (stream.sol()) {\n          if (ctx.align == null) ctx.align = false;\n          state.indented = stream.indentation();\n          state.startOfLine = true;\n        }\n        if (stream.eatSpace()) return null;\n        curPunc = null;\n        var style = (state.tokenize || tokenBase)(stream, state);\n        if (style == \"comment\" || style == \"meta\") return style;\n        if (ctx.align == null) ctx.align = true;\n  \n        if ((curPunc == \";\" || curPunc == \":\" || curPunc == \",\") && ctx.type == \"statement\") popContext(state);\n        else if (curPunc == \"{\") pushContext(state, stream.column(), \"}\");\n        else if (curPunc == \"[\") pushContext(state, stream.column(), \"]\");\n        else if (curPunc == \"(\") pushContext(state, stream.column(), \")\");\n        else if (curPunc == \"}\") {\n          while (ctx.type == \"statement\") ctx = popContext(state);\n          if (ctx.type == \"}\") ctx = popContext(state);\n          while (ctx.type == \"statement\") ctx = popContext(state);\n        }\n        else if (curPunc == ctx.type) popContext(state);\n        else if (indentStatements &&\n                 (((ctx.type == \"}\" || ctx.type == \"top\") && curPunc != ';') ||\n                  (ctx.type == \"statement\" && curPunc == \"newstatement\")))\n          pushContext(state, stream.column(), \"statement\");\n        state.startOfLine = false;\n        return style;\n      },\n  \n      indent: function(state, textAfter) {\n        if (state.tokenize != tokenBase && state.tokenize != null) return CodeMirror.Pass;\n        var ctx = state.context, firstChar = textAfter && textAfter.charAt(0);\n        if (ctx.type == \"statement\" && firstChar == \"}\") ctx = ctx.prev;\n        var closing = firstChar == ctx.type;\n        if (ctx.type == \"statement\") return ctx.indented + (firstChar == \"{\" ? 0 : statementIndentUnit);\n        else if (ctx.align && (!dontAlignCalls || ctx.type != \")\")) return ctx.column + (closing ? 0 : 1);\n        else if (ctx.type == \")\" && !closing) return ctx.indented + statementIndentUnit;\n        else return ctx.indented + (closing ? 0 : indentUnit);\n      },\n  \n      electricChars: \"{}\",\n      blockCommentStart: \"/*\",\n      blockCommentEnd: \"*/\",\n      lineComment: \"//\",\n      fold: \"brace\"\n    };\n  });\n  \n    function words(str) {\n      var obj = {}, words = str.split(\" \");\n      for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n      return obj;\n    }\n    var cKeywords = \"auto if break int case long char register continue return default short do sizeof \" +\n      \"double static else struct entry switch extern typedef float union for unsigned \" +\n      \"goto while enum void const signed volatile\";\n  \n    function cppHook(stream, state) {\n      if (!state.startOfLine) return false;\n      for (;;) {\n        if (stream.skipTo(\"\\\\\")) {\n          stream.next();\n          if (stream.eol()) {\n            state.tokenize = cppHook;\n            break;\n          }\n        } else {\n          stream.skipToEnd();\n          state.tokenize = null;\n          break;\n        }\n      }\n      return \"meta\";\n    }\n  \n    function cpp11StringHook(stream, state) {\n      stream.backUp(1);\n      // Raw strings.\n      if (stream.match(/(R|u8R|uR|UR|LR)/)) {\n        var match = stream.match(/\"([^\\s\\\\()]{0,16})\\(/);\n        if (!match) {\n          return false;\n        }\n        state.cpp11RawStringDelim = match[1];\n        state.tokenize = tokenRawString;\n        return tokenRawString(stream, state);\n      }\n      // Unicode strings/chars.\n      if (stream.match(/(u8|u|U|L)/)) {\n        if (stream.match(/[\"']/, /* eat */ false)) {\n          return \"string\";\n        }\n        return false;\n      }\n      // Ignore this hook.\n      stream.next();\n      return false;\n    }\n  \n    // C#-style strings where \"\" escapes a quote.\n    function tokenAtString(stream, state) {\n      var next;\n      while ((next = stream.next()) != null) {\n        if (next == '\"' && !stream.eat('\"')) {\n          state.tokenize = null;\n          break;\n        }\n      }\n      return \"string\";\n    }\n  \n    // C++11 raw string literal is <prefix>\"<delim>( anything )<delim>\", where\n    // <delim> can be a string up to 16 characters long.\n    function tokenRawString(stream, state) {\n      // Escape characters that have special regex meanings.\n      var delim = state.cpp11RawStringDelim.replace(/[^\\w\\s]/g, '\\\\$&');\n      var match = stream.match(new RegExp(\".*?\\\\)\" + delim + '\"'));\n      if (match)\n        state.tokenize = null;\n      else\n        stream.skipToEnd();\n      return \"string\";\n    }\n  \n    function def(mimes, mode) {\n      if (typeof mimes == \"string\") mimes = [mimes];\n      var words = [];\n      function add(obj) {\n        if (obj) for (var prop in obj) if (obj.hasOwnProperty(prop))\n          words.push(prop);\n      }\n      add(mode.keywords);\n      add(mode.builtin);\n      add(mode.atoms);\n      if (words.length) {\n        mode.helperType = mimes[0];\n        CodeMirror.registerHelper(\"hintWords\", mimes[0], words);\n      }\n  \n      for (var i = 0; i < mimes.length; ++i)\n        CodeMirror.defineMIME(mimes[i], mode);\n    }\n  \n    def([\"x-shader/x-vertex\", \"x-shader/x-fragment\", \"text/x-glsl\"], {\n      name: \"clike\",\n      keywords: words(\"float int bool void \" +\n                      \"vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 \" +\n                      \"mat2 mat3 mat4 \" +\n                      \"sampler2D sampler3D samplerCube \" +\n                      \"const attribute uniform varying \" +\n                      \"break continue discard return \" +\n                      \"for while do if else struct \" +\n                      \"in out inout\"),\n      blockKeywords: words(\"for while do if else struct\"),\n      builtin: words(\"radians degrees sin cos tan asin acos atan \" +\n                      \"pow exp log exp2 sqrt inversesqrt \" +\n                      \"abs sign floor ceil fract mod min max clamp mix step smoothstep \" +\n                      \"length distance dot cross normalize faceforward \" +\n                      \"reflect refract matrixCompMult \" +\n                      \"lessThan lessThanEqual greaterThan greaterThanEqual \" +\n                      \"equal notEqual any all not \" +\n                      \"texture2D texture2DLod texture2DProjLod \" +\n                      \"textureCube textureCubeLod \"),\n      atoms: words(\"true false \" +\n                  \"gl_FragColor \" +\n                  \"gl_PointCoord \" +\n                  \"gl_Position gl_PointSize \" +\n                  \"gl_FragCoord gl_FrontFacing \" +\n                  \"gl_FragData \" +\n                  \"gl_DepthRangeParameters \" +\n                  \"gl_MaxVertexAttribs gl_MaxVaryingVectors gl_MaxVertexUniformVectors\" +\n                  \"gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits \" +\n                  \"gl_MaxFragmentUniformVectors \" +\n                  \"gl_MaxDrawBuffers\"),\n      hooks: {\"#\": cppHook},\n      modeProps: {fold: [\"brace\", \"include\"]}\n    });\n  \n  });","export type finishedCallbackSignatur = (\n    success: boolean,\n    overrideOutput?: any,\n    returnState?: any\n) => void\n\nexport interface IListItemData {\n    readonly label: string\n    readonly value: string\n}\n\nexport enum ErrorSeverity {\n    Error = 2,\n    Warning = 1,\n}\nexport interface IErrorPosition {\n    line: number\n    column: number\n}\nexport interface ICompilerErrorDescription {\n    start: IErrorPosition\n    end: IErrorPosition\n    message: string\n    severity: ErrorSeverity\n}\n\nexport interface IDomLibraray {\n    key: string\n    uri: string[]\n    name: string\n    version: string\n    displayName: string\n    didLoad: boolean\n    utility: boolean\n    order: number\n    onBuildSandboxEnv: (sandbox: any) => void\n}\n\nexport interface ICompilerHashMap {\n    [lang: string]: ICompilerInfo\n}\n\nexport interface IUpdateMappingMap {\n    [old: string]: string\n}\n\nexport interface ICompilerState {\n    hideGlobalState(): void\n    setAllRunButtons(what: boolean): void\n    displayGlobalState(message: string | null): void\n\n    readonly globalStateHidden: boolean\n    readonly globalStateMessage: string\n    readonly runButtonForceHide: boolean\n}\n\nexport interface ICompilerRegistry {\n    readonly languages: IListItemData[]\n    readonly domLibraries: IListItemData[]\n\n    register(compilers: ICompilerInfo[] | ICompilerInfo): void\n\n    registerSingle(c: ICompilerInfo): void\n    getCompiler(compilerInfo: ICompilerIDQuery): ICompilerInstance | undefined\n\n    versionsForLanguage(languageType: string): string[] | ['none']\n\n    registerDOMLib(\n        uri: string[],\n        name: string,\n        version: string,\n        displayName: string,\n        utility?: boolean,\n        order?: number\n    ): void\n\n    getLibObjects(domLibs: string[]): IDomLibraray[]\n    urisForDOMLibs(domLibs: string[]): string[]\n    loadLibraries(domLibraries: string[], whenLoaded: () => void): void\n}\n\nexport interface ICompileAndRunArguments {\n    max_ms: number\n    log_callback: (txt: string) => void\n    info_callback: (txt: string) => void\n    err_callback: (txt: string) => void\n    compileFailedCallback: (info: ICompilerErrorDescription) => void\n    finishedExecutionCB: finishedCallbackSignatur\n    args: object\n    didReceiveMessage: (cmd: string, data: any) => void\n    postMessageFunction: null | ((cmd: string, data: any) => void)\n    dequeuePostponedMessages: () => void\n    beforeStartHandler: () => void\n    whenFinishedHandler(args: string[] | object): void\n    allowMessagePassing: boolean\n    keepAlive: boolean\n    withREPL: boolean\n    resultData: Object | any[] | undefined\n}\n\nexport interface IReplInstance {\n    interpreter(\n        command: string,\n        onStateChange: (incomplete) => void,\n        onLog: (msg) => void,\n        onError: (msg) => void\n    ): Promise<object>\n}\nexport interface ICompilerInstance {\n    readonly version: string\n    readonly language: string\n    readonly canRun: boolean\n    readonly canStop: boolean\n    readonly allowsMessagePassing: boolean\n    readonly allowsREPL: boolean\n    readonly allowsContinousCompilation: boolean\n    readonly allowsPersistentArguments: boolean\n    readonly acceptsJSONArgument: boolean\n    readonly experimental: boolean\n    readonly deprecated: boolean\n    isReady: boolean\n    isRunning: boolean\n    readonly libraries?: ICompilerLibraryInfo[]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void\n    preload(): void\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate?: boolean\n    ): void\n    stop?(): void\n}\n\nexport interface ICompilerLibraryInfo {\n    readonly key: string\n    readonly name: string\n    readonly version: string\n    readonly displayName: string\n}\n\nexport interface ICompilerInfo {\n    readonly type: string\n    readonly displayName: string\n    readonly versions: ICompilerInstance[]\n    readonly default: ICompilerInstance\n}\n\nexport interface ICompilerID {\n    languageType: string\n    version: string\n}\n\nexport interface ICompilerIDQuery {\n    languageType: string\n    version?: string\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=style&index=0&lang=sass&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblock block-\" + _vm.typeName)},[_c('CodeBlockButton',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showBookmarkButton),expression:\"showBookmarkButton\"}],attrs:{\"block\":_vm.block,\"isBookmarkPanel\":_vm.isBookmarkPanel}}),_c('codemirror',{ref:\"codeBox\",class:(\"accqstXmlInput noRTEditor codebox \" + _vm.boxClass),attrs:{\"value\":_vm.code,\"options\":_vm.options,\"name\":(_vm.namePrefix + \"block[\" + (_vm.block.parentID) + \"][\" + (_vm.block.id) + \"]\"),\"id\":(\"teQ\" + (_vm.block.parentID) + \"B\" + (_vm.block.id)),\"data-question\":_vm.block.parentID,\"events\":['keyup']},on:{\"ready\":_vm.onCodeReady,\"focus\":_vm.onCodeFocus,\"input\":_vm.onCodeChangeDefered,\"input-read\":_vm.onCodeKeyHandle,\"keyup\":_vm.onCodeKeyHandle}}),(_vm.editMode)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlternativeContent),expression:\"hasAlternativeContent\"}]},[_c('div',{staticClass:\"q-mt-lg text-subtitle2\"},[_vm._v(_vm._s(_vm.$t('CodeBlock.Initial_Content')))]),_c('codemirror',{ref:\"altBox\",class:(\"accqstXmlInput noRTEditor \" + _vm.boxClass),attrs:{\"value\":_vm.altCode,\"options\":_vm.altOptions,\"name\":(_vm.namePrefix + \"alt_block[\" + (_vm.block.parentID) + \"][\" + (_vm.block.id) + \"]\")},on:{\"ready\":_vm.onAltCodeReady,\"focus\":_vm.onAltCodeFocus,\"input\":_vm.onAltCodeChangeDefered}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-icon',{class:(\"mdi \" + _vm.severityClass + \" mainTipIcon\"),attrs:{\"name\":_vm.severityIcon}},[_c('q-tooltip',[_c('div',[_c('ul',{staticClass:\"tiplist\"},_vm._l((_vm.errors),function(error){return _c('li',{key:error.message},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-1\"},[_c('q-icon',{attrs:{\"name\":_vm.iconForSeverity(error.severity)}})],1),_c('div',{staticClass:\"col-11 q-pr-md\"},[_c('div',{staticClass:\"q-my-none tipper\"},[_vm._v(_vm._s(error.message))])])])])}),0)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { ErrorSeverity, ICompilerErrorDescription } from '@/lib/ICompilerRegistry'\n\n@Component\nexport default class ErrorTip extends Vue {\n    @Prop() errors!: ICompilerErrorDescription\n    @Prop() severity!: ErrorSeverity\n\n    get severityClass(): string {\n        return this.classForSeverity(this.severity)\n    }\n    get severityIcon(): string {\n        return this.iconForSeverity(this.severity)\n    }\n\n    classForSeverity(s: ErrorSeverity): string {\n        if (s == ErrorSeverity.Error) {\n            return 'gutter-error'\n        }\n        return 'gutter-warning'\n    }\n    iconForSeverity(s: ErrorSeverity): string {\n        if (s == ErrorSeverity.Error) {\n            return 'report'\n        }\n        return 'warning'\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ErrorTip.vue?vue&type=template&id=67eb593e&\"\nimport script from \"./ErrorTip.vue?vue&type=script&lang=ts&\"\nexport * from \"./ErrorTip.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ErrorTip.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QIcon,QTooltip});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"floatingButton\"},[_c('q-btn',{attrs:{\"color\":_vm.color,\"text-color\":\"black\",\"icon\":_vm.iconName,\"round\":\"\",\"size\":\"xs\"},on:{\"click\":_vm.onClick}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Emit } from 'vue-property-decorator'\nimport { BlockData, IBlockBookmarkPayload } from '@/lib/codeBlocksManager'\n\n@Component\nexport default class CodeBlockButton extends Vue {\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ default: false }) isBookmarkPanel!: boolean\n\n    get color(): string {\n        return this.isBookmarkPanel ? 'red-4' : 'amber'\n    }\n\n    get iconName(): string {\n        if (this.isBookmarkPanel) {\n            return 'close'\n        }\n        return this.bookmarked ? 'bookmark' : 'bookmark_border'\n    }\n\n    bookmarked: boolean = false\n    bookmarkMe() {\n        const data: IBlockBookmarkPayload = {\n            uuid: this.block.appSettings.uuid,\n            block: this.isBookmarkPanel ? null : this.block\n        }\n        Vue.$GlobalEventHub.$emit('bookmark-block', data)\n    }\n    onClick() {\n        this.bookmarkMe()\n    }\n\n    onBookmark(data: IBlockBookmarkPayload) {\n        this.bookmarked =\n            data.block === null || this.block === null ? false : this.block.uuid === data.block.uuid\n    }\n\n    mounted() {\n        Vue.$GlobalEventHub.$on('bookmark-block', this.onBookmark)\n    }\n\n    beforeDestroy() {\n        Vue.$GlobalEventHub.$off('bookmark-block')\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlockButton.vue?vue&type=template&id=0bd2a5d9&scoped=true&\"\nimport script from \"./CodeBlockButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlockButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlockButton.vue?vue&type=style&index=0&id=0bd2a5d9&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bd2a5d9\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport ErrorTip from './ErrorTip.vue'\nimport BaseBlock from './BaseBlock.vue'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { ICompilerErrorDescription } from '@/lib/ICompilerRegistry'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { ITagReplaceAction } from '@/plugins/tagger'\n\nimport codemirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\n//themes\nimport 'codemirror/theme/solarized.css'\nimport 'codemirror/theme/base16-dark.css'\nimport 'codemirror/theme/base16-light.css'\nimport 'codemirror/theme/duotone-dark.css'\nimport 'codemirror/theme/duotone-light.css'\nimport 'codemirror/theme/xq-dark.css'\nimport 'codemirror/theme/xq-light.css'\nimport 'codemirror/theme/blackboard.css'\nimport 'codemirror/theme/midnight.css'\nimport 'codemirror/theme/neo.css'\nimport 'codemirror/theme/mbo.css'\nimport 'codemirror/theme/mdn-like.css'\n\n//languages\nimport 'codemirror/mode/clike/clike.js'\nimport 'codemirror/mode/fortran/fortran.js'\nimport 'codemirror/mode/javascript/javascript.js'\nimport 'codemirror/mode/perl/perl.js'\nimport 'codemirror/mode/python/python.js'\nimport 'codemirror/mode/r/r.js'\nimport 'codemirror/mode/ruby/ruby.js'\nimport '@/lib/glsl/glsl'\n\n//plugins\nimport 'codemirror/addon/edit/closebrackets.js'\n\n//helper to create tooltips at runtime\nimport CodeBlockButton from '@/components/CodeBlockButton.vue'\nconst ErrorTipCtor = Vue.extend(ErrorTip)\n\n@Component({ components: { CodeBlockButton } })\nexport default class CodeBlock extends BaseBlock {\n    @Prop({ default: '' }) namePrefix!: string\n    @Prop({ default: false }) emitWhenTypingInViewMode!: boolean\n    @Prop({ default: true }) canBookmark!: boolean\n    @Prop({ default: false }) isBookmarkPanel!: boolean\n    @Prop({ default: false }) readonly!: boolean\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: number | 'auto'\n    @Prop({ default: 'base16-dark' }) theme!: string\n    @Prop({ default: 'text/javascript' }) mode!: string\n    @Prop({ default: undefined }) tagSet!: IRandomizerSet\n    @Prop({\n        required: true,\n        validator: function(b) {\n            if (b === null || b.content === undefined) {\n                return false\n            }\n            if (b.firstLine === undefined) {\n                return false\n            }\n            return true\n        }\n    })\n    block!: BlockData\n\n    get showBookmarkButton(): boolean {\n        return this.canBookmark && this.editMode\n    }\n\n    clearTagMarkers() {\n        if (this.codemirror === undefined) {\n            return\n        }\n\n        let allMarks = this.codemirror.getDoc().getAllMarks()\n        allMarks.forEach(e => {\n            if (\n                e.className == Vue.$tagger.className.rnd ||\n                e.className == Vue.$tagger.className.templ\n            ) {\n                e.clear()\n            }\n        })\n\n        if (this.altcodemirror) {\n            allMarks = this.altcodemirror.getDoc().getAllMarks()\n            allMarks.forEach(e => {\n                if (\n                    e.className == Vue.$tagger.className.rnd ||\n                    e.className == Vue.$tagger.className.templ\n                ) {\n                    e.clear()\n                }\n            })\n        }\n    }\n    clearErrorDisplay() {\n        if (this.codemirror === undefined) {\n            return\n        }\n        let allMarks = this.codemirror.getDoc().getAllMarks()\n        //console.log(\"marks\", this.block.type, allMarks)\n        allMarks.forEach(e => {\n            if (e.className == 'red-wave') {\n                e.clear()\n            }\n        })\n\n        this.codemirror.getDoc().clearGutter('diagnostics')\n    }\n    onCodeReady(editor) {\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        if (\n            this.codemirror &&\n            this.codemirror.display &&\n            this.codemirror.display.input &&\n            this.codemirror.display.input.textarea\n        ) {\n            this.codemirror.display.input.textarea.className = 'noRTEditor'\n        }\n        this.codeBox!.$el.querySelectorAll('textarea[name]').forEach(el => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n            el.id = this.codeBox!.$el.id\n\n            $(el).text(this.block.content)\n            el.setAttribute('data-question', `${this.block.parentID}`)\n            el.setAttribute('data-blocktype', `${this.iliasTypeNr}`)\n            if (this.editMode) {\n                el.setAttribute('is-editmode', `${this.editMode}`)\n            }\n        })\n        this.updateDiagnosticDisplay()\n        this.onCodeChange(this.block.content)\n\n        this.whenBlockIsReady()\n    }\n    onAltCodeReady(editor) {\n        console.d('READY')\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        if (\n            this.altcodemirror &&\n            this.altcodemirror.display &&\n            this.altcodemirror.display.input &&\n            this.altcodemirror.display.input.textarea\n        ) {\n            this.altcodemirror.display.input.textarea.className = 'noRTEditor'\n        }\n        this.altBox!.$el.querySelectorAll('textarea[name]').forEach(el => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n        })\n        this.$nextTick(() => {\n            this.onAltCodeChange(this.block.alternativeContent)\n            this.updateTagDisplay()\n            this.updateHeight()\n        })\n    }\n    onCodeFocus(editor) {}\n    onAltCodeFocus(editor) {}\n\n    codeUpdateTimer: number | null = null\n    codeUpdateStartTime: number = 0\n    onCodeChangeDefered(newCode) {\n        if (!this.editMode) {\n            this.onCodeChange(newCode)\n            return\n        }\n\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.codeUpdateTimer !== null) {\n            clearTimeout(this.codeUpdateTimer)\n            this.codeUpdateTimer = null\n        } else {\n            this.codeUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.codeUpdateTimer = null\n            this.onCodeChange(newCode)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.codeUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.codeUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n\n    continuousCodeUpdateTimer: number | null = null\n    onCodeChange(newCode) {\n        //update line numbers manually (changing in options takes too long)\n        this.block.lineCountHint = this.codemirror.doc.size\n        this.codemirror.options.firstLineNumber = this.block.firstLine\n\n        //copy the content to the actual textbox processed by StudON\n        const tb = this.codeBox.$el.querySelector('textarea[name]') as HTMLTextAreaElement\n        tb.value = newCode\n\n        //copy code to the block structure\n        this.block.content = newCode\n\n        //find all tags\n        this.updateTagDisplay()\n\n        //send out the event for processing\n        if (this.editMode) {\n            this.$emit('code-changed-in-edit-mode', undefined)\n        } else if (this.emitWhenTypingInViewMode) {\n            if (this.continuousCodeUpdateTimer !== null) {\n                clearTimeout(this.continuousCodeUpdateTimer)\n                this.continuousCodeUpdateTimer = null\n            }\n            this.continuousCodeUpdateTimer = setTimeout(() => {\n                this.$emit('code-changed-in-view-mode', undefined)\n            }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n        }\n    }\n\n    codeNeedsTagUpdate: boolean = true\n    didAddText(t: string): void {\n        //console.log('    ', t)\n        if (\n            t.indexOf('!') >= 0 ||\n            t.indexOf('+') >= 0 ||\n            t.indexOf('{') >= 0 ||\n            t.indexOf('{') >= 0 ||\n            t.indexOf('\\n') >= 0\n        ) {\n            this.codeNeedsTagUpdate = true\n        }\n    }\n    onCodeKeyHandle(e) {\n        //console.log('IR', e, arguments)\n        if (arguments.length > 1 && arguments[1] !== undefined) {\n            if (arguments[1].text !== undefined) {\n                arguments[1].text.forEach(t => {\n                    this.didAddText(t)\n                })\n            } else if (arguments[1].key !== undefined) {\n                if (arguments[1].keyCode == 13) {\n                    this.didAddText('\\n')\n                } else {\n                    this.didAddText(arguments[1].key)\n                }\n            }\n        }\n    }\n\n    altCodeUpdateTimer: number | null = null\n    altCodeUpdateStartTime: number = 0\n    onAltCodeChangeDefered(newCode) {\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.altCodeUpdateTimer !== null) {\n            clearTimeout(this.altCodeUpdateTimer)\n            this.altCodeUpdateTimer = null\n        } else {\n            this.altCodeUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.altCodeUpdateTimer = null\n            this.onAltCodeChange(newCode)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.altCodeUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.altCodeUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n    onAltCodeChange(newCode) {\n        if (this.altBox !== undefined) {\n            const tb = this.altBox.$el.querySelector('textarea[name]') as HTMLTextAreaElement\n            tb.value = newCode\n        }\n\n        this.block.alternativeContent = newCode\n        this.updateTagDisplay()\n    }\n    updateHeight() {\n        if (this.visibleLines === 'auto' || this.block.static) {\n            if (this.codemirror) {\n                this.codemirror.setSize('height', 'auto')\n            }\n            if (this.altcodemirror) {\n                this.altcodemirror.setSize('height', 'auto')\n            }\n        } else {\n            if (this.codemirror) {\n                this.codemirror.setSize(null, Math.round(20 * Math.max(1, this.visibleLines)) + 9)\n            }\n            if (this.altcodemirror) {\n                this.altcodemirror.setSize(\n                    null,\n                    Math.round(20 * Math.max(1, this.visibleLines)) + 9\n                )\n            }\n        }\n    }\n    replaceTemplateTags(o: ITagReplaceAction) {\n        if (!this.editMode) {\n            return\n        }\n        if (o.scopeUUID != this.block.scopeUUID) {\n            return\n        }\n        this.block.content = Vue.$tagger.replaceTemplateTagInString(\n            this.block.content,\n            o.name,\n            o.newValue\n        )\n    }\n    updateTagDisplay() {\n        if (\n            !this.editMode ||\n            this.block === undefined ||\n            this.block.appSettings === undefined ||\n            this.block.appSettings.randomizer === undefined ||\n            !this.block.appSettings.randomizer.active ||\n            !this.codeNeedsTagUpdate\n        ) {\n            return\n        }\n\n        this.codeNeedsTagUpdate = false\n        //console.log('Updating Tags')\n        this.clearTagMarkers()\n        Vue.$tagger.getMarkers(this.block.content).forEach(m => {\n            this.codemirror.getDoc().markText(m.start, m.end, {\n                className: Vue.$tagger.className[m.type],\n                inclusiveLeft: true,\n                inclusiveRight: true,\n                title: m.name,\n                startStyle: 'tag-mark-start',\n                endStyle: 'tag-mark-end'\n            })\n        })\n        this.$nextTick(() => {\n            Vue.$tagger.hookClick(this.codeBox.$el, this.block.scopeUUID)\n        })\n\n        if (this.altcodemirror) {\n            Vue.$tagger.getMarkers(this.block.alternativeContent).forEach(m => {\n                this.altcodemirror.getDoc().markText(m.start, m.end, {\n                    className: Vue.$tagger.className[m.type],\n                    inclusiveLeft: true,\n                    inclusiveRight: true,\n                    title: m.name,\n                    startStyle: 'tag-mark-start',\n                    endStyle: 'tag-mark-end'\n                })\n            })\n\n            this.$nextTick(() => {\n                if (this.altBox !== undefined) {\n                    Vue.$tagger.hookClick(this.altBox.$el, this.block.scopeUUID)\n                }\n            })\n        }\n    }\n    updateDiagnosticDisplay() {\n        const val = this.errors\n        if (val !== undefined) {\n            this.clearErrorDisplay()\n\n            const first = this.block.firstLine\n            val.forEach(error => {\n                if (error.start.column >= 0) {\n                    //console.log(\"squiggle\", this.block.type);\n                    //put a squigly line as code marker\n                    this.codemirror.getDoc().markText(\n                        { line: error.start.line - first, ch: error.start.column },\n                        { line: error.end.line - first, ch: error.end.column },\n                        {\n                            className: 'red-wave',\n                            inclusiveLeft: true,\n                            inclusiveRight: true,\n                            title: error.message\n                        }\n                    )\n                }\n\n                //read existing gutter marker or create a new one\n                let info = this.codemirror.getDoc().lineInfo(error.start.line - first)\n                let element =\n                    info && info.gutterMarkers ? info.gutterMarkers['diagnostics'].$component : null\n                if (element == null) {\n                    //console.log(\"Gutter\", this.block.type, error.start.line, error.message, first);\n                    element = document.createElement('span')\n\n                    //place the updated element\n                    this.codemirror\n                        .getDoc()\n                        .setGutterMarker(error.start.line - first, 'diagnostics', element)\n\n                    element.$component = new ErrorTipCtor({\n                        propsData: {\n                            errors: [],\n                            severity: error.severity\n                        }\n                    }).$mount(element)\n\n                    element = element.$component\n                }\n\n                //make sure we use the proper class for the given severity.\n                //We allways choose the maximum severity for each marking\n                element.severity = Math.max(error.severity, element.severity)\n\n                //Build the hint text\n                if (element.errors.indexOf(error) == -1) {\n                    element.errors.push(error)\n                }\n            })\n        } else {\n            this.clearErrorDisplay()\n        }\n    }\n\n    get codeBox(): Vue {\n        return this.$refs.codeBox as Vue\n    }\n\n    get altBox(): Vue | undefined {\n        return this.$refs.altBox as Vue\n    }\n\n    get hasAlternativeContent() {\n        return this.block.hasAlternativeContent && this.typeName == 'block'\n    }\n    get errors(): ICompilerErrorDescription[] {\n        return this.block.errors\n    }\n    get randomizerActive() {\n        return this.tagSet !== undefined\n    }\n    get boxClass() {\n        let cl = ''\n        if (this.block.hidden && !this.editMode) {\n            cl += 'hiddenBox '\n        }\n        if (this.block.readonly || this.readonly) {\n            cl += 'readonlyBox '\n        }\n        if (this.block.static) {\n            cl += 'staticBox '\n        }\n        return cl\n    }\n    get iliasTypeNr() {\n        const t = this.typeName\n        if (t == 'text') {\n            return 0\n        }\n        if (t == 'block-static') {\n            return 1\n        }\n        if (t == 'block') {\n            return 2\n        }\n        if (t == 'block-hidden') {\n            return 3\n        }\n        if (t == 'playground') {\n            return 4\n        }\n        if (t == 'blockly') {\n            return 5\n        }\n        return -1\n    }\n    get typeName() {\n        let s = this.block.type.toLowerCase()\n        if (this.block.hidden) {\n            s += '-hidden'\n        }\n        if (this.block.static) {\n            s += '-static'\n        }\n        return s\n    }\n    get altCode() {\n        if (this.block.alternativeContent === null) {\n            return ''\n        }\n        return this.block.alternativeContent\n    }\n    get code() {\n        if (!this.editMode) {\n            return this.block.actualContent()\n        }\n        return this.block.content\n    }\n    get options() {\n        return {\n            // codemirror options\n            mode: this.mode,\n            theme: this.theme,\n            lineNumbers: true,\n            line: true,\n            tabSize: 4,\n            indentUnit: 4,\n            autoCloseBrackets: true,\n            readOnly:\n                !this.editMode &&\n                (this.block.readonly || this.block.static || this.block.hidden || this.readonly),\n            //firstLineNumber: this.block.firstLine, //make sure to change altOptions as well when activating this\n            gutters: ['diagnostics', 'CodeMirror-linenumbers']\n        }\n    }\n    get altOptions() {\n        return this.options\n        // let o = { ...this.options }\n        // o.firstLineNumber = 1\n        // return o\n    }\n    get codemirror(): any | undefined {\n        return (this.codeBox as any).codemirror\n    }\n    get altcodemirror(): any | undefined {\n        if (this.altBox === undefined) {\n            return undefined\n        }\n        return (this.altBox as any).codemirror\n    }\n    get readyWhenMounted() {\n        return false\n    }\n    @Watch('block.firstLine')\n    onFirstLineChanged(val) {\n        if (this.codemirror) {\n            if (this.codemirror.options.firstLineNumber != this.block.firstLine) {\n                this.codemirror.options.firstLineNumber = this.block.firstLine\n                this.codemirror.refresh()\n            }\n        }\n    }\n    @Watch('visibleLines')\n    onVisibleLinesChanged(val) {\n        this.updateHeight()\n    }\n    @Watch('errors')\n    onErrorsChanged(val) {\n        this.updateDiagnosticDisplay()\n    }\n\n    created() {\n        console.d('ReadyWhenMounted in CodeBlock', this.readyWhenMounted)\n        //this.$options.readyWhenMounted = false;\n    }\n    mounted() {\n        this.updateHeight()\n\n        if (this.editMode && this.codemirror) {\n            console.d('Attach')\n            const buildIt = () => {\n                console.log('EMIT')\n                this.$emit('build')\n            }\n\n            this.codemirror.addKeyMap({\n                'Cmd-B': function(cMirror) {\n                    buildIt()\n                },\n                'Ctrl-B': function(cMirror) {\n                    buildIt()\n                }\n            })\n\n            this.codemirror.addKeyMap({\n                Tab: function(cMirror) {\n                    cMirror.execCommand('insertSoftTab')\n                }\n            })\n        }\n\n        Vue.$tagger.$on('replace-template-tag', this.replaceTemplateTags)\n        this.codeNeedsTagUpdate = true\n        this.updateTagDisplay()\n    }\n    beforeDestroy() {\n        Vue.$tagger.$off('replace-template-tag', this.replaceTemplateTags)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlock.vue?vue&type=template&id=0368514c&scoped=true&\"\nimport script from \"./CodeBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlock.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlock.vue?vue&type=style&index=0&id=0368514c&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0368514c\",\n  null\n  \n)\n\nexport default component.exports","\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport { BlockData } from '@/lib/codeBlocksManager'\n@Component\nexport default class BaseBlock extends Vue {\n    @Prop({ default: false }) muteReadyState!: boolean\n    @Prop({ required: true }) block!: BlockData\n\n    whenBlockIsReady() {\n        if (this.muteReadyState) {\n            return\n        }\n        this.block.readyCount++\n        this.$emit('ready', this.block)\n    }\n\n    whenBlockIsDestroyed() {\n        if (this.muteReadyState) {\n            return\n        }\n        this.block.readyCount--\n    }\n\n    get readyWhenMounted() {\n        return true\n    }\n\n    mounted() {\n        if (this.readyWhenMounted) {\n            this.whenBlockIsReady()\n        }\n    }\n\n    beforeDestroy() {\n        this.whenBlockIsDestroyed()\n    }\n}\n","var render, staticRenderFns\nimport script from \"./BaseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./BaseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseBlock.vue?vue&type=script&lang=ts&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=style&index=0&id=a541e1f2&lang=sass&scoped=true&\"","import { ICompilerID, IListItemData } from './ICompilerRegistry'\nimport { IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport { IBlockDefinition, IBlocklyToolbox } from './IBlocklyHelper'\n\nexport enum KnownBlockTypes {\n    PLAYGROUND = 'PLAYGROUND',\n    TEXT = 'TEXT',\n    BLOCKHIDDEN = 'BLOCK-hidden',\n    BLOCKSTATIC = 'BLOCK-static',\n    BLOCK = 'BLOCK',\n    BLOCKLY = 'BLOCKLY',\n    REPL = 'REPL',\n}\n\nexport enum CodeOutputTypes {\n    AUTO = 'auto',\n    TEXT = 'text',\n    JSON = 'json',\n    DATA = 'data',\n    MAGIC = 'magic',\n}\n\nexport enum CodeExpansionType {\n    LARGE = 2,\n    AUTO = 1,\n    TINY = 0,\n}\n\nexport interface IBlockloadManager {\n    readonly blockTag: string\n    loadFromDatablock: (\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ) => void\n}\n\nexport interface IRandomizerSet {\n    uuid: string\n    values: IRandomizerSetTag[]\n}\n\nexport interface IRandomizerSetTag {\n    tag: string\n    value: string\n}\nexport interface IRandomizerSettings {\n    active: boolean\n    previewIndex: number\n    knownTags: string[]\n    sets: IRandomizerSet[]\n}\n\nexport interface IBlockDataPlayground {\n    width: string\n    height: string\n    align: string\n}\n\nexport interface IBlockError {\n    error: string\n    uuid: string\n}\n\nexport interface IBlockElementData {\n    readonly?: string\n    static?: string\n    hidden?: string\n    visibleLines?: string\n    shouldAutoreset?: string\n    generateTemplate?: string\n    expanded?: string\n    codeExpanded?: string\n    noContent?: string\n    alternativeContent?: string\n    width?: string\n    height?: string\n    align?: string\n    version?: string\n    scopeUUID?: string\n    scopeSelector?: string\n    showControls?: boolean\n    as?: string\n}\n\nexport interface IBlockDataBlockly {\n    toolbox: IBlocklyToolbox\n    blocks: IBlockDefinition[]\n    _blockErrors: IBlockError[]\n    useOverride: boolean\n    toolboxOverride: string\n    showControls: boolean\n}\n\nexport interface ICodeBlockDataState {\n    readonly: boolean\n    static: boolean\n    hidden: boolean\n}\nexport interface IBlockDataBase extends IBlockDataPlayground, ICodeBlockDataState {\n    hasCode: boolean\n    type: KnownBlockTypes\n    content: string\n    alternativeContent: string | null\n    noContent: boolean\n    id: number\n    uuid: string\n    parentID: number\n    expanded: boolean\n    codeExpanded: CodeExpansionType\n    obj: object | null\n    version: string\n    readyCount: number\n    errors: any[]\n    scopeUUID?: string\n    scopeSelector?: string\n    visibleLines: number | 'auto'\n    hasAlternativeContent: boolean\n    shouldAutoreset: boolean\n    generateTemplate: boolean\n    blockly: IBlockDataBlockly\n    lineCountHint: number\n    as?: KnownBlockTypes\n}\n\nexport interface IBlockData extends IBlockDataBase {\n    getThemeForBlock(bl: ICodeBlockDataState): string\n    readonly themeForCodeBlock: string\n}\n\nexport interface IGlobalSettings {\n    baseurl: string\n}\nexport interface IGlobalState extends IGlobalSettings {\n    format_info(text: string): string\n    format_error(text: string): string\n\n    /**\n     * Seperates an outputObject (like the one you will get in the update-method of a playground handler) into a string and a json object seperated by a magic String. Returns an object that contains\n     *  <code>type</code> = <code>'dual'</code> parsed a magic string, <code>'json'</code> parsed as json, <code>'text'</code> plain text\n     *  <code>json</code> = the JSON object that was sent after the magicString\n     *  <code>text</code> = the String that was sent before the magicString\n     * @param {*} outputObject  The outputObject generated by the student code\n     * @param {*} type  'auto' = (default, try to determin what kind of output was generated), 'text', 'json' = (force json parsing), 'magic' = (force use of magic string seperator)\n     * @param {*} magicString The seperating String. By default it is '\\n\\n<JSON>\\n'\n     */\n    processMixedOutput(\n        outputObject: string[] | string,\n        type: CodeOutputTypes,\n        magicString?: string,\n        resultData?: object | any[]\n    ): IProcessedScriptOutput\n    mimeType(language: string): string\n    knownLanguages(): IListItemData[]\n\n    refreshAllCodeMirrors(): void\n    refreshAllCodeMirrorsSync(): void\n\n    itemForValue(items: IListItemData[], value: string): IListItemData\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=style&index=0&lang=sass&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=style&index=0&id=5a368702&lang=stylus&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=style&index=0&lang=sass&\"","export enum BlockPrimaryColors {\n    Colour = '#cf63cf',\n    List = '#5cb1d6',\n    Logic = '#ffab19',\n    Loop = '#ffbf00',\n    Math = '#4c97ff',\n    Procedure = '#ff6680',\n    Text = '#bbbbca',\n    Variable = '#59c059',\n    Variable_dynamic = '#0fbd8c'\n}\n\nexport enum BlockSecondaryColors {\n    Colour = '#c55ec5',\n    List = '#57a8cb',\n    Logic = '#f2a218',\n    Loop = '#f2b500',\n    Math = '#488ff2',\n    Procedure = '#f2617a',\n    Text = '#b2b2c0',\n    Variable = '#55b655',\n    Variable_dynamic = '#0eb485'\n}\nexport enum BlockTertiaryColors {\n    Colour = '#ba59ba',\n    List = '#539fc1',\n    Logic = '#e69a17',\n    Loop = '#e6ac00',\n    Math = '#4488e6',\n    Procedure = '#e65c73',\n    Text = '#a8a8b6',\n    Variable = '#50ad50',\n    Variable_dynamic = '#0eaa7e'\n}\n\nexport enum BlockOutputTypes {\n    Number = 'Number',\n    Boolean = 'Boolean',\n    String = 'String',\n    Array = 'Array',\n    Color = 'Colour',\n    Any = ''\n}\n\nexport enum BlockSequenceTypes {\n    Action = 'Action'\n}\n\nexport enum BlockArgumentTypes {\n    field_input = 'field_input',\n    field_dropdown = 'field_dropdown',\n    field_checkbox = 'field_checkbox',\n    field_colour = 'field_colour',\n    field_number = 'field_number',\n    field_angle = 'field_angle',\n    field_variable = 'field_variable',\n    field_date = 'field_date',\n    field_label = 'field_label',\n    field_image = 'field_image',\n    input_value = 'input_value',\n    input_statement = 'input_statement',\n    input_dummy = 'input_dummy'\n}\n\nexport interface IBlocklyToolboxItem extends IBlockUIExtension {\n    uuid: string\n    type: string\n}\nexport interface IBlocklyToolboxCategory {\n    uuid: string\n    items: IBlocklyToolboxItem[]\n    color?: string\n    custom?: string\n    name: string\n}\nexport interface IBlocklyToolbox {\n    categories: IBlocklyToolboxCategory[]\n}\n\nexport interface IBlockArgument extends IBlockUIExtension {\n    uuid: string\n    type: BlockArgumentTypes\n    name: string\n    check?: BlockOutputTypes\n    variable?: string\n    variableTypes?: string[]\n}\n\nexport interface IBlockLine extends IBlockUIExtension {\n    uuid: string\n    message: string\n    args: IBlockArgument[]\n}\n\nexport interface IBlockDefinitionJSON {\n    type: string\n    message0: string\n    args0: IBlockArgument[]\n    message1?: string\n    args1?: IBlockArgument[]\n    message2?: string\n    args2?: IBlockArgument[]\n    message3?: string\n    args3?: IBlockArgument[]\n    message4?: string\n    args4?: IBlockArgument[]\n\n    output?: BlockOutputTypes\n    previousStatement: BlockSequenceTypes | null\n    nextStatement: BlockSequenceTypes | null\n    colour: string\n    tooltip?: string\n    helpUrl?: string\n}\n\nexport interface IBlockDefinition extends IBlockUIExtension {\n    uuid: string\n    _code?: Function\n    JSON: IBlockDefinitionJSON\n    XML?: string\n    codeStub?: string\n    codeString: string\n}\n\nexport enum KnownBlocklyTypes {\n    controls_if = 'controls_if',\n    logic_compare = 'logic_compare',\n    logic_operation = 'logic_operation',\n    logic_negate = 'logic_negate',\n    logic_boolean = 'logic_boolean',\n    logic_null = 'logic_null',\n    logic_ternary = 'logic_ternary',\n    controls_repeat_ext = 'controls_repeat_ext',\n    controls_whileUntil = 'controls_whileUntil',\n    controls_for = 'controls_for',\n    controls_forEach = 'controls_forEach',\n    controls_flow_statements = 'controls_flow_statements',\n    math_number = 'math_number',\n    math_arithmetic = 'math_arithmetic',\n    math_single = 'math_single',\n    math_trig = 'math_trig',\n    math_constant = 'math_constant',\n    math_number_property = 'math_number_property',\n    math_round = 'math_round',\n    math_on_list = 'math_on_list',\n    math_modulo = 'math_modulo',\n    math_constrain = 'math_constrain',\n    math_random_int = 'math_random_int',\n    math_random_float = 'math_random_float',\n    text = 'text',\n    text_join = 'text_join',\n    text_append = 'text_append',\n    text_length = 'text_length',\n    text_isEmpty = 'text_isEmpty',\n    text_indexOf = 'text_indexOf',\n    variables_get = 'variables_get',\n    text_charAt = 'text_charAt',\n    text_getSubstring = 'text_getSubstring',\n    text_changeCase = 'text_changeCase',\n    text_trim = 'text_trim',\n    text_print = 'text_print',\n    text_prompt_ext = 'text_prompt_ext',\n    lists_create_with = 'lists_create_with',\n    lists_repeat = 'lists_repeat',\n    lists_length = 'lists_length',\n    lists_isEmpty = 'lists_isEmpty',\n    lists_indexOf = 'lists_indexOf',\n    lists_getIndex = 'lists_getIndex',\n    lists_setIndex = 'lists_setIndex',\n    lists_getSublist = 'lists_getSublist',\n    lists_split = 'lists_split',\n    lists_sort = 'lists_sort',\n    colour_picker = 'colour_picker',\n    colour_random = 'colour_random',\n    colour_rgb = 'colour_rgb',\n    colour_blend = 'colour_blend'\n}\n\nexport interface IBlockUIExtension {\n    _expanded: boolean\n}\n","import Vue from 'vue'\nimport UUID from 'vue-uuid'\n\nVue.use(UUID as any)\n","import Vue from 'vue'\n\nimport '../styles/quasar.styl'\nimport '@quasar/extras/material-icons/material-icons.css'\n\nimport '@quasar/extras/animate/fadeInUp.css'\nimport '@quasar/extras/animate/fadeInDown.css'\nimport '@quasar/extras/animate/fadeOutUp.css'\nimport '@quasar/extras/animate/fadeOutDown.css'\n\nimport '@quasar/extras/animate/fadeIn.css'\nimport '@quasar/extras/animate/fadeOut.css'\n\nimport '@quasar/extras/animate/zoomInDown.css'\nimport '@quasar/extras/animate/zoomInUp.css'\n\nimport Dialog from 'quasar/src/plugins/Dialog.js';import Quasar from 'quasar/src/vue-plugin.js';\n\nconst lang = document.getElementsByTagName('html')[0].getAttribute('lang')\nimport langDe from 'quasar/dist/lang/de.umd.min.js'\nimport langEn from 'quasar/dist/lang/en-gb.umd.min.js'\n\nVue.use(Quasar, {\n    config: {},\n    components: {\n        /* not needed if importStrategy is not 'manual' */\n    },\n    directives: {\n        /* not needed if importStrategy is not 'manual' */\n    },\n    plugins: {\n        Dialog,\n    },\n    animations: ['fadeIn', 'fadeOut'],\n    lang: lang == 'de' ? langDe : langEn,\n})\nQuasar.lang.set(lang == 'de' ? langDe : langEn)\n\nimport 'reflect-metadata'\n","import Vue from 'vue'\nimport { install } from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\ninstall(Vue)\n//Vue.use(VueCodeMirror, {})\n","import Vue from 'vue'\nimport { CodeOutputTypes, IGlobalSettings, IGlobalState } from '@/lib/ICodeBlocks'\nimport { IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport { IListItemData } from '@/lib/ICompilerRegistry'\n\n/**\n * This object defines the programming languages supported for code highlighting\n * using CodeMirror\n * @namespace cmMode The programminglanguages supported\n */\nconst mimeTypesForLanguage = {\n    c: { mime: 'text/x-csrc', displayName: 'C' }, // (C),\n    'c++': { mime: 'text/x-c++src', displayName: 'C++' }, // (C++),\n    'c#': { mime: 'text/x-csharp', displayName: 'C#' }, // (C#),\n    css: { mime: 'text/css', displayName: 'CSS' }, // (CSS)\n    fortran: { mime: 'text/x-fortran', displayName: 'Fortran' }, // (Fortran)\n    glsl: { mime: 'text/x-glsl', displayName: 'GLSL' }, // (GLSL)\n    html: { mime: 'text/html', displayName: 'HTML' }, // (HTML)\n    java: { mime: 'text/x-java', displayName: 'Java' }, // (Java),\n    javascript: { mime: 'text/javascript', displayName: 'JavaScript' }, // (JavaScript)\n    perl: { mime: 'text/x-perl', displayName: 'Perl' }, // (Perl)\n    php: { mime: 'application/x-httpd-php', displayName: 'PHP' }, // (PHP)\n    python: { mime: 'text/x-python', displayName: 'Python' }, // (Python)\n    r: { mime: 'text/x-rsrc', displayName: 'R' }, //(R)\n}\n\nfunction loadSettings(scope: HTMLElement | Document): IGlobalSettings {\n    const options = {\n        baseurl: '',\n    }\n    const settings = scope.querySelectorAll('meta[name^=codeblocks]')\n    settings.forEach((opt) => {\n        const name = opt.getAttribute('name')\n        const value = opt.getAttribute('content')\n\n        if (name == 'codeblocks-baseurl' && value) {\n            options.baseurl = value\n        }\n    })\n    return options\n}\n\nexport class GlobalState implements IGlobalState {\n    public readonly baseurl: string\n\n    constructor() {\n        const options = loadSettings(document)\n        this.baseurl = options.baseurl\n    }\n    format_info(text: string): string {\n        return '<span style=\"color:green\">' + text + '</span>'\n    }\n    format_error(text: string): string {\n        return '<span style=\"color:red\">' + text + '</span>'\n    }\n\n    /**\n     * Seperates an outputObject (like the one you will get in the update-method of a playground handler) into a string and a json object seperated by a magic String. Returns an object that contains\n     *  <code>type</code> = <code>'dual'</code> parsed a magic string, <code>'json'</code> parsed as json, <code>'text'</code> plain text\n     *  <code>json</code> = the JSON object that was sent after the magicString\n     *  <code>text</code> = the String that was sent before the magicString\n     * @param {*} outputObject  The outputObject generated by the student code\n     * @param {*} type  'auto' = (default, try to determin what kind of output was generated), 'text', 'json' = (force json parsing), 'magic' = (force use of magic string seperator)\n     * @param {*} magicString The seperating String. By default it is '\\n\\n<JSON>\\n'\n     */\n    processMixedOutput(\n        outputObject: string[] | string,\n        type: CodeOutputTypes,\n        magicString?: string,\n        resultData?: object | any[]\n    ): IProcessedScriptOutput {\n        if (outputObject !== undefined && Array.isArray(outputObject)) {\n            return {\n                type: 'json',\n                json: outputObject,\n                text: '',\n            }\n        }\n\n        if (magicString === undefined) {\n            magicString = '\\n\\n<JSON>\\n'\n        }\n        const idx = outputObject.indexOf(magicString)\n\n        if (\n            type === CodeOutputTypes.DATA ||\n            (type === CodeOutputTypes.AUTO && resultData != undefined)\n        ) {\n            return {\n                type: 'dual',\n                json: resultData,\n                text: outputObject,\n            }\n        } else if ((type === CodeOutputTypes.AUTO && idx >= 0) || type === CodeOutputTypes.MAGIC) {\n            const str = outputObject.substr(0, idx)\n            let json = undefined\n            const pString = outputObject.substr(idx + magicString.length)\n            try {\n                json = JSON.parse(pString)\n            } catch (ee) {\n                const e: any = ee\n                e.parsedString = pString\n                console.log('catch')\n                throw e\n            }\n\n            return {\n                type: 'dual',\n                json: json,\n                text: str,\n            }\n        } else {\n            if (type === CodeOutputTypes.JSON && resultData !== undefined) {\n                return {\n                    type: CodeOutputTypes.JSON,\n                    json: resultData,\n                    text: '',\n                }\n            }\n            const too = outputObject.trim()\n            if (\n                (type === CodeOutputTypes.AUTO &&\n                    (too.indexOf('[') == 0 || too.indexOf('{') == 0)) ||\n                type === CodeOutputTypes.JSON\n            ) {\n                return {\n                    type: CodeOutputTypes.JSON,\n                    json: JSON.parse(outputObject),\n                    text: '',\n                }\n            }\n        }\n\n        return {\n            type: 'text',\n            json: resultData,\n            text: outputObject,\n        }\n    }\n    mimeType(language: string): string {\n        const o = mimeTypesForLanguage[language]\n        if (o === undefined) {\n            return 'text/javascript'\n        }\n        return o.mime\n    }\n    knownLanguages(): IListItemData[] {\n        return Object.keys(mimeTypesForLanguage)\n            .map((k) => {\n                return { label: mimeTypesForLanguage[k].displayName, value: k }\n            })\n            .sort((a, b) => (a.value < b.value ? -1 : 1))\n    }\n    refreshAllCodeMirrorsSync(): void {\n        document.querySelectorAll('.CodeMirror').forEach((e: any) => e.CodeMirror.refresh())\n    }\n    refreshAllCodeMirrors(): void {\n        setTimeout(() => {\n            this.refreshAllCodeMirrorsSync()\n        }, 100)\n        setTimeout(() => {\n            this.refreshAllCodeMirrorsSync()\n        }, 500)\n    }\n    public itemForValue(items: IListItemData[], value: string): IListItemData {\n        const ret = items.find((i) => i.value == value)\n        if (ret === undefined) {\n            return {\n                label: '???',\n                value: '???',\n            }\n        }\n        return ret\n    }\n}\nexport const globalState = new GlobalState()\nVue.prototype.$CodeBlock = globalState\nVue.$CodeBlock = globalState\n\nVue.$GlobalEventHub = new Vue()\n","import Vue from 'vue'\nimport { ErrorSeverity } from '@/lib/ICompilerRegistry'\n\nVue.prototype.SEVERITY_ERROR = ErrorSeverity.Error\nVue.prototype.SEVERITY_WARNING = ErrorSeverity.Warning\nVue.$SEVERITY_ERROR = ErrorSeverity.Error\nVue.$SEVERITY_WARNING = ErrorSeverity.Warning\n\nVue.prototype.$compilerState = new Vue({\n    data: function() {\n        return {\n            globalStateHidden: true,\n            globalStateMessage: '',\n            runButtonForceHide: false\n        }\n    },\n    methods: {\n        hideGlobalState() {\n            this.displayGlobalState(null)\n        },\n        setAllRunButtons(what: boolean) {\n            this.runButtonForceHide = !what\n        },\n        displayGlobalState(message: string | null) {\n            this.globalStateHidden = message === null || message === undefined || message === ''\n            this.globalStateMessage = message ? message : ''\n        }\n    }\n})\n","import Vue from 'vue'\nimport hljs from 'highlight.js/lib/core'\n//import 'highlight.js/styles/ocean.css'\nimport 'highlight.js/styles/tomorrow.css'\nimport '../styles/highlight.styl'\nimport { DirectiveBinding } from 'vue/types/options'\n\nhljs.configure({ useBR: false })\n\nhljs.registerLanguage('c', require('highlight.js/lib/languages/cpp'))\nhljs.registerLanguage('c++', require('highlight.js/lib/languages/cpp'))\nhljs.registerLanguage('c#', require('highlight.js/lib/languages/csharp'))\nhljs.registerLanguage('css', require('highlight.js/lib/languages/css'))\nhljs.registerLanguage('fortran', require('highlight.js/lib/languages/fortran'))\nhljs.registerLanguage('glsl', require('highlight.js/lib/languages/glsl'))\nhljs.registerLanguage('java', require('highlight.js/lib/languages/java'))\nhljs.registerLanguage('javascript', require('highlight.js/lib/languages/javascript'))\nhljs.registerLanguage('perl', require('highlight.js/lib/languages/perl'))\nhljs.registerLanguage('php', require('highlight.js/lib/languages/php'))\nhljs.registerLanguage('python', require('highlight.js/lib/languages/python'))\nhljs.registerLanguage('r', require('highlight.js/lib/languages/r'))\n\nconst reg_hl = /(\\[hl\\]|\\[hl\\s+language=\"?(.*?)\"?\\])(.*?)(\\[\\/hl\\])/gm\nconst reg_code = /(\\[code\\]|\\[code\\s+language=\"?(.*?)\"?\\])([\\s\\S]*?)(\\[\\/code\\])/gm\n\nhljs.$vue = {\n    processElements: function (\n        scope: Document | HTMLElement | undefined,\n        inLang: string | undefined\n    ) {\n        if (scope === undefined) {\n            scope = document\n        }\n        const elements = scope.querySelectorAll('[highlight]')\n        elements.forEach((el) => {\n            if (inLang === undefined && el.hasAttribute('highlight')) {\n                const lang = el.getAttribute('highlight')\n                inLang = lang === null ? undefined : lang\n            }\n            this.processElement(el, inLang)\n        })\n    },\n    /////The Folowing Code will not replace tags on a string level as this will\n    /////destroy attached objects in the DOM but aims to replace the strings in\n    /////TextNodes only. Changes ar recorded in the q and applied once all nodes\n    /////Were visited. This is probably a lot slower than the pure string version\n    // processTextElement: function(el, inLang, q){\n    //     let txt = el.textContent.replace(reg_hl, function(m1, m2, m3, m4, m5){\n    //         const lang = m3===undefined?inLang:m3;\n    //         //console.log(\"m1\", m1, \"m2\", m2, \"m3\", m3, \"m4\", m4, \"m5\", m5, \"in\", inLang, \"res\", lang)\n    //         if (lang) return '<span is-code>'+hljs.highlight(lang, m4).value + '</span>';\n    //         else return '<span is-code>'+hljs.highlightAuto(m4).value + '</span>';\n    //     });\n\n    //     txt = txt.replace(reg_code, function(m1, m2, m3, m4, m5){\n    //         const lang = m3===undefined?inLang:m3;\n    //         m4 = m4.replace(/<br( +\\/)?>/g, \"\\n\").replace(/&nbsp;/g, \" \");\n    //         if (lang) return '<pre is-code>'+hljs.highlight(lang, m4).value + '</pre>';\n    //         else return '<pre is-code>'+hljs.highlightAuto(m4).value + '</pre>';\n    //     });\n    //     if (txt != el.textContent) {\n    //       q.push(()=>{\n    //          let nel = document.createElement('span');\n    //          nel.innerHTML = txt;\n    //          el.parentNode.replaceChild(nel, el);\n    //       })\n    //     }\n    // },\n    // processElementRec: function(el, inLang, updateList){\n    //     let q = updateList;\n    //     if (q === undefined) q = [];\n\n    //     if (inLang === undefined && el.hasAttribute('highlight')){\n    //         inLang = el.getAttribute('highlight');\n    //     }\n    //     el.innerHTML = el.innerHTML;\n\n    //     el.childNodes.forEach(c => {\n    //        if (c.nodeType==Node.TEXT_NODE) {\n    //            this.processTextElement(c, inLang, q);\n    //        } else {\n    //            this.processElement(c, inLang, q);\n    //        }\n    //     })\n\n    //     if (updateList === undefined){\n    //         q.forEach(f => f());\n    //     }\n    // },\n    processElementSimple(el: HTMLElement, inLang: string | undefined) {\n        if (inLang === undefined && el.hasAttribute('highlight')) {\n            const lang = el.getAttribute('highlight')\n            inLang = lang === null ? 'javascript' : lang\n        }\n\n        let txt = el.innerHTML.replace(reg_hl, function (m1, m2, m3, m4, m5) {\n            const lang = m3 === undefined ? inLang : m3\n            //console.log(\"m1\", m1, \"m2\", m2, \"m3\", m3, \"m4\", m4, \"m5\", m5, \"in\", inLang, \"res\", lang)\n            if (lang) {\n                return '<span is-code>' + hljs.highlight(lang, m4).value + '</span>'\n            } else {\n                return '<span is-code>' + hljs.highlightAuto(m4).value + '</span>'\n            }\n        })\n\n        txt = txt.replace(reg_code, function (m1, m2, m3, m4, m5) {\n            const lang = m3 === undefined ? inLang : m3\n            m4 = m4\n                .replace(/<br( +\\/)?>/g, '\\n')\n                .replace(/&nbsp;/g, ' ')\n                .replace(/&lt;/g, '<')\n                .replace(/&gt;/g, '>')\n                .replace(/&amp;/g, '&')\n\n            if (lang) {\n                return '<pre is-code>' + hljs.highlight(lang, m4).value + '</pre>'\n            } else {\n                return '<pre is-code>' + hljs.highlightAuto(m4).value + '</pre>'\n            }\n        })\n\n        el.innerHTML = txt\n    },\n    processElement(el: HTMLElement, inLang: string | undefined) {\n        if (window.MathJax === undefined) {\n            this.processElementSimple(el, inLang)\n        } else {\n            MathJax.Hub.Register.StartupHook('End', () => {\n                this.processElementSimple(el, inLang)\n            })\n        }\n    },\n}\n\nwindow.highlightAll = function () {\n    hljs.$vue.processElements()\n}\nwindow.highlightElement = function (el: HTMLElement) {\n    hljs.$vue.processElement(el, el.getAttribute('highlight'))\n}\nwindow.hljs = hljs\nVue.$hljs = hljs\n\nVue.directive('highlight', {\n    //deep: true,\n    bind: function (el: HTMLElement, binding: DirectiveBinding) {\n        console.log('DIRECTIVE - bind', el, binding)\n        hljs.$vue.processElement(el, binding.value)\n    },\n    componentUpdated: function (el: HTMLElement, binding: DirectiveBinding) {\n        console.log('DIRECTIVE - update', el, binding)\n        hljs.$vue.processElement(el, binding.value)\n    },\n})\n","import 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport i18n from './i18n'\n//!!! make sure to also change the expression in ilias-builder.js !!!\nconst randomAndTemplateTag = /\\{(:|!)([\\w]*)}/g\n\nimport '../styles/tagger.styl'\nimport { DirectiveBinding } from 'vue/types/options'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\n\nexport interface ITagReplaceAction {\n    name: string\n    newValue: string\n    scopeUUID: string\n}\n\nexport interface ITagMarkers {\n    start: { line: number; ch: number }\n    end: { line: number; ch: number }\n    type: 'rnd' | 'templ'\n    name: string\n}\n@Component\nexport default class Tagger extends Vue {\n    private className = {\n        rnd: 'random-tag-placeholder',\n        templ: 'template-tag-placeholder'\n    }\n\n    getMarkers(s: string): ITagMarkers[] {\n        if (s === undefined || s === null) {\n            return []\n        }\n        let lines = s.split('\\n')\n        let markers: ITagMarkers[] = []\n        let m: RegExpExecArray | null\n        for (let i = 0; i < lines.length; i++) {\n            let regex = new RegExp(randomAndTemplateTag)\n\n            while ((m = regex.exec(lines[i])) !== null) {\n                if (m.index === regex.lastIndex) {\n                    regex.lastIndex++\n                }\n\n                const marker: ITagMarkers = {\n                    start: { line: i, ch: m.index },\n                    end: { line: i, ch: regex.lastIndex },\n                    type: m[1] == ':' ? 'rnd' : 'templ',\n                    name: m[2]\n                }\n                markers.push(marker)\n            }\n        }\n        return markers\n    }\n    processElements(scope: Document | HTMLElement | undefined): void {\n        let uuid: string = ''\n        if (scope === undefined) {\n            scope = document\n        } else {\n            const h = scope as HTMLElement\n            if (!h.hasAttribute('uuid')) {\n                uuid = this.$uuid.v4()\n                h.setAttribute('uuid', uuid)\n            } else {\n                uuid = h.getAttribute('uuid')!\n            }\n        }\n\n        const elements = scope.querySelectorAll('[tagged]')\n        const calle = () => {\n            elements.forEach(el => {\n                this.processElement(el as HTMLElement, uuid)\n            })\n        }\n        if (window.MathJax === undefined) {\n            calle()\n        } else {\n            MathJax.Hub.Register.StartupHook('End', calle)\n        }\n    }\n\n    processElement(el: HTMLElement, scopeUUID: string): void {\n        el.innerHTML = this.processString(el.innerHTML, scopeUUID)\n        this.hookClick(el, scopeUUID)\n    }\n\n    processString(str: string, scopeUUID: string): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            const className = m1 === ':' ? this.className.rnd : this.className.templ\n            return (\n                `<span class=\"q-mb-xs  tag-mark-start tag-mark-end ${className}\" >` + m0 + '</span>'\n            )\n        })\n    }\n    hookClick(el: HTMLElement, scopeUUID: string): void {\n        let tags = el.querySelectorAll('.' + this.className.templ)\n        tags.forEach(inTag => {\n            const tag = inTag as HTMLElement\n            let name = tag.innerText.replace(randomAndTemplateTag, (m0, m1, m2) => {\n                return m2\n            })\n            tag.onclick = () => {\n                this.clickFunction(name, tag, scopeUUID)\n            }\n        })\n    }\n    replaceTemplateTag(\n        scope: HTMLElement | Document | undefined,\n        name: string,\n        newValue: string\n    ): void {\n        if (scope === undefined) {\n            scope = document\n        }\n        let tags = scope.querySelectorAll('.' + this.className.templ)\n        tags.forEach(tag => {\n            tag.innerHTML = this.replaceTemplateTagInString(tag.innerHTML, name, newValue)\n        })\n    }\n    replaceTemplateTagInString(str: string, name: string, newValue: string): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            if (m1 == '!' && m2 == name) {\n                return newValue\n            }\n            return m0\n        })\n    }\n    replaceRandomTagsInString(str: string, tagSet: IRandomizerSet): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            if (m1 == ':') {\n                const tag = tagSet.values.find(t => t.tag == m2)\n                if (tag !== undefined) {\n                    return tag.value\n                }\n                return m0\n            }\n            return m0\n        })\n    }\n    clickFunction(name: string, tagEl: HTMLElement, scopeUUID: string): void {\n        //console.log(i18n)\n        Vue.prototype.$q\n            .dialog({\n                title: i18n.t('Tagger.ConfirmRepl'),\n                message: i18n.t('Tagger.ConfirmReplMsg', {\n                    name: '<span class=\"template-tag-placeholder-noclick\">' + name + '</span>'\n                }),\n                html: true,\n                persistent: true,\n                prompt: {\n                    model: '{!' + name + '}',\n                    type: 'text' // optional\n                },\n                ok: {\n                    push: true,\n                    color: 'negative',\n                    icon: 'warning'\n                },\n                cancel: {\n                    push: true,\n                    color: 'positive'\n                }\n            })\n            .onOk((data: string) => {\n                //this.replaceTemplateTag($(tagEl).parents(\".codeblocks\").get(0), name, data)\n                this.replaceTemplateTag($(`[uuid=${scopeUUID}]`).get(0), name, data)\n                console.log(scopeUUID)\n                this.$emit('replace-template-tag', {\n                    name: name,\n                    newValue: data,\n                    scopeUUID: scopeUUID\n                })\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                const me = self as any\n                me.highlighted = false\n            })\n    }\n}\n\nVue.directive('tagged', {\n    //deep: true,\n    bind: function(el: HTMLElement, binding: DirectiveBinding) {\n        Vue.$tagger.processElement(el, binding.value)\n    },\n    componentUpdated: function(el: HTMLElement, binding: DirectiveBinding) {\n        //console.log(\"DIRECTIVE - update\", el, binding)\n        Vue.$tagger.processElement(el, binding.value)\n    }\n})\n\nVue.$tagger = new Tagger()\n","import Vue from 'vue'\n\n/**\n * The overhead time we need to spin up the execution environment. The value is added to the execution time defined for this question\n * @type {int} javaRunOverhead execution overhead in ms\n */\nvar javaRunOverhead = 4000\n\nfunction runJavaWorker(\n    questionID,\n    code,\n    callingCodeBlocks,\n    max_ms,\n    log_callback,\n    info_callback,\n    err_callback,\n    compileFailedCallback,\n    finishedExecutionCB,\n    forceReload = false\n) {\n    let exp = new RegExp('public[ \\n]*class[ \\n]*([a-zA-Z_$0-9]*)[ \\n]*({|implements|extends)')\n    let match = exp.exec(code)\n    if (match == null) {\n        console.error('Unable to determine class Name!', match, code)\n        return\n    }\n\n    let className = match[1]\n\n    let worker = new Worker(Vue.$CodeBlock.baseurl + 'js/doppio/v001/javaWorker.js')\n    let timer = null\n\n    worker.addEventListener(\n        'message',\n        function (e) {\n            const data = e.data\n            //console.log(data)\n            switch (data.event) {\n                case 'finished':\n                    if (timer) {\n                        clearTimeout(timer)\n                        timer = null\n                    }\n\n                    /*if (data.stderr && data.stderr != '') err_callback(data.stderr + \"\\n\") ;\n        if (data.stdout && data.stdout != '') log_callback(data.stdout);*/\n\n                    console.log('Done', data.stdout, data.stderr, finishedExecutionCB)\n                    finishedExecutionCB()\n                    break\n\n                case 'startTimer':\n                    timer = setTimeout(function (e) {\n                        console.log('Sending kill command')\n                        worker.postMessage({ cmd: 'kill' })\n                        timer = setTimeout(function () {\n                            console.log('Terminating Worker')\n                            worker.terminate()\n                        }, 5000)\n                        err_callback(\n                            'Terminated long running Process (>' +\n                                Math.round((max_ms + javaRunOverhead) / 1000) +\n                                's).'\n                        )\n                        JavaExec.setRunButton(true, 'run')\n                        JavaExec.setRunButton(true)\n                        JavaExec.showMessage(null)\n                    }, max_ms + javaRunOverhead) //we need about 4000ms to spin up the execution unit\n                    break\n\n                case 'showMessage':\n                    //console.log(\"showMessage\", data)\n                    JavaExec.showMessage(data.msg)\n                    break\n                case 'output':\n                    if (data.type == 'err') {\n                        err_callback(data.msg)\n                    } else if (data.type == 'nfo') {\n                        info_callback(data.msg)\n                    } else {\n                        log_callback(data.msg)\n                    }\n                    break\n\n                case 'setRunButton':\n                    //console.log(\"setRunButton\", data)\n                    JavaExec.setRunButton(data.enabled, data.info)\n                    break\n\n                case 'cleanCache':\n                    //log_callback('')\n                    if (!forceReload) {\n                        worker.postMessage({ cmd: 'kill' })\n                        console.log('Restarting...')\n                        setTimeout(function () {\n                            runJavaWorker(\n                                questionID,\n                                code,\n                                callingCodeBlocks,\n                                max_ms,\n                                log_callback,\n                                info_callback,\n                                err_callback,\n                                compileFailedCallback,\n                                finishedExecutionCB,\n                                true\n                            )\n                        }, 500)\n                    } else {\n                        JavaExec.setRunButton(false)\n                        JavaExec.showMessage('Failed to initialize JVM.')\n                    }\n                    break\n            }\n        },\n        false\n    )\n\n    worker.postMessage({\n        cmd: 'run',\n        code: code,\n        className: className,\n        max_ms: max_ms + 1000,\n        questionID: questionID,\n        forceReload: forceReload,\n    })\n}\n\nconst singleton = new Vue({\n    data: function () {\n        return {\n            loadedlibs: 0,\n            version: '001',\n            language: 'java',\n            canRun: true,\n            canStop: true,\n            allowsContinousCompilation: false,\n            allowsPersistentArguments: false,\n            allowsMessagePassing: false,\n            acceptsJSONArgument: false,\n            allowsREPL: false,\n            didPreload: false,\n            requestedPreload: false,\n            isReady: false,\n            isRunning: false,\n        }\n    },\n    methods: {\n        preload() {\n            if (this.loadedlibs < 3) {\n                if (this.requestedPreload == false) {\n                    this.requestedPreload = true\n                    this.triggerResourceLoad()\n                }\n\n                return\n            }\n            if (this.didPreload) {\n                return\n            }\n            this.didPreload = true\n            console.log('[Preloading Doppio]')\n            try {\n                JavaExec.showMessage = function (msg) {\n                    this.$compilerState.displayGlobalState(msg)\n                }.bind(this)\n\n                const lock = []\n                JavaExec.setRunButton = function (enabled, info = undefined) {\n                    if (info && !enabled && lock.indexOf(info) == -1) {\n                        lock.push(info)\n                    }\n                    if (info && enabled && lock.indexOf(info) > -1) {\n                        lock.splice(lock.indexOf(info), 1)\n                    }\n\n                    if (!enabled || lock.length == 0) {\n                        this.$compilerState.setAllRunButtons(enabled)\n                    }\n                }.bind(this)\n\n                const self = this\n                JavaExec.initialize(function () {\n                    console.log('Initializing Filesystem')\n                    JavaExec.initFileSystems(\n                        Vue.$CodeBlock.baseurl + 'js/doppio/v001/',\n                        false,\n                        function () {\n                            //JavaExec.printDirContent('sys/vendor');\n\n                            JavaExec.reroutStdStreams()\n                            JavaExec.ready = true\n                            self.isReady = true\n                        }\n                    )\n                })\n            } catch (e) {\n                console.error(e)\n            }\n        },\n        compileAndRun(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n            runCreate = false\n        ) {\n            if (!this.isReady) {\n                return\n            }\n\n            return runJavaWorker(\n                questionID,\n                code,\n                callingCodeBlocks,\n                max_ms,\n                log_callback,\n                info_callback,\n                err_callback,\n                compileFailedCallback,\n                finishedExecutionCB,\n                runCreate\n            )\n        },\n        triggerResourceLoad() {\n            console.log('[Preparing Dependencies for Doppio]')\n            let script = document.createElement('script')\n            script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/browserfs/browserfs.min.js'\n            script.onload = function () {\n                this.loadedlibs++\n                console.log('[BrowserFS loaded]')\n\n                let script = document.createElement('script')\n                script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/doppio/doppio.js'\n                script.onload = function () {\n                    this.loadedlibs++\n                    console.log('[Doppio loaded]')\n\n                    let script = document.createElement('script')\n                    script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/JavaExec.js'\n                    script.onload = function () {\n                        this.loadedlibs++\n                        console.log('[JavaExec loaded]')\n                        if (this.requestedPreload) {\n                            this.preload()\n                        }\n                    }.bind(this)\n                    document.head.appendChild(script)\n                }.bind(this)\n                document.head.appendChild(script)\n            }.bind(this)\n            document.head.appendChild(script)\n        },\n    },\n    created() {},\n})\nexport default singleton\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string, terminate?: boolean): void\n    }\n}\n\nconst teaVMRunOverhead = 30000\n\n//ICompilerInstance\n@Component\nexport class JavaV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'java'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    didPreload: boolean = false\n    teaworker: Worker | undefined = undefined\n    isReady = false\n    isRunning = false\n\n    preload() {\n        if (this.didPreload) {\n            return\n        }\n        this.didPreload = true\n        this.$compilerState.setAllRunButtons(false)\n\n        console.log(`[Preloading TeaVM ${this.version} for Java]`)\n        this.isRunning = true\n        this.createTeaWorker(() => {\n            this.isRunning = false\n            this.$compilerState.hideGlobalState()\n            this.$compilerState.setAllRunButtons(true)\n            //console.log('setAllRun', true)\n        })\n    }\n\n    private createTeaWorker(whenReady: () => void): boolean {\n        if (this.teaworker === undefined) {\n            this.$compilerState.setAllRunButtons(false)\n            this.$compilerState.displayGlobalState('Initializing Runtime')\n            try {\n                this.teaworker = new Worker(\n                    `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/worker.js`\n                )\n            } catch (e) {\n                //this should throw in the offline environment, thus we look for the worker at a different\n                this.teaworker = new Worker('../assCodeQuestion/js/teavm/worker.js')\n            }\n\n            this.teaworker.addEventListener('message', (e: any) => {\n                //console.log('teastuff', e.data)\n                if (e.data.command == 'ok' && e.data.id == 'didload-classlib') {\n                    if (this.teaworker) {\n                        this.teaworker.postMessage({\n                            command: 'compile',\n                            id: 'prep',\n                            text: 'public class Bootstrap { public static void main(String[] args){}}',\n                            mainClass: 'Bootstrap',\n                        })\n                    }\n                    this.isReady = true\n                    if (whenReady) {\n                        //console.log(\"loopback to initial caller\");\n                        whenReady()\n                    } else {\n                        this.$compilerState.setAllRunButtons(true)\n                        this.$compilerState.hideGlobalState()\n                    }\n                } else if (e.data.id == 'prep' && e.data.command == 'compilation-complete') {\n                    /* We could finish initialization here if there appear to be races when compiling multiple sources at once */\n                }\n            })\n\n            //bootstrap environment\n            this.teaworker.postMessage({\n                command: 'load-classlib',\n                id: 'didload-classlib',\n                url: 'classlib.txt',\n            })\n\n            return true\n        }\n\n        return false\n    }\n\n    sessionCompileListener: ((e: any) => void) | undefined = undefined\n    sessionID: string = '-1'\n    sessionWorker: any = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate: boolean = true\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        const start = Date.now()\n        let executionFinished = false\n        let booted = false\n\n        if (this.isRunning) {\n            err_callback('System is busy. Please wait until compilation finishes or call a tutor.')\n            return\n        }\n        this.isRunning = true\n        if (runCreate) {\n            if (\n                this.createTeaWorker(() => {\n                    this.isRunning = false\n                    this.compileAndRun(questionID, code, callingCodeBlocks, options, false)\n                })\n            ) {\n                return\n            }\n        }\n\n        if (!this.isReady) {\n            err_callback(\n                'System is not yet ready. Please wait until Initialization finishes or call a tutor.'\n            )\n            return\n        }\n\n        const compilerTimeout = setTimeout(() => {\n            if (!booted) {\n                const time = Date.now() - start\n\n                if (this.teaworker) {\n                    this.teaworker.end(\n                        'TimeoutError:  Compilation took too long (>' +\n                            time +\n                            'ms) and was terminated. Trying to reset the System. Please re-run your code and call a Tutor if this Problem persists.'\n                    )\n                }\n\n                this.teaworker = undefined\n            }\n        }, teaVMRunOverhead)\n\n        let text = code\n            .replace(/\"(?:[^\"\\\\]|\\\\.)*\"|\\/\\*[\\s\\S]*?\\*\\//gm, '')\n            .replace(/(^.*)\\/\\/.*$/gm, '$1') //replace strings and comments\n        //let text = code.replace(/\"(?:[^\"\\\\]+?|(?!\")\"|\\\\{2}|\\\\[\\s\\S])*?\"|^.*(\\/\\/.*$)|\\/\\*[\\s\\S]*?\\*\\//gm, ''); //replace strings and comments\n\n        text = text.replaceRec(/(\\{[^{}]*\\})/gm, '[]') //replace parentheses\n\n        const getMainClass = (_code: string) => {\n            let ret = 'Unknown'\n            //above replaces all {} with [], so look for public class <name> []\n            const regexpMainClass =\n                /public\\s+?class\\s+?([a-zA-Z_$0-9]+?)\\s*?(\\[|\\simplements|\\sextends)/gm\n            let match: RegExpExecArray | null\n            while ((match = regexpMainClass.exec(_code)) !== null) {\n                if (match[1]) {\n                    ret = match[1]\n                    break\n                }\n            }\n            return ret\n        }\n        let mainClass = getMainClass(text)\n        //fallback if the above regExps mangled the student code and we can not find the main class\n        if (mainClass == 'Unknown') {\n            mainClass = getMainClass(code.replace('{', '['))\n        }\n\n        //console.log(mainClass, code);\n        const myListener = (e: any) => {\n            //console.log('this.teaworker', questionID, e.data);\n            if (e.data.id == '' + questionID) {\n                if (e.data.command == 'phase') {\n                    if (e.data.phase == 'DEPENDENCY_ANALYSIS') {\n                        this.$compilerState.displayGlobalState(\n                            'Compiling & Analyzing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'LINKING') {\n                        this.$compilerState.displayGlobalState(\n                            'Linking <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'OPTIMIZATION') {\n                        this.$compilerState.displayGlobalState(\n                            'Optimizing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'RENDERING') {\n                        this.$compilerState.displayGlobalState(\n                            'Creating <b>' + mainClass + '.class</b>'\n                        )\n                    }\n                } else if (e.data.command == 'diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.text,\n                            start: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            end: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            severity:\n                                e.data.severity == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.text + '\\n'\n                    if (e.data.severity == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'compiler-diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.message,\n                            start: {\n                                line: e.data.startLineNumber,\n                                column: e.data.startColumn,\n                            },\n                            end: {\n                                line: e.data.endLineNumber,\n                                column: e.data.endColumn,\n                            },\n                            severity:\n                                e.data.kind == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.humanReadable + '\\n'\n                    if (e.data.kind == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'error') {\n                    if (this.teaworker) {\n                        this.teaworker.end('Error:  An internal compiler Error occured')\n                    }\n                    this.teaworker = undefined\n                } else if (e.data.command == 'compilation-complete') {\n                    booted = true\n                    let runTimeout: number | undefined = undefined\n                    if (this.teaworker) {\n                        this.teaworker.removeEventListener('message', myListener)\n                        this.sessionCompileListener = undefined\n                    }\n                    try {\n                        clearTimeout(compilerTimeout)\n                    } catch (e) {\n                        /* nothing to report */\n                    }\n\n                    if (e.data.status == 'errors') {\n                        finishedExecutionCB(false)\n                        this.isRunning = false\n                    } else {\n                        const runListener = (ee: any) => {\n                            //console.log('JAVA-WORKER-MSG', ee.data)\n                            //console.log('tearunner', questionID, ee.data);\n                            if (ee.data.command == 'run-finished-setup') {\n                                //Nothing to do here\n                            } else if (ee.data.command == 'run-completed') {\n                                finishedExecutionCB(true)\n\n                                console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n                                // info_callback(\n                                //     'Info: Execution finished in ' + (Date.now() - start) + ' ms\\n'\n                                // )\n                                executionFinished = true\n                                this.isRunning = false\n                                workerrun.end()\n                            } else if (ee.data.command == 'stdout') {\n                                log_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command == 'stderr') {\n                                err_callback(ee.data.line + '\\n')\n                            }\n                        }\n                        this.$compilerState.displayGlobalState('Executing <b>' + mainClass + '</b>')\n                        const workerrun = new Worker(\n                            `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/workerrun.js?&v=001`\n                        )\n                        this.sessionWorker = workerrun\n                        workerrun.addEventListener('message', runListener.bind(this))\n\n                        workerrun.postMessage({\n                            command: 'run',\n                            id: '' + questionID,\n                            code: e.data.script,\n                            args: args,\n                        })\n\n                        workerrun.end = (msg: string) => {\n                            this.sessionWorker = undefined\n                            //when we end it IS over, no matter how often we tried :)\n                            try {\n                                workerrun.terminate()\n                                if (runTimeout) {\n                                    clearTimeout(runTimeout)\n                                }\n                            } catch (e) {\n                                /* nothing to report */\n                            }\n\n                            if (executionFinished) {\n                                return\n                            }\n                            executionFinished = true\n                            finishedExecutionCB(false)\n                            this.isRunning = false\n                            if (msg) {\n                                err_callback(msg + '\\n')\n                            }\n                        }\n\n                        const runStart = Date.now()\n                        runTimeout = setTimeout(function () {\n                            const time = Date.now() - runStart\n                            workerrun.end(\n                                'TimeoutError:  Execution took too long (>' +\n                                    time +\n                                    'ms) and was terminated. There might be an endless loop in your code.'\n                            )\n                        }, max_ms)\n                    }\n                }\n            }\n        }\n\n        if (this.teaworker) {\n            this.sessionID = questionID\n            this.sessionCompileListener = myListener\n            this.teaworker.addEventListener('message', myListener)\n        }\n        //console.log(code);\n        this.$compilerState.setAllRunButtons(false)\n        this.$compilerState.displayGlobalState(\n            'Starting Compiler for <b>' + mainClass + '.java</b>'\n        )\n\n        if (this.teaworker) {\n            this.teaworker.postMessage({\n                command: 'compile',\n                id: '' + questionID,\n                text: code,\n                mainClass: mainClass,\n            })\n        }\n\n        if (this.teaworker) {\n            this.teaworker.end = (msg: string, terminate: boolean = true) => {\n                try {\n                    clearTimeout(compilerTimeout)\n                } catch (e) {\n                    //nothing to see here\n                }\n\n                if (booted) {\n                    return\n                }\n                if (this.teaworker && terminate) {\n                    console.log('TERMINATING')\n                    this.teaworker.terminate()\n                }\n                finishedExecutionCB(false)\n                this.isRunning = false\n                this.isReady = true\n                if (msg) {\n                    err_callback(msg + '\\n')\n                }\n            }\n        }\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.sessionWorker) {\n            this.sessionWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        } else if (this.teaworker) {\n            if (this.sessionCompileListener) {\n                // this.sessionCompileListener({\n                //     data: {\n                //         id: '' + this.sessionID,\n                //         command: 'compilation-complete',\n                //         status: 'errors',\n                //         errors: [Vue.$l('CodeBlocks.UserCanceled')]\n                //     }\n                // })\n                this.teaworker.removeEventListener('message', this.sessionCompileListener)\n                this.sessionCompileListener = undefined\n            }\n            this.teaworker.end(Vue.$l('CodeBlocks.UserCanceled'), false)\n        }\n    }\n}\n\nexport const javaCompiler_V100 = new JavaV100Compiler()\nexport default javaCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string, terminate?: boolean): void\n    }\n}\n\nconst teaVMRunOverhead = 30000\n\n//ICompilerInstance\n@Component\nexport class JavaV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'java'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = true\n    readonly deprecated = false\n    didPreload: boolean = false\n    teaworker: Worker | undefined = undefined\n    isReady = false\n    isRunning = false\n\n    preload() {\n        if (this.didPreload) {\n            return\n        }\n        this.didPreload = true\n        this.$compilerState.setAllRunButtons(false)\n\n        console.log(`[Preloading TeaVM ${this.version} for Java]`)\n        this.isRunning = true\n        this.createTeaWorker(() => {\n            this.isRunning = false\n            this.$compilerState.hideGlobalState()\n            this.$compilerState.setAllRunButtons(true)\n            //console.log('setAllRun', true)\n        })\n    }\n\n    private createTeaWorker(whenReady: () => void): boolean {\n        if (this.teaworker === undefined) {\n            this.$compilerState.setAllRunButtons(false)\n            this.$compilerState.displayGlobalState('Initializing Runtime')\n            try {\n                this.teaworker = new Worker(\n                    `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/worker.js`\n                )\n            } catch (e) {\n                //this should throw in the offline environment, thus we look for the worker at a different\n                this.teaworker = new Worker('../assCodeQuestion/js/teavm/worker.js')\n            }\n\n            this.teaworker.addEventListener('message', (e: any) => {\n                //console.log('teastuff', e.data)\n                if (e.data.command == 'ok' && e.data.id == 'didload-classlib') {\n                    if (this.teaworker) {\n                        this.teaworker.postMessage({\n                            command: 'compile',\n                            id: 'prep',\n                            text: 'public class Bootstrap { public static void main(String[] args){}}',\n                            mainClass: 'Bootstrap',\n                        })\n                    }\n                    this.isReady = true\n                    if (whenReady) {\n                        //console.log(\"loopback to initial caller\");\n                        whenReady()\n                    } else {\n                        this.$compilerState.setAllRunButtons(true)\n                        this.$compilerState.hideGlobalState()\n                    }\n                } else if (e.data.id == 'prep' && e.data.command == 'compilation-complete') {\n                    /* We could finish initialization here if there appear to be races when compiling multiple sources at once */\n                }\n            })\n\n            //bootstrap environment\n            this.teaworker.postMessage({\n                command: 'load-classlib',\n                id: 'didload-classlib',\n                url: 'classlib.txt',\n            })\n\n            return true\n        }\n\n        return false\n    }\n\n    sessionCompileListener: ((e: any) => void) | undefined = undefined\n    sessionID: string = '-1'\n    sessionWorker: any = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate: boolean = true\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n            keepAlive,\n        } = options\n        console.log(`[Starting TeaVM${options.keepAlive ? ' keepAlive' : ''}]`, args)\n        const start = Date.now()\n        let executionFinished = false\n        let booted = false\n\n        if (this.isRunning) {\n            err_callback('System is busy. Please wait until compilation finishes or call a tutor.')\n            return\n        }\n        this.isRunning = true\n        if (runCreate) {\n            if (\n                this.createTeaWorker(() => {\n                    this.isRunning = false\n                    this.compileAndRun(questionID, code, callingCodeBlocks, options, false)\n                })\n            ) {\n                return\n            }\n        }\n\n        if (!this.isReady) {\n            err_callback(\n                'System is not yet ready. Please wait until Initialization finishes or call a tutor.'\n            )\n            return\n        }\n\n        const compilerTimeout = setTimeout(() => {\n            if (!booted) {\n                const time = Date.now() - start\n\n                if (this.teaworker) {\n                    this.teaworker.end(\n                        'TimeoutError:  Compilation took too long (>' +\n                            time +\n                            'ms) and was terminated. Trying to reset the System. Please re-run your code and call a Tutor if this Problem persists.'\n                    )\n                }\n\n                this.teaworker = undefined\n            }\n        }, teaVMRunOverhead)\n\n        let text = code\n            .replace(/\"(?:[^\"\\\\]|\\\\.)*\"|\\/\\*[\\s\\S]*?\\*\\//gm, '')\n            .replace(/(^.*)\\/\\/.*$/gm, '$1') //replace strings and comments\n        //let text = code.replace(/\"(?:[^\"\\\\]+?|(?!\")\"|\\\\{2}|\\\\[\\s\\S])*?\"|^.*(\\/\\/.*$)|\\/\\*[\\s\\S]*?\\*\\//gm, ''); //replace strings and comments\n\n        text = text.replaceRec(/(\\{[^{}]*\\})/gm, '[]') //replace parentheses\n\n        const getMainClass = (_code: string) => {\n            let ret = 'Unknown'\n            //above replaces all {} with [], so look for public class <name> []\n            const regexpMainClass =\n                /public\\s+?class\\s+?([a-zA-Z_$0-9]+?)\\s*?(\\[|\\simplements|\\sextends)/gm\n            let match: RegExpExecArray | null\n            while ((match = regexpMainClass.exec(_code)) !== null) {\n                if (match[1]) {\n                    ret = match[1]\n                    break\n                }\n            }\n            return ret\n        }\n        let mainClass = getMainClass(text)\n        //fallback if the above regExps mangled the student code and we can not find the main class\n        if (mainClass == 'Unknown') {\n            mainClass = getMainClass(code.replace('{', '['))\n        }\n\n        //console.log(mainClass, code);\n        const myListener = (e: any) => {\n            //console.log('this.teaworker', questionID, e.data);\n            if (e.data.id == '' + questionID) {\n                if (e.data.command == 'phase') {\n                    if (e.data.phase == 'DEPENDENCY_ANALYSIS') {\n                        this.$compilerState.displayGlobalState(\n                            'Compiling & Analyzing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'LINKING') {\n                        this.$compilerState.displayGlobalState(\n                            'Linking <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'OPTIMIZATION') {\n                        this.$compilerState.displayGlobalState(\n                            'Optimizing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'RENDERING') {\n                        this.$compilerState.displayGlobalState(\n                            'Creating <b>' + mainClass + '.class</b>'\n                        )\n                    }\n                } else if (e.data.command == 'diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.text,\n                            start: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            end: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            severity:\n                                e.data.severity == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.text + '\\n'\n                    if (e.data.severity == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'compiler-diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.message,\n                            start: {\n                                line: e.data.startLineNumber,\n                                column: e.data.startColumn,\n                            },\n                            end: {\n                                line: e.data.endLineNumber,\n                                column: e.data.endColumn,\n                            },\n                            severity:\n                                e.data.kind == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.humanReadable + '\\n'\n                    if (e.data.kind == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'error') {\n                    if (this.teaworker) {\n                        this.teaworker.end('Error:  An internal compiler Error occured')\n                    }\n                    this.teaworker = undefined\n                } else if (e.data.command == 'compilation-complete') {\n                    booted = true\n                    let runTimeout: number | undefined = undefined\n                    if (this.teaworker) {\n                        this.teaworker.removeEventListener('message', myListener)\n                        this.sessionCompileListener = undefined\n                    }\n                    try {\n                        clearTimeout(compilerTimeout)\n                    } catch (e) {\n                        /* nothing to report */\n                    }\n\n                    if (e.data.status == 'errors') {\n                        finishedExecutionCB(false, undefined, options.args)\n                        this.isRunning = false\n                    } else {\n                        this.$compilerState.displayGlobalState('Executing <b>' + mainClass + '</b>')\n                        const workerrun = new Worker(\n                            `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/workerrun.js?&v=001`\n                        )\n                        this.sessionWorker = workerrun\n\n                        const runListener = (ee: any) => {\n                            //console.log('JAVA-WORKER-MSG', ee.data)\n                            console.d('tearunner message', questionID, ee.data, ee.data.command)\n                            if (ee.data.command == 'run-finished-setup') {\n                                //Nothing to do here\n                            } else if (\n                                ee.data.command == 'w-exit-keepalive' ||\n                                ee.data.command == 'exit-keepalive'\n                            ) {\n                                //Make sure a keep-alive session can do proper cleanup\n                                if (options.keepAlive) {\n                                    workerrun.postMessage({\n                                        command: 'session-ended',\n                                        id: '' + questionID,\n                                    })\n                                }\n                            } else if (ee.data.command == 'run-completed') {\n                                if (ee.data.args) {\n                                    options.args['return'] = ee.data.args\n                                }\n                                finishedExecutionCB(true, undefined, options.args['return'])\n\n                                console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n                                // info_callback(\n                                //     'Info: Execution finished in ' + (Date.now() - start) + ' ms\\n'\n                                // )\n                                executionFinished = true\n                                this.isRunning = false\n                                workerrun.end()\n                            } else if (ee.data.command == 'stdout') {\n                                log_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command == 'stderr') {\n                                err_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command.indexOf('w-') === 0) {\n                                //Message sent from the workter to the playground\n                                const cmd = ee.data.command.substr(2)\n                                ee.data.command = cmd\n                                options.didReceiveMessage(cmd, ee.data)\n                            } else if (ee.data.command == 'main-finished') {\n                                console.d('MESSAGE - Main Finished')\n                                //set up the real message handler\n                                options.postMessageFunction = (cmd, data) => {\n                                    data = { ...data }\n                                    console.d('MESSAGE - TeaVM Post ', cmd, data)\n                                    data.command = cmd\n                                    data.id = questionID\n                                    wr.postMessage(data)\n                                }\n\n                                options.postMessageFunction('main-finished', {})\n\n                                //make sure to send all queued messages now\n                                options.dequeuePostponedMessages()\n\n                                options.whenFinishedHandler(ee.data.args)\n                            } else if (ee.data.command == 'main-will-start') {\n                                options.beforeStartHandler()\n                            } else if (ee.data.command == 'f-FINAL') {\n                                options.resultData = JSON.parse(ee.data.value)\n                            } else {\n                                console.log('Unknown Message', ee.data)\n                            }\n                        }\n\n                        workerrun.addEventListener('message', runListener.bind(this))\n\n                        workerrun.postMessage({\n                            command: 'run',\n                            id: '' + questionID,\n                            code: e.data.script,\n                            args: args,\n                            messagePosting: options.allowMessagePassing,\n                            keepAlive: options.keepAlive,\n                        })\n                        const wr = workerrun\n\n                        workerrun.end = (msg: string) => {\n                            this.sessionWorker = undefined\n                            //when we end it IS over, no matter how often we tried :)\n                            try {\n                                workerrun.terminate()\n                                if (runTimeout) {\n                                    clearTimeout(runTimeout)\n                                }\n                            } catch (e) {\n                                /* nothing to report */\n                            }\n\n                            if (executionFinished) {\n                                return\n                            }\n                            executionFinished = true\n                            finishedExecutionCB(false, undefined, options.args)\n                            this.isRunning = false\n                            if (msg) {\n                                err_callback(msg + '\\n')\n                            }\n                        }\n\n                        const runStart = Date.now()\n                        if (!keepAlive) {\n                            runTimeout = setTimeout(function () {\n                                const time = Date.now() - runStart\n                                workerrun.end(\n                                    'TimeoutError:  Execution took too long (>' +\n                                        time +\n                                        'ms) and was terminated. There might be an endless loop in your code.'\n                                )\n                            }, max_ms)\n                        }\n                    }\n                }\n            }\n        }\n\n        if (this.teaworker) {\n            this.sessionID = questionID\n            this.sessionCompileListener = myListener\n            this.teaworker.addEventListener('message', myListener)\n        }\n        //console.log(code);\n        this.$compilerState.setAllRunButtons(false)\n        this.$compilerState.displayGlobalState(\n            'Starting Compiler for <b>' + mainClass + '.java</b>'\n        )\n\n        if (this.teaworker) {\n            this.teaworker.postMessage({\n                command: 'compile',\n                id: '' + questionID,\n                text: code,\n                mainClass: mainClass,\n            })\n        }\n\n        if (this.teaworker) {\n            this.teaworker.end = (msg: string, terminate: boolean = true) => {\n                try {\n                    clearTimeout(compilerTimeout)\n                } catch (e) {\n                    //nothing to see here\n                }\n\n                if (booted) {\n                    return\n                }\n                if (this.teaworker && terminate) {\n                    console.log('TERMINATING')\n                    this.teaworker.terminate()\n                }\n                finishedExecutionCB(false, undefined, options.args)\n                this.isRunning = false\n                this.isReady = true\n                if (msg) {\n                    err_callback(msg + '\\n')\n                }\n            }\n        }\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.sessionWorker) {\n            this.sessionWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        } else if (this.teaworker) {\n            if (this.sessionCompileListener) {\n                // this.sessionCompileListener({\n                //     data: {\n                //         id: '' + this.sessionID,\n                //         command: 'compilation-complete',\n                //         status: 'errors',\n                //         errors: [Vue.$l('CodeBlocks.UserCanceled')]\n                //     }\n                // })\n                this.teaworker.removeEventListener('message', this.sessionCompileListener)\n                this.sessionCompileListener = undefined\n            }\n            this.teaworker.end(Vue.$l('CodeBlocks.UserCanceled'), false)\n        }\n    }\n}\n\nexport const javaCompiler_V101 = new JavaV101Compiler()\nexport default javaCompiler_V101\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v001 from './doppio.v001'\nimport v100 from './teavm.v100'\nimport v101 from './teavm.v101'\n\n@Component\nexport class JavaCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'java'\n    displayName = 'Java'\n\n    //attach all version\n    versions = [v001, v100, v101]\n\n    //declare the default one\n    default = v100\n}\n\nexport const JavaCompilers: ICompilerInfo[] | ICompilerInfo = new JavaCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\n//function runJavaScriptWorker( code, log_callback, max_ms, questionID){\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    max_ms: number,\n    log_callback: (txt: string) => void,\n    info_callback: (txt: string) => void,\n    err_callback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishedExecutionCB: finishedCallbackSignatur\n) {\n    log_callback('')\n\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const not_allowed_keywords = ['postMessage', 'close', 'onmessage', 'debugger'] // blacklist (can be evaded, ... see below)\n    for (const key in not_allowed_keywords) {\n        if (code.indexOf(not_allowed_keywords[key]) != -1) {\n            // the user is not allowed to use the functionallity of the WebWorker\n            err_callback(\n                \"PermissionError: The usage of '\" +\n                    not_allowed_keywords[key] +\n                    \"' is not allowed (reserved keyword)!\"\n            )\n            return\n        }\n    }\n    const lines = code.split('\\n').length\n\n    // The user-code is sourrounded by webworker start and finish code (one line each)\n    // additionally, the console.log fnc is replaced, because the original log fnc is consuming much cpu ressources,\n    //      and continues logging, even after the worker was terminated.\n\n    const prefixCode = [\n        'for(var c in console) console[c]=null;', //delete all console functionality\n        \"for(var t in this) if(t!='close' && t!='postMessage' && t!='console') this[t]=null;\", //delete all worker functionality\n        'this.console = {};',\n        'console.log = function(s){', // only allow .log , .warn\n        \"   postMessage(['log',''+s]);\",\n        '};',\n        'console.error = function(s){', // only allow .error\n        \"   postMessage(['err',''+s]);\",\n        '};',\n        'console.warn = console.log;',\n        'onmessage = function(input){',\n        \"   postMessage(['finished',\",\n        \"   ''+(function(input){\",\n        \"           'use strict';\",\n        '\\n',\n    ]\n    const postfixCode = ['\\n', '})(input.data[1])]);', '   close();', '};']\n    code = prefixCode.join('') + code + postfixCode.join('')\n\n    //TODO:: creating a WebWorker from an URL is throwing a SecurityError in  IE 11  ...\n    //          is there any workaround?\n    const worker = new Worker(URL.createObjectURL(new Blob([code], { type: 'text/javascript' })))\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishedExecutionCB(false)\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n    }\n\n    const start = Date.now()\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                time +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > max_ms) {\n            testTimeout\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n\n        testTimeoutIntern()\n        if (e.data[0] == 'finished') {\n            finishedExecutionCB(true)\n            info_callback('Info: Execution finished in ' + (Date.now() - start) + ' ms\\n')\n            worker.end()\n        } else if (e.data[0] == 'log') {\n            log_callback(e.data[1] + '\\n')\n        } else if (e.data[0] == 'err') {\n            err_callback(e.data[1] + '\\n')\n        } else {\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n    worker.onerror = function (e) {\n        if (e.lineno == 1) {\n            compileFailedCallback({\n                start: { line: -1, column: -1 },\n                end: { line: -1, column: -1 },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('Error: ' + e.message)\n        } else if (e.lineno >= lines + 2) {\n            compileFailedCallback({\n                start: { line: lines + 2, column: 0 },\n                end: { line: lines + 2, column: 0 },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('EndOfFile: ' + e.message)\n        } else {\n            compileFailedCallback({\n                start: { line: e.lineno - 2, column: e.colno - 1 },\n                end: { line: e.lineno - 2, column: e.colno },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('Line ' + (e.lineno - 2) + ': ' + e.message)\n        }\n    }\n    worker.postMessage(['start', [10, 200]]) //start worker execution\n\n    setTimeout(testTimeout, max_ms)\n}\n\n//ICompilerInstance\n@Component\nexport class JavascriptV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = true\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runJavaScriptWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const javascriptCompiler_V100 = new JavascriptV100Compiler()\nexport default javascriptCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string): void\n    }\n}\n\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    max_ms: number,\n    log_callback: (txt: string) => void,\n    info_callback: (txt: string) => void,\n    err_callback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishedExecutionCB: finishedCallbackSignatur,\n    args: object\n): Worker | undefined {\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/javascript/v101/jsWorker.js')\n\n    worker.onmessage = function (msg) {\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms) {\n            triggerTimeout()\n        }\n\n        switch (msg.data[0]) {\n            case 'finished':\n                if (msg && msg.data && msg.data.length >= 3) {\n                    args['return'] = msg.data[2]\n                } else {\n                    args['return'] = {}\n                }\n                console.d('returned msg:', msg, ', args:', args)\n                executionFinished = true\n                finishedExecutionCB(true, undefined, args['return'])\n                console.i('Execution finished in ' + time + ' ms\\n')\n                //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n                worker.end()\n                break\n            case 'log':\n                log_callback(msg.data[1] + '\\n')\n                break\n            case 'err':\n                err_callback(msg.data[1] + '\\n')\n                break\n            default:\n                worker.end(\n                    'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n                )\n                break\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                (performance.now() - startTime) +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const startExecution = function (args: object) {\n        //start worker execution\n        worker.postMessage(['start', { code: code, args: args }])\n\n        //stop Worker execution when the time limit is exceeded;\n        setTimeout(triggerTimeout, max_ms)\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage(['importD3'])\n                    startExecution(args)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage(['importBrain'])\n                startExecution(args)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args)\n    }\n\n    return worker\n}\n@Component\nexport class JavascriptV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly isReady = true\n    isRunning = false\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    libraries = [\n        {\n            key: 'd3-101',\n            name: 'd3',\n            version: '5.14.3',\n            displayName: 'D3 - Proxy',\n        },\n        {\n            key: 'brain-2.0.0',\n            name: 'Brain.js',\n            version: '2.0.0-alpha',\n            displayName: 'Brain.js',\n        },\n    ]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void {\n        compilerRegistry.registerDOMLib(\n            [Vue.$CodeBlock.baseurl + 'js/javascript/v101/d3DomProxyToHTML.js'],\n            'd3proxy',\n            '101',\n            'D3 - Proxy',\n            true //makes it a utility lib => not selectable by users\n        )\n    }\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runJavaScriptWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const javascriptCompiler_V101 = new JavascriptV101Compiler()\nexport default javascriptCompiler_V101\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string): void\n    }\n}\n\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    options: ICompileAndRunArguments\n): Worker | undefined {\n    const {\n        max_ms,\n        log_callback,\n        info_callback,\n        err_callback,\n        compileFailedCallback,\n        finishedExecutionCB,\n        args,\n        keepAlive,\n    } = options\n\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/javascript/v102/jsWorker.js')\n\n    worker.onmessage = function (msg: any) {\n        console.d('jsrunner message', questionID, executionFinished, msg.data, msg.data.command)\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms && !keepAlive) {\n            triggerTimeout()\n        }\n\n        if (msg.data.command == 'finished') {\n            if (options.allowMessagePassing) {\n                options.whenFinishedHandler(msg.data.args)\n            }\n            if (msg && msg.data && msg.data.args) {\n                args['return'] = msg.data.args\n            } else {\n                args['return'] = {}\n            }\n            console.d('returned msg:', msg, ', args:', args)\n            executionFinished = true\n            finishedExecutionCB(true, undefined, args['return'])\n            console.i('Execution finished in ' + time + ' ms\\n')\n            //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n            worker.end()\n        } else if (msg.data.command == 'log') {\n            log_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'err') {\n            err_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'main-will-start') {\n            options.beforeStartHandler()\n        } else if (msg.data.command == 'main-finished') {\n            console.d('MESSAGE - Main Finished')\n            //set up the real message handler\n            options.postMessageFunction = (cmd, data) => {\n                data = { ...data }\n                console.d('MESSAGE - JS Post ', cmd, data)\n                data.command = cmd\n                data.id = questionID\n                worker.postMessage(data)\n            }\n\n            options.postMessageFunction('main-finished', {})\n\n            //make sure to send all queued messages now\n            options.dequeuePostponedMessages()\n\n            options.whenFinishedHandler(msg.data.args)\n        } else if (msg.data.command == 'w-exit-keepalive' || msg.data.command == 'exit-keepalive') {\n            //Make sure a keep-alive session can do proper cleanup\n            if (options.keepAlive) {\n                worker.postMessage({\n                    command: 'session-ended',\n                    id: '' + questionID,\n                })\n            }\n        } else if (msg.data.command.indexOf('w-') == 0) {\n            msg.data.command = msg.data.command.substr(2)\n        } else if (msg.data.command == 'f-FINAL') {\n            options.resultData = msg.data.value\n        } else {\n            console.i('MESSAGE - ', msg.data)\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                (performance.now() - startTime) +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const startExecution = function (args: object, options: ICompileAndRunArguments) {\n        //start worker execution\n        worker.postMessage({\n            command: 'start',\n            code: code,\n            args: args,\n            messagePosting: options.allowMessagePassing,\n            keepAlive: options.keepAlive,\n        })\n\n        if (!keepAlive) {\n            //stop Worker execution when the time limit is exceeded;\n            setTimeout(triggerTimeout, max_ms)\n        }\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage({ command: 'importD3' })\n                    startExecution(args, options)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importBrain' })\n                startExecution(args, options)\n            })\n        } else if (l === 'tf-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importTF' })\n                startExecution(args, options)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args, options)\n    }\n\n    return worker\n}\n@Component\nexport class JavascriptV102Compiler extends Vue implements ICompilerInstance {\n    readonly version = '102'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly isReady = true\n    isRunning = false\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = true\n    readonly deprecated = false\n    libraries = [\n        {\n            key: 'd3-101',\n            name: 'd3',\n            version: '5.14.3',\n            displayName: 'D3 - Proxy',\n        },\n        {\n            key: 'brain-2.0.0',\n            name: 'Brain.js',\n            version: '2.0.0-alpha',\n            displayName: 'Brain.js',\n        },\n        {\n            key: 'tf-2.0.0',\n            name: 'tf',\n            version: '2.0.0',\n            displayName: 'TensorFlow.js',\n        },\n    ]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void {\n        compilerRegistry.registerDOMLib(\n            [Vue.$CodeBlock.baseurl + 'js/javascript/v101/d3DomProxyToHTML.js'],\n            'd3proxy',\n            '101',\n            'D3 - Proxy',\n            true //makes it a utility lib => not selectable by users\n        )\n    }\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        this.worker = runJavaScriptWorker(questionID, code, callingCodeBlocks, options)\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const javascriptCompiler_V102 = new JavascriptV102Compiler()\nexport default javascriptCompiler_V102\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v100 from './javascript.v100'\nimport v101 from './javascript.v101'\nimport v102 from './javascript.v102'\n\n@Component\nexport class JavascriptCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'javascript'\n    displayName = 'JavaScript'\n\n    //attach all version\n    versions = [v100, v101, v102]\n\n    //declare the default one\n    default = v101\n}\n\nexport const JavascriptCompilers: ICompilerInfo[] | ICompilerInfo = new JavascriptCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runPythonWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur\n) {\n    // the Python program\n    prog = prog.replaceAllPoly('\\t', '    ')\n\n    if (!window.Worker) {\n        errCallback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v100/pyWorker.js')\n\n    // construct message for worker\n    const pyInp = [] // not used jet\n\n    const messageData = { pyProg: prog, pyInp: pyInp, maxMS: maxRuntime }\n    worker.postMessage(['b8e493ca02970aeb0ef734555526bf9b', messageData])\n    const start = Date.now()\n\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (> ' +\n                time +\n                ' ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > maxRuntime) {\n            testTimeout()\n            return true\n        }\n        return false\n    }\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishCallback(false)\n        if (msg) {\n            errCallback(msg)\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n        if (testTimeoutIntern() === true) {\n            return\n        }\n        if (e.data[0] == 'finished') {\n            logCallback(e.data[1].stdOut)\n            finishCallback(true)\n            infoCallback('Info: Execution finished in : ' + (Date.now() - start) + ' ms')\n            worker.end()\n        } else if (e.data[0] === 'err') {\n            const err = JSON.parse(e.data[2])\n            if (err && err.lineno !== undefined && err.colno !== undefined) {\n                compileFailedCallback({\n                    start: { line: err.lineno - 1, column: err.colno },\n                    end: { line: err.lineno - 1, column: err.colno + 1 },\n                    message: err.message,\n                    severity: ErrorSeverity.Error,\n                })\n            } else {\n                if (err && err.lineno !== undefined) {\n                    compileFailedCallback({\n                        start: { line: err.lineno - 1, column: 0 },\n                        end: { line: err.lineno - 1, column: 0 },\n                        message: err.message,\n                        severity: ErrorSeverity.Error,\n                    })\n                }\n            }\n            worker.end('ERROR: ' + e.data[1])\n        } else {\n            worker.end('Unknown error: ' + e.data[1])\n        }\n    }\n    // in any case use the window timeout to terminate the worker\n    setTimeout(testTimeout, maxRuntime)\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = true\n    isReady = true\n    isRunning = false\n\n    preload() {}\n\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const pythonCompiler_V100 = new PythonV100Compiler()\nexport default pythonCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runPythonWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur,\n    legacy: boolean\n): Worker | undefined {\n    console.log('Python Version:', legacy ? '2.7' : '3')\n\n    // the Python program\n    prog = prog.replaceAllPoly('\\t', '    ')\n\n    if (!window.Worker) {\n        errCallback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v101/pyWorker.js')\n\n    // construct message for worker\n    const pyInp = [] // not used jet\n\n    const messageData = {\n        pyProg: prog,\n        pyInp: pyInp,\n        maxMS: maxRuntime,\n        legacy: legacy,\n    }\n    worker.postMessage(['b8e493ca02970aeb0ef734556526bf9b', messageData])\n    const start = Date.now()\n\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (> ' +\n                time +\n                ' ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > maxRuntime) {\n            testTimeout()\n            return true\n        }\n        return false\n    }\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishCallback(false)\n        if (msg) {\n            errCallback(msg)\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n        if (testTimeoutIntern() === true) {\n            return\n        }\n        if (e.data[0] == 'finished') {\n            logCallback(e.data[1].stdOut)\n            finishCallback(true)\n            console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n            //infoCallback('Info: Execution finished in : ' + (Date.now() - start) + ' ms')\n            worker.end()\n        } else if (e.data[0] === 'err') {\n            const err = JSON.parse(e.data[2])\n            if (err && err.lineno !== undefined && err.colno !== undefined) {\n                compileFailedCallback({\n                    start: {\n                        line: err.lineno - 1,\n                        column: err.colno,\n                    },\n                    end: {\n                        line: err.lineno - 1,\n                        column: err.colno + 1,\n                    },\n                    message: err.message,\n                    severity: ErrorSeverity.Error,\n                })\n            } else {\n                if (err && err.lineno !== undefined) {\n                    compileFailedCallback({\n                        start: {\n                            line: err.lineno - 1,\n                            column: 0,\n                        },\n                        end: {\n                            line: err.lineno - 1,\n                            column: 0,\n                        },\n                        message: err.message,\n                        severity: ErrorSeverity.Error,\n                    })\n                }\n            }\n            worker.end('ERROR: ' + e.data[1])\n        } else {\n            worker.end('Unknown error: ' + e.data[1])\n        }\n    }\n    // in any case use the window timeout to terminate the worker\n    setTimeout(testTimeout, maxRuntime)\n\n    return worker\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV101LegacyCompiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            true\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            false\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const pythonCompiler_V101 = new PythonV101Compiler()\nexport const pythonLegacyCompiler_V101 = new PythonV101LegacyCompiler()\n\nexport default {\n    legacyPython: pythonLegacyCompiler_V101,\n    python3: pythonCompiler_V101,\n}\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n    IReplInstance,\n} from '@/lib/ICompilerRegistry'\n\ninterface REPLWorker extends Worker {\n    interpreter: any\n}\n\nlet spareWorker: REPLWorker | undefined\nlet runningWorker: REPLWorker | undefined\n\nfunction getWorker(setReady: (boolean) => void) {\n    if (!window.Worker) {\n        return undefined\n    }\n\n    setReady(false)\n    if (runningWorker !== undefined) {\n        console.d('FORCE STOPPING ON RERUN')\n        runningWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        runningWorker = undefined\n    }\n\n    runningWorker = spareWorker\n    console.i('Starting Spare Pyodide Server')\n    spareWorker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v102/pyWorker.js') as REPLWorker\n    spareWorker.onmessage = function (msg: any) {\n        if (msg.data.command == 'finished-init') {\n            setReady(true)\n        }\n    }\n    spareWorker.interpreter = () => {}\n    spareWorker.postMessage({\n        command: 'initialize',\n        id: '0',\n    })\n    return runningWorker\n}\n\nfunction runPythonWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    options: ICompileAndRunArguments,\n    setReady: (boolean) => void\n): REPLWorker | undefined {\n    const {\n        max_ms,\n        log_callback,\n        info_callback,\n        err_callback,\n        compileFailedCallback,\n        finishedExecutionCB,\n        args,\n        keepAlive,\n    } = options\n\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = getWorker(setReady)\n    if (worker === undefined) {\n        err_callback('CRITICAL-ERROR: Unable to get background worker.')\n        return\n    }\n\n    worker.onmessage = function (msg: any) {\n        console.d('pyrunner message', questionID, executionFinished, msg.data, msg.data.command)\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms && !keepAlive) {\n            triggerTimeout()\n        }\n\n        if (msg.data.command == 'finished') {\n            if (options.allowMessagePassing) {\n                options.whenFinishedHandler(msg.data.args)\n            }\n            if (msg && msg.data && msg.data.args) {\n                args['return'] = msg.data.args\n            } else {\n                args['return'] = {}\n            }\n            console.d('returned msg:', msg, ', args:', args)\n            executionFinished = true\n            finishedExecutionCB(true, undefined, args['return'])\n            console.i('Execution finished in ' + time + ' ms\\n')\n            //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n            worker.end()\n        } else if (msg.data.command == 'exception') {\n            if (compileFailedCallback) {\n                compileFailedCallback({\n                    message: msg.data.text,\n                    start: {\n                        line: msg.data.lineNumber,\n                        column: 0,\n                    },\n                    end: {\n                        line: msg.data.lineNumber,\n                        column: 0,\n                    },\n                    severity:\n                        msg.data.severity == 'ERROR' ? ErrorSeverity.Error : ErrorSeverity.Warning,\n                })\n            }\n        } else if (msg.data.command == 'log') {\n            log_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'err') {\n            err_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'loaded-imports') {\n            if (spareWorker !== undefined) {\n                spareWorker.postMessage({\n                    command: 'preload-imports',\n                    names: msg.data.names,\n                })\n            }\n        } else if (msg.data.command == 'main-will-start') {\n            options.beforeStartHandler()\n        } else if (msg.data.command == 'main-finished') {\n            console.d('MESSAGE - Main Finished')\n            //set up the real message handler\n            options.postMessageFunction = (cmd, data) => {\n                data = { ...data }\n                console.d('MESSAGE - JS Post ', cmd, data)\n                data.command = cmd\n                data.id = questionID\n                worker.postMessage(data)\n            }\n\n            options.postMessageFunction('main-finished', {})\n\n            //make sure to send all queued messages now\n            options.dequeuePostponedMessages()\n\n            options.whenFinishedHandler(msg.data.args)\n        } else if (msg.data.command == 'interpreter') {\n            worker.interpreter(msg.data)\n        } else if (msg.data.command == 'w-exit-keepalive' || msg.data.command == 'exit-keepalive') {\n            //Make sure a keep-alive session can do proper cleanup\n            if (options.keepAlive) {\n                worker.postMessage({\n                    command: 'session-ended',\n                    id: '' + questionID,\n                })\n            }\n        } else if (msg.data.command.indexOf('w-') == 0) {\n            msg.data.command = msg.data.command.substr(2)\n        } else {\n            console.i('MESSAGE - ', msg.data)\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        if (worker !== undefined) {\n            worker.end(\n                'TimeoutError:  Execution took too long (>' +\n                    (performance.now() - startTime) +\n                    'ms) and was terminated. There might be an endless loop in your code.'\n            )\n        }\n    }\n\n    const startExecution = function (args: object, options: ICompileAndRunArguments) {\n        //start worker execution\n        worker.postMessage({\n            command: 'start',\n            code: code,\n            args: args,\n            messagePosting: options.allowMessagePassing,\n            keepAlive: options.keepAlive,\n            withREPL: options.withREPL,\n        })\n\n        //stop Worker execution when the time limit is exceeded;\n        if (!keepAlive) {\n            setTimeout(triggerTimeout, max_ms)\n        }\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage({ command: 'importD3' })\n                    startExecution(args, options)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importBrain' })\n                startExecution(args, options)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args, options)\n    }\n\n    return worker\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV102Compiler extends Vue implements ICompilerInstance, IReplInstance {\n    readonly version = '102'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = true\n    readonly experimental = true\n    readonly deprecated = false\n    isReady = false\n    isRunning = false\n\n    preload() {\n        getWorker(this.setReady.bind(this)) //this will initialize our first worker\n    }\n\n    private setReady(val: boolean) {\n        console.i('Changing READY-State to ' + val)\n        this.isReady = val\n    }\n\n    private worker: REPLWorker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            options,\n            this.setReady.bind(this)\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n\n    async interpreter(command, onStateChange, onLog, onError) {\n        const self = this\n        return new Promise<object>((resolve, reject) => {\n            if (self.worker === undefined) {\n                reject('Interpreter not Running')\n                return\n            }\n\n            self.worker.interpreter = (msg) => {\n                console.log('Message: ' + msg)\n                switch (msg.sub) {\n                    case 'did-push':\n                        onStateChange(msg.incomplete)\n                        break\n                    case 'out':\n                        onLog(msg.value)\n                        break\n                    case 'err':\n                        onError(msg.value)\n                        break\n                    case 'exception':\n                        if (msg.fatal) {\n                            reject(msg.value)\n                        } else {\n                            onError(msg.value)\n                        }\n                        break\n                    case 'finished':\n                        resolve({})\n                        break\n                    default:\n                        console.log('Unknown Message: ' + msg.sub)\n                }\n            }\n\n            self.worker.postMessage({\n                command: 'interpreter',\n                code: command,\n            })\n        })\n    }\n}\n\nexport const pythonCompiler_V102 = new PythonV102Compiler()\n\nexport default {\n    python3: pythonCompiler_V102,\n}\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v100 from './python.v100'\nimport v101 from './python.v101'\nimport v102 from './python.v102'\n\n@Component\nexport class PythonCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'python'\n    displayName = 'Python 2.7'\n\n    //attach all version\n    versions = [v100, v101.legacyPython]\n\n    //declare the default one\n    default = v101.legacyPython\n}\n\n@Component\nexport class Python3CompilerInfo extends Vue implements ICompilerInfo {\n    type = 'python3'\n    displayName = 'Python 3'\n\n    //attach all version\n    versions = [v101.python3, v102.python3]\n\n    //declare the default one\n    default = v101.python3\n}\n\nexport const PythonCompilers: ICompilerInfo[] | ICompilerInfo = [\n    new PythonCompilerInfo(),\n    new Python3CompilerInfo(),\n]\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runGLSLWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur\n) {\n    const outputData: string[] = []\n    callingCodeBlocks.blocks\n        .filter((b) => b.hasCode)\n        .forEach((block) => outputData.push(block.content))\n    /*$(\"[data-contains-code][data-question=\"+questionID+\"]\").each(function(i, block) {\n        if (block.getAttribute('data-ignore')) return;\n        if (!blockHasProgramCode(block)) return;\n        const editor = editors[block.id];\n        if (editor) {\n            outputData.push(block.value);\n        } else {\n            outputData.push(block.innerHTML);\n        }\n    });*/\n    finishCallback(true, outputData)\n}\n\n@Component\nexport class GLSLV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'glsl'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly acceptsJSONArgument = false\n    readonly allowsMessagePassing = false\n    readonly allowsREPL = false\n    readonly deprecated = false\n    readonly experimental = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runGLSLWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const v100 = new GLSLV100Compiler()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport { v100 } from './glsl.v100'\n\n@Component\nexport class GLSLCompilerInfo extends Vue implements ICompilerInfo {\n    readonly type = 'glsl'\n    readonly displayName = 'GLSL Shader'\n\n    //attach all version\n    readonly versions = [v100]\n\n    //declare the default one\n    readonly default = v100\n}\n\nexport const GLSLCompilers: ICompilerInfo[] | ICompilerInfo = new GLSLCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    ICompilerHashMap,\n    IDomLibraray,\n    ICompilerID,\n    ICompilerInfo,\n    IListItemData,\n    ICompilerInstance,\n    ICompilerRegistry,\n    ICompilerIDQuery,\n    IUpdateMappingMap,\n} from './ICompilerRegistry'\n\n//prepare Compiler Registry\n@Component\nexport class CompilerRegistry extends Vue implements ICompilerRegistry {\n    compilers: ICompilerHashMap = {}\n    libraries: IDomLibraray[] = []\n    loadedURIs: string[] = []\n    public updateMappings: IUpdateMappingMap = {}\n    afterLoadFinished: (() => void)[] = []\n    isLoadingLibs = false\n\n    get languages(): IListItemData[] {\n        const langs = Object.keys(this.compilers)\n            .map((k) => this.compilers[k])\n            .map((c) => {\n                return { label: c.displayName, value: c.type }\n            })\n            .sort((a, b) => (a.label < b.label ? -1 : 1))\n        return langs\n    }\n\n    get domLibraries(): IListItemData[] {\n        const libs: IDomLibraray[] = this.libraries.filter((l) => !l.utility)\n        return libs.map((l) => {\n            return { label: l.displayName + ' (' + l.version + ')', value: l.key }\n        })\n    }\n\n    register(compilers: ICompilerInfo[] | ICompilerInfo): void {\n        if (Array.isArray(compilers)) {\n            compilers.forEach((c) => this.registerSingle(c))\n        } else {\n            this.registerSingle(compilers)\n        }\n    }\n\n    registerSingle(c: ICompilerInfo): void {\n        this.compilers[c.type] = c\n        c.versions.forEach((v) => {\n            if (v.registerLibs) {\n                v.registerLibs(this)\n            }\n        })\n    }\n\n    getCompiler(compilerInfo: ICompilerIDQuery): ICompilerInstance | undefined {\n        const cmps = this.compilers[compilerInfo.languageType]\n        if (!cmps) {\n            return undefined\n        }\n        if (compilerInfo.version === undefined) {\n            return cmps.default\n        }\n        let res = cmps.versions.find((e) => e.version == compilerInfo.version)\n        if (res === undefined) {\n            res = cmps.default\n        }\n        return res\n    }\n\n    versionsForLanguage(languageType: string): string[] | ['none'] {\n        const c = this.compilers[languageType]\n        if (c === undefined) {\n            return ['none']\n        }\n        return c.versions.map((v) => v.version)\n    }\n\n    addUpdateMapping(name: string, oldVersion: string, newVersion: string) {\n        const oldName = `${name}-${oldVersion}`\n        const newName = `${name}-${newVersion}`\n        this.updateMappings[oldName] = newName\n    }\n\n    mapLibrary(loadedName: string): string {\n        const name = this.updateMappings[loadedName]\n        return name === undefined ? loadedName : name\n    }\n\n    registerDOMLib(\n        uri: string[],\n        name: string,\n        version: string,\n        displayName: string,\n        utility: boolean = false,\n        order: number = 0,\n        onBuildSandboxEnv: (sandbox: any) => void = () => {}\n    ): void {\n        this.libraries.push({\n            key: name + '-' + version,\n            uri: uri,\n            name: name,\n            version: version,\n            displayName: displayName,\n            didLoad: false,\n            utility: utility,\n            order: order,\n            onBuildSandboxEnv: onBuildSandboxEnv,\n        })\n    }\n\n    addLoadedToSandbox(sandbox: any) {\n        this.libraries.filter((l) => l.didLoad).forEach((l) => l.onBuildSandboxEnv(sandbox))\n    }\n\n    getLibObjects(domLibs: string[]): IDomLibraray[] {\n        return this.libraries.filter((l) => domLibs.indexOf(l.key) >= 0)\n    }\n\n    urisForDOMLibs(domLibs: string[]): string[] {\n        const libs = this.getLibObjects(domLibs)\n        const uris = libs\n            .filter((l) => !l.didLoad)\n            .sort((a, b) => (a.order < b.order ? 1 : -1))\n            .map((l) => l.uri)\n            .reduce((p, c) => c.concat(p), [])\n\n        return uris\n    }\n    loadLibraries(domLibraries: string[], whenLoaded: () => void): void {\n        const libs = this.urisForDOMLibs(domLibraries)\n        const dlibs = this.getLibObjects(domLibraries)\n        this.loadURIs(\n            libs,\n            function () {\n                dlibs.forEach((l) => (l.didLoad = true))\n                whenLoaded()\n            }.bind(this)\n        )\n    }\n    private loadURIsIter(libs: string[], whenLoaded: () => void): void {\n        console.log(libs)\n        let loadCount = 0\n        const didLoad = (u: string) => {\n            loadCount++\n            if (loadCount == libs.length) {\n                whenLoaded()\n            }\n        }\n        libs.forEach((uri: string) => {\n            if (this.loadedURIs.indexOf(uri) >= 0) {\n                didLoad(uri)\n                return\n            }\n            this.loadedURIs.push(uri)\n\n            const script = document.createElement('script')\n            script.src = uri\n            console.log('[Loading Library from ' + uri + ']')\n            script.onload = function () {\n                console.log('[Loaded ' + uri + ']')\n                didLoad(uri)\n            }\n            document.head.appendChild(script)\n        })\n    }\n\n    private loadURIs(libs: string[], whenLoaded: () => void): void {\n        //make sure we serialize all loads !!!\n        if (this.isLoadingLibs) {\n            //queue the load\n            this.afterLoadFinished.push(() => {\n                this.loadURIs(libs, whenLoaded)\n            })\n            return\n        }\n        this.isLoadingLibs = true\n\n        const self = this\n\n        const loadLib = function (uris, idx) {\n            if (idx >= uris.length) {\n                whenLoaded()\n\n                //something tried to queue another load\n                // => dequeu it and run it now\n                self.isLoadingLibs = false\n                if (self.afterLoadFinished.length > 0) {\n                    const next = self.afterLoadFinished.shift()\n                    if (next) {\n                        next()\n                    }\n                }\n                return\n            }\n\n            const uri = uris[idx]\n\n            //already loaded\n            if (self.loadedURIs.indexOf(uri) >= 0) {\n                loadLib(uris, idx + 1)\n                return\n            }\n            self.loadedURIs.push(uri)\n\n            const script = document.createElement('script')\n            script.src = uri\n            console.log('[Loading Library from ' + uri + ']')\n            script.onload = function () {\n                loadLib(uris, idx + 1)\n            }\n            document.head.appendChild(script)\n        }\n\n        loadLib(libs, 0)\n    }\n}\n\nexport const compilerRegistry = new CompilerRegistry()\n\n//load all available compilers\nimport { JavaCompilers } from '../compiler/java'\ncompilerRegistry.register(JavaCompilers)\n\nimport { JavascriptCompilers } from '../compiler/javascript'\ncompilerRegistry.register(JavascriptCompilers)\n\nimport { PythonCompilers } from '../compiler/python'\ncompilerRegistry.register(PythonCompilers)\n\nimport { GLSLCompilers } from '../compiler/glsl'\ncompilerRegistry.register(GLSLCompilers)\n\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/chart.js/3.6.0/chart.min.js'],\n    'chart',\n    '3.6.0',\n    'Chart.JS',\n    false,\n    1000,\n    (sandbox) => {\n        sandbox.Chart = (window as any).Chart\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/three.min.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/controls/OrbitControls.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/controls/TrackballControls.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/Detector.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/helper.r0.js',\n    ],\n    '3js',\n    'r0',\n    'Three.JS',\n    false,\n    2000,\n    (sandbox) => {\n        sandbox.THREE = (window as any).THREE\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/phaser/3.54.0/phaser.min.js',\n        Vue.$CodeBlock.baseurl + 'js/phaser/3.54.0/support.js',\n    ],\n    'phaser',\n    '3.54',\n    'Phaser',\n    false,\n    3000,\n    (sandbox: any) => {\n        sandbox.Phaser = (window as any).Phaser\n        sandbox.IsometricMapGame = (window as any).IsometricMapGame\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/5.16.0/d3.v5.min.js',\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/helper.js',\n    ],\n    'd3',\n    '5.16.0',\n    'D3',\n    false,\n    4210,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/d3.v5.min.js',\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/helper.js',\n    ],\n    'd3',\n    '5.3.8',\n    'D3',\n    false,\n    4200,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/6.7.0/d3.v6.min.js',\n        //Vue.$CodeBlock.baseurl + 'js/d3/6.2.0/helper.v6.js'\n    ],\n    'd3',\n    '6.7.0',\n    'D3',\n    false,\n    4010,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/d3/7.1.1/d3.v7.min.js'],\n    'd3',\n    '7.1.1',\n    'D3',\n    false,\n    4100,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\n\ncompilerRegistry.addUpdateMapping('d3', '5.13.4', '5.16.0')\ncompilerRegistry.addUpdateMapping('d3', '6.2.0', '6.7.0')\n\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/brain.js/2.0.0-alpha/brain-browser.min.js'],\n    'brain',\n    '2.0.0',\n    'Brain.JS',\n    false,\n    5000,\n    (sandbox) => {\n        sandbox.brain = (window as any).brain\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/tensorflow.js/2.0.0/tf.min.js',\n        //Vue.$CodeBlock.baseurl + 'js/tensorflow.js/2.0.0/tfjs-vis.umd.min.js',\n    ],\n    'tf',\n    '2.0.0',\n    'TensorFlow.JS',\n    false,\n    6000,\n    (sandbox) => {\n        sandbox.tf = (window as any).tf\n        //sandbox.tfvis = (window as any).tfvis\n    }\n)\n\nexport default compilerRegistry\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    IParsedError,\n    ILegacyPlaygroundObject,\n    IPlaygroundObject,\n    IProcessedScriptOutput,\n    IScriptOutputObject,\n    IScriptBlock,\n} from '@/lib/IScriptBlock'\nimport { ICompileAndRunArguments } from './ICompilerRegistry'\nimport compilerRegistry from './CompilerRegistry'\ninterface ICodeTemplate {\n    prefix: string\n    postfix: string\n}\n\nconst legacyCodeTemplate: ICodeTemplate = {\n    prefix: 'let editors=[]; $(\".CodeMirror\").toArray().forEach(cm =>  {if (!cm.CodeMirror.getTextArea().hasAttribute(\"is-editmode\")) editors[cm.CodeMirror.getTextArea().id] = cm.CodeMirror}); return function(){ return {o:',\n    postfix: '}.o}.call({})',\n}\nconst v101CodeTemplate: ICodeTemplate = {\n    prefix: '\"use strict\"; return function(){ return {o:',\n    postfix: '}.o}.call({})',\n}\nconst v102CodeTemplate: ICodeTemplate = {\n    prefix: 'with(sandbox) { return function(){ return {o:',\n    postfix: '}.o}.call({})}',\n}\n\nconst jsErrorParser = function (e: any, templ?: ICodeTemplate): IParsedError {\n    console.error(e)\n    let line: number | undefined = undefined\n    let column: number | undefined = undefined\n    if (e.line) {\n        line = e.line\n    } else if (e.lineNumber) {\n        line = e.lineNumber\n    }\n\n    if (e.column) {\n        column = e.column\n    } else if (e.columnNumber) {\n        column = e.columnNumber\n    }\n\n    if (line === undefined) {\n        const lines = e.stack.split('\\n')\n        if (lines.length > 1) {\n            const regex = /<anonymous>:(\\d+):(\\d+)/gm\n            let m: RegExpExecArray | null = null\n            if ((m = regex.exec(lines[1])) !== null) {\n                line = Number(m[1]) - 1\n                column = Number(m[2]) - 1\n            }\n        }\n    }\n\n    if (line !== undefined) {\n        line--\n        if (line == 1) {\n            if (column === undefined) {\n                column = 0\n            }\n            if (templ !== undefined) {\n                column -= templ.prefix.length\n            }\n        }\n    }\n    return { line: line!, column: column!, msg: e.message }\n}\nVue.prototype.$jsErrorParser = jsErrorParser\n\nconst sandboxProxies = new WeakMap()\n\nfunction compileCode(src: string) {\n    const code = new Function('sandbox', src)\n\n    return function (sandbox: any) {\n        compilerRegistry.addLoadedToSandbox(sandbox)\n\n        sandbox.$ = (input: any) => {\n            if (typeof input === 'string') {\n                console.error('You can not use JQuerry globally from this context')\n            } else {\n                if (input.getAttribute === undefined) {\n                    console.error('You may only wrap DOMElements using $')\n                    return\n                }\n                return $(input)\n            }\n        }\n        sandbox.console = console\n        sandbox.document = {\n            create$: (what: any) => $(document.createElement(what)),\n            createElement: (what: any) => document.createElement(what),\n            getElementById: (id: String) =>\n                console.error(\n                    `document.getElementById is not supported. Please use scope.find('#${id}') instead`\n                ),\n            getElementsByTagName: (tag: String) =>\n                console.error(\n                    `document.getElementsByTagName is not supported. Please use scope.find('${tag}') instead`\n                ),\n            getElementsByClassName: (cl: String) =>\n                console.error(\n                    `document.getElementsByClassName is not supported. Please use scope.find('.${cl}') instead`\n                ),\n        }\n\n        if (!sandboxProxies.has(sandbox)) {\n            const sandboxProxy = new Proxy(sandbox, { has, get })\n            sandboxProxies.set(sandbox, sandboxProxy)\n        }\n        return code(sandboxProxies.get(sandbox))\n    }\n}\n\nfunction has(target: any, key: any) {\n    return true\n}\n\nfunction get(target: any, key: any) {\n    if (key === Symbol.unscopables) {\n        return undefined\n    }\n    return target[key]\n}\n\nexport class ScriptBlock implements IScriptBlock {\n    public err: IParsedError[] = []\n\n    private src: string | undefined = undefined\n    private fkt: Function | undefined = undefined\n    private obj: IPlaygroundObject | ILegacyPlaygroundObject | undefined = undefined\n    private didInit: boolean = false\n    constructor(script: string, public version: string) {\n        //this.rebuild(script)\n        this.didInit = false\n        this.src = script\n        this.obj = {\n            init: () => {\n                console.error('FAILED INIT ATTEMPT')\n            },\n            update: () => {\n                console.error('FAILED UPDATE ATTEMPT')\n                return undefined\n            },\n        }\n    }\n\n    requestsOriginalVersion() {\n        return this.version == '100' || this.version == '' || this.version === undefined\n    }\n\n    invalidate() {\n        this.obj = undefined\n    }\n\n    rebuild(code?: string) {\n        if (code !== undefined) {\n            try {\n                this.err = []\n                console.i('!!! REBUILDING !!!')\n                this.src = code\n\n                //wrap the users code in a helper object, otherwise\n                //evaluating would fail if the code does not start in the first line\n\n                //we also return a function to make and call (.call({})) it with a clean object\n                //to ensure that 'this' is will allways be in a defined state inside the users code\n                if (this.requestsOriginalVersion()) {\n                    this.fkt = new Function(\n                        legacyCodeTemplate.prefix + code + legacyCodeTemplate.postfix\n                    )\n                } else if (this.version === '101' || this.version === '102') {\n                    this.fkt = new Function(\n                        v101CodeTemplate.prefix + code + v101CodeTemplate.postfix\n                    )\n                } else {\n                    this.fkt = compileCode(\n                        v102CodeTemplate.prefix + code + v102CodeTemplate.postfix\n                    )\n                }\n\n                this.obj = this.fkt({})\n                this.dequeueIncoming()\n            } catch (e) {\n                this.pushError(e)\n            }\n        } else if (this.fkt !== undefined) {\n            this.obj = this.fkt({})\n            this.dequeueIncoming()\n        }\n    }\n\n    pushError(e: any) {\n        this.err.push(jsErrorParser(e))\n    }\n\n    private lazyInit() {\n        if (!this.didInit) {\n            this.obj = undefined\n            this.rebuild(this.src)\n            this.didInit = true\n        }\n    }\n\n    addArgumentsTo(args: object | string[]) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.addArgumentsTo) {\n                try {\n                    o.addArgumentsTo(args)\n                } catch (e) {\n                    this.pushError(e)\n                }\n            }\n        }\n    }\n\n    _runConfig: null | ICompileAndRunArguments = null\n    get runConfig(): null | ICompileAndRunArguments {\n        return this._runConfig\n    }\n    set runConfig(cfg: null | ICompileAndRunArguments) {\n        if (this._runConfig) {\n            this._runConfig.dequeuePostponedMessages = function () {}\n        }\n        this._runConfig = cfg\n        if (this._runConfig) {\n            const self = this\n            this._runConfig.dequeuePostponedMessages = function () {\n                const msg = [...self.queuedMessages]\n                self.queuedMessages = []\n                msg.forEach((args) => self.doPostMessageToWorker(args.c, args.d))\n            }\n            if (this._runConfig.postMessageFunction !== null) {\n                this._runConfig.dequeuePostponedMessages()\n            }\n        }\n    }\n    queuedMessages: any[] = []\n    doPostMessageToWorker(cmd: string, data: any) {\n        if (data === undefined) {\n            data = {}\n        }\n        if (\n            this._runConfig !== undefined &&\n            this._runConfig !== null &&\n            this._runConfig.postMessageFunction !== null\n        ) {\n            cmd = `d-${cmd}`\n            data.command = cmd\n            console.i('MESSAGE - Posted to Worker', cmd, data)\n            this._runConfig.postMessageFunction(cmd, data)\n        } else {\n            console.i('MESSAGE - Posted to Queue', cmd)\n            this.queuedMessages.push({ c: cmd, d: data })\n        }\n    }\n    queuedIncomingMessages: any[] = []\n    didReceiveMessage(cmd: string, data: any) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.onMessage === undefined) {\n                console.i('MESSAGE - Received to Queue', cmd)\n                this.queuedIncomingMessages.push({ c: cmd, d: data })\n            } else {\n                console.i('MESSAGE - Received from Worker', cmd, data)\n                o.onMessage(cmd, data)\n            }\n        } else {\n            console.i('MESSAGE - Received to Queue', cmd)\n            this.queuedIncomingMessages.push({ c: cmd, d: data })\n        }\n    }\n    dequeueIncoming() {\n        console.i('MESSAGE - Dequeue Incoming')\n        const msg = [...this.queuedIncomingMessages]\n        this.queuedIncomingMessages = []\n        msg.forEach((args) => this.didReceiveMessage(args.c, args.d))\n    }\n\n    beforeStart() {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.beforeStart) {\n                console.i('MESSAGE - beforeStart')\n                o.beforeStart()\n            }\n        }\n    }\n\n    whenFinished(args: string[] | object, resultData?: object | any[]) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.whenFinished) {\n                console.i('MESSAGE - whenFinished')\n                o.whenFinished(args, resultData)\n            }\n        }\n    }\n\n    init(canvasElement: JQuery<HTMLElement>, scope: JQuery<HTMLElement>, runner: () => void): void {\n        this.queuedMessages = []\n        this.queuedIncomingMessages = []\n        this.lazyInit()\n        console.i('MESSAGE - Reset Queue from Init')\n        if (this.obj === undefined) {\n            return\n        }\n        try {\n            console.i('!!! INIT CANVAS !!!')\n            if (this.requestsOriginalVersion()) {\n                const o = this.obj as ILegacyPlaygroundObject\n                o.init(canvasElement)\n            } else {\n                const arunner: any = runner\n                arunner.run = runner\n                arunner.postMessage = this.doPostMessageToWorker.bind(this)\n\n                let outputElement: JQuery<HTMLElement> | undefined = undefined\n                if (scope === undefined || scope.length === 0) {\n                    scope = canvasElement.parents('.codeblocks')\n                }\n                if (scope !== undefined) {\n                    outputElement = scope.find('div.runner pre.output')\n                }\n                if (outputElement === undefined) {\n                    console.error('[Internal Error] No Output Element found!')\n                    this.pushError('[Internal Error] No Output Element found!')\n                } else {\n                    const o = this.obj as IPlaygroundObject\n                    o.init(canvasElement, outputElement, scope, runner)\n                }\n            }\n        } catch (e) {\n            this.pushError(e)\n        }\n    }\n\n    reset(canvasElement: JQuery<HTMLElement>): void {\n        this.queuedMessages = []\n        this.queuedIncomingMessages = []\n        this.lazyInit()\n        console.i('MESSAGE - Reset Queue from Reset')\n        if (this.obj && this.obj.reset && !this.requestsOriginalVersion()) {\n            this.obj.reset(canvasElement)\n        }\n    }\n\n    update(\n        outputObject: IScriptOutputObject,\n        canvasElement: JQuery<HTMLElement>\n    ): string | undefined {\n        this.lazyInit()\n        if (this.obj === undefined) {\n            return outputObject.output\n        }\n        try {\n            if (this.obj.update) {\n                //console.log(this.obj.update.length, outputObject, this.obj);\n                //this is the old behaviour\n                if (this.obj.update.length == 2 || this.requestsOriginalVersion()) {\n                    const o = this.obj as ILegacyPlaygroundObject\n                    if (outputObject.processedOutput.type == 'json') {\n                        console.i('!!! UPDATE (org, json) !!!')\n                        return o.update(outputObject.processedOutput.json, canvasElement)\n                    } else {\n                        console.i('!!! UPDATE (org, text) !!!')\n                        return o.update(outputObject.output, canvasElement)\n                    }\n                } else {\n                    const o = this.obj as IPlaygroundObject\n                    console.i('!!! UPDATE (v' + this.version + ')!!!')\n                    return o.update(\n                        outputObject.processedOutput.text,\n                        outputObject.processedOutput.json,\n                        canvasElement,\n                        outputObject.outputElement\n                    )\n                }\n            }\n        } catch (e) {\n            this.pushError(e)\n        }\n        return outputObject.initialOutput\n    }\n\n    onParseError(initialOutput: string, parseError: string): boolean {\n        this.lazyInit()\n        if (this.obj === undefined) {\n            return false\n        }\n        try {\n            if (this.obj.onParseError) {\n                this.obj.onParseError(initialOutput, parseError)\n            } else {\n                console.error(parseError)\n                return false\n            }\n        } catch (e) {\n            this.pushError(e)\n            return false\n        }\n        return true\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{staticStyle:{\"min-height\":\"0\"},attrs:{\"view\":\"hHh lpR fFf\"}},[_c('q-page-container',[_c('CodeBlocks',{attrs:{\"blockInfo\":_vm.blocks}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblocks \" + _vm.addonClass + \"  \" + _vm.backgroundColorClass + \" q-mx-sm q-mb-md\"),attrs:{\"data-question\":_vm.blockInfo.id,\"uuid\":_vm.blockInfo.uuid}},[_c('CodePanel',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasBookmark && _vm.editMode),expression:\"hasBookmark && editMode\"}],attrs:{\"editMode\":_vm.editMode,\"visibleLines\":\"auto\",\"block\":_vm.panelBlock}}),(_vm.editMode)?_c('CodeBlocksSettings',{attrs:{\"options\":_vm.options},on:{\"compiler-change\":_vm.onCompilerChange,\"compiler-version-change\":_vm.onCompilerVersionChange,\"run-state-change\":_vm.onRunStateChange,\"continuous-compile-change\":_vm.onContinousCompileStateChange,\"message-passing-change\":_vm.onMessagePassingChange,\"keep-alive-change\":_vm.onKeepAliveChange,\"persistent-arguments-change\":_vm.onPersistentArgumentsChange,\"language-change\":_vm.onLanguageChange,\"character-limit-change\":_vm.onCharacterLimitChange,\"timeout-change\":_vm.onTimeoutChange,\"worker-libs-change\":_vm.onWorkerLibChange,\"dom-libs-change\":_vm.onDomLibChange,\"theme-change\":_vm.onThemeChange,\"output-parser-change\":_vm.onOutputParserChange}}):_vm._e(),_vm._l((_vm.blocks),function(block){return _c('CodeBlockContainer',{key:block.id,attrs:{\"block\":block,\"editMode\":_vm.editMode},on:{\"type-change\":_vm.onTypeChange,\"visible-lines-change\":_vm.onVisibleLinesChange,\"placement-change\":_vm.onPlacementChange,\"script-version-change\":_vm.onScriptVersionChange,\"move-up\":_vm.moveUp,\"move-down\":_vm.moveDown,\"remove-block\":_vm.removeBlock,\"auto-reset-change\":_vm.onSetAutoReset,\"generate-template-change\":_vm.onSetGenerateTemplate}},[(block.hasCode && block.type != 'BLOCKLY')?_c('CodeBlock',{attrs:{\"block\":block,\"theme\":_vm.themeForBlock(block),\"mode\":_vm.mimeType,\"visibleLines\":block.visibleLines,\"editMode\":_vm.editMode,\"readonly\":_vm.readonly,\"tagSet\":_vm.activeTagSet,\"emitWhenTypingInViewMode\":_vm.continuousCompile},on:{\"ready\":_vm.blockBecameReady,\"build\":_vm.run,\"code-changed-in-view-mode\":_vm.onViewCodeChange}}):(block.type == 'PLAYGROUND')?_c('CodePlayground',{attrs:{\"block\":block,\"editMode\":_vm.editMode,\"finalOutputObject\":_vm.finalOutputObject,\"theme\":_vm.themeForBlock(block),\"tagSet\":_vm.activeTagSet,\"eventHub\":_vm.eventHub},on:{\"changeOutput\":_vm.onPlaygroundChangedOutput,\"ready\":_vm.blockBecameReady,\"run\":_vm.onRunFromPlayground}}):(block.type == 'TEXT')?_c('SimpleText',{attrs:{\"block\":block,\"previewValue\":block.actualContent(),\"editMode\":_vm.editMode,\"name\":(\"block[\" + (block.parentID) + \"][\" + (block.id) + \"]\"),\"scopeUUID\":block.scopeUUID,\"tagSet\":_vm.activeTagSet,\"language\":_vm.language},on:{\"ready\":_vm.blockBecameReady},model:{value:(block.content),callback:function ($$v) {_vm.$set(block, \"content\", $$v)},expression:\"block.content\"}}):(block.type == 'BLOCKLY')?_c('Blockly',{attrs:{\"block\":block,\"mode\":_vm.mimeType,\"theme\":_vm.themeForBlock(block),\"editMode\":_vm.editMode,\"readonly\":_vm.readonly,\"tagSet\":_vm.activeTagSet,\"emitWhenTypingInViewMode\":_vm.continuousCompile,\"blockInfo\":_vm.blockInfo},on:{\"code-changed-in-view-mode\":_vm.onViewCodeChange}}):_vm._e(),(block.type == 'REPL')?_c('CodeREPL',{attrs:{\"block\":block,\"eventHub\":_vm.eventHub,\"blockInfo\":_vm.blockInfo,\"isReady\":_vm.isReady,\"canStop\":_vm.canStop,\"showGlobalMessages\":_vm.showGlobalMessages,\"globalStateMessage\":_vm.$compilerState.globalStateMessage},on:{\"ready\":_vm.blockBecameReady,\"run\":_vm.run,\"stop\":_vm.stop}}):_vm._e()],1)}),(_vm.editMode)?_c('div',{staticClass:\"row justify-end\"},[_c('div',[_c('q-btn',{attrs:{\"push\":\"\",\"color\":\"green\"},on:{\"click\":_vm.addNewBlock}},[_vm._v(_vm._s(_vm.$t('CodeBlocks.AddBlock'))+\" \"),_c('q-icon',{staticClass:\"q-ml-sm\",attrs:{\"name\":\"library_add\"}})],1)],1)]):_vm._e(),(_vm.canRun)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasREPL),expression:\"!hasREPL\"}],class:(\"runner \" + (_vm.editMode ? 'q-pt-lg q-mx-lg' : '')),attrs:{\"id\":\"runContainer\",\"data-question\":_vm.blockInfo.id}},[_c('div',{staticClass:\"row runnerState\",attrs:{\"id\":\"stateBox\",\"data-question\":_vm.blockInfo.id}},[_c('q-btn',{staticClass:\"white--text\",staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"allow_run_button\",\"loading\":!_vm.isReady,\"disabled\":!_vm.isReady,\"color\":\"primary\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.run}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.run'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}}),(_vm.editMode)?_c('q-tooltip',{attrs:{\"delay\":200}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('CodeBlocks.run_hint'))}})]):_vm._e()],1),_c('div',{staticClass:\"animated fadeIn\"}),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canStop),expression:\"canStop\"}],staticClass:\"q-pl-sm\"},[_c('q-btn',{staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"cancel_button\",\"color\":\"negative\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.stop}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.stop'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"stop\"}})],1)],1)]),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGlobalMessages),expression:\"showGlobalMessages\"}],staticClass:\"globalState col-grow\",staticStyle:{\"align-self\":\"center\"}},[_c('div',{attrs:{\"id\":\"message\"},domProps:{\"innerHTML\":_vm._s(_vm.$compilerState.globalStateMessage)}})])])],1),_c('q-slide-transition',[(_vm.hasOutput)?_c('pre',{ref:\"output\",staticClass:\"output\",attrs:{\"id\":((_vm.blockInfo.id) + \"Output\")}},[_c('div',{attrs:{\"id\":\"out\"},domProps:{\"innerHTML\":_vm._s(_vm.outputHTML)}})]):_vm._e()])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-container\",attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id,\"uuid\":_vm.block.uuid}},[(_vm.editMode)?_c('q-card',{class:(\"q-mx-none q-my-xs q-pa-none editModeBlockContainer \" + _vm.colorClass + \" \" + _vm.bgClass)},[_c('q-card-section',{staticClass:\"q-mb-none q-pb-sm q-pt-sm\"},[_c('div',{staticClass:\"row q-my-none q-py-none\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-sm-4 col-md-4 q-my-none q-py-none\"},[_c('q-select',{staticStyle:{\"margin-top\":\"-5px !important\"},attrs:{\"options\":_vm.types,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"after\",fn:function(){return [_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showTypeInfoDialog}})]},proxy:true}],null,false,3671508059),model:{value:(_vm.typeObj),callback:function ($$v) {_vm.typeObj=$$v},expression:\"typeObj\"}})],1),_c('div',{staticClass:\"col-grow\"}),_c('div',{staticClass:\"\\n                        order-xs-first order-sm-last\\n                        col-xs-12 col-sm-8 col-md-5\\n                        q-my-none q-py-none\\n                        text-right\\n                    \"},[(_vm.hasExtendedSettings)?_c('q-btn',{attrs:{\"icon\":\"settings\",\"color\":\"blue-7\",\"push\":\"\",\"dense\":\"\"}},[_c('q-popup-proxy',[(_vm.canSetLineNumbers)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pa-none\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Display'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Lines'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\",domProps:{\"innerHTML\":_vm._s(_vm.$l('CodeBlockContainer.Lines_detail'))}})]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{staticStyle:{\"width\":\"132px\"},attrs:{\"rules\":[_vm.validNumber],\"maxlength\":\"4\"},model:{value:(_vm.visibleLines),callback:function ($$v) {_vm.visibleLines=$$v},expression:\"visibleLines\"}})],1)]),(_vm.canHaveAlternativeContent)?_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Prepopulate'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\",attrs:{\"lines\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Prepopulate_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.hasAltComntent),callback:function ($$v) {_vm.hasAltComntent=$$v},expression:\"hasAltComntent\"}})],1)]):_vm._e()]):_vm._e(),(_vm.isVersionedPlayground)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pa-none\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Behaviour'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ScriptV'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ScriptV_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-select',{attrs:{\"options\":_vm.scriptVersions},model:{value:(_vm.scriptVersionObj),callback:function ($$v) {_vm.scriptVersionObj=$$v},expression:\"scriptVersionObj\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.AutoReset'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.AutoReset_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.shouldAutoReset),callback:function ($$v) {_vm.shouldAutoReset=$$v},expression:\"shouldAutoReset\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.GenerateTemplate'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.GenerateTemplate_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.shouldGenerateTemplate),callback:function ($$v) {_vm.shouldGenerateTemplate=$$v},expression:\"shouldGenerateTemplate\"}})],1)])]):_vm._e(),(_vm.canDefinePlacement && _vm.shouldGenerateTemplate)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pa-none\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Positioning'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md q-pb-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Width'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Width_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{attrs:{\"maxlength\":\"7\",\"dense\":\"\"},model:{value:(_vm.width),callback:function ($$v) {_vm.width=$$v},expression:\"width\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md q-pb-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Height'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Height_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{attrs:{\"maxlength\":\"7\",\"dense\":\"\"},model:{value:(_vm.height),callback:function ($$v) {_vm.height=$$v},expression:\"height\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Alignment'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Alignment_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-select',{attrs:{\"options\":_vm.alignments,\"dense\":\"\"},model:{value:(_vm.align),callback:function ($$v) {_vm.align=$$v},expression:\"align\"}})],1)])]):_vm._e()])],1):_vm._e(),_c('q-btn',{staticClass:\"q-ml-md q-mr-xs\",attrs:{\"disable\":!_vm.canMoveUp,\"icon\":\"arrow_drop_up\",\"push\":\"\",\"dense\":\"\",\"color\":\"orange-6\",\"ripple\":{ center: true }},on:{\"click\":_vm.moveUp}}),_c('q-btn',{staticClass:\"q-mr-md\",attrs:{\"disabled\":!_vm.canMoveDown,\"icon\":\"arrow_drop_down\",\"push\":\"\",\"dense\":\"\",\"color\":\"orange-6\",\"ripple\":{ center: true }},on:{\"click\":_vm.moveDown}}),_c('q-btn',{staticClass:\"gt-xs q-mr-sm-sm q-mr-md-lg q-pr-sm\",attrs:{\"label\":_vm.$l('CodeBlockContainer.Delete'),\"icon\":\"warning\",\"push\":\"\",\"dense\":\"\",\"color\":\"red-6\",\"right\":\"\",\"ripple\":{ center: true }},on:{\"click\":_vm.removeBlock}}),_c('q-btn',{staticClass:\"lt-sm q-mr-lg q-pr-none\",attrs:{\"icon\":\"warning\",\"push\":\"\",\"dense\":\"\",\"color\":\"red-6\",\"right\":\"\",\"ripple\":{ center: true }},on:{\"click\":_vm.removeBlock}}),_c('q-btn',{staticStyle:{\"margin-right\":\"-9px\"},attrs:{\"icon\":_vm.expanded ? 'expand_less' : 'expand_more',\"color\":\"primary\",\"small\":\"\",\"flat\":\"\",\"round\":\"\"},on:{\"click\":_vm.toggleExpanded}})],1)]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.serializedOptions),expression:\"serializedOptions\"}],staticClass:\"blockoptions\",attrs:{\"name\":(\"block_options[\" + (this.block.parentID) + \"][\" + (this.block.id) + \"]\")},domProps:{\"value\":(_vm.serializedOptions)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.serializedOptions=$event.target.value}}})]),_c('q-slide-transition',[(this.isExperimentalScriptVersion)?_c('q-card-section',[_c('q-banner',{staticClass:\"bg-orange text-white col-12 q-mt-xs\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"whatshot\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.ExperimentalScriptVersion'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.ExperimentalScriptVersionDesc'))+\" \")])],1)],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[(this.isDeprecatedScriptVersion)?_c('q-card-section',[_c('q-banner',{staticClass:\"bg-yellow-12 text-black col-12 q-mt-xs\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"hourglass_disabled\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.DeprecatedScriptVersion'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.DeprecatedScriptVersionDesc'))+\" \")])],1)],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[_c('q-card-section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.expanded),expression:\"expanded\"}],staticClass:\"my-0 q-pt-1 q-pb-0\"},[_vm._t(\"default\")],2)],1)],1):_c('div',{staticClass:\"ma-0 pa-0\"},[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\n\nexport class PositioninLoadManager {\n    loadFromDatablock(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase): void {\n        block.width = bl.getAttribute('width')\n            ? bl.getAttribute('width')!\n            : inBlock.width\n            ? inBlock.width\n            : '100%'\n        block.height = bl.getAttribute('height')\n            ? bl.getAttribute('height')!\n            : inBlock.height\n            ? inBlock.height\n            : '300px'\n        block.align = bl.getAttribute('align')\n            ? bl.getAttribute('align')!\n            : inBlock.align\n            ? inBlock.align\n            : 'center'\n    }\n}\n\nexport const positioninLoadManager = new PositioninLoadManager()\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport {\n    IBlocklyToolbox,\n    BlockPrimaryColors,\n    BlockArgumentTypes,\n    IBlockDefinition\n} from '@/lib/IBlocklyHelper'\nimport { blocklyHelper } from '@/lib/BlocklyHelper'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\n\nexport class BlocklyLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'BLOCKLY'\n    }\n\n    private loadCustomBlocks(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const customBlocks = bl.querySelectorAll('script#customblocks') //bl.getElementsByTagName('CUSTOMBLOCKS')\n        if (customBlocks.length > 0) {\n            const str: string = customBlocks[0].innerHTML ? customBlocks[0].innerHTML : '{}'\n\n            try {\n                const arr: IBlockDefinition[] = new Function(blocklyHelper.prepareCode(str))()\n                arr.forEach(bl => {\n                    if (bl.JSON === undefined) {\n                        bl.JSON = {\n                            type: '',\n                            message0: '',\n                            args0: [],\n                            nextStatement: null,\n                            previousStatement: null,\n                            colour: ''\n                        }\n                    }\n                    if (bl.uuid === undefined || bl.uuid === '') {\n                        bl.uuid = uuid.v4()\n                    }\n\n                    if (bl.codeString === undefined && bl._code !== undefined) {\n                        bl.codeString = bl._code.toString()\n                    }\n                    bl._code = undefined\n                })\n                block.blockly.blocks = arr\n            } catch (e) {\n                console.error('Error parsing Blocks JSON', e)\n            }\n        }\n    }\n\n    private loadToolbox(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const toolboxInput = bl.getElementsByTagName('TOOLBOX')\n        if (toolboxInput.length > 0) {\n            const toolboxStr: string = toolboxInput[0].innerHTML ? toolboxInput[0].innerHTML : ''\n\n            if (toolboxStr === '') {\n                block.blockly.toolbox = this.defaultToolbox\n            } else {\n                try {\n                    const obj: IBlocklyToolbox = new Function(\n                        blocklyHelper.prepareCode(toolboxStr)\n                    )()\n                    obj.categories.forEach(c => {\n                        if (c.uuid === undefined || c.uuid === '') {\n                            c.uuid = uuid.v4()\n                        }\n                        if (c.color === undefined) {\n                            c.color = ''\n                        }\n                        c.items.forEach(i => {\n                            if (i.uuid === undefined || i.uuid === '') {\n                                i.uuid = uuid.v4()\n                            }\n                        })\n                    })\n                    block.blockly.toolbox = obj\n                } catch (e) {\n                    console.error('Error Parsing ToolboxJSON', e)\n                }\n            }\n        } else {\n            block.blockly.toolbox = this.defaultToolbox\n        }\n    }\n\n    private loadOverrideToolbox(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase\n    ) {\n        const toolboxOverride = bl.querySelectorAll('script#toolboxoverride') //bl.getElementsByTagName('TOOLBOXOVERRIDE')\n        if (toolboxOverride.length > 0) {\n            block.blockly.toolboxOverride = toolboxOverride[0].innerHTML\n                ? toolboxOverride[0].innerHTML\n                : ''\n\n            block.blockly.useOverride =\n                toolboxOverride[0].hasAttribute('use') &&\n                toolboxOverride[0].getAttribute('use') != 'false' &&\n                toolboxOverride[0].getAttribute('use') != '0'\n        }\n    }\n\n    private loadCode(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const codes = bl.querySelectorAll('script#content') //bl.getElementsByTagName('SCRIPT')\n\n        if (codes.length > 0) {\n            block.content = codes[0].innerHTML ? codes[0].innerHTML : ''\n        } else {\n            block.content = '<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>'\n        }\n        block.hasCode = true\n    }\n\n    private isTrue(val: any): boolean {\n        return val !== undefined && val != 'false' && val != '0'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        block.obj = null\n        positioninLoadManager.loadFromDatablock(bl, inBlock, block)\n\n        block.blockly.showControls = this.isTrue(inBlock.showControls)\n\n        this.loadCustomBlocks(bl, inBlock, block)\n        this.loadToolbox(bl, inBlock, block)\n        this.loadOverrideToolbox(bl, inBlock, block)\n        this.loadCode(bl, inBlock, block)\n    }\n\n    get defaultToolbox(): IBlocklyToolbox {\n        const tb: IBlocklyToolbox = {\n            categories: [\n                {\n                    uuid: uuid.v4(),\n                    name: 'Logic',\n                    color: '{!PrimaryColors.Logic}',\n                    items: [\n                        { _expanded: false, type: 'controls_if', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_compare', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_operation', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_negate', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_boolean', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_arithmetic', uuid: uuid.v4() },\n                        { _expanded: false, type: 'lists_create_empty', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Loops',\n                    color: '{!PrimaryColors.Loop}',\n                    items: [\n                        { _expanded: false, type: 'controls_repeat_ext', uuid: uuid.v4() },\n                        { _expanded: false, type: 'controls_whileUntil', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Math',\n                    color: '{!PrimaryColors.Math}',\n                    items: [\n                        { _expanded: false, type: 'math_number', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_arithmetic', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_single', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Text',\n                    color: '{!PrimaryColors.Text}',\n                    items: [\n                        { _expanded: false, type: 'text', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_length', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_print', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_join', uuid: uuid.v4() },\n                        { _expanded: false, type: 'colour_rgb', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Variables',\n                    custom: 'VARIABLE',\n                    color: '{!PrimaryColors.Variable}',\n                    items: []\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Procedures',\n                    custom: 'PROCEDURE',\n                    color: '{!PrimaryColors.Procedure}',\n                    items: []\n                }\n            ]\n        }\n        return tb\n    }\n}\n\nexport const blocklyLoader = new BlocklyLoadManager()\n\nexport default function(loaders: { [index: string]: IBlockloadManager }) {\n    loaders[blocklyLoader.blockTag] = blocklyLoader\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport { IListItemData } from '@/lib/ICompilerRegistry'\nimport { KnownBlockTypes } from '@/lib/ICodeBlocks'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { blocklyLoader } from '@/lib/BlockloadManagers/BlocklyManager'\n\n@Component\nexport default class CodeBlocksContainer extends Vue {\n    frank = 'hello'\n    settingsMenu: boolean = false\n    highlighted: boolean = false\n\n    get types(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.Canvas'),\n                value: KnownBlockTypes.PLAYGROUND,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Text'),\n                value: KnownBlockTypes.TEXT,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Hidden'),\n                value: KnownBlockTypes.BLOCKHIDDEN,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Static'),\n                value: KnownBlockTypes.BLOCKSTATIC,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Block'),\n                value: KnownBlockTypes.BLOCK,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Blockly'),\n                value: KnownBlockTypes.BLOCKLY,\n            },\n            {\n                label: this.$l('CodeBlockContainer.REPL'),\n                value: KnownBlockTypes.REPL,\n            },\n        ]\n    }\n    get alignments(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.Start'),\n                value: 'left',\n            },\n            {\n                label: this.$l('CodeBlockContainer.Center'),\n                value: 'center',\n            },\n            {\n                label: this.$l('CodeBlockContainer.End'),\n                value: 'right',\n            },\n        ]\n    }\n    get scriptVersions(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_1'),\n                value: '100',\n            },\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_2'),\n                value: '101',\n            },\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_3'),\n                value: '102',\n            },\n        ]\n    }\n\n    get isDeprecatedScriptVersion(): boolean {\n        return this.scriptVersion === '100'\n    }\n\n    get isExperimentalScriptVersion(): boolean {\n        return this.scriptVersion === '102'\n    }\n\n    // mounted() {\n    //     console.log('Mounted', this)\n    // }\n\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ default: false }) editMode!: boolean\n\n    validNumber(v: 'auto' | number): boolean | string {\n        //console.log(v, isNaN(v), v!='auto');\n        if (v != 'auto' && isNaN(v)) {\n            return \"Must be a valid Number or 'auto'.\"\n        }\n        return true\n    }\n    toggleExpanded(): void {\n        this.$CodeBlock.refreshAllCodeMirrors()\n        this.expanded = !this.expanded\n    }\n    moveUp(): void {\n        this.$emit('move-up', this.block.id)\n    }\n    moveDown(): void {\n        this.$emit('move-down', this.block.id)\n    }\n    showTypeInfoDialog(): void {\n        this.$q\n            .dialog({\n                title: this.$l('CodeBlockContainer.TypesCaption'),\n                message: this.$l('CodeBlockContainer.Types'),\n                html: true,\n                style: 'width:75%',\n            })\n            .onOk(() => {\n                // console.log('OK')\n            })\n            .onCancel(() => {\n                // console.log('Cancel')\n            })\n            .onDismiss(() => {\n                // console.log('I am triggered on both OK and Cancel')\n            })\n    }\n    removeBlock(): void {\n        const self = this\n        self.highlighted = true\n        this.$q\n            .dialog({\n                title: this.$l('CodeBlockContainer.Confirm'),\n                message: this.$l('CodeBlockContainer.DeleteQuestion'),\n                html: true,\n                ok: {\n                    push: true,\n                    color: 'negative',\n                    icon: 'warning',\n                },\n                cancel: {\n                    push: true,\n                    color: 'positive',\n                },\n                persistent: true,\n            })\n            .onOk(() => {\n                this.$emit('remove-block', this.block.id)\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                self.highlighted = false\n            })\n    }\n\n    get expanded(): boolean {\n        return this.block.expanded\n    }\n    set expanded(v: boolean) {\n        this.block.expanded = v\n    }\n\n    get canMoveUp(): boolean {\n        return this.block.id > 0\n    }\n    get canMoveDown(): boolean {\n        return !this.block.isLast\n    }\n\n    filteredCopy(objIn: object, extended: boolean = true, path: string = 'this'): object {\n        let obj = {}\n        Object.keys(objIn)\n            .filter(\n                (k) =>\n                    k.indexOf('appSettings') != 0 &&\n                    k.indexOf('$') != 0 &&\n                    k.indexOf('_') != 0 &&\n                    (!extended ||\n                        (k != 'obj' &&\n                            k != 'errors' &&\n                            k != 'content' &&\n                            k != 'firstLine' &&\n                            k != 'nextLine' &&\n                            k != 'lineCount' &&\n                            k != 'hasCode' &&\n                            k != 'isLast' &&\n                            k != 'readyCount' &&\n                            k != 'noContent' &&\n                            (this.block.type === KnownBlockTypes.BLOCKLY || k != 'blockly'))) &&\n                    k != 'uuid' &&\n                    k != 'scopeUUID' &&\n                    k != 'scopeSelector'\n            )\n            .forEach((k) => {\n                let v = objIn[k]\n                if (v !== undefined && v !== null && typeof v === 'object') {\n                    if (Array.isArray(v)) {\n                        v = v.map((item, nr) =>\n                            this.filteredCopy(item, false, path + '.' + k + `[${nr}]`)\n                        )\n                    } else {\n                        v = this.filteredCopy(v, false, path + '.' + k)\n                    }\n                }\n                obj[k] = v\n            })\n\n        return obj\n    }\n    get serializedOptions(): string {\n        return JSON.stringify(this.filteredCopy(this.block))\n    }\n    set serializedOptions(v: string) {}\n\n    get hasExtendedSettings(): boolean {\n        return (\n            this.type == KnownBlockTypes.PLAYGROUND ||\n            this.type == KnownBlockTypes.BLOCK ||\n            this.type == KnownBlockTypes.BLOCKLY\n        )\n    }\n    get isVersionedPlayground(): boolean {\n        return this.type == KnownBlockTypes.PLAYGROUND\n    }\n    get canSetLineNumbers() {\n        return this.type == KnownBlockTypes.BLOCK\n    }\n    get canHaveAlternativeContent() {\n        return this.type == KnownBlockTypes.BLOCK\n    }\n    get canDefinePlacement() {\n        return this.type == KnownBlockTypes.PLAYGROUND || this.type == KnownBlockTypes.BLOCKLY\n    }\n    get shouldAutoReset(): boolean {\n        return this.block.shouldAutoreset\n    }\n    set shouldAutoReset(v: boolean) {\n        this.$emit('auto-reset-change', {\n            shouldAutoreset: v,\n            id: this.block.id,\n        })\n    }\n    get shouldGenerateTemplate(): boolean {\n        return this.block.generateTemplate\n    }\n    set shouldGenerateTemplate(v: boolean) {\n        this.$emit('generate-template-change', {\n            generateTemplate: v,\n            id: this.block.id,\n        })\n    }\n\n    get scriptVersion(): string {\n        if (\n            this.block === undefined ||\n            this.block.version === undefined ||\n            this.block.version == ''\n        ) {\n            return '100'\n        }\n        return this.block.version\n    }\n    get scriptVersionObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.scriptVersions, this.scriptVersion)\n    }\n    set scriptVersionObj(v: IListItemData) {\n        this.$emit('script-version-change', {\n            version: v.value,\n            id: this.block.id,\n        })\n    }\n\n    get hasAltComntent(): boolean {\n        return this.block.hasAlternativeContent\n    }\n    set hasAltComntent(v: boolean) {\n        if (v != this.block.hasAlternativeContent && v) {\n            this.$nextTick(() => {\n                setTimeout(function () {\n                    $('.CodeMirror')\n                        .toArray()\n                        .forEach((cm) => {\n                            const element = cm as any\n                            element.CodeMirror.refresh()\n                        })\n                }, 200)\n            })\n        }\n        this.block.hasAlternativeContent = v\n    }\n\n    get colorClass(): string {\n        const t = this.type\n        if (t == KnownBlockTypes.TEXT) {\n            return 'text-border'\n        } else if (t == KnownBlockTypes.PLAYGROUND) {\n            return 'playground-border'\n        } else if (t == KnownBlockTypes.BLOCK) {\n            return 'block-border'\n        } else if (t == KnownBlockTypes.BLOCKHIDDEN) {\n            return 'block-hidden-border'\n        } else if (t == KnownBlockTypes.BLOCKSTATIC) {\n            return 'block-static-border'\n        } else if (t == KnownBlockTypes.REPL) {\n            return 'repl-border'\n        }\n        return 'default-border'\n    }\n    get bgClass(): string {\n        if (this.highlighted) {\n            return 'highlightedCard'\n        }\n        return ''\n    }\n    get type(): KnownBlockTypes {\n        if (this.block.type == KnownBlockTypes.BLOCK) {\n            if (this.block.hidden) {\n                return KnownBlockTypes.BLOCKHIDDEN\n            }\n            if (this.block.static) {\n                return KnownBlockTypes.BLOCKSTATIC\n            }\n        }\n        return this.block.type\n    }\n    get typeObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.types, this.type)\n    }\n    set typeObj(val: IListItemData) {\n        const v = val.value\n        let ret = {\n            type: v.match(/([^-]*)/)![0],\n            hidden: v == KnownBlockTypes.BLOCKHIDDEN,\n            static: v == KnownBlockTypes.BLOCKSTATIC,\n            id: this.block.id,\n            hasCode: false,\n        }\n        ret.hasCode = ret.type == KnownBlockTypes.BLOCK\n\n        if (ret.type == KnownBlockTypes.PLAYGROUND && this.block.content === '' && this.editMode) {\n            if (this.block.scriptVersion == '100') {\n                this.block.content =\n                    '{\\n    init: function(canvasElement) {\\n\\n    },\\n    update: function(output, canvasElement) {\\n\\n    }\\n}'\n            } else {\n                this.block.content =\n                    '{\\n    init: function(canvasElement, outputElement, scope, runner) {\\n\\n    },\\n    addArgumentsTo(args) {},\\n    reset(canvasElement) {},\\n    update: function(txt, json, canvasElement, outputElement) {\\n\\n    }\\n}'\n            }\n        } else if (\n            ret.type == KnownBlockTypes.BLOCKLY &&\n            this.block.blockly.toolbox.categories.length === 0 &&\n            this.editMode\n        ) {\n            this.block.blockly.toolbox = blocklyLoader.defaultToolbox\n        }\n\n        this.$emit('type-change', ret)\n    }\n    get visibleLines(): number | 'auto' {\n        const v = this.block.visibleLines\n        if (v == 'auto' || isNaN(v)) {\n            return 'auto'\n        }\n        return v\n    }\n    set visibleLines(v: number | 'auto') {\n        if (v == 'auto' || isNaN(v)) {\n            v = 'auto'\n        }\n        console.log('set', v)\n\n        this.$emit('visible-lines-change', {\n            visibleLines: v,\n            id: this.block.id,\n        })\n    }\n\n    get width(): string {\n        return this.block.width\n    }\n    set width(v: string) {\n        this.$emit('placement-change', {\n            width: v,\n            height: this.block.height,\n            align: this.block.align,\n            id: this.block.id,\n        })\n    }\n    get height(): string {\n        return this.block.height\n    }\n    set height(v: string) {\n        this.$emit('placement-change', {\n            width: this.block.width,\n            height: v,\n            align: this.block.align,\n            id: this.block.id,\n        })\n    }\n    get align(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.alignments, this.block.align)\n    }\n    set align(v: IListItemData) {\n        this.$emit('placement-change', {\n            width: this.block.width,\n            height: this.block.height,\n            align: v.value,\n            id: this.block.id,\n        })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlockContainer.vue?vue&type=template&id=6556a792&\"\nimport script from \"./CodeBlockContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlockContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlockContainer.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QPopupProxy from 'quasar/src/components/popup-proxy/QPopupProxy.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QSelect,QBtn,QPopupProxy,QInput,QToggle,QSlideTransition,QBanner,QItem,QItemSection,QIcon,QItemLabel});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row q-pa-none q-mb-md\"},[_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-card',{staticClass:\"q-mb-sm q-mr-sm-none q-mr-md-sm\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Language')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.languageHasCompiler,\"label\":_vm.$t('CodeBlocksSettings.AllowExec')},model:{value:(_vm.runCode),callback:function ($$v) {_vm.runCode=$$v},expression:\"runCode\"}})],1),_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.canContinousCompile,\"label\":_vm.$t('CodeBlocksSettings.ContinousCompile')},model:{value:(_vm.continuousCompile),callback:function ($$v) {_vm.continuousCompile=$$v},expression:\"continuousCompile\"}})],1),_c('div',{class:(\"col-xs-12 col-sm-\" + (_vm.runCode ? 6 : 12) + \" col-md-\" + (_vm.runCode ? 8 : 12) + \" \" + (_vm.runCode ? 'q-pr-md-sm' : ''))},[_c('q-select',{attrs:{\"options\":_vm.compiledLanguages,\"label\":_vm.$t('CodeBlocksSettings.Language')},model:{value:(_vm.compilerLanguageObj),callback:function ($$v) {_vm.compilerLanguageObj=$$v},expression:\"compilerLanguageObj\"}})],1),(_vm.runCode)?_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.compilerVersions,\"stack-label\":\"\",\"label\":_vm.$t('CodeBlocksSettings.CVersion')},scopedSlots:_vm._u([{key:\"selected\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.compilerVersion)+\" \"),(_vm.isDeprecated)?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"yellow\",\"text-color\":\"brown-10\",\"icon\":\"hourglass_disabled\"}}):_vm._e(),(_vm.isExperimental)?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"orange\",\"text-color\":\"white\",\"icon\":\"whatshot\"}}):_vm._e()]},proxy:true},{key:\"option\",fn:function(scope){return [_c('q-item',_vm._g(_vm._b({},'q-item',scope.itemProps,false),scope.itemEvents),[_c('q-item-section',[_c('q-item-label',[_vm._v(\" \"+_vm._s(scope.opt)+\" \"),(\n                                                    _vm.isDeprecatedVersion(\n                                                        _vm.compilerLanguage,\n                                                        scope.opt\n                                                    )\n                                                )?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"yellow\",\"text-color\":\"brown-10\",\"icon\":\"hourglass_disabled\"}}):_vm._e(),(\n                                                    _vm.isExperimentalVersion(\n                                                        _vm.compilerLanguage,\n                                                        scope.opt\n                                                    )\n                                                )?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"orange\",\"text-color\":\"white\",\"icon\":\"whatshot\"}}):_vm._e()],1)],1)],1)]}}],null,false,541447989),model:{value:(_vm.compilerVersion),callback:function ($$v) {_vm.compilerVersion=$$v},expression:\"compilerVersion\"}})],1):_vm._e(),_c('q-slide-transition',[(_vm.isExperimental)?_c('q-banner',{staticClass:\"bg-orange text-white col-12 q-mt-xs\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"whatshot\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.ExperimentalCompiler'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.ExperimentalCompilerDesc'))+\" \")])],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[(_vm.isDeprecated)?_c('q-banner',{staticClass:\"bg-yellow-12 text-black col-12 q-mt-xs\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"hourglass_disabled\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.DeprecatedCompiler'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.DeprecatedCompilerDesc'))+\" \")])],1)],1)],1):_vm._e()],1),(_vm.showMaxRuntime)?_c('div',{staticClass:\"col-12\"},[_c('q-input',{attrs:{\"rules\":[_vm.validNumber],\"label\":_vm.$t('CodeBlocksSettings.RunTime'),\"maxlength\":\"6\"},model:{value:(_vm.maxRuntime),callback:function ($$v) {_vm.maxRuntime=$$v},expression:\"maxRuntime\"}})],1):_vm._e(),(_vm.runCode && (_vm.accepstArguments || _vm.allowsMessagePassing))?_c('div',{staticClass:\"col-12 text-body2\"},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.AllowArguments'))+\" \"),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showArgsInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.accepstArguments)?_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.canPersistentArguments,\"label\":_vm.$t('CodeBlocksSettings.PersistentArguments')},model:{value:(_vm.persistentArguments),callback:function ($$v) {_vm.persistentArguments=$$v},expression:\"persistentArguments\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showPersistentArgsInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.allowsMessagePassing)?_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.allowsMessagePassing,\"label\":_vm.$t('CodeBlocksSettings.MessagePassing')},model:{value:(_vm.messagePassing),callback:function ($$v) {_vm.messagePassing=$$v},expression:\"messagePassing\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showMessagesInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.allowsMessagePassing)?_c('div',{staticClass:\"col-12 q-pl-lg\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.allowsMessagePassing || !_vm.messagePassing,\"label\":_vm.$t('CodeBlocksSettings.KeepAlive')},model:{value:(_vm.keepAlive),callback:function ($$v) {_vm.keepAlive=$$v},expression:\"keepAlive\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showAliveInfoDialog}})],1):_vm._e()],1)])],1)],1),_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-slide-transition',[(_vm.runCode)?_c('q-card',{staticClass:\"q-mb-sm q-mr-none\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Output')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-6 col-12 q-pr-md-sm\"},[_c('q-input',{attrs:{\"rules\":[_vm.validNumber],\"label\":_vm.$t('CodeBlocksSettings.MaxCharacters'),\"maxlength\":\"6\"},model:{value:(_vm.maxCharacters),callback:function ($$v) {_vm.maxCharacters=$$v},expression:\"maxCharacters\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.outputParsers,\"label\":_vm.$t('CodeBlocksSettings.Parser')},model:{value:(_vm.outputParser),callback:function ($$v) {_vm.outputParser=$$v},expression:\"outputParser\"}})],1)])])],1):_vm._e()],1),_c('q-card',{staticClass:\"q-mr-none\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Themes')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-md-6 q-pr-md-sm\"},[_c('q-select',{attrs:{\"options\":_vm.themes,\"label\":_vm.$t('CodeBlocksSettings.TGeneral')},model:{value:(_vm.codeTheme),callback:function ($$v) {_vm.codeTheme=$$v},expression:\"codeTheme\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.themes,\"label\":_vm.$t('CodeBlocksSettings.TSolution')},model:{value:(_vm.solutionTheme),callback:function ($$v) {_vm.solutionTheme=$$v},expression:\"solutionTheme\"}})],1)])])],1),_c('q-slide-transition',[(_vm.runCode)?_c('q-card',{staticClass:\"q-mr-sm-none q-mt-sm\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Libraries')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row q-my-none q-py-none\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-sm-12 q-my-none q-py-none\"},[_c('q-select',{attrs:{\"options\":_vm.domLibraries,\"multiple\":\"\",\"use-chips\":\"\",\"stack-label\":\"\",\"deletable-chips\":\"\",\"label\":_vm.$t('CodeBlocksSettings.DomLibs')},model:{value:(_vm.domLibrary),callback:function ($$v) {_vm.domLibrary=$$v},expression:\"domLibrary\"}})],1),(_vm.runCode && _vm.workerLibraries.length > 0)?_c('div',{staticClass:\"col-xs-12 col-sm-12 q-my-none q-py-none\"},[_c('q-select',{attrs:{\"options\":_vm.workerLibraries,\"multiple\":\"\",\"use-chips\":\"\",\"stack-label\":\"\",\"deletable-chips\":\"\",\"label\":_vm.$t('CodeBlocksSettings.WorkLibs')},model:{value:(_vm.workerLibrary),callback:function ($$v) {_vm.workerLibrary=$$v},expression:\"workerLibrary\"}})],1):_vm._e()])])],1):_vm._e()],1)],1),_c('div',{class:(\"col-xs-\" + (_vm.options.randomizer.active ? '12' : '12') + \" q-mt-sm\")},[_c('RandomizerSettings',{attrs:{\"options\":_vm.options}})],1),_c('div',{staticClass:\"col-xs-12\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.serializedOptions),expression:\"serializedOptions\"}],staticClass:\"blocksettings\",attrs:{\"name\":(\"block_settings[\" + (this.options.id) + \"]\")},domProps:{\"value\":(_vm.serializedOptions)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.serializedOptions=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('q-card',[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('RandomizerSettings.Caption'))+\" \"),_c('q-toggle',{model:{value:(_vm.options.randomizer.active),callback:function ($$v) {_vm.$set(_vm.options.randomizer, \"active\", $$v)},expression:\"options.randomizer.active\"}})],1),_c('q-slide-transition',[_c('q-card-section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.options.randomizer.active),expression:\"options.randomizer.active\"}],staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"tagList\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$t('RandomizerSettings.Available'))+\" \"),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"color\":\"primary\",\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"add\"},on:{\"click\":_vm.addTag}})],1),_c('div',{staticClass:\"row q-mb-sm\"},_vm._l((_vm.options.randomizer.knownTags),function(tag,i){return _c('div',{key:tag,class:(\"tagItem q-ml-sm \" + _vm.tagClass)},[_c('div',{staticClass:\"row no-wrap\"},[_c('div',{staticClass:\"tagInfo col-shrink\"},[_c('div',{staticClass:\"tagName\"},[_vm._v(_vm._s(tag))]),_c('div',{staticClass:\"tagString\"},[_vm._v(\"{:\"+_vm._s(tag)+\"}\")])]),_c('div',{staticClass:\"tagAction col-4 q-pl-sm text-right\"},[_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.removeTag(i)}}})],1)])])}),0)]),_c('div',{staticClass:\"tagList q-mt-lg\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$t('RandomizerSettings.Sets'))+\" \"),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"color\":\"primary\",\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"add\"},on:{\"click\":_vm.addSet}})],1),_c('q-list',{staticClass:\"setList\"},_vm._l((_vm.options.randomizer.sets),function(s,i){return _c('q-item',{key:s.uuid},[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-avatar',{attrs:{\"color\":\"primary\",\"text-color\":\"white\",\"disabled\":!_vm.isVisible(i)}},[_vm._v(\" \"+_vm._s(i)+\" \")])],1),_c('q-item-section',[_c('q-item-label',[_vm._v(_vm._s(s.title))]),_c('q-item-label',{attrs:{\"caption\":\"\",\"lines\":\"2\"}},[_c('div',{staticClass:\"row q-mb-sm\"},_vm._l((s.values),function(tag){return _c('div',{key:tag.name,class:(\"tagItem q-ml-sm \" + _vm.tagClass)},[_c('div',{staticClass:\"row no-wrap\"},[_c('div',{staticClass:\"tagInfo col-shrink\"},[_c('div',{staticClass:\"tagName\"},[_vm._v(_vm._s(tag.tag))]),_c('div',{staticClass:\"tagString\"},[_vm._v(_vm._s(tag.value))])])])])}),0)])],1),_c('q-item-section',{attrs:{\"side\":\"\",\"top\":\"\"}},[_c('div',{staticClass:\"text-grey-8 q-gutter-xs\"},[_c('q-icon',{staticClass:\"q-mr-lg\",attrs:{\"name\":_vm.isCompleteSet(s) ? 'check' : 'warning',\"color\":_vm.isCompleteSet(s) ? 'positive' : 'negative',\"size\":\"24px\"}}),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":_vm.isVisible(i) ? 'visibility' : 'visibility_off'},on:{\"click\":function($event){return _vm.setVisible(i)}}},[_c('q-tooltip',{attrs:{\"delay\":200,\"offset\":[0, 10]}},[_vm._v(\" Use this set when running code in preview or editMode. \")])],1),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"edit\"}},[_c('RandomizerSetEditor',{attrs:{\"options\":_vm.options,\"tagSet\":_vm.getFullSet(s),\"nr\":i}})],1),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.removeSet(i)}}})],1)])],1)}),1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-popup-proxy',{attrs:{\"transition-show\":\"flip-up\",\"transition-hide\":\"flip-down\"},on:{\"before-show\":_vm.onShow}},[_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pa-none\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('RandomizerSetEditor.Caption', { nr: _vm.nr })))])]),_vm._l((_vm.tagSet.values),function(tag){return _c('div',{key:tag.tag,staticClass:\"q-pl-md\"},[_c('q-input',{attrs:{\"label\":tag.tag},model:{value:(tag.value),callback:function ($$v) {_vm.$set(tag, \"value\", $$v)},expression:\"tag.value\"}})],1)})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\n\n@Component\nexport default class RandomizerSetEditor extends Vue {\n    @Prop({ required: true }) options!: any\n    @Prop({ required: true }) tagSet!: IRandomizerSet\n    @Prop({ required: true }) nr!: number\n\n    get tags(): string[] {\n        return this.tagSet.values.map(v => v.tag)\n    }\n\n    onShow(o) {\n        this.tagSet.values = this.tagSet.values.filter(\n            v => this.options.randomizer.knownTags.indexOf(v.tag) >= 0\n        )\n        this.options.randomizer.knownTags.forEach(t => {\n            if (this.tagSet.values.find(v => v.tag == t) === undefined) {\n                this.tagSet.values.push({\n                    tag: t,\n                    value: ''\n                })\n            }\n        })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RandomizerSetEditor.vue?vue&type=template&id=e5082460&\"\nimport script from \"./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QPopupProxy from 'quasar/src/components/popup-proxy/QPopupProxy.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QPopupProxy,QInput});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport RandomizerSetEditor from '@/components/RandomizerSetEditor.vue'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { ICodeBlockSettingsOptions } from '@/components/CodeBlocksSettings.vue'\n\n@Component({ components: { RandomizerSetEditor } })\nexport default class RandomizerSettings extends Vue {\n    _newTagName: string = ''\n\n    @Prop({ required: true }) options!: ICodeBlockSettingsOptions\n\n    get tagClass(): string {\n        return Vue.$tagger.className.rnd + ' tag-mark-start tag-mark-end tag-mark-shadow'\n    }\n\n    isVisible(nr: number): boolean {\n        return nr == this.options.randomizer.previewIndex\n    }\n    setVisible(nr: number): void {\n        this.options.randomizer.previewIndex = nr\n    }\n    isValidTag(tag: string): boolean {\n        return this.options.randomizer.knownTags.find(t => t == tag) !== undefined\n    }\n    isCompleteSet(s: IRandomizerSet): boolean {\n        if (s.values.filter(v => this.options.randomizer.knownTags.indexOf(v.tag) < 0).length > 0) {\n            return false\n        }\n        if (\n            this.options.randomizer.knownTags.filter(\n                t => s.values.find(v => v.tag == t) === undefined\n            ).length > 0\n        ) {\n            return false\n        }\n        return true\n    }\n    getFullSet(s: IRandomizerSet): IRandomizerSet {\n        return s\n    }\n    removeSet(nr: number): void {\n        this.options.randomizer.sets.splice(nr, 1)\n    }\n    addSet(): void {\n        this.options.randomizer.sets.push({ uuid: this.$uuid.v4(), values: [] })\n    }\n    removeTag(nr: number): void {\n        this.options.randomizer.knownTags.splice(nr, 1)\n    }\n    addTag(): void {\n        this.$q\n            .dialog({\n                title: 'Create Tag',\n                message: 'This will generate a new randomizer-Tag with the below name.',\n                html: true,\n                persistent: true,\n                prompt: {\n                    model: 'tag_name',\n                    type: 'text'\n                },\n                ok: {\n                    push: true\n                },\n                cancel: {\n                    flat: true,\n                    color: 'gray'\n                }\n            })\n            .onOk(data => {\n                data = data.replace(/\\W/g, '_')\n                //have this name\n                if (this.options.randomizer.knownTags.filter(t => t == data).length > 0) {\n                    let ct = 1\n                    const odata = data\n                    do {\n                        data = odata + '_' + ct\n                        ct++\n                    } while (this.options.randomizer.knownTags.filter(t => t == data).length > 0)\n                }\n                this.options.randomizer.knownTags.push(data)\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                //self.highlighted = false;\n            })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RandomizerSettings.vue?vue&type=template&id=8b99c0d6&scoped=true&\"\nimport script from \"./RandomizerSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./RandomizerSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./RandomizerSettings.vue?vue&type=style&index=0&id=8b99c0d6&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b99c0d6\",\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QList from 'quasar/src/components/item/QList.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QToggle,QSlideTransition,QBtn,QList,QItem,QItemSection,QAvatar,QItemLabel,QIcon,QTooltip});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport RandomizerSettings from '@/components/RandomizerSettings.vue'\nimport { IListItemData, ICompilerID } from '@/lib/ICompilerRegistry'\nimport { CodeOutputTypes, IRandomizerSettings } from '@/lib/ICodeBlocks'\n\nexport interface ICodeBlockSettingsOptions {\n    language: string\n    compiler: ICompilerID\n    executionTimeout: number\n    maxCharacters: number\n    runCode: boolean\n    domLibs: string[]\n    workerLibs: string[]\n    id: number\n    codeTheme: string\n    solutionTheme: string\n    outputParser: CodeOutputTypes\n    randomizer: IRandomizerSettings\n    continuousCompilation: boolean\n    persistentArguments: boolean\n    messagePassing: boolean\n    keepAlive: boolean\n}\n\n@Component({ components: { RandomizerSettings } })\nexport default class CodeBlocksSettings extends Vue {\n    get themes(): IListItemData[] {\n        return [\n            { label: 'Solarized', value: 'solarized light' },\n            { label: 'Solarized (dark)', value: 'solarized dark' },\n            { label: 'Base16 (dark)', value: 'base16-dark' },\n            { label: 'Base16 (light)', value: 'base16-light' },\n            { label: 'Duotone (dark)', value: 'duotone-dark' },\n            { label: 'Duotone (light)', value: 'duotone-light' },\n            { label: 'XQ (dark)', value: 'xq-dark' },\n            { label: 'XQ (light)', value: 'xq-light' },\n            { label: 'Blackboard', value: 'blackboard' },\n            { label: 'neo', value: 'neo' },\n            { label: 'mbo', value: 'mbo' },\n            { label: 'mdn like', value: 'mdn-like' },\n        ]\n    }\n\n    get outputParsers(): IListItemData[] {\n        return [\n            { label: this.$l('CodeBlocksSettings.PAutomatic'), value: CodeOutputTypes.AUTO },\n            { label: this.$l('CodeBlocksSettings.PText'), value: CodeOutputTypes.TEXT },\n            { label: this.$l('CodeBlocksSettings.PJSON'), value: CodeOutputTypes.JSON },\n            { label: this.$l('CodeBlocksSettings.PData'), value: CodeOutputTypes.DATA },\n            { label: this.$l('CodeBlocksSettings.PMagic'), value: CodeOutputTypes.MAGIC },\n        ]\n    }\n    @Prop({ required: true }) options!: ICodeBlockSettingsOptions\n\n    validNumber(v: any): boolean | string {\n        if (isNaN(v)) {\n            return 'Must be a valid Number.'\n        }\n        return true\n    }\n\n    get serializedOptions(): string {\n        const o: any = {\n            ...this.options,\n        }\n        o.randomizer = {\n            ...this.options.randomizer,\n        }\n        o.randomizer.sets = this.options.randomizer.sets.map((s) => {\n            let values = {}\n            s.values.forEach((v) => (values[v.tag] = v.value))\n            return values\n        })\n        return JSON.stringify(o)\n    }\n    set serializedOptions(v: string) {}\n\n    get domLibraries(): IListItemData[] {\n        return this.$compilerRegistry.domLibraries\n    }\n    get compiledLanguages(): IListItemData[] {\n        if (this.options.runCode === false) {\n            return this.languages\n        }\n        return this.$compilerRegistry.languages\n    }\n    get workerLibraries(): IListItemData[] {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: this.compilerLanguage,\n            version: this.compilerVersion,\n        })\n        if (c === undefined || c.libraries === undefined) {\n            return []\n        }\n        return c.libraries.map((l) => {\n            return { label: l.displayName, value: l.key }\n        })\n    }\n    get languages(): IListItemData[] {\n        return this.$CodeBlock.knownLanguages()\n    }\n    get compilerVersions(): string[] {\n        return this.$compilerRegistry.versionsForLanguage(this.compilerLanguage)\n    }\n\n    isExperimentalVersion(language: string, version: string): boolean {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: language,\n            version: version,\n        })\n        if (c === undefined) {\n            return false\n        }\n        return c.experimental\n    }\n\n    isDeprecatedVersion(language: string, version: string): boolean {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: language,\n            version: version,\n        })\n        if (c === undefined) {\n            return false\n        }\n        return c.deprecated\n    }\n\n    get isExperimental(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.experimental\n        }\n        return false\n    }\n\n    get isDeprecated(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.deprecated\n        }\n        return false\n    }\n\n    get languageHasCompiler(): boolean {\n        if (this.runCode) {\n            return true\n        }\n        const c = this.$compilerRegistry.getCompiler({ languageType: this.compilerLanguage })\n        return c !== undefined\n    }\n    get compilerLanguage(): string {\n        if (this.options.runCode === false) {\n            return this.options.language\n        }\n        return this.options.compiler.languageType\n    }\n    get compilerLanguageObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.compiledLanguages, this.compilerLanguage)\n    }\n    set compilerLanguageObj(v: IListItemData) {\n        if (this.options.runCode === false) {\n            this.$emit('language-change', v.value)\n        }\n        this.$emit('compiler-change', v.value)\n    }\n\n    get compilerVersion(): string {\n        return this.options.compiler.version\n    }\n    set compilerVersion(v: string) {\n        this.$emit('compiler-version-change', v)\n    }\n\n    get runCode(): boolean {\n        return this.options.runCode\n    }\n    set runCode(v: boolean) {\n        this.$emit('run-state-change', v)\n    }\n\n    get maxRuntime(): number {\n        return this.options.executionTimeout\n    }\n    set maxRuntime(v: number) {\n        this.$emit('timeout-change', v)\n    }\n\n    get maxCharacters(): number {\n        return this.options.maxCharacters\n    }\n    set maxCharacters(v: number) {\n        this.$emit('character-limit-change', v)\n    }\n\n    get domLibrary(): IListItemData[] {\n        return this.options.domLibs\n            .map((d) => this.domLibraries.find((k) => k.value == d))\n            .filter((v) => v !== undefined) as IListItemData[]\n    }\n    set domLibrary(v: IListItemData[]) {\n        this.$emit(\n            'dom-libs-change',\n            v.map((vv) => vv.value)\n        )\n    }\n\n    get workerLibrary(): IListItemData[] {\n        return this.options.workerLibs\n            .map((d) => this.workerLibraries.find((k) => k.value == d))\n            .filter((v) => v !== undefined) as IListItemData[]\n    }\n    set workerLibrary(v: IListItemData[]) {\n        this.$emit(\n            'worker-libs-change',\n            v.map((vv) => vv.value)\n        )\n    }\n\n    get solutionTheme(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.themes, this.options.solutionTheme)\n    }\n    set solutionTheme(v: IListItemData) {\n        this.$emit('theme-change', {\n            solution: v.value,\n            code: this.options.codeTheme,\n        })\n    }\n\n    get codeTheme(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.themes, this.options.codeTheme)\n    }\n    set codeTheme(v: IListItemData) {\n        this.$emit('theme-change', {\n            solution: this.options.solutionTheme,\n            code: v.value,\n        })\n    }\n\n    get outputParser(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.outputParsers, this.options.outputParser)\n    }\n    set outputParser(v: IListItemData) {\n        this.$emit('output-parser-change', v.value)\n    }\n\n    get continuousCompile(): boolean {\n        return this.options.continuousCompilation\n    }\n    set continuousCompile(v: boolean) {\n        this.$emit('continuous-compile-change', v)\n    }\n    get compiler(): ICompilerID {\n        return this.options.compiler\n    }\n    get canContinousCompile(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        console.d(\n            'Continuous Compile - ',\n            'can',\n            cmp,\n            cmp ? cmp.allowsContinousCompilation : false,\n            cmp ? cmp.canRun : false\n        )\n        if (cmp) {\n            console.d('Continuous Compile - ', 'can', cmp.allowsContinousCompilation && cmp.canRun)\n            return cmp.allowsContinousCompilation && cmp.canRun\n        }\n        return false\n    }\n\n    get allowsMessagePassing(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d('Message Passing - ', 'can', cmp.allowsContinousCompilation && cmp.canRun)\n            return cmp.allowsMessagePassing && cmp.canRun\n        }\n        return false\n    }\n\n    get messagePassing(): boolean {\n        return this.options.messagePassing\n    }\n    set messagePassing(v: boolean) {\n        this.$emit('message-passing-change', v)\n    }\n\n    get keepAlive(): boolean {\n        return this.options.keepAlive\n    }\n    set keepAlive(v: boolean) {\n        this.$emit('keep-alive-change', v)\n    }\n\n    get showMaxRuntime(): boolean {\n        return this.runCode && !(this.keepAlive && this.messagePassing)\n    }\n\n    get allowsREPL(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d('REPL - ', 'can', cmp.allowsREPL && cmp.allowsMessagePassing && cmp.canRun)\n            return cmp.allowsREPL && cmp.allowsMessagePassing && cmp.canRun\n        }\n        return false\n    }\n\n    get persistentArguments(): boolean {\n        return this.options.persistentArguments\n    }\n    set persistentArguments(v: boolean) {\n        this.$emit('persistent-arguments-change', v)\n    }\n    get canPersistentArguments(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d(\n                'Persistent Arguments - ',\n                'can',\n                cmp.acceptsJSONArgument && cmp.allowsPersistentArguments && cmp.canRun\n            )\n            return cmp.acceptsJSONArgument && cmp.allowsPersistentArguments && cmp.canRun\n        }\n        return false\n    }\n\n    get accepstArguments(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.acceptsJSONArgument\n        }\n        return false\n    }\n    showArgsInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.AllowArgumentsCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.AllowArgumentsHintJava'\n                : 'CodeBlocksSettings.AllowArgumentsHint'\n        )\n    }\n    showPersistentArgsInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.UsePersistentArgumentsCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.UsePersistentArgumentsHintJava'\n                : 'CodeBlocksSettings.UsePersistentArgumentsHint'\n        )\n    }\n    showMessagesInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.AllowMessagePassingCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.AllowMessagePassingHintJava'\n                : 'CodeBlocksSettings.AllowMessagePassingHint'\n        )\n    }\n    showAliveInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.KeepAliveCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.KeepAliveHintJava'\n                : 'CodeBlocksSettings.KeepAliveHint'\n        )\n    }\n\n    showInfoDialog(title, message): void {\n        this.$q\n            .dialog({\n                title: this.$l(title),\n                message: this.$l(message),\n                html: true,\n                style: 'width:75%',\n            })\n            .onOk(() => {\n                // console.log('OK')\n            })\n            .onCancel(() => {\n                // console.log('Cancel')\n            })\n            .onDismiss(() => {\n                // console.log('I am triggered on both OK and Cancel')\n            })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlocksSettings.vue?vue&type=template&id=74271390&scoped=true&\"\nimport script from \"./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlocksSettings.vue?vue&type=style&index=0&id=74271390&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"74271390\",\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QToggle,QSelect,QAvatar,QItem,QItemSection,QItemLabel,QSlideTransition,QBanner,QIcon,QInput,QBtn});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editMode),expression:\"editMode\"}],staticClass:\"blocksEditorPanelContainer\",style:((\"width:\" + _vm.width + \"px\"))},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.block !== null),expression:\"block !== null\"}],staticClass:\"blocksEditorPanelLeft\"},[_c('q-btn',{staticClass:\"expander\",attrs:{\"icon\":_vm.expanded ? 'chevron_right' : 'chevron_left',\"size\":\"sm\",\"unelevated\":\"\",\"align\":\"center\",\"color\":\"blue-grey-4\"},on:{\"click\":_vm.onExpandClick}}),_c('CodeBlock',{attrs:{\"block\":_vm.saveBlock,\"theme\":_vm.themeForBlock(_vm.block),\"mode\":\"\",\"visibleLines\":_vm.visibleLinesNow,\"editMode\":true,\"muteReadyState\":true,\"isBookmarkPanel\":true,\"namePrefix\":\"panel_\"},on:{\"code-changed-in-edit-mode\":_vm.onCodeChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport { BlockData } from '../lib/codeBlocksManager'\nimport {\n    IBlockData,\n    KnownBlockTypes,\n    ICodeBlockDataState,\n    CodeExpansionType,\n} from '../lib/ICodeBlocks'\n\ninterface IBlockDataExtended extends IBlockData {\n    firstLine: number\n    actualContent: string\n    actualAltContent: string\n}\n@Component({ components: { CodeBlock } })\nexport default class CodePanel extends Vue {\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: number | 'auto'\n    @Prop({ required: true }) block!: BlockData | null\n    @Prop({ default: 400 }) panelWidth!: number\n\n    get saveBlock(): IBlockData {\n        if (\n            this.block !== null &&\n            this.block !== undefined &&\n            this.block.content !== null &&\n            this.block.content !== undefined\n        ) {\n            return this.block\n        }\n        const ret: IBlockDataExtended = {\n            hasCode: false,\n            type: KnownBlockTypes.BLOCKSTATIC,\n            content: '',\n            alternativeContent: '',\n            noContent: true,\n            id: -1,\n            uuid: '',\n            parentID: -2,\n            expanded: true,\n            codeExpanded: CodeExpansionType.AUTO,\n            obj: null,\n            version: '',\n            readyCount: 0,\n            errors: [],\n            visibleLines: 'auto',\n            hasAlternativeContent: false,\n            shouldAutoreset: false,\n            generateTemplate: true,\n            firstLine: 1,\n            actualContent: '',\n            actualAltContent: '',\n            width: '100%',\n            height: '200px',\n            align: 'center',\n            readonly: true,\n            static: true,\n            hidden: false,\n            themeForCodeBlock: '',\n            lineCountHint: -0,\n            getThemeForBlock: (bl: ICodeBlockDataState) => {\n                return ''\n            },\n            blockly: {\n                _blockErrors: [],\n                useOverride: false,\n                toolbox: {\n                    categories: [],\n                },\n                showControls: false,\n                toolboxOverride: '',\n                blocks: [],\n            },\n        }\n        return ret\n    }\n\n    get visibleLinesNow() {\n        if (this.visibleLines === 'auto') {\n            return 'auto'\n        }\n        if (this.visibleLines <= 2) {\n            return 2\n        }\n        return this.visibleLines\n    }\n    onCodeChange() {}\n\n    get width() {\n        if (this.expanded) {\n            return 2 * this.panelWidth\n        }\n        return this.panelWidth\n    }\n\n    expanded: boolean = false\n    onExpandClick() {\n        this.expanded = !this.expanded\n    }\n\n    themeForBlock(bl: BlockData | null): string {\n        if (bl === null || bl === undefined) {\n            return ''\n        }\n        return bl.themeForCodeBlock\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodePanel.vue?vue&type=template&id=30d18f94&scoped=true&\"\nimport script from \"./CodePanel.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodePanel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodePanel.vue?vue&type=style&index=0&id=30d18f94&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"30d18f94\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PlaygroundCanvas',{key:_vm.runCount,ref:\"playgroundContainer\",attrs:{\"output\":_vm.finalOutputObject.initialOutput,\"obj\":_vm.block.obj,\"block\":_vm.block,\"eventHub\":_vm.eventHub,\"tagSet\":_vm.tagSet,\"data-question\":_vm.block.parentID,\"runner\":_vm.emitRun},on:{\"canvas-change\":_vm.onCanvasChange,\"did-init\":_vm.onDidInit}}),_c('div',{staticClass:\"row justify-end\"},[(_vm.editMode)?_c('q-btn-group',{staticClass:\"q-mb-sm\",attrs:{\"rounded\":\"\"}},[_c('q-btn',{attrs:{\"color\":_vm.isExpandedAuto ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Auto\",\"icon\":\"video_label\"},on:{\"click\":_vm.setExpandedAuto}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedLarge ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Large\",\"icon\":\"call_to_action\"},on:{\"click\":_vm.setExpandedLarge}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedTiny ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Small\",\"icon\":\"visibility_off\"},on:{\"click\":_vm.setExpandedTiny}})],1):_vm._e()],1),_c('q-slide-transition',[(_vm.editMode)?_c('CodeBlock',{attrs:{\"block\":_vm.block,\"theme\":_vm.options.theme,\"mode\":_vm.options.mode,\"visibleLines\":_vm.visibleLinesNow,\"editMode\":this.editMode,\"muteReadyState\":true},on:{\"code-changed-in-edit-mode\":_vm.onCodeChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row ma-0 pa-0 block-playground\",attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id}},[(_vm.block.generateTemplate)?_c('div',{class:(\"col-12 text-\" + (_vm.block.align))},[_c('div',{ref:\"innerPlaygroundContainer\",staticClass:\"playground\",style:((\"width:\" + (_vm.block.width) + \";height:\" + (_vm.block.height))),attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id}},[_vm._v(\" \"+_vm._s(_vm.output)+\" \")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { IScriptBlock } from '@/lib/IScriptBlock'\n\n@Component\nexport default class PlaygroundCanvas extends Vue {\n    @Prop() output: string = ''\n    @Prop({ required: true }) obj!: IScriptBlock\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop({ default: () => {} }) runner!: () => void\n    @Prop() tagSet?: IRandomizerSet\n\n    get canvas(): HTMLElement {\n        return this.$refs.innerPlaygroundContainer as HTMLElement\n    }\n\n    whenMounted(): void {\n        if (this.obj) {\n            console.d('Will Init', this.canvas, $(this.canvas).css('background-color'))\n\n            this.$compilerRegistry.loadLibraries(this.block.domLibs, () => {\n                this.$nextTick(() => {\n                    this.$nextTick(() => {\n                        this.obj.rebuild() //we need to rebuild the script to make sure its context is the current state of the DOM\n\n                        this.obj.init($(this.canvas), $(this.block.scopeSelector), this.runner)\n                        this.$emit('did-init', this.canvas)\n                    })\n                })\n            })\n        }\n    }\n\n    mounted() {\n        if (this.eventHub) {\n            this.eventHub.$on('all-mounted', this.whenMounted)\n        } else {\n            this.whenMounted()\n        }\n\n        this.$emit('canvas-change', this.canvas)\n    }\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('all-mounted')\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlaygroundCanvas.vue?vue&type=template&id=140fcf80&scoped=true&\"\nimport script from \"./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlaygroundCanvas.vue?vue&type=style&index=0&id=140fcf80&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"140fcf80\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport codemirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\n//helper to reset the canvas area if needed\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport PlaygroundCanvas from '@/components/PlaygroundCanvas.vue'\nimport BaseBlock from '@/components/BaseBlock.vue'\nconst PlaygroundCanvasCtor = Vue.extend(PlaygroundCanvas)\n\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { IRandomizerSet, CodeExpansionType } from '@/lib/ICodeBlocks'\nimport { IScriptOutputObject } from '@/lib/IScriptBlock'\n\nexport interface ICodePlaygroundOptions {\n    mode: string\n    theme: string\n    lineNumbers: boolean\n    line: boolean\n    tabSize: number\n    indentUnit: number\n    autoCloseBrackets: boolean\n    readOnly: boolean\n    firstLineNumber: number\n    gutters: string[]\n}\n\n@Component({\n    components: { PlaygroundCanvas, CodeBlock },\n})\nexport default class CodePlayground extends BaseBlock {\n    @Prop({ required: true }) finalOutputObject!: IScriptOutputObject\n    @Prop({\n        required: true,\n        validator: function (b) {\n            if (!b.obj) {\n                return false\n            }\n            return true\n        },\n    })\n    block!: BlockData\n\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: 'auto' | string\n    @Prop({ default: 'base16-dark' }) theme!: string\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop() tagSet?: IRandomizerSet\n\n    get originalMode(): boolean {\n        if (this.block.obj === null) {\n            return false\n        }\n        return this.block.obj.requestsOriginalVersion()\n    }\n\n    get options(): ICodePlaygroundOptions {\n        return {\n            // codemirror options\n            mode: this.$CodeBlock.mimeType('javascript'),\n            theme: this.theme,\n            lineNumbers: true,\n            line: true,\n            tabSize: 4,\n            indentUnit: 4,\n            autoCloseBrackets: true,\n            readOnly: !this.editMode,\n            firstLineNumber: 1,\n            gutters: ['diagnostics', 'CodeMirror-linenumbers'],\n        }\n    }\n    get visibleLinesNow(): 'auto' | string {\n        if (this.block.codeExpanded == CodeExpansionType.TINY) {\n            return '2.4'\n        } else if (this.block.codeExpanded == CodeExpansionType.LARGE) {\n            return '33.4'\n        }\n        return 'auto'\n    }\n    created() {\n        this.eventHub.$on('before-run', this.resetBeforeRun)\n        this.eventHub.$on('render-diagnostics', this.updateErrors)\n    }\n    mounted() {\n        const hasErrors = this.block && this.block.obj && this.block.obj.err.length > 0\n        if (hasErrors) {\n            this.updateErrors()\n        }\n        this.eventHub.$on('output-updated', this.onFinalOutputObject)\n    }\n    beforeDestroy() {\n        this.eventHub.$off('before-run', this.resetBeforeRun)\n        this.eventHub.$off('render-diagnostics', this.updateErrors)\n        this.eventHub.$off('output-updated', this.onFinalOutputObject)\n    }\n    isPreparingRun: boolean = false\n    lastRun: Date = new Date()\n    runCount: number = 0\n    canvas: HTMLElement | undefined = undefined\n    needsCodeRebuild: boolean = false\n    initAndRebuildErrors: any[] = []\n\n    get isExpandedLarge(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.LARGE\n    }\n    get isExpandedTiny(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.TINY\n    }\n    get isExpandedAuto(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.AUTO\n    }\n    setExpandedLarge(): void {\n        this.setExpanded(CodeExpansionType.LARGE)\n    }\n    setExpandedTiny(): void {\n        this.setExpanded(CodeExpansionType.TINY)\n    }\n    setExpandedAuto(): void {\n        this.setExpanded(CodeExpansionType.AUTO)\n    }\n    setExpanded(val: CodeExpansionType): void {\n        this.block.codeExpanded = val\n\n        if (this.block.codeExpanded != CodeExpansionType.TINY) {\n            this.$CodeBlock.refreshAllCodeMirrors()\n        }\n    }\n    updateErrors(): boolean {\n        this.block.errors = []\n        if (this.block.obj === null) {\n            return false\n        }\n\n        this.block.obj.err = this.block.obj.err.concat(this.initAndRebuildErrors)\n        this.block.obj.err.forEach((e) => {\n            let err = {\n                start: { line: e.line, column: e.column },\n                end: { line: e.line, column: e.column + 1 },\n                message: e.msg,\n                severity: Vue.$SEVERITY_ERROR,\n            }\n            if (e.line === undefined) {\n                err.start = { line: 1, column: -1 }\n                err.end = { line: 1, column: -1 }\n            } else if (e.column === undefined) {\n                err.start = { line: e.line, column: -1 }\n                err.end = { line: e.line, column: -1 }\n            }\n            this.block.errors.push(err)\n        })\n\n        if (this.block.obj.err.length > 0 && this.editMode) {\n            this.needsCodeRebuild = true\n            return true\n        } else {\n            return false\n        }\n    }\n    resetBeforeRun(): void {\n        const rebuildCode = this.editMode && (this.needsCodeRebuild || this.tagSet !== undefined)\n        let reInitCode = rebuildCode\n        let onNextTick = false\n        if (this.block && this.block.obj) {\n            if (this.block.shouldAutoreset || rebuildCode) {\n                if (this.canvas !== undefined) {\n                    console.log(\n                        'Will Re-Initialize',\n                        this.canvas,\n                        $(this.canvas).css('background-color')\n                    )\n                } else {\n                    console.log('Will Re-Initialize', 'Without Canvas')\n                }\n                this.lastRun = new Date()\n                this.runCount++\n                reInitCode = true\n                onNextTick = true\n            } else {\n                const self = this\n                this.$nextTick(() => {\n                    //console.log(\"Will Reset\", this.canvas, $(this.canvas).css('background-color'));\n                    if (self.block.obj !== null && self.canvas !== undefined) {\n                        self.block.obj.reset($(self.canvas))\n                    }\n                    self.updateErrors()\n                })\n            }\n        }\n\n        if (rebuildCode) {\n            this.initAndRebuildErrors = []\n\n            if (this.block.obj != null) {\n                this.block.obj.rebuild(this.block.actualContent())\n                if (this.updateErrors()) {\n                    this.initAndRebuildErrors = this.block.obj.err\n                    this.block.obj.invalidate()\n                    return\n                }\n            }\n\n            reInitCode = true\n        }\n\n        if (reInitCode) {\n            this.initAndRebuildErrors = []\n            let doInit = () => {\n                console.i('!!! DO INIT !!!')\n                if (this.block.obj !== null) {\n                    const canvas: any = $(this.canvas as HTMLElement)\n                    const scope: any = $(this.block.scopeSelector)\n                    this.block.obj.init(\n                        canvas as JQuery<HTMLElement>,\n                        scope as JQuery<HTMLElement>,\n                        this.emitRun\n                    )\n                    if (this.updateErrors()) {\n                        this.initAndRebuildErrors = this.block.obj.err\n                        this.block.obj.invalidate()\n                        return false\n                    }\n                    return true\n                } else {\n                    return false\n                }\n            }\n            if (onNextTick) {\n                this.$nextTick(doInit)\n            } else {\n                if (!doInit()) {\n                    return\n                }\n            }\n        }\n    }\n    emitRun() {\n        this.$emit('run', this.block)\n    }\n    onCanvasChange(can) {\n        this.canvas = can\n        if (this.editMode) {\n            this.updateErrors()\n        }\n        //console.log(\"Changed Canvas\", can, $(can).css('background-color'));\n    }\n    onCodeChange(newCode: string): void {\n        if (this.editMode) {\n            this.needsCodeRebuild = true\n        }\n    }\n    onDidInit(): void {\n        this.updateErrors()\n    }\n\n    //we emit an event to the global event hub\n    //@Watch('finalOutputObject')\n    onFinalOutputObject(val) {\n        const initialOutput = val.output\n\n        console.d('onFinalOutputObject', val, this.block.obj)\n        if (this.block.obj !== null) {\n            this.block.obj.err = []\n            try {\n                if (val.parseError != null) {\n                    if (\n                        !this.block.obj.onParseError(initialOutput, val.parseError) &&\n                        this.editMode\n                    ) {\n                        let jStr = initialOutput\n                        if (val.parseError.parsedString !== undefined) {\n                            jStr = val.parseError.parsedString\n                        }\n                        jStr = jStr.replace(/</g, '&lt;')\n\n                        this.$q\n                            .dialog({\n                                title: this.$l('CodePlayground.InvalidJson'),\n                                message:\n                                    '<span class=\"text-caption jsonErrTitle\">' +\n                                    this.$t('CodePlayground.Output') +\n                                    '</span><div class=\"jsonErrObj\">' +\n                                    jStr +\n                                    '</div>\\n<span class=\"text-caption jsonErrTitle\">' +\n                                    this.$t('CodePlayground.Message') +\n                                    '</span><div class=\"jsonErr\">' +\n                                    val.parseError +\n                                    '</div>',\n                                html: true,\n                            })\n                            .onOk(() => {\n                                // console.log('OK')\n                            })\n                            .onCancel(() => {\n                                // console.log('Cancel')\n                            })\n                            .onDismiss(() => {\n                                // console.log('I am triggered on both OK and Cancel')\n                            })\n                    }\n                    if (this.updateErrors()) {\n                        return\n                    }\n                }\n\n                const self = this\n                this.$nextTick(() => {\n                    console.d('Ticked', self.block.obj, self.canvas)\n                    if (self.block.obj !== null && self.canvas !== undefined) {\n                        let result = self.block.obj.update(val, $(self.canvas))\n                        if (self.updateErrors()) {\n                            return\n                        }\n\n                        //construct a split output object\n                        if (result === undefined && val.processedOutput.type != 'text') {\n                            if (!self.originalMode) {\n                                result = val.processedOutput.text\n                            }\n                        }\n\n                        if (self.originalMode) {\n                            if (typeof result !== 'string') {\n                                result = ''\n                            }\n                        }\n\n                        if (result !== undefined) {\n                            self.$emit('changeOutput', result)\n                        }\n                    }\n                })\n            } catch (e) {\n                console.error(e)\n            }\n            if (this.block.obj.err.length > 0) {\n                if (this.editMode) {\n                    this.updateErrors()\n                } else {\n                    console.error(this.block.obj.err)\n                }\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodePlayground.vue?vue&type=template&id=a541e1f2&scoped=true&\"\nimport script from \"./CodePlayground.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodePlayground.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodePlayground.vue?vue&type=style&index=0&id=a541e1f2&lang=sass&scoped=true&\"\nimport style1 from \"./CodePlayground.vue?vue&type=style&index=1&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a541e1f2\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtnGroup from 'quasar/src/components/btn-group/QBtnGroup.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtnGroup,QBtn,QSlideTransition});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblock block-\" + _vm.typeName)},[(_vm.allowsREPL && _vm.canStartREPL)?_c('div',{staticClass:\"row runnerState\",attrs:{\"id\":\"stateBox\",\"data-question\":_vm.blockInfo.id}},[_c('q-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isRunning),expression:\"!isRunning\"}],staticClass:\"white--text q-pr-sm\",staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"allow_run_button\",\"loading\":!_vm.isReady,\"disabled\":!_vm.isReady,\"color\":\"primary\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.emitRun}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.start'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}})],1),_c('div',{staticClass:\"animated fadeIn\"}),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canStop),expression:\"canStop\"}],staticClass:\"q-pl-0\"},[_c('q-btn',{staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"cancel_button\",\"color\":\"negative\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.emitStop}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.stop'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"stop\"}})],1)],1)]),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGlobalMessages),expression:\"showGlobalMessages\"}],staticClass:\"globalState col-grow\",staticStyle:{\"align-self\":\"center\"}},[_c('div',{attrs:{\"id\":\"message\"},domProps:{\"innerHTML\":_vm._s(_vm.globalStateMessage)}})])])],1):_vm._e(),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeInup\",\"leave-active-class\":\"animated fadeOutDown\"}},[(!_vm.isRunning)?_c('div',{staticClass:\"q-mt-md\"},[_c('q-banner',{staticClass:\"bg-warning\",attrs:{\"inline-actions\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [(_vm.isReady && !_vm.canStop)?_c('q-btn',{attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.emitRun}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.start'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}})],1):_vm._e()]},proxy:true}],null,false,3640785926)},[_vm._v(\" Interpreter is not yet Ready. You may need to start it first. \")])],1):_vm._e()]),_c('Terminal',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsREPL && _vm.canStartREPL),expression:\"allowsREPL && canStartREPL\"}],attrs:{\"console-sign\":\"$\",\"allow-arbitrary\":\"\",\"height\":\"500px\",\"blockInfo\":_vm.blockInfo,\"eventHub\":_vm.eventHub},on:{\"run\":_vm.emitRun,\"stop\":_vm.emitStop}}),(!_vm.allowsREPL)?_c('div',{staticClass:\"q-mt-md\"},[_vm._v(\" The current language does not support a REPL-Element \")]):_vm._e(),(!_vm.canStartREPL)?_c('div',{staticClass:\"q-mt-md\"},[_vm._v(\" Unable to start REPL-Environment. (Code execution, message passing and keep-alive need to be enabled) \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-terminal-wrapper\"},[_c('div',{staticClass:\"basicterm\",attrs:{\"id\":\"terminal\"}})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport '@/lib/jquery.terminal.js'\nimport $ from 'jquery'\nimport { PythonV102Compiler } from '@/compiler/python.v102'\nimport { ICompilerID } from '@/lib/ICompilerRegistry'\nimport { IMainBlock } from '@/lib/codeBlocksManager'\n\nfunction sleep(s) {\n    return new Promise((resolve) => setTimeout(resolve, s))\n}\n\n@Component\nexport default class Terminal extends Vue {\n    @Prop({ default: '250px' }) height!: string\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    @Prop({ required: true }) eventHub!: Vue\n\n    private term: any\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n\n    get welcomeMessage(): string {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        let language = ''\n        if (cmp !== undefined) {\n            language = cmp.language\n        }\n        return `{*_*} Interactive ${language} Shell\\n------------------------------`\n    }\n\n    emitRun() {\n        if (this.term !== undefined) {\n            this.clear()\n        }\n        this.$emit('run')\n    }\n\n    emitStop() {\n        this.$emit('stop')\n    }\n\n    clear() {\n        if (this.term !== undefined) {\n            this.term.clear()\n            this.term.echo(this.welcomeMessage)\n        }\n    }\n\n    mounted() {\n        const self = this\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler) as PythonV102Compiler\n        let ps1 = cmp.language === 'python' ? 'py> ' : '>>> ',\n            ps2 = '... '\n\n        async function lock() {\n            let resolve\n            let ready = self.term.ready\n            self.term.ready = new Promise((res) => (resolve = res))\n            await ready\n            return resolve\n        }\n\n        async function interpreter(command) {\n            let unlock = await lock()\n            try {\n                self.term.pause()\n\n                for (const c of command.split('\\n')) {\n                    try {\n                        if (c === '.stop') {\n                            self.emitStop()\n                            return\n                        }\n                        if (c === '.restart') {\n                            self.emitStop()\n                            self.clear()\n                            await sleep(1000)\n                            self.emitRun()\n                            return\n                        }\n                        if (c === '.clear') {\n                            self.term.clear()\n                            return\n                        }\n                        self.term.set_prompt(ps2)\n                        await cmp.interpreter(\n                            c,\n                            (incomplete) => {\n                                self.term.set_prompt(incomplete ? ps2 : ps1)\n                            },\n                            (msg) => {\n                                self.term.echo(msg, { newline: false })\n                            },\n                            (err) => {\n                                self.term.error(err)\n                            }\n                        )\n                    } catch (e) {\n                        self.term.error(e)\n                    }\n                }\n            } finally {\n                self.term.resume()\n                await sleep(10)\n                unlock()\n            }\n        }\n\n        const el: any = $('#terminal', '.vue-terminal-wrapper')\n        self.term = el.terminal(interpreter, {\n            greetings: self.welcomeMessage,\n            name: 'codeblocks_repl',\n            height: this.height,\n            prompt: ps1,\n        })\n\n        self.term.ready = Promise.resolve()\n\n        if (this.eventHub) {\n            this.eventHub.$on('console-log', (msg) => self.term.echo(msg))\n            this.eventHub.$on('console-err', (msg) => self.term.error(msg))\n            this.eventHub.$on('clicked-run', () => self.clear())\n        }\n    }\n\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('console-log')\n            this.eventHub.$off('console-err')\n            this.eventHub.$off('clicked-run')\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Terminal.vue?vue&type=template&id=2ec5dfe0&\"\nimport script from \"./Terminal.vue?vue&type=script&lang=ts&\"\nexport * from \"./Terminal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Terminal.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\n\n//helper to reset the canvas area if needed\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport BaseBlock from '@/components/BaseBlock.vue'\nimport { BlockData, IMainBlock } from '@/lib/codeBlocksManager'\nimport { ICompilerID, ICompilerInstance } from '@/lib/ICompilerRegistry'\nimport Terminal from '@/components/Terminal.vue'\n\n@Component({ components: { Terminal } })\nexport default class CodeREPL extends BaseBlock {\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    @Prop({ required: true }) isReady!: boolean\n    @Prop({ required: true }) canStop!: boolean\n    @Prop({ required: true }) showGlobalMessages!: boolean\n    @Prop({ required: true }) globalStateMessage!: string\n\n    get hasContent(): boolean {\n        return false\n    }\n\n    get isRunning(): boolean {\n        return this.canStop\n    }\n\n    get canStartREPL(): boolean {\n        return this.blockInfo.runCode && this.blockInfo.messagePassing && this.blockInfo.keepAlive\n    }\n\n    get allowsREPL(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined) {\n            return false\n        }\n        return cmp.allowsREPL\n    }\n\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n\n    get typeName() {\n        let s = this.block.type.toLowerCase()\n        if (this.block.hidden) {\n            s += '-hidden'\n        }\n        if (this.block.static) {\n            s += '-static'\n        }\n        return s\n    }\n\n    get readyWhenMounted() {\n        return false\n    }\n\n    get terminal(): Vue {\n        return this.$refs.terminal as Vue\n    }\n\n    emitRun() {\n        this.$emit('run', this.block)\n    }\n\n    emitStop() {\n        this.$emit('stop', this.block)\n    }\n\n    mounted() {\n        if (this.eventHub) {\n            this.eventHub.$on('all-mounted', this.whenMounted)\n        } else {\n            this.whenMounted()\n        }\n\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        this.waitReady(cmp)\n    }\n\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('all-mounted')\n        }\n        this.whenBlockIsDestroyed()\n    }\n\n    waitReady(cmp: ICompilerInstance | undefined) {\n        if (cmp === undefined || cmp.isReady) {\n            this.whenBlockIsReady()\n        } else {\n            setTimeout(this.waitReady.bind(this, cmp), 500)\n        }\n    }\n\n    whenMounted(): void {\n        this.emitRun()\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeREPL.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeREPL.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeREPL.vue?vue&type=template&id=a208ad54&\"\nimport script from \"./CodeREPL.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeREPL.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn,QIcon,QBanner});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.editMode)?_c('div',{directives:[{name:\"highlight\",rawName:\"v-highlight\",value:(_vm.language),expression:\"language\"}],domProps:{\"innerHTML\":_vm._s(_vm.previewValue)}}):_c('TipTap',{staticClass:\"editor q-my-3\",attrs:{\"value\":_vm.value,\"name\":_vm.name,\"language\":_vm.language,\"scopUUID\":_vm.scopeUUID,\"editMode\":_vm.editMode},on:{\"input\":_vm.updatedContentDefered}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row q-ma-0 q-pa-0\"},[_c('div',{staticClass:\"col-xs-12 col-md-6 q-px-sm\"},[_c('q-input',{ref:\"editBox\",staticClass:\"plain accqstXmlInput noRTEditor\",attrs:{\"type\":\"textarea\",\"autogrow\":\"\",\"filled\":\"\",\"name\":_vm.name,\"label\":\"HTML Source\",\"background-color\":\"blue-grey darken-3\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6 q-px-sm\"},[_c('div',{staticClass:\"q-field__label no-pointer-events ellipsis text-caption wysiwyg\"},[_vm._v(\" Preview \")]),_c('div',{directives:[{name:\"highlight\",rawName:\"v-highlight\",value:(_vm.language),expression:\"language\"},{name:\"tagged\",rawName:\"v-tagged\",value:(_vm.scopeUUID),expression:\"scopeUUID\"}],domProps:{\"innerHTML\":_vm._s(_vm.text)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { ITagReplaceAction } from '../plugins/tagger'\n@Component\nexport default class TipTap extends Vue {\n    @Prop({ default: '' }) value!: string\n    @Prop({ default: '' }) name!: string\n    @Prop({ default: '' }) scopeUUID!: string\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'javascript' }) language!: string\n\n    get text(): string {\n        return this.value\n    }\n    set text(v: string) {\n        this.updatedContent(v)\n    }\n\n    updatedContent(v: string): void {\n        this.$emit('input', v)\n    }\n    replaceTemplateTags(o: ITagReplaceAction) {\n        if (!this.editMode) {\n            return\n        }\n        if (o.scopeUUID != this.scopeUUID) {\n            return\n        }\n        this.updatedContent(Vue.$tagger.replaceTemplateTagInString(this.text, o.name, o.newValue))\n    }\n\n    mounted() {\n        const eb: any = this.$refs.editBox\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        eb.$el.querySelectorAll('textarea[name]').forEach(el => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n        })\n        Vue.$tagger.$on('replace-template-tag', this.replaceTemplateTags)\n    }\n\n    beforeDestroy() {\n        Vue.$tagger.$off('replace-template-tag', this.replaceTemplateTags)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TipTap.vue?vue&type=template&id=5a368702&scoped=true&\"\nimport script from \"./TipTap.vue?vue&type=script&lang=ts&\"\nexport * from \"./TipTap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TipTap.vue?vue&type=style&index=0&id=5a368702&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a368702\",\n  null\n  \n)\n\nexport default component.exports\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QField from 'quasar/src/components/field/QField.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QInput,QField});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport TipTap from './TipTap.vue'\nimport BaseBlock from './BaseBlock.vue'\n@Component({ components: { TipTap } })\nexport default class SimpleText extends BaseBlock {\n    @Prop() language!: string\n    @Prop({ default: '' }) value!: string\n    @Prop({ default: '' }) name!: string\n    @Prop({ default: '' }) scopeUUID!: string\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: '' }) previewValue!: string\n\n    textUpdateTimer: number | null = null\n    textUpdateStartTime: number = 0\n    updatedContentDefered(newVal: string) {\n        if (!this.editMode) {\n            this.updatedContent(newVal)\n            return\n        }\n\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.textUpdateTimer !== null) {\n            clearTimeout(this.textUpdateTimer)\n            this.textUpdateTimer = null\n        } else {\n            this.textUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.textUpdateTimer = null\n            this.updatedContent(newVal)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.textUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.textUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n\n    updatedContent(v: string) {\n        //console.log('Updating')\n        //this.value = v\n        this.$emit('input', v)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SimpleText.vue?vue&type=template&id=fead5814&scoped=true&\"\nimport script from \"./SimpleText.vue?vue&type=script&lang=ts&\"\nexport * from \"./SimpleText.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fead5814\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlockContainer from '@/components/CodeBlockContainer.vue'\nimport CodeBlocksSettings, { ICodeBlockSettingsOptions } from '@/components/CodeBlocksSettings.vue'\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport CodePanel from '@/components/CodePanel.vue'\n//import Blockly from '@/components/Blockly/Blockly.vue'\nimport CodePlayground from '@/components/CodePlayground.vue'\nimport CodeREPL from '@/components/CodeREPL.vue'\nimport SimpleText from '@/components/SimpleText.vue'\nimport { BlockData, IMainBlock, IBlockBookmarkPayload } from '@/lib/codeBlocksManager'\nimport { IScriptOutputObject, IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport {\n    ICompilerID,\n    ICompilerErrorDescription,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\nimport {\n    CodeOutputTypes,\n    IRandomizerSet,\n    KnownBlockTypes,\n    IBlockDataPlayground,\n} from '@/lib/ICodeBlocks'\n\nfunction formatOutput(result) {\n    const regex =\n        /^@(bold|italic|em)?(red|green|blue|cyan|magenta|yellow|orange|gray|#[\\da-f]{6}|#[\\da-f]{8}):(.*)/gim\n\n    return result\n        .split('\\n')\n        .map((line, nr) => {\n            let m\n\n            if ((m = regex.exec(result)) !== null) {\n                let style = ''\n                if (m[2] === 'gray') {\n                    style = 'style=\"color:silver\"'\n                } else if (m[2] !== undefined) {\n                    style = `style=\"color:${m[2]}\"`\n                }\n\n                if (m[1] === 'bold') {\n                    line = `<b ${style}>${m[3]}</b>`\n                } else if (m[1] === 'italic' || m[1] === 'em') {\n                    line = `<em ${style}>${m[3]}</em>`\n                } else {\n                    line = `<span ${style}>${m[3]}</span>`\n                }\n            }\n\n            return line\n        })\n        .join('\\n')\n}\n\nconst Blockly = () => import('@/components/Blockly/Blockly.vue')\nexport interface IOnTypeChangeInfo {\n    type: KnownBlockTypes\n    hidden: boolean\n    static: boolean\n    id: number\n    hasCode: boolean\n}\n\nexport interface IOnVisibleLinesChangeInfo {\n    visibleLines: 'auto' | number\n    id: number\n}\n\nexport interface IOnPlacementChangeInfo extends IBlockDataPlayground {\n    id: number\n}\n\nexport interface IOnScriptVersionChangeInfo {\n    version: string\n    id: number\n}\n\nexport interface IOnSetAutoResetInfo {\n    shouldAutoreset: boolean\n    id: number\n}\n\nexport interface IOnGenerateTemplateInfo {\n    generateTemplate: boolean\n    id: number\n}\n\nexport interface IOnThemeChangeInfo {\n    solution: string\n    code: string\n}\n\n@Component({\n    components: {\n        CodeBlockContainer,\n        CodeBlocksSettings,\n        CodeBlock,\n        CodePlayground,\n        SimpleText,\n        Blockly,\n        CodePanel,\n        CodeREPL,\n    },\n})\nexport default class CodeBlocks extends Vue {\n    didInitialize: boolean = false\n    outputHTML: string = ''\n    output: string = ''\n    sansoutput: string = ''\n    didClip: boolean = false\n    _finalOutputObject: IScriptOutputObject | null = null\n    eventHub: Vue = new Vue()\n\n    get continuousCompile(): boolean {\n        if (this.editMode) {\n            return false\n        }\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.allowsContinousCompilation\n        }\n        return false\n    }\n\n    get finalOutputObject(): IScriptOutputObject {\n        if (this._finalOutputObject === null || this._finalOutputObject === undefined) {\n            return {\n                initialOutput: '',\n                output: '',\n                processedOutput: {\n                    type: 'text',\n                    text: '',\n                    json: undefined,\n                },\n                sansoutput: '',\n                outputElement: $(this.outputElement) as any,\n            }\n        }\n        return this._finalOutputObject\n    }\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    get options(): ICodeBlockSettingsOptions {\n        return {\n            language: this.language,\n            compiler: this.compiler,\n            executionTimeout: this.executionTimeout,\n            maxCharacters: this.maxCharacters,\n            runCode: this.runCode,\n            domLibs: this.domLibraries,\n            workerLibs: this.workerLibraries,\n            id: this.blockInfo.id,\n            codeTheme: this.codeTheme,\n            solutionTheme: this.solutionTheme,\n            outputParser: this.outputParser,\n            randomizer: this.blockInfo.randomizer,\n            continuousCompilation: this.blockInfo.continuousCompilation,\n            persistentArguments: this.blockInfo.persistentArguments,\n            messagePassing: this.blockInfo.messagePassing,\n            keepAlive: this.blockInfo.keepAlive,\n        }\n    }\n    get blocks(): BlockData[] {\n        return this.blockInfo.blocks\n    }\n    get language(): string {\n        return this.blockInfo.language\n    }\n    get blockid(): number {\n        return this.blockInfo.id\n    }\n    get executionTimeout(): number {\n        return this.blockInfo.executionTimeout\n    }\n    get maxCharacters(): number {\n        return this.blockInfo.maxCharacters\n    }\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n    get runCode(): boolean {\n        return this.blockInfo.runCode\n    }\n    get domLibraries(): string[] {\n        return this.blockInfo.domLibs\n    }\n    get workerLibraries(): string[] {\n        return this.blockInfo.workerLibs\n    }\n    get solutionTheme(): string {\n        return this.blockInfo.solutionTheme\n    }\n    get codeTheme(): string {\n        return this.blockInfo.codeTheme\n    }\n    get readonly(): boolean {\n        return this.blockInfo.readonly\n    }\n    get outputParser(): CodeOutputTypes {\n        return this.blockInfo.outputParser\n    }\n\n    get editMode(): boolean {\n        return false\n    }\n    get hasOutput(): boolean {\n        return this.outputHTML !== undefined && this.outputHTML != ''\n    }\n    get mimeType(): string {\n        return this.$CodeBlock.mimeType(this.language)\n    }\n    get isReady(): boolean {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (!cmp) {\n            return false\n        }\n\n        return (\n            this.didInitialize &&\n            cmp.isReady &&\n            !cmp.isRunning &&\n            !this.$compilerState.runButtonForceHide\n        )\n    }\n    get canRun(): boolean {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (!cmp) {\n            return false\n        }\n        return cmp.canRun && this.runCode\n    }\n    get randomizerActive(): boolean {\n        return this.blockInfo.randomizer.active\n    }\n    get activeTagSet(): IRandomizerSet | undefined {\n        if (!this.randomizerActive) {\n            return undefined\n        }\n        return this.tagSet(this.blockInfo.randomizer.previewIndex)\n    }\n    get completeSource(): string {\n        return this.blocks\n            .filter((b) => b.hasCode)\n            .map((b) => b.actualContent())\n            .reduce((p, c) => {\n                return p + '\\n' + c\n            }, '')\n    }\n    get showGlobalMessages(): boolean {\n        return !this.$compilerState.globalStateHidden\n    }\n    get playgrounds(): BlockData[] {\n        return this.blocks.filter((b) => b.type == 'PLAYGROUND')\n    }\n    get outputElement(): HTMLElement {\n        return this.$refs.output as HTMLElement\n    }\n    get addonClass(): string {\n        let cl = ''\n        if (this.editMode) {\n            cl += 'editmode '\n        }\n        if (this.readonly) {\n            cl += 'block-readonly '\n        }\n        return cl\n    }\n    get backgroundColorClass(): string {\n        return this.editMode ? 'blue-grey darken-4' : ''\n    }\n\n    blockBecameReady(): void {\n        let readyCount = this.blockInfo.blocks.map((b) => b.readyCount).reduce((p, c) => p + c, 0)\n        if (readyCount == this.blockInfo.blocks.length) {\n            this.$nextTick(() => {\n                this.eventHub.$emit('all-mounted', {})\n            })\n        }\n        console.d('Ready', readyCount, this.blockInfo.blocks.length)\n    }\n\n    tagSet(nr: number): IRandomizerSet {\n        return this.blockInfo.randomizer.sets[nr]\n    }\n\n    themeForBlock(bl: BlockData): string {\n        return bl.themeForCodeBlock\n    }\n    public blockById(id: number): BlockData | undefined {\n        return this.blocks.find((block) => block.id == id)\n    }\n    onTypeChange(nfo: IOnTypeChangeInfo): void {}\n    onVisibleLinesChange(nfo: IOnVisibleLinesChangeInfo): void {}\n    onPlacementChange(nfo: IOnPlacementChangeInfo): void {}\n    onScriptVersionChange(nfo: IOnScriptVersionChangeInfo): void {}\n    onSetAutoReset(nfo: IOnSetAutoResetInfo): void {}\n    onSetGenerateTemplate(nfo: IOnGenerateTemplateInfo): void {}\n    onCompilerChange(v: string): void {}\n    onCompilerVersionChange(v: string): void {}\n    onRunStateChange(v: boolean): void {}\n    onContinousCompileStateChange(v: boolean): void {}\n    onMessagePassingChange(v: boolean): void {}\n    onKeepAliveChange(v: boolean): void {}\n    onPersistentArgumentsChange(v: boolean): void {}\n    onLanguageChange(v: string): void {}\n    onCharacterLimitChange(v: number): void {}\n    onTimeoutChange(v: number): void {}\n    onWorkerLibChange(v: string[]): void {}\n    onDomLibChange(v: string[]): void {}\n    onThemeChange(nfo: IOnThemeChangeInfo): void {}\n    onOutputParserChange(v: CodeOutputTypes): void {}\n    moveUp(idx: number): void {}\n    moveDown(idx: number): void {}\n    removeBlock(idx: number): void {}\n    addNewBlock(): void {}\n    onPlaygroundChangedOutput(newOutput: string | undefined): void {\n        if (newOutput === undefined) {\n            return\n        }\n        if (this.output != newOutput) {\n            this.output = newOutput.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n            if (this.maxCharacters > 0 && this.output.length > this.maxCharacters) {\n                this.outputHTML = formatOutput(this.output.substr(0, this.maxCharacters))\n                this.outputHTML += this.$CodeBlock.format_info(\n                    'Info: Output too long. Removed all following Characters. \\n<b>...</b>\\n\\n'\n                )\n            } else {\n                this.outputHTML = formatOutput(this.output)\n            }\n            this.outputHTML += this.sansoutput\n        }\n    }\n\n    resetOutput(): void {\n        this.output = ''\n        this.sansoutput = ''\n        this.didClip = false\n        this.outputHTML = ''\n    }\n\n    log(text: string): void {\n        //console.log(\"log\", text);\n        this.output += text\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        if (!this.didClip) {\n            let formatedText\n            if (this.maxCharacters > 0 && this.output.length > this.maxCharacters) {\n                formatedText = this.$CodeBlock.format_info(\n                    'Info: Output too long. Removed all following Characters. \\n<b>...</b>\\n\\n'\n                )\n                this.didClip = true\n            } else {\n                formatedText = formatOutput(text)\n            }\n\n            this.outputHTML += formatedText\n            this.eventHub.$emit('console-log', formatedText)\n        }\n    }\n\n    logError(text: string): void {\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        this.eventHub.$emit('console-err', text)\n        text = this.$CodeBlock.format_error(text)\n        //console.log(\"err\", text);\n        this.sansoutput += text\n        this.outputHTML += text\n    }\n\n    logInfo(text: string): void {\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        this.eventHub.$emit('console-nfo', text)\n        text = this.$CodeBlock.format_info(text)\n        //console.log(\"nfo\", text);\n        this.sansoutput += text\n        this.outputHTML += text\n    }\n\n    processDiagnostics(error: ICompilerErrorDescription) {\n        const line = error.start.line\n        this.blocks.forEach((block) => {\n            if (!block.hasCode) {\n                return\n            }\n\n            const first = block.firstLine\n            const last = block.nextLine - 1\n\n            if (error.start.line >= first && error.start.line <= last) {\n                block.errors.push(error)\n            }\n        })\n    }\n\n    clearDiagnostics(): void {\n        this.blocks.forEach((block) => (block.errors = []))\n        this.eventHub.$emit('render-diagnostics', {})\n    }\n\n    loadLibraries(whenLoaded: () => void): void {\n        this.$compilerRegistry.loadLibraries(this.domLibraries, whenLoaded)\n    }\n\n    /**\n     * Call when the program finished executing and pass the output string. We will send the output to all embeded canvas elements\n     * @param {*} output\n     * @param {*} infoErrorOutput output generated by info or error messages\n     */\n    finishedExecution(output: string, infoErrorOutput: string, resultData?: object | any[]): void {\n        let parseError: any = undefined\n        let processed: IProcessedScriptOutput = { type: 'text', json: undefined, text: output }\n\n        if (output !== undefined && this.playgrounds.length > 0) {\n            try {\n                processed = this.$CodeBlock.processMixedOutput(\n                    output,\n                    this.outputParser,\n                    undefined,\n                    resultData\n                )\n            } catch (e) {\n                parseError = e\n            }\n        }\n\n        this._finalOutputObject = {\n            initialOutput: output,\n            output: output,\n            processedOutput: processed,\n            sansoutput: this.sansoutput,\n            parseError: parseError,\n            //outputElement: $(this.outputElement) as JQuery<HTMLElement> //This line soes not work here, looks like the update did not yet happen?\n            outputElement: $(this.$refs.output as any) as any,\n        }\n        this.eventHub.$emit('output-updated', this._finalOutputObject)\n\n        this.onRunFinished()\n    }\n\n    get hasREPL(): boolean {\n        return this.blocks.filter((bl) => bl.type === KnownBlockTypes.REPL).length > 0\n    }\n\n    get canStop(): boolean {\n        return !this.isReady && this.didRunOnce\n    }\n    stop(): void {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined || cmp.stop === undefined) {\n            return\n        }\n        cmp.stop()\n    }\n\n    didRunOnce: boolean = false\n    run(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined) {\n            return false\n        }\n\n        this.$compilerState.setAllRunButtons(false)\n\n        this.resetOutput()\n        this.eventHub.$emit('clicked-run')\n        this.clearDiagnostics()\n        const self = this\n\n        this.loadLibraries(() => {\n            self.eventHub.$emit('before-run', {})\n            console.d('compileAndRun')\n            self.didRunOnce = true\n\n            self.$nextTick(() => {\n                let _args: object | string[] = {}\n                if (cmp.acceptsJSONArgument) {\n                    _args = this.blockInfo.initArgsForLanguage()\n                    this.blocks.forEach((bl) => {\n                        if (bl.obj) {\n                            console.i('!!! ADD ARGUMENTS TO !!!')\n                            bl.obj.addArgumentsTo(_args)\n                        }\n                    })\n                }\n\n                const runOptions: ICompileAndRunArguments = {\n                    max_ms: self.executionTimeout,\n                    log_callback: self.log.bind(this),\n                    info_callback: self.logInfo.bind(this),\n                    err_callback: self.logError.bind(this),\n                    compileFailedCallback: self.processDiagnostics.bind(this),\n                    finishedExecutionCB: (\n                        success = true,\n                        overrideOutput = undefined,\n                        returnState = undefined\n                    ) => {\n                        console.i('returnState:', returnState, _args)\n                        if (!success) {\n                            self.$compilerState.hideGlobalState()\n                            self.$compilerState.setAllRunButtons(true)\n                            return undefined\n                        }\n                        let res = self.finishedExecution(\n                            overrideOutput ? overrideOutput : self.output,\n                            self.sansoutput,\n                            runOptions.resultData\n                        )\n\n                        if (returnState !== undefined) {\n                            if (this.blockInfo.persistentArguments) {\n                                console.i('Store Default State', returnState)\n                                this.blockInfo.storeDefaultArgs(returnState)\n                            } else {\n                                this.blockInfo.clearDefaultArgs()\n                            }\n                        }\n                        self.$compilerState.hideGlobalState()\n                        self.$compilerState.setAllRunButtons(true)\n                        return res\n                    },\n                    args: _args,\n                    didReceiveMessage: (cmd, data) => {\n                        console.i('MESSAGE - Received', cmd)\n                        this.blocks.forEach((bl) => {\n                            if (bl.obj) {\n                                bl.obj.didReceiveMessage(cmd, data)\n                            }\n                        })\n                    },\n                    postMessageFunction: null,\n                    dequeuePostponedMessages: () => {},\n                    allowMessagePassing: cmp.allowsMessagePassing && self.options.messagePassing,\n                    keepAlive:\n                        cmp.allowsMessagePassing &&\n                        self.options.messagePassing &&\n                        self.options.keepAlive,\n                    withREPL:\n                        cmp.allowsMessagePassing &&\n                        self.options.messagePassing &&\n                        self.options.keepAlive &&\n                        this.hasREPL,\n                    beforeStartHandler: () => {\n                        this.blocks.forEach((bl) => {\n                            console.d('MESSAGE - Before Start')\n                            if (bl.obj) {\n                                bl.obj.beforeStart()\n                            }\n                        })\n                    },\n                    whenFinishedHandler: (args: object | string[]) => {\n                        this.blocks.forEach((bl) => {\n                            console.d('MESSAGE - When Finished')\n                            if (bl.obj) {\n                                bl.obj.whenFinished(args, runOptions.resultData)\n                            }\n                        })\n                    },\n                    resultData: undefined,\n                }\n\n                if (runOptions.keepAlive) {\n                    this.blocks.forEach((bl) => {\n                        if (bl.obj) {\n                            bl.obj.runConfig = runOptions\n                        }\n                    })\n                }\n\n                cmp.compileAndRun('' + self.blockid, self.completeSource, self, runOptions)\n            })\n        })\n\n        return true\n    }\n    onkey(event) {\n        if (\n            this.editMode &&\n            (event.ctrlKey || event.metaKey) &&\n            (event.key === 'w' || event.key === 'j')\n        ) {\n            this.run()\n            event.preventDefault()\n            return false\n        }\n    }\n\n    mounted() {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            cmp.preload()\n        }\n        const self = this\n        this.loadLibraries(() => {\n            self.eventHub.$emit('initialized-libraries', {})\n        })\n        this.didInitialize = true\n\n        if (this.editMode) {\n            window.addEventListener('keydown', this.onkey, false)\n        }\n\n        Vue.$GlobalEventHub.$on('bookmark-block', this.onBookmarkBlock)\n    }\n    beforeDestroy() {\n        window.removeEventListener('keydown', this.onkey)\n        Vue.$GlobalEventHub.$off('bookmark-block')\n    }\n\n    bookmarkedBlock: BlockData | null = null\n\n    get hasBookmark(): boolean {\n        return this.bookmarkedBlock !== null && this.editMode\n    }\n\n    get panelBlock(): BlockData | null {\n        return this.bookmarkedBlock\n    }\n    onBookmarkBlock(data: IBlockBookmarkPayload) {\n        console.i('Bookmark', data)\n        if (this.blockInfo.uuid == data.uuid) {\n            this.bookmarkedBlock = data.block\n        }\n    }\n\n    triggerRecompileWhenFinished: boolean = false\n    onViewCodeChange(forceRun: boolean = false) {\n        if (!forceRun && !this.blockInfo.continuousCompilation) {\n            return\n        }\n\n        if (this.continuousCodeUpdateTimer !== null) {\n            clearTimeout(this.continuousCodeUpdateTimer)\n            this.continuousCodeUpdateTimer = null\n        }\n        this.continuousCodeUpdateTimer = setTimeout(() => {\n            const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n            console.d('Continuous Compile - ', cmp)\n            if (cmp && cmp.allowsContinousCompilation) {\n                if (!cmp.isRunning && cmp.isReady) {\n                    console.d('Continuous Compile - ', 'RUN')\n                    this.run()\n                } else {\n                    console.d('Continuous Compile - ', 'DEFER')\n                    this.triggerRecompileWhenFinished = true\n                }\n            }\n        }, process.env.VUE_APP_CONTINOUS_COMPILE_TIMEOUT)\n    }\n\n    onRunFinished() {\n        this.didRunOnce = false\n        if (this.triggerRecompileWhenFinished) {\n            console.d('Continuous Compile - ', 'RE-RUN')\n            this.triggerRecompileWhenFinished = false\n            this.onViewCodeChange()\n        }\n    }\n\n    continuousCodeUpdateTimer: number | null = null\n    onRunFromPlayground() {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (\n            cmp &&\n            cmp.canRun &&\n            !this.editMode &&\n            cmp.allowsContinousCompilation // &&\n            // this.blockInfo.continuousCompilation\n        ) {\n            this.onViewCodeChange(true)\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlocks.vue?vue&type=template&id=e67b43d0&\"\nimport script from \"./CodeBlocks.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocks.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlocks.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn,QIcon,QTooltip,QSlideTransition});\n","<template>\n    <q-layout view=\"hHh lpR fFf\" style=\"min-height:0\">\n        <q-page-container>\n            <CodeBlocks :blockInfo=\"blocks\" />\n        </q-page-container>\n    </q-layout>\n</template>\n\n<script>\nimport CodeBlocks from './components/CodeBlocks'\nimport Vue from 'vue'\n\nexport default {\n    name: 'App',\n\n    props: ['blocks'],\n\n    components: {\n        CodeBlocks\n    },\n\n    data: () => ({}),\n    computed: {}\n}\n</script>\n\n<style lang=\"sass\">\n#app\n  margin-bottom: 16px\n  background-color: rgba(1,1,1,0)\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=eaf51832&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport qInstall from \"../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QLayout,QPageContainer});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{staticStyle:{\"min-height\":\"0\"},attrs:{\"view\":\"hHh lpR fFf\"}},[_c('q-page-container',[_c('CodeBlocksEditor',{attrs:{\"blockInfo\":_vm.blocks}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlocks, {\n    IOnTypeChangeInfo,\n    IOnVisibleLinesChangeInfo,\n    IOnPlacementChangeInfo,\n    IOnScriptVersionChangeInfo,\n    IOnSetAutoResetInfo,\n    IOnThemeChangeInfo,\n    IOnGenerateTemplateInfo,\n} from '@/components/CodeBlocks.vue'\nimport { KnownBlockTypes, CodeOutputTypes } from '@/lib/ICodeBlocks'\n\nvar mixin = {\n    created: function () {\n        console.log(1)\n    },\n}\n@Component\nexport default class CodeBlocksEditor extends CodeBlocks {\n    get editMode(): boolean {\n        return true\n    }\n\n    onTypeChange(nfo: IOnTypeChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        bl.type = nfo.type\n        bl.hidden = nfo.hidden\n        bl.static = nfo.static\n        bl.hasCode = nfo.hasCode\n    }\n\n    onVisibleLinesChange(nfo: IOnVisibleLinesChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        if (nfo.visibleLines != 'auto' && isNaN(nfo.visibleLines)) {\n            bl.visibleLines = 'auto'\n        } else {\n            bl.visibleLines = nfo.visibleLines\n        }\n    }\n    onPlacementChange(nfo: IOnPlacementChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        bl.width = nfo.width\n        bl.height = nfo.height\n        bl.align = nfo.align\n    }\n    onCompilerChange(v: string): void {\n        const c = this.$compilerRegistry.getCompiler({ languageType: v })\n        if (c !== undefined) {\n            console.log('Selected Compiler', c, v, this.blockInfo.compiler)\n            this.blockInfo.compiler.languageType = v\n            this.blockInfo.compiler.version = c.version\n            this.blockInfo.language = c.language\n\n            console.log('PRELOADING')\n            c.preload()\n        }\n    }\n    onCompilerVersionChange(v: string): void {\n        console.log('Selected Version', v, this.blockInfo.compiler.languageType)\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: this.blockInfo.compiler.languageType,\n            version: v,\n        })\n        this.blockInfo.compiler.version = v\n\n        if (c !== undefined) {\n            this.blockInfo.language = c.language\n\n            console.log('PRELOADING')\n            c.preload()\n        }\n    }\n    onRunStateChange(v: boolean): void {\n        this.blockInfo.runCode = v\n    }\n    onContinousCompileStateChange(v: boolean): void {\n        this.blockInfo.continuousCompilation = v\n    }\n    onMessagePassingChange(v: boolean): void {\n        this.blockInfo.messagePassing = v\n    }\n    onKeepAliveChange(v: boolean): void {\n        this.blockInfo.keepAlive = v\n    }\n    onPersistentArgumentsChange(v: boolean): void {\n        if (v === false) {\n            this.blockInfo.clearDefaultArgs()\n        }\n        this.blockInfo.persistentArguments = v\n    }\n    onLanguageChange(v: string): void {\n        this.blockInfo.language = v\n    }\n    onCharacterLimitChange(v: number): void {\n        this.blockInfo.maxCharacters = v\n    }\n    onTimeoutChange(v: number): void {\n        this.blockInfo.executionTimeout = v\n    }\n    onWorkerLibChange(v: string[]): void {\n        this.blockInfo.workerLibs = v\n    }\n    onDomLibChange(v: string[]): void {\n        this.blockInfo.domLibs = v\n    }\n    onScriptVersionChange(nfo: IOnScriptVersionChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.version = nfo.version\n        if (bl.obj) {\n            bl.obj.version = nfo.version\n        }\n    }\n    onSetAutoReset(nfo: IOnSetAutoResetInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.shouldAutoreset = nfo.shouldAutoreset\n    }\n\n    onSetGenerateTemplate(nfo: IOnGenerateTemplateInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.generateTemplate = nfo.generateTemplate\n    }\n\n    onThemeChange(nfo: IOnThemeChangeInfo): void {\n        this.blockInfo.solutionTheme = nfo.solution\n        this.blockInfo.codeTheme = nfo.code\n    }\n    moveUp(idx: number): void {\n        this.blockInfo.moveUp(idx)\n    }\n    moveDown(idx: number): void {\n        this.blockInfo.moveDown(idx)\n    }\n    addNewBlock(): void {\n        this.blockInfo.addNewBlock()\n    }\n    removeBlock(idx: number): void {\n        this.blockInfo.removeBlock(idx)\n    }\n    onOutputParserChange(v: CodeOutputTypes): void {\n        this.blockInfo.outputParser = v\n    }\n}\n","var render, staticRenderFns\nimport script from \"./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"","<template>\n    <q-layout view=\"hHh lpR fFf\" style=\"min-height:0\">\n        <q-page-container>\n            <CodeBlocksEditor :blockInfo=\"blocks\" />\n        </q-page-container>\n    </q-layout>\n</template>\n\n<script>\nimport CodeBlocksEditor from './components/CodeBlocksEditor'\nimport Vue from 'vue'\n\nexport default {\n    name: 'AppEditor',\n\n    props: ['blocks'],\n\n    components: {\n        CodeBlocksEditor\n    },\n\n    data: () => ({}),\n    computed: {}\n}\n</script>\n\n<style lang=\"sass\">\n#app\n  margin-bottom: 16px\n  background-color: rgba(1,1,1,0)\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppEditor.vue?vue&type=template&id=0797aa13&\"\nimport script from \"./AppEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./AppEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppEditor.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport qInstall from \"../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QLayout,QPageContainer});\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\nexport class BlockLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'BLOCK'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        const alts = bl.getElementsByTagName('ALTERNATIVE')\n        const codes = bl.getElementsByTagName('CODE')\n        if (codes.length > 0) {\n            block.content = codes[0].textContent ? codes[0].textContent : ''\n        }\n\n        if (alts.length > 0) {\n            block.hasAlternativeContent = true\n            block.alternativeContent = alts[0].textContent\n            if (!editMode && block.noContent) {\n                block.content = block.alternativeContent ? block.alternativeContent : ''\n            }\n        }\n\n        block.hasCode = true\n    }\n}\n\nexport const blockLoader = new BlockLoadManager()\n\nexport default function(loaders: { [index: string]: IBlockloadManager }) {\n    loaders[blockLoader.blockTag] = blockLoader\n}\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\nexport class PlaygroundLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'PLAYGROUND'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        block.obj = null\n        positioninLoadManager.loadFromDatablock(bl, inBlock, block)\n        block.version = bl.getAttribute('data-version')\n            ? bl.getAttribute('data-version')!\n            : block.version\n    }\n}\n\nexport const playgroundLoader = new PlaygroundLoadManager()\n\nexport default function (loaders: { [index: string]: IBlockloadManager }) {\n    loaders[playgroundLoader.blockTag] = playgroundLoader\n}\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\n\nexport class REPLLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'REPL'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {}\n}\n\nexport const REPLLoader = new REPLLoadManager()\n\nexport default function (loaders: { [index: string]: IBlockloadManager }) {\n    loaders[REPLLoader.blockTag] = REPLLoader\n}\n","import { ScriptBlock } from './scriptBlock'\nimport { IScriptOutputObject, IPlaygroundObject, ILegacyPlaygroundObject } from './IScriptBlock'\nimport i18n from '../plugins/i18n'\nimport 'reflect-metadata'\nimport { Vue, Component, Watch } from 'vue-property-decorator'\n\nimport App from '../App.vue'\nimport AppEditor from '../AppEditor.vue'\nimport { uuid } from 'vue-uuid'\n\nimport compilerRegistry, { compilerRegistry as CompilerRegistry } from './CompilerRegistry'\nimport { ICompilerErrorDescription, ICompilerID } from './ICompilerRegistry'\nimport {\n    IRandomizerSettings,\n    CodeOutputTypes,\n    IBlockData,\n    KnownBlockTypes,\n    IRandomizerSet,\n    IRandomizerSetTag,\n    ICodeBlockDataState,\n    IBlockDataBase,\n    IBlockDataBlockly,\n    IBlockloadManager,\n    IBlockElementData,\n    CodeExpansionType,\n} from './ICodeBlocks'\n\n//get loaders\nimport blockInstaller from '@/lib/BlockloadManagers/BlockManager'\nimport blocklyInstaller from '@/lib/BlockloadManagers/BlocklyManager'\nimport playgroundInstaller from '@/lib/BlockloadManagers/PlaygroundManager'\nimport REPLInstaller from '@/lib/BlockloadManagers/REPLManager'\nimport { trim } from 'jquery'\n\nconst loaders: { [index: string]: IBlockloadManager } = {}\nblockInstaller(loaders)\nblocklyInstaller(loaders)\nplaygroundInstaller(loaders)\nREPLInstaller(loaders)\n\nVue.prototype.$compilerRegistry = CompilerRegistry\n\nexport interface IAppSettings {\n    id: number\n    uuid: string\n    editMode: boolean\n    readonly: boolean\n    randomizer: IRandomizerSettings\n    blocks: BlockData[]\n    compiler: ICompilerID\n    language: string\n    runCode: boolean\n    domLibs: string[]\n    workerLibs: string[]\n    outputParser: CodeOutputTypes\n    solutionTheme: string\n    codeTheme: string\n    executionTimeout: number\n    maxCharacters: number\n    scopeUUID?: string\n    scopeSelector?: string\n    continuousCompilation: boolean\n    messagePassing: boolean\n    keepAlive: boolean\n    persistentArguments: boolean\n    shadowRoot?: ShadowRoot\n}\n\ninterface IAppElementData {\n    randomizerActive?: string\n    randomizerPreviewIndex?: string\n    randomizerKnownTags?: string\n    randomizerSets?: string\n    question?: string\n    compiler?: string\n    compilerVersion?: string\n    domLibs?: string\n    workerLibs?: string\n    readonly?: string\n    runCode?: string\n    id?: string\n    executionTimeout?: string\n    maxCharacters?: string\n    scopeUUID?: string\n    scopeSelector?: string\n    continuousCompilation?: string\n    messagePassing?: string\n    keepAlive?: string\n    persistentArguments?: string\n    outputParser?: CodeOutputTypes\n    solutionTheme?: string\n    codeTheme?: string\n}\n\nexport interface IBlockBookmarkPayload {\n    uuid: string\n    block: BlockData | null\n}\n\n@Component\nexport class BlockData extends Vue implements IBlockData {\n    appSettings!: IAppSettings\n    hasCode!: boolean\n    type!: KnownBlockTypes\n    content!: string\n    alternativeContent!: string | null\n    noContent!: boolean\n    id!: number\n    uuid!: string\n    parentID!: number\n    expanded!: boolean\n    codeExpanded!: CodeExpansionType\n    obj!: ScriptBlock | null\n    readonly!: boolean\n    static!: boolean\n    hidden!: boolean\n    version!: string\n    readyCount!: number\n    errors!: ICompilerErrorDescription[]\n    scopeUUID?: string\n    scopeSelector!: string\n    visibleLines!: number | 'auto'\n    hasAlternativeContent!: boolean\n    shouldAutoreset!: boolean\n    generateTemplate!: boolean\n    width!: string\n    height!: string\n    align!: string\n    blockly!: IBlockDataBlockly\n    lineCountHint!: number\n    _oac?: () => string //used by Blockly to re-place the actualContent-Method while keeping the old implementation around\n\n    actualContent() {\n        if (this.appSettings.randomizer.active) {\n            return Vue.$tagger.replaceRandomTagsInString(\n                this.content,\n                this.appSettings.randomizer.sets[this.appSettings.randomizer.previewIndex]\n            )\n        }\n\n        return this.content\n    }\n    recreateScriptObject() {\n        if (this.type === KnownBlockTypes.PLAYGROUND) {\n            console.i('recreateScriptObject')\n\n            const so = new ScriptBlock(this.actualContent(), this.version)\n            this.obj = so\n            console.i('Block Rebuild', this.obj, this.uuid)\n        }\n    }\n    created() {\n        this.recreateScriptObject()\n    }\n\n    getThemeForBlock(bl: ICodeBlockDataState): string {\n        if (bl.static || bl.readonly || bl.hidden) {\n            return this.appSettings.codeTheme\n        }\n\n        return this.appSettings.solutionTheme\n    }\n\n    get themeForCodeBlock(): string {\n        if (this.static || this.readonly || this.hidden) {\n            return this.appSettings.codeTheme\n        }\n\n        return this.appSettings.solutionTheme\n    }\n\n    get isLast(): boolean {\n        return this.id == this.appSettings.blocks.length - 1\n    }\n    get firstLine(): number {\n        if (this.id === 0) {\n            return 1\n        }\n        return this.appSettings.blocks[this.id - 1].nextLine\n    }\n\n    get lineCount(): number {\n        if (!this.hasCode) {\n            return 0\n        }\n        if (this.lineCountHint >= 0) {\n            return this.lineCountHint\n        }\n\n        let ct = 0\n        this.content.replace(/\\n/, (m) => {\n            ct++\n            return m\n        })\n        return ct\n    }\n\n    get nextLine(): number {\n        if (!this.hasCode) {\n            return this.firstLine\n        }\n        return this.firstLine + this.lineCount\n    }\n    get domLibs(): string[] {\n        return this.appSettings.domLibs\n    }\n\n    //is this right. Happend when converting from JS\n    get scriptVersion(): string {\n        return this.version\n    }\n\n    @Watch('type')\n    onTypeChanged(newType: KnownBlockTypes, oldType: KnownBlockTypes) {\n        if (newType != oldType) {\n            this.recreateScriptObject()\n        }\n    }\n}\n\nexport interface IMainBlock extends IAppSettings {\n    swap(id1: number, id2: number): void\n    moveUp(id: number): void\n    moveDown(id: number): void\n    removeBlock(idx: number): void\n    addNewBlock(): void\n\n    initArgsForLanguage(): object | string[]\n    storeDefaultArgs(args: object | string[]): void\n    clearDefaultArgs(): void\n}\n\nfunction isTrue(val: any): boolean {\n    //return val !== undefined || val == 'true' || val == '1'\n    return val !== undefined && val != 'false' && val != '0'\n}\n\nconst useShadowDOM = false\n\n//this will handle the vue mounting on the dom\nclass InternalCodeBlocksManager {\n    constructBlock(data: IAppSettings, bl: IBlockDataBase): BlockData {\n        if (bl.type === KnownBlockTypes.PLAYGROUND) {\n            if (bl.content == '' || bl.content === undefined || bl.content === null) {\n                bl.content = '{}'\n            }\n        }\n\n        return new BlockData({\n            data: () => {\n                return {\n                    ...bl,\n                    appSettings: data,\n                }\n            },\n        })\n    }\n\n    readonly element: HTMLElement\n    readonly data: IAppSettings\n    readonly shadowRoot: ShadowRoot | undefined = undefined\n    constructor(el: HTMLElement) {\n        if (useShadowDOM) {\n            const content = el.outerHTML\n\n            //replace original element with empty div that will store the shadowDOM\n            const parent = el.parentElement!\n            const rewrap = document.createElement('DIV')\n            parent.replaceChild(rewrap, el)\n\n            //add shadowDOM and clear content\n            const shadow = rewrap.attachShadow({ mode: 'open' })\n            this.shadowRoot = shadow\n            shadow.innerHTML = ''\n\n            //copy root-level styles into the shadowDOM\n            $('style').each((idx, style) => {\n                const st = document.createElement('STYLE')\n                st.innerHTML = style.innerHTML\n                shadow.appendChild(st)\n            })\n\n            $('link[shadow]').each((idx, link) => {\n                shadow.appendChild(link.cloneNode())\n            })\n\n            // //add new root and append original Element\n            // const root = document.createElement('DIV')\n            // root.id = 'root'\n            // //root.innerHTML = noContent\n            // root.appendChild(el)\n            // shadow.appendChild(root)\n            // console.log($('style').length)\n            // this.element = root\n\n            //append original element to shadowDOM\n            shadow.appendChild(el)\n            this.element = el\n        } else {\n            this.shadowRoot = undefined\n            this.element = el\n        }\n        //console.log(this.element)\n        const inData = el.dataset as IAppElementData\n        const data: IAppSettings = {\n            id: -1,\n            editMode: el.tagName == 'CODEBLOCKSEDITOR' || el.hasAttribute('codeblockseditor'),\n            runCode: false,\n            language: 'javascript',\n            compiler: {\n                languageType: 'javascript',\n                version: '101',\n            },\n            randomizer: {\n                active: false,\n                previewIndex: 0,\n                knownTags: [],\n                sets: [],\n            },\n            domLibs: [],\n            workerLibs: [],\n            blocks: [],\n            outputParser: CodeOutputTypes.AUTO,\n            readonly: false,\n            solutionTheme: 'solarized light',\n            codeTheme: 'xq-light',\n            uuid: 'is-set-below',\n            executionTimeout: 5000,\n            maxCharacters: 1000,\n            continuousCompilation: isTrue(inData.continuousCompilation),\n            messagePassing: isTrue(inData.messagePassing),\n            keepAlive: isTrue(inData.keepAlive),\n            persistentArguments: isTrue(inData.persistentArguments),\n            shadowRoot: this.shadowRoot,\n        }\n\n        if (inData.randomizerActive !== undefined) {\n            data.randomizer.active = isTrue(inData.randomizerActive)\n        }\n        if (inData.randomizerPreviewIndex !== undefined) {\n            data.randomizer.previewIndex = Number(inData.randomizerPreviewIndex)\n        }\n        if (inData.randomizerKnownTags !== undefined) {\n            data.randomizer.knownTags = JSON.parse(inData.randomizerKnownTags)\n        }\n        if (inData.randomizerSets !== undefined) {\n            data.randomizer.sets = JSON.parse(inData.randomizerSets).map((o: object, i: number) => {\n                const ret: IRandomizerSet = {\n                    uuid: uuid.v4(),\n                    values: [],\n                }\n                Object.keys(o).forEach((tag) => {\n                    const item: IRandomizerSetTag = {\n                        tag: tag,\n                        value: o[tag],\n                    }\n                    ret.values.push(item)\n                })\n\n                return ret\n            })\n        }\n\n        if (inData.question !== undefined) {\n            data.id = Number(inData.question)\n        }\n\n        if (inData.compiler !== undefined) {\n            const cInfo: ICompilerID = {\n                languageType: inData.compiler,\n                version: inData.compilerVersion!,\n            }\n            data.compiler = cInfo\n\n            const c = CompilerRegistry.getCompiler(data.compiler)\n            if (c === undefined) {\n                data.runCode = false\n                data.language = data.compiler.languageType\n            } else {\n                data.runCode = isTrue(inData.runCode)\n                data.language = c.language\n                data.compiler.version = c.version\n            }\n        }\n\n        if (inData.domLibs !== undefined) {\n            data.domLibs = JSON.parse(inData.domLibs).map((l: string) =>\n                compilerRegistry.mapLibrary(l)\n            )\n        }\n\n        if (inData.readonly !== undefined) {\n            if (data.editMode) {\n                data.readonly = false\n            } else {\n                data.readonly = isTrue(inData.readonly)\n            }\n        }\n\n        if (inData.workerLibs !== undefined) {\n            data.workerLibs = JSON.parse(inData.workerLibs)\n        }\n\n        if (el.hasAttribute('uuid')) {\n            data.uuid = el.getAttribute('uuid')!\n        } else {\n            data.uuid = uuid.v4()\n            el.setAttribute('uuid', data.uuid)\n        }\n\n        //data.id = Number(data.id)\n\n        if (inData.executionTimeout !== undefined) {\n            data.executionTimeout = Number(inData.executionTimeout)\n        }\n\n        if (inData.maxCharacters !== undefined) {\n            data.maxCharacters = Number(inData.maxCharacters)\n        }\n\n        if (inData.scopeUUID !== undefined) {\n            data.scopeUUID = inData.scopeUUID\n        }\n        if (inData.scopeSelector !== undefined) {\n            data.scopeSelector = inData.scopeSelector\n        }\n\n        if (inData.outputParser !== undefined) {\n            data.outputParser = inData.outputParser\n        }\n\n        if (inData.solutionTheme !== undefined) {\n            data.solutionTheme = inData.solutionTheme\n        }\n\n        if (inData.codeTheme !== undefined) {\n            data.codeTheme = inData.codeTheme\n        }\n\n        el.querySelectorAll('*').forEach((blIn) => {\n            const bl = blIn as HTMLElement\n            //only first level children\n            if (bl.parentElement != el) {\n                return\n            }\n            const inBlock = bl.dataset as IBlockElementData\n            const as = bl.getAttribute('as')\n            if (as !== null) {\n                inBlock.as = as.trim().toUpperCase()\n            }\n\n            const block: IBlockDataBase = {\n                as: inBlock.as ? KnownBlockTypes[inBlock.as] : undefined,\n                hasCode: false,\n                version: '101',\n                type: bl.tagName as KnownBlockTypes,\n                content: bl.textContent ? bl.textContent : '',\n                alternativeContent: null,\n                hasAlternativeContent: false,\n                id: data.blocks.length,\n                uuid: uuid.v4(),\n                parentID: data.id,\n                width: '100%',\n                height: '200px',\n                align: 'center',\n                readyCount: 0,\n                obj: null,\n                lineCountHint: -1,\n                blockly: {\n                    showControls: false,\n                    useOverride: false,\n                    toolbox: {\n                        categories: [],\n                    },\n                    toolboxOverride: '',\n                    blocks: [],\n                    _blockErrors: [],\n                },\n                errors: [],\n                readonly: isTrue(inBlock.readonly),\n                static: isTrue(inBlock.static),\n                hidden: isTrue(inBlock.hidden),\n                visibleLines:\n                    inBlock.visibleLines === undefined ||\n                    inBlock.visibleLines?.trim().toLowerCase() == 'auto'\n                        ? 'auto'\n                        : Number(inBlock.visibleLines),\n                shouldAutoreset: isTrue(inBlock.shouldAutoreset),\n                generateTemplate:\n                    undefined ||\n                    (inBlock.generateTemplate != 'false' && inBlock.generateTemplate != '0'),\n\n                expanded:\n                    inBlock.expanded === undefined ||\n                    (inBlock.expanded != 'false' && inBlock.expanded != '0'),\n                codeExpanded: CodeExpansionType.AUTO,\n                noContent: isTrue(inBlock.noContent),\n                scopeUUID: inBlock.scopeUUID,\n                scopeSelector: inBlock.scopeSelector,\n            }\n\n            if (inBlock.codeExpanded !== undefined) {\n                if (\n                    inBlock.codeExpanded.toUpperCase() == 'TINY' ||\n                    inBlock.codeExpanded == 'false' ||\n                    inBlock.codeExpanded == '0'\n                ) {\n                    block.codeExpanded = CodeExpansionType.TINY\n                } else if (\n                    inBlock.codeExpanded.toUpperCase() == 'LARGE' ||\n                    inBlock.codeExpanded == '2'\n                ) {\n                    block.codeExpanded = CodeExpansionType.LARGE\n                }\n            }\n\n            if (!data.editMode && block.noContent) {\n                block.content = ''\n            }\n            if (inBlock.alternativeContent !== undefined && !block.static && !block.hidden) {\n                block.alternativeContent = inBlock.alternativeContent\n                block.hasAlternativeContent = true\n                if (!data.editMode && block.noContent) {\n                    block.content = block.alternativeContent\n                }\n            } else {\n                block.hasAlternativeContent = false\n            }\n\n            if (block.type != 'TEXT') {\n                console.log('BL', block.type, block.as)\n                if (block.as) {\n                    block.type = block.as\n                }\n                const loader = loaders[block.type]\n                console.d('LOADER', loader, loaders, block.type, block.as)\n                if (loader === undefined) {\n                    console.i('Skipping', block.type, block.as)\n                    return\n                } else {\n                    loader.loadFromDatablock(bl, inBlock, block, data.editMode)\n                }\n            }\n\n            data.blocks.push(this.constructBlock(data, block))\n        })\n        this.data = data\n\n        console.d('DATA', data)\n    }\n\n    instantiateVue() {\n        const data = this.data\n        const self = this\n        new Vue({\n            i18n,\n            render: function (h) {\n                @Component({\n                    data: function () {\n                        return data\n                    },\n                })\n                class MainBlock extends Vue implements IMainBlock {\n                    id!: number\n                    uuid!: string\n                    editMode!: boolean\n                    readonly!: boolean\n                    randomizer!: IRandomizerSettings\n                    blocks!: BlockData[]\n                    compiler!: ICompilerID\n                    language!: string\n                    runCode!: boolean\n                    domLibs!: string[]\n                    workerLibs!: string[]\n                    outputParser!: CodeOutputTypes\n                    solutionTheme!: string\n                    codeTheme!: string\n                    executionTimeout!: number\n                    maxCharacters!: number\n                    scopeUUID?: string\n                    scopeSelector?: string\n                    continuousCompilation!: boolean\n                    messagePassing!: boolean\n                    keepAlive!: boolean\n                    persistentArguments!: boolean\n\n                    initArgsForLanguage() {\n                        console.d('Constructing args for', this.language, this.defaultArgs)\n\n                        if (this.defaultArgs === undefined) {\n                            if (this.language === 'java') {\n                                return []\n                            } else {\n                                return {}\n                            }\n                        } else {\n                            return this.defaultArgs\n                        }\n                    }\n\n                    defaultArgs!: object | string[] | undefined\n                    storeDefaultArgs(args: object | string[]) {\n                        this.defaultArgs = args\n                    }\n                    clearDefaultArgs() {\n                        this.defaultArgs = undefined\n                    }\n\n                    swap(id1: number, id2: number) {\n                        const a = this.blocks[id1]\n                        this.blocks[id1] = this.blocks[id2]\n                        this.blocks[id2] = a\n\n                        this.blocks[id1].id = id1\n                        this.blocks[id2].id = id2\n                    }\n                    moveUp(id: number) {\n                        if (id <= 0) {\n                            return\n                        }\n                        this.swap(id - 1, id)\n                    }\n                    moveDown(id: number) {\n                        if (id >= this.blocks.length - 1) {\n                            return\n                        }\n                        this.swap(id, id + 1)\n                    }\n                    removeBlock(idx: number) {\n                        data.blocks.splice(idx, 1)\n                        for (let i = idx; i < data.blocks.length; i++) {\n                            data.blocks[i].id = i\n                        }\n                    }\n                    addNewBlock() {\n                        const block: IBlockDataBase = {\n                            noContent: false,\n                            alternativeContent: null,\n                            hasCode: true,\n                            type: KnownBlockTypes.BLOCK,\n                            content: '',\n                            id: data.blocks.length,\n                            uuid: uuid.v4(),\n                            parentID: data.id,\n                            expanded: true,\n                            codeExpanded: CodeExpansionType.AUTO,\n                            width: '100%',\n                            height: '200px',\n                            align: 'center',\n                            obj: null,\n                            readonly: false,\n                            static: true,\n                            hidden: false,\n                            version: '101',\n                            readyCount: 0,\n                            errors: [],\n                            scopeUUID: data.scopeUUID,\n                            scopeSelector: data.scopeSelector,\n                            visibleLines: 10,\n                            hasAlternativeContent: false,\n                            shouldAutoreset: false,\n                            generateTemplate: true,\n                            blockly: {\n                                showControls: false,\n                                useOverride: false,\n                                toolboxOverride: '',\n                                toolbox: {\n                                    categories: [],\n                                },\n                                blocks: [],\n                                _blockErrors: [],\n                            },\n                            lineCountHint: -1,\n                        }\n                        data.blocks.push(self.constructBlock(data, block))\n                    }\n                }\n                const context = {\n                    props: {\n                        language: data.language,\n                        id: data.id,\n                        blocks: new MainBlock(),\n                    },\n                }\n                return h(data.editMode ? AppEditor : App, context)\n            },\n        }).$mount(this.element)\n    }\n}\n\nexport class MountableArray extends Array<InternalCodeBlocksManager> {\n    mount() {\n        this.forEach((el) => el.instantiateVue())\n    }\n}\n\nexport const CodeBlocksManager = {\n    find(scope: HTMLElement | Document | undefined) {\n        if (scope === undefined) {\n            scope = document\n        }\n        const allCodeBlockParents = scope.querySelectorAll(\n            'codeblocks, codeblockseditor, div[codeblocks], div[codeblockseditor]'\n        )\n        const result = new MountableArray()\n        allCodeBlockParents.forEach((el) => {\n            const cbm = new InternalCodeBlocksManager(el as HTMLElement)\n            let scope = cbm.data.scopeSelector\n                ? document.querySelector(cbm.data.scopeSelector)\n                : undefined\n            if (scope === undefined || scope === null) {\n                scope = el\n            }\n\n            Vue.$hljs.$vue.processElements(scope)\n            if (cbm.data.editMode) {\n                Vue.$tagger.processElements(scope)\n                cbm.data.scopeSelector = `[uuid=${scope.getAttribute('uuid')}]`\n                cbm.data.scopeUUID = scope.getAttribute('uuid')\n                    ? scope.getAttribute('uuid')!\n                    : undefined\n                cbm.data.blocks.forEach((b) => {\n                    b.scopeUUID = cbm.data.scopeUUID\n                    b.scopeSelector = cbm.data.scopeSelector\n                        ? cbm.data.scopeSelector\n                        : `[uuid=${b.scopeUUID}]`\n                })\n            }\n\n            result.push(cbm)\n        })\n        return result\n    },\n}\n","String.prototype.replaceAllPoly = function(search: string, replacement: string): string {\n    var target = this\n    return target.replace(new RegExp(search, 'g'), replacement)\n}\nString.prototype.replaceRec = function(pattern: string | RegExp, replacement: string): string {\n    var newstr = this.replace(pattern, replacement)\n    if (newstr == this) {\n        return newstr\n    }\n    return newstr.replaceRec(pattern, replacement)\n}\n\nconsole.d = function(...lines) {\n    if (process.env.NODE_ENV == 'development') {\n        console.debug('[DEBUG]', ...lines)\n    }\n}\n\nconsole.i = function(...lines) {\n    if (process.env.NODE_ENV == 'development') {\n        console.log('[INFO]', ...lines)\n    }\n}\n\nimport Vue from 'vue'\nimport 'reflect-metadata'\nimport './plugins/uuid'\nimport './plugins/quasar'\nimport './plugins/codemirror'\nimport './plugins/codeBlocks'\nimport './plugins/compilerState'\nimport './plugins/codemirror'\nimport './plugins/highlight'\nimport './plugins/tagger'\n//import './plugins/blocklyEnv'\n//remove \"noImplicitAny\": false from tsconfig when this file goes ts\nimport { CodeBlocksManager } from './lib/codeBlocksManager'\n\nVue.config.productionTip = false\nCodeBlocksManager.find(document).mount()\n\nwindow.mountInElement = function(element: any): void {\n    Vue.$hljs.$vue.processElements(element)\n    Vue.$tagger.processElements(element)\n    CodeBlocksManager.find(element).mount()\n}\n\nwindow.mountCodeBlocks = function(scope: HTMLElement | Document | undefined) {\n    return CodeBlocksManager.find(scope).mount()\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=sass&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=style&index=1&lang=stylus&\"","/**@license\n *       __ _____                     ________                              __\n *      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /\n *  __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /\n * /  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__\n * \\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/\n *           \\/              /____/                              version 2.31.1\n *\n * This file is part of jQuery Terminal. https://terminal.jcubic.pl\n *\n * Copyright (c) 2010-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>\n * Released under the MIT license\n *\n * Contains:\n *\n * Storage plugin Distributed under the MIT License\n * modified to work from Data URIs that block storage and cookies in Chrome\n * Copyright (c) 2010 Dave Schindler\n *\n * jQuery Timers licenced with the WTFPL\n * <http://jquery.offput.ca/timers/>\n *\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n *\n * jQuery Caret\n * Copyright (c) 2009, Gideon Sireling\n * 3 clause BSD License\n *\n * sprintf.js\n * Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro>\n * licensed under 3 clause BSD license\n *\n * debounce function from Lodash\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * The MIT License\n *\n * emoji regex v9.0.0 by Mathias Bynens\n * MIT license\n *\n * broken image by Sophia Bai from the Noun Project (CC-BY)\n *\n * Date: Thu, 30 Dec 2021 10:56:33 +0000\n */\n/* global define, Map */\n/* eslint-disable */\n/* istanbul ignore next */\n(function(ctx) {\n    var sprintf = function() {\n        if (!sprintf.cache.hasOwnProperty(arguments[0])) {\n            sprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);\n        }\n        return sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);\n    };\n    sprintf.format = function(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n        for (i = 0; i < tree_length; i++) {\n            node_type = get_type(parse_tree[i]);\n            if (node_type === 'string') {\n                output.push(parse_tree[i]);\n            }\n            else if (node_type === 'array') {\n                match = parse_tree[i]; // convenience purposes only\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor];\n                    for (k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]));\n                        }\n                        arg = arg[match[2][k]];\n                    }\n                }\n                else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]];\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++];\n                }\n\n                if (/[^s]/.test(match[8]) && (get_type(arg) !== 'number')) {\n                    throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));\n                }\n                switch (match[8]) {\n                    case 'b': arg = arg.toString(2); break;\n                    case 'c': arg = String.fromCharCode(arg); break;\n                    case 'd': arg = parseInt(arg, 10); break;\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                    case 'o': arg = arg.toString(8); break;\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.slice(0, match[7]) : arg); break;\n                    case 'u': arg = arg >>> 0; break;\n                    case 'x': arg = arg.toString(16); break;\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\n                }\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? ' +' + arg : arg);\n                pad_character = match[4] ? match[4] === '0' ? '0' : match[4].charAt(1) : ' ';\n                pad_length = match[6] - String(arg).length;\n                pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n                output.push(match[5] ? arg + pad : pad + arg);\n            }\n        }\n        return output.join('');\n    };\n\n    sprintf.cache = {};\n\n    sprintf.parse = function(fmt) {\n        var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n        while (_fmt) {\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                parse_tree.push(match[0]);\n            }\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                parse_tree.push('%');\n            }\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1;\n                    var field_list = [], replacement_field = match[2], field_match = [];\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1]);\n                        while ((replacement_field = replacement_field.slice(field_match[0].length)) !== '') {\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else {\n                                throw('[sprintf] huh?');\n                            }\n                        }\n                    }\n                    else {\n                        throw('[sprintf] huh?');\n                    }\n                    match[2] = field_list;\n                }\n                else {\n                    arg_names |= 2;\n                }\n                if (arg_names === 3) {\n                    throw('[sprintf] mixing positional and named placeholders is not (yet) supported');\n                }\n                parse_tree.push(match);\n            }\n            else {\n                throw('[sprintf] huh?');\n            }\n            _fmt = _fmt.slice(match[0].length);\n        }\n        return parse_tree;\n    };\n\n    var vsprintf = function(fmt, argv, _argv) {\n        _argv = argv.slice(0);\n        _argv.splice(0, 0, fmt);\n        return sprintf.apply(null, _argv);\n    };\n\n    /**\n     * helpers\n     */\n    function get_type(variable) {\n        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    function str_repeat(input, multiplier) {\n        for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}\n        return output.join('');\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    ctx.sprintf = sprintf;\n    ctx.vsprintf = vsprintf;\n})(typeof global !== \"undefined\" ? global : self || window);\n// -----------------------------------------------------------------------\n/* eslint-enable */\n// UMD taken from https://github.com/umdjs/umd\n(function(factory, undefined) {\n    var root;\n    if (typeof window !== 'undefined') {\n        root = window;\n    } else if (typeof self !== 'undefined') {\n        root = self;\n    } else if (typeof global !== 'undefined') {\n        root = global;\n    } else {\n        throw new Error('Unknow context');\n    }\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        // istanbul ignore next\n        define(['jquery', 'wcwidth'], function(jquery, wcwidth) {\n            factory(jquery, wcwidth, root);\n            return jquery;\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function(root, jQuery, wcwidth) {\n            if (jQuery === undefined) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if (typeof window !== 'undefined') {\n                    jQuery = require('jquery');\n                } else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            if (wcwidth === undefined) {\n                wcwidth = require('wcwidth');\n            }\n            factory(jQuery, wcwidth, root);\n            return jQuery;\n        };\n    } else {\n        // Browser\n        // istanbul ignore next\n        factory(root.jQuery, root.wcwidth, root);\n    }\n})(function($, wcwidth, root, undefined) {\n    'use strict';\n    // -----------------------------------------------------------------------\n    // :: debug functions\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    /* istanbul ignore next */\n    function debug(str) {\n        if (false) {\n            console.log(str);\n            //$.terminal.active().echo(str);\n        }\n    }\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: Replacemenet for jQuery 2 deferred objects\n    // -----------------------------------------------------------------------\n    function DelayQueue() {\n        var callbacks = $.Callbacks();\n        var resolved = false;\n        this.resolve = function() {\n            callbacks.fire();\n            resolved = true;\n        };\n        this.add = function(fn) {\n            if (resolved) {\n                fn();\n            } else {\n                callbacks.add(fn);\n            }\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: map object to object\n    // -----------------------------------------------------------------------\n    $.omap = function(o, fn) {\n        var result = {};\n        $.each(o, function(k, v) {\n            result[k] = fn.call(o, k, v);\n        });\n        return result;\n    };\n    $.fn.text_length = function() {\n        return this.map(function() {\n            return $(this).text().length;\n        }).get().reduce(function(a, b) {\n            return a + b;\n        }, 0);\n    };\n    // -----------------------------------------------------------------------\n    // :: Deep clone of objects and arrays\n    // -----------------------------------------------------------------------\n    var Clone = {\n        clone_object: function(object) {\n            var tmp = {};\n            if (typeof object === 'object') {\n                if ($.isArray(object)) {\n                    return this.clone_array(object);\n                } else if (object === null) {\n                    return object;\n                } else {\n                    for (var key in object) {\n                        if ($.isArray(object[key])) {\n                            tmp[key] = this.clone_array(object[key]);\n                        } else if (typeof object[key] === 'object') {\n                            tmp[key] = this.clone_object(object[key]);\n                        } else {\n                            tmp[key] = object[key];\n                        }\n                    }\n                }\n            }\n            return tmp;\n        },\n        clone_array: function(array) {\n            if (!is_function(Array.prototype.map)) {\n                throw new Error(\"Your browser don't support ES5 array map \" +\n                                'use es5-shim');\n            }\n            return array.slice(0).map(function(item) {\n                if (typeof item === 'object') {\n                    return this.clone_object(item);\n                } else {\n                    return item;\n                }\n            }.bind(this));\n        }\n    };\n    var clone = function(object) {\n        return Clone.clone_object(object);\n    };\n    // -----------------------------------------------------------------------\n    // IE11 polyfill\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    if ('Map' in root && !('clear' in Map.prototype)) {\n        Map.prototype.clear = function() {\n            this.forEach(function(value, key, map) {\n                map.delete(key);\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Storage plugin\n    // -----------------------------------------------------------------------\n    var localStorage;\n    /* istanbul ignore next */\n    (function() {\n        var hasLS = function() {\n            try {\n                var testKey = 'test', storage = window.localStorage;\n                storage.setItem(testKey, '1');\n                storage.removeItem(testKey);\n                return true;\n            } catch (error) {\n                return false;\n            }\n        };\n        var hasCookies = function() {\n            try {\n                document.cookie.split(';');\n                return true;\n            } catch (e) {\n                return false;\n            }\n        };\n        // Private data\n        var isLS = hasLS();\n        // Private functions\n        function wls(n, v) {\n            var c;\n            if (typeof n === 'string' && typeof v === 'string') {\n                localStorage[n] = v;\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        localStorage[c] = n[c];\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function wc(n, v) {\n            var dt, e, c;\n            dt = new Date();\n            dt.setTime(dt.getTime() + 31536000000);\n            e = '; expires=' + dt.toGMTString();\n            if (typeof n === 'string' && typeof v === 'string') {\n                document.cookie = n + '=' + v + e + '; path=/';\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        document.cookie = c + '=' + n[c] + e + '; path=/';\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function rls(n) {\n            return localStorage[n];\n        }\n        function rc(n) {\n            var nn, ca, i, c;\n            nn = n + '=';\n            ca = document.cookie.split(';');\n            for (i = 0; i < ca.length; i++) {\n                c = ca[i];\n                while (c.charAt(0) === ' ') {\n                    c = c.slice(1, c.length);\n                }\n                if (c.indexOf(nn) === 0) {\n                    return c.slice(nn.length, c.length);\n                }\n            }\n            return null;\n        }\n        function dls(n) {\n            return delete localStorage[n];\n        }\n        function dc(n) {\n            return wc(n, '', -1);\n        }\n        /**\n         * Public API\n         * $.Storage.set(\"name\", \"value\")\n         * $.Storage.set({\"name1\":\"value1\", \"name2\":\"value2\", etc})\n         * $.Storage.get(\"name\")\n         * $.Storage.remove(\"name\")\n         */\n        if (!hasCookies() && !isLS) {\n            localStorage = {};\n            $.extend({\n                Storage: {\n                    set: wls,\n                    get: rls,\n                    remove: dls\n                }\n            });\n        } else {\n            if (isLS) {\n                localStorage = window.localStorage;\n            }\n            $.extend({\n                Storage: {\n                    set: isLS ? wls : wc,\n                    get: isLS ? rls : rc,\n                    remove: isLS ? dls : dc\n                }\n            });\n        }\n    })();\n    // -----------------------------------------------------------------------\n    // :: Debounce from Lodash\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    var debounce = (function() {\n        var FUNC_ERROR_TEXT = 'Expected a function';\n        function isObject(value) {\n            var type = typeof value;\n            return value != null && (type == 'object' || type == 'function');\n        }\n        function now() {\n            return Date.now();\n        }\n        return function debounce(func, wait, options) {\n            var nativeMax = Math.max,\n                nativeMin = Math.min;\n\n            var lastArgs,\n                lastThis,\n                maxWait,\n                result,\n                timerId,\n                lastCallTime,\n                lastInvokeTime = 0,\n                leading = false,\n                maxing = false,\n                trailing = true;\n\n            if (typeof func != 'function') {\n                throw new TypeError(FUNC_ERROR_TEXT);\n            }\n            wait = wait || 0;\n            if (isObject(options)) {\n                leading = !!options.leading;\n                maxing = 'maxWait' in options;\n                maxWait = maxing ? nativeMax(options.maxWait || 0, wait) : maxWait;\n                trailing = 'trailing' in options ? !!options.trailing : trailing;\n            }\n\n            function invokeFunc(time) {\n                var args = lastArgs,\n                    thisArg = lastThis;\n\n                lastArgs = lastThis = undefined;\n                lastInvokeTime = time;\n                result = func.apply(thisArg, args);\n                return result;\n            }\n\n            function leadingEdge(time) {\n                // Reset any `maxWait` timer.\n                lastInvokeTime = time;\n                // Start the timer for the trailing edge.\n                timerId = setTimeout(timerExpired, wait);\n                // Invoke the leading edge.\n                return leading ? invokeFunc(time) : result;\n            }\n\n            function remainingWait(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime,\n                    timeWaiting = wait - timeSinceLastCall;\n\n                return maxing\n                    ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n                    : timeWaiting;\n            }\n\n            function shouldInvoke(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime;\n\n                // Either this is the first call, activity has stopped and we're at the\n                // trailing edge, the system time has gone backwards and we're treating\n                // it as the trailing edge, or we've hit the `maxWait` limit.\n                return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n                        (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n            }\n\n            function timerExpired() {\n                var time = now();\n                if (shouldInvoke(time)) {\n                    return trailingEdge(time);\n                }\n                // Restart the timer.\n                timerId = setTimeout(timerExpired, remainingWait(time));\n            }\n\n            function trailingEdge(time) {\n                timerId = undefined;\n\n                // Only invoke if we have `lastArgs` which means `func` has been\n                // debounced at least once.\n                if (trailing && lastArgs) {\n                    return invokeFunc(time);\n                }\n                lastArgs = lastThis = undefined;\n                return result;\n            }\n\n            function cancel() {\n                if (timerId !== undefined) {\n                    clearTimeout(timerId);\n                }\n                lastInvokeTime = 0;\n                lastArgs = lastCallTime = lastThis = timerId = undefined;\n            }\n\n            function flush() {\n                return timerId === undefined ? result : trailingEdge(now());\n            }\n\n            function debounced() {\n                var time = now(),\n                    isInvoking = shouldInvoke(time);\n\n                lastArgs = arguments;\n                lastThis = this;\n                lastCallTime = time;\n\n                if (isInvoking) {\n                    if (timerId === undefined) {\n                        return leadingEdge(lastCallTime);\n                    }\n                    if (maxing) {\n                        // Handle invocations in a tight loop.\n                        timerId = setTimeout(timerExpired, wait);\n                        return invokeFunc(lastCallTime);\n                    }\n                }\n                if (timerId === undefined) {\n                    timerId = setTimeout(timerExpired, wait);\n                }\n                return result;\n            }\n            debounced.cancel = cancel;\n            debounced.flush = flush;\n            return debounced;\n        };\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Timers\n    // -----------------------------------------------------------------------\n    var jQuery = $;\n    /* istanbul ignore next */\n    (function($) {\n        jQuery.fn.extend({\n            everyTime: function(interval, label, fn, times, belay) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, times, belay);\n                });\n            },\n            oneTime: function(interval, label, fn) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, 1);\n                });\n            },\n            stopTime: function(label, fn) {\n                return this.each(function() {\n                    jQuery.timer.remove(this, label, fn);\n                });\n            }\n        });\n\n        jQuery.extend({\n            timer: {\n                guid: 1,\n                global: {},\n                regex: /^([0-9]+)\\s*(.*s)?$/,\n                powers: {\n                    // Yeah this is major overkill...\n                    'ms': 1,\n                    'cs': 10,\n                    'ds': 100,\n                    's': 1000,\n                    'das': 10000,\n                    'hs': 100000,\n                    'ks': 1000000\n                },\n                timeParse: function(value) {\n                    if (value === undefined || value === null) {\n                        return null;\n                    }\n                    var result = this.regex.exec(jQuery.trim(value.toString()));\n                    if (result[2]) {\n                        var num = parseInt(result[1], 10);\n                        var mult = this.powers[result[2]] || 1;\n                        return num * mult;\n                    } else {\n                        return value;\n                    }\n                },\n                add: function(element, interval, label, fn, times, belay) {\n                    var counter = 0;\n\n                    if (jQuery.isFunction(label)) {\n                        if (!times) {\n                            times = fn;\n                        }\n                        fn = label;\n                        label = interval;\n                    }\n\n                    interval = jQuery.timer.timeParse(interval);\n\n                    if (typeof interval !== 'number' ||\n                        isNaN(interval) ||\n                        interval <= 0) {\n                        return;\n                    }\n                    if (times && times.constructor !== Number) {\n                        belay = !!times;\n                        times = 0;\n                    }\n\n                    times = times || 0;\n                    belay = belay || false;\n\n                    if (!element.$timers) {\n                        element.$timers = {};\n                    }\n                    if (!element.$timers[label]) {\n                        element.$timers[label] = {};\n                    }\n                    fn.$timerID = fn.$timerID || this.guid++;\n\n                    var handler = function() {\n                        if (belay && handler.inProgress) {\n                            return;\n                        }\n                        handler.inProgress = true;\n                        if ((++counter > times && times !== 0) ||\n                            fn.call(element, counter) === false) {\n                            jQuery.timer.remove(element, label, fn);\n                        }\n                        handler.inProgress = false;\n                    };\n\n                    handler.$timerID = fn.$timerID;\n\n                    if (!element.$timers[label][fn.$timerID]) {\n                        element.$timers[label][fn.$timerID] = setInterval(handler, interval);\n                    }\n\n                    if (!this.global[label]) {\n                        this.global[label] = [];\n                    }\n                    this.global[label].push(element);\n\n                },\n                remove: function(element, label, fn) {\n                    var timers = element.$timers, ret;\n\n                    if (timers) {\n\n                        if (!label) {\n                            for (var lab in timers) {\n                                if (timers.hasOwnProperty(lab)) {\n                                    this.remove(element, lab, fn);\n                                }\n                            }\n                        } else if (timers[label]) {\n                            if (fn) {\n                                if (fn.$timerID) {\n                                    clearInterval(timers[label][fn.$timerID]);\n                                    delete timers[label][fn.$timerID];\n                                }\n                            } else {\n                                for (var _fn in timers[label]) {\n                                    if (timers[label].hasOwnProperty(_fn)) {\n                                        clearInterval(timers[label][_fn]);\n                                        delete timers[label][_fn];\n                                    }\n                                }\n                            }\n\n                            for (ret in timers[label]) {\n                                if (timers[label].hasOwnProperty(ret)) {\n                                    break;\n                                }\n                            }\n                            if (!ret) {\n                                ret = null;\n                                delete timers[label];\n                            }\n                        }\n\n                        for (ret in timers) {\n                            if (timers.hasOwnProperty(ret)) {\n                                break;\n                            }\n                        }\n                        if (!ret) {\n                            element.$timers = null;\n                        }\n                    }\n                }\n            }\n        });\n        if (/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase())) {\n            $(window).one('unload', function() {\n                var global = jQuery.timer.global;\n                for (var label in global) {\n                    if (global.hasOwnProperty(label)) {\n                        var els = global[label], i = els.length;\n                        while (--i) {\n                            jQuery.timer.remove(els[i], label);\n                        }\n                    }\n                }\n            });\n        }\n    })(jQuery);\n    // -----------------------------------------------------------------------\n    // :: CROSS BROWSER SPLIT\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    (function(undef) {\n        // prevent double include\n\n        if (!String.prototype.split.toString().match(/\\[native/)) {\n            return;\n        }\n\n        var nativeSplit = String.prototype.split,\n        compliantExecNpcg = /()??/.exec(\"\")[1] === undef, // NPCG: nonparticipating capturing group\n        self;\n\n        self = function(str, separator, limit) {\n            // If `separator` is not a regex, use `nativeSplit`\n            if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n                return nativeSplit.call(str, separator, limit);\n            }\n            var output = [],\n            flags = (separator.ignoreCase ? \"i\" : \"\") +\n                (separator.multiline  ? \"m\" : \"\") +\n                (separator.extended   ? \"x\" : \"\") + // Proposed for ES6\n                (separator.sticky     ? \"y\" : \"\"), // Firefox 3+\n                lastLastIndex = 0,\n            // Make `global` and avoid `lastIndex` issues by working with a copy\n            separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + \"g\");\n            str += \"\"; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            // ? Math.pow(2, 32) - 1 : ToUint32(limit)\n            limit = limit === undef ? -1 >>> 0 : limit >>> 0;\n            while (match = separator.exec(str)) {\n                    // `separator.lastIndex` is not reliable cross-browser\n                    lastIndex = match.index + match[0].length;\n                    if (lastIndex > lastLastIndex) {\n                        output.push(str.slice(lastLastIndex, match.index));\n                        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                        // nonparticipating capturing groups\n                        if (!compliantExecNpcg && match.length > 1) {\n                            match[0].replace(separator2, function() {\n                                for (var i = 1; i < arguments.length - 2; i++) {\n                                    if (arguments[i] === undef) {\n                                        match[i] = undef;\n                                    }\n                                }\n                            });\n                        }\n                        if (match.length > 1 && match.index < str.length) {\n                            Array.prototype.push.apply(output, match.slice(1));\n                        }\n                        lastLength = match[0].length;\n                        lastLastIndex = lastIndex;\n                        if (output.length >= limit) {\n                            break;\n                        }\n                    }\n                    if (separator.lastIndex === match.index) {\n                        separator.lastIndex++; // Avoid an infinite loop\n                    }\n                }\n            if (lastLastIndex === str.length) {\n                if (lastLength || !separator.test(\"\")) {\n                    output.push(\"\");\n                }\n            } else {\n                output.push(str.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n\n        // For convenience\n        String.prototype.split = function(separator, limit) {\n            return self(this, separator, limit);\n        };\n\n        return self;\n\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Caret\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    $.fn.caret = function(pos) {\n        var target = this[0];\n        var isContentEditable = target.contentEditable === 'true';\n        //get\n        if (arguments.length === 0) {\n            //HTML5\n            if (window.getSelection) {\n                //contenteditable\n                if (isContentEditable) {\n                    if (!this.is(':focus')) {\n                        target.focus();\n                    }\n                    var range1 = window.getSelection().getRangeAt(0),\n                    range2 = range1.cloneRange();\n                    range2.selectNodeContents(target);\n                    range2.setEnd(range1.endContainer, range1.endOffset);\n                    return range2.toString().length;\n                }\n                //textarea\n                return target.selectionStart;\n            }\n            //IE<9\n            if (document.selection) {\n                target.focus();\n                //contenteditable\n                if (isContentEditable) {\n                    var range1 = document.selection.createRange(),\n                    range2 = document.body.createTextRange();\n                    range2.moveToElementText(target);\n                    range2.setEndPoint('EndToEnd', range1);\n                    return range2.text.length;\n                }\n                //textarea\n                var pos = 0,\n                range = target.createTextRange(),\n                range2 = document.selection.createRange().duplicate(),\n                bookmark = range2.getBookmark();\n                range.moveToBookmark(bookmark);\n                while (range.moveStart('character', -1) !== 0) pos++;\n                return pos;\n            }\n            //not supported\n            return 0;\n        }\n        //set\n        if (pos === -1)\n            pos = this[isContentEditable? 'text' : 'val']().length;\n        //HTML5\n        if (window.getSelection) {\n            //contenteditable\n            if (isContentEditable) {\n                if (!this.is(':focus')) {\n                    target.focus();\n                }\n                var selection = window.getSelection();\n                selection.collapse(selection.focusNode, pos);\n            }\n            //textarea\n            else\n                target.setSelectionRange(pos, pos);\n        }\n        //IE<9\n        else if (document.body.createTextRange) {\n            var range = document.body.createTextRange();\n            range.moveToElementText(target);\n            range.moveStart('character', pos);\n            range.collapse(true);\n            range.select();\n        }\n        if (!isContentEditable && !this.is(':focus')) {\n            target.focus();\n        }\n        return pos;\n    };\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: callback based event handler plugin generator\n    // -----------------------------------------------------------------------\n    function make_callback_plugin(options) {\n        var factory_settings = $.extend({\n            init: $.noop,\n            destroy: $.noop,\n            name: 'event'\n        }, options);\n        return function(callback, options) {\n            var trigger = arguments.length === 0;\n            var unbind = arguments[0] === \"unbind\";\n            if (!trigger && !unbind && !is_function(callback)) {\n                throw new Error('Invalid argument, it need to a function or string ' +\n                                '\"unbind\" or no arguments.');\n            }\n            if (unbind) {\n                callback = is_function(arguments[1]) ? arguments[1] : null;\n            }\n            var data_name = 'callbacks_' + factory_settings.name;\n            return this.each(function() {\n                var $this = $(this);\n                var callbacks;\n                function handler(arg) {\n                    callbacks.fireWith($this, [arg]);\n                }\n                if (trigger || unbind) {\n                    callbacks = $this.data(data_name);\n                    if (trigger) {\n                        callbacks && callbacks.fire();\n                    } else {\n                        if (callback && callbacks) {\n                            callbacks.remove(callback);\n                            if (!callbacks.has()) {\n                                callbacks = null;\n                            }\n                        } else {\n                            callbacks = null;\n                        }\n                        if (!callbacks) {\n                            $this.removeData(data_name);\n                            factory_settings.destroy.call(this, handler, options);\n                        }\n                    }\n                } else if ($this.data(data_name)) {\n                    $(this).data(data_name).add(callback);\n                } else {\n                    callbacks = $.Callbacks();\n                    callbacks.add(callback);\n                    $this.data(data_name, callbacks);\n                    factory_settings.init.call(this, handler, options);\n                }\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Cross-browser resize element plugin using sentinel iframe or\n    // :: resizeObserver\n    // -----------------------------------------------------------------------\n    $.fn.resizer = make_callback_plugin({\n        name: 'resize',\n        init: function(handler, options) {\n            var settings = $.extend({\n                prefix: ''\n            }, options);\n            var $this = $(this);\n            var resizer;\n            var first = true;\n            if ($this.is('body')) {\n                $(window).on('resize.resizer', handler);\n            } else if (window.ResizeObserver) {\n                resizer = new ResizeObserver(function() {\n                    if (!first) {\n                        handler();\n                    }\n                    first = false;\n                });\n                resizer.observe(this);\n                $this.data('observer', resizer);\n            } else {\n                var iframe = $('<iframe/>').addClass(settings.prefix + 'resizer')\n                    .appendTo(this)[0];\n                $(iframe.contentWindow).on('resize', handler);\n            }\n        },\n        destroy: function() {\n            var $this = $(this);\n            if (window.ResizeObserver) {\n                var observer = $this.data('observer');\n                if (observer) {\n                    observer.unobserve(this);\n                    $this.removeData('observer');\n                }\n            } else {\n                var iframe = $this.find('> iframe[class$=\"resizer\"]');\n                if (iframe.length) {\n                    // just in case of memory leaks in IE\n                    $(iframe[0].contentWindow).off('resize').remove();\n                    iframe.remove();\n                } else if ($this.is('body')) {\n                    $(window).off('resize.resizer');\n                }\n            }\n        }\n    });\n    // -----------------------------------------------------------------------\n    // :: Mobile friendly scroll that work without scrollbar (for less)\n    // -----------------------------------------------------------------------\n    $.fn.touch_scroll = make_callback_plugin({\n        name: 'touch',\n        init: function(handler) {\n            var origin;\n            var previous;\n            $(this).on('touchstart.scroll', function(e) {\n                e = e.originalEvent;\n                if (e.target.tagName.toLowerCase() !== 'a' && e.touches.length === 1) {\n                    previous = origin = e.touches[0];\n                }\n            }).on('touchmove.scroll', function(e) {\n                e = e.originalEvent;\n                if (origin && e.touches.length === 1) {\n                    var current = e.touches[0];\n                    var ret = handler({\n                        origin: origin,\n                        previous: previous,\n                        current: current\n                    });\n                    if (ret === false) {\n                        e.preventDefault();\n                    }\n                    previous = current;\n                }\n            }).on('touchend.scroll', function() {\n                if (origin || previous) {\n                    origin = previous = null;\n                }\n            });\n        },\n        destroy: function() {\n            $(this).off('touchstart.scroll touchmove.scroll touchend.scroll');\n        }\n    });\n    // -----------------------------------------------------------------------\n    function jquery_resolve(value) {\n        var defer = jQuery.Deferred();\n        defer.resolve(value);\n        return defer.promise();\n    }\n    // -----------------------------------------------------------------------\n    function unpromise(value, callback, error) {\n        if (value !== undefined) {\n            if (is_function(value.catch)) {\n                value.catch(error);\n            }\n            if (is_function(value.done)) {\n                return value.done(callback);\n            } else if (is_function(value.then)) {\n                return value.then(callback);\n            } else if (value instanceof Array) {\n                var promises = value.filter(function(value) {\n                    return value && (is_function(value.done) || is_function(value.then));\n                });\n                if (promises.length) {\n                    var result = $.when.apply($, value).then(function() {\n                        return callback([].slice.call(arguments));\n                    });\n                    if (is_function(value.catch)) {\n                        result.catch(error);\n                    }\n                    return result;\n                }\n            }\n            // TODO: investigate why it break when called\n            //       when value is undefined\n            //       when moving this line outside if\n            //       it breaks all completion unit tests\n            return callback(value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: based on https://github.com/zeusdeux/isInViewport\n    // :: work only vertically and on dom elements\n    // -----------------------------------------------------------------------\n    $.fn.is_fully_in_viewport = (function() {\n        function is_visible(node, container) {\n            var box = node.getBoundingClientRect();\n            var viewport = container[0].getBoundingClientRect();\n            var top = box.top - viewport.top;\n            var bottom = box.bottom - viewport.top;\n            var height = container.height();\n            return bottom > 0 && top <= height;\n        }\n        if (root.IntersectionObserver) {\n            return function(container) {\n                var node = this[0];\n                var defer = jQuery.Deferred();\n                var item_observer = new root.IntersectionObserver(function(entries) {\n                    defer.resolve(entries[0].isIntersecting && entries[0].ratio === 1);\n                    item_observer.unobserve(node);\n                }, {\n                    root: container[0]\n                });\n                item_observer.observe(node);\n                return defer.promise();\n            };\n        } else {\n            return function(container) {\n                return jquery_resolve(is_visible(this[0], container));\n            };\n        }\n    })();\n    // -------------------------------------------------------------------------\n    /* eslint-disable */\n    var entity_re = /(&(?:[a-z\\d]+|#\\d+|#x[a-f\\d]+);)/i;\n    // regex that match single character at begining and folowing combine character\n    // https://en.wikipedia.org/wiki/Combining_character\n    var combine_chr_re = /(.(?:[\\u0300-\\u036F]|[\\u1AB0-\\u1abE]|[\\u1DC0-\\u1DF9]|[\\u1DFB-\\u1DFF]|[\\u20D0-\\u20F0]|[\\uFE20-\\uFE2F])+)/;\n    // source: https://mathiasbynens.be/notes/javascript-unicode\n    var astral_symbols_re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/;\n    // source: https://github.com/mathiasbynens/emoji-regex\n    var emoji_re = /(\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67)\\uDB40\\uDC7F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC68(?:\\uD83C\\uDFFF\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D[\\uDC66\\uDC67])|[\\u2695\\u2696\\u2708]\\uFE0F|\\uD83D[\\uDC66\\uDC67]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708])\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFF\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69\\uD83C\\uDFFF\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83D\\uDC69\\uD83C\\uDFFE\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFD\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFC\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83C\\uDFF3\\uFE0F\\u200D\\u26A7|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83D\\uDC3B\\u200D\\u2744|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uFE0F\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642])|\\uD83C\\uDFF4\\u200D\\u2620|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E-\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3C-\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDF])\\u200D[\\u2640\\u2642])\\uFE0F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83D\\uDC15\\u200D\\uD83E\\uDDBA|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83D\\uDC08\\u200D\\u2B1B|\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|[#\\*0-9]\\uFE0F\\u20E3|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC6B-\\uDC6D\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD34\\uDD36\\uDD77\\uDDB5\\uDDB6\\uDDBB\\uDDD2-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26A7\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDED5-\\uDED7\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])\\uFE0F?|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDC8F\\uDC91\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3C-\\uDD3E\\uDD77\\uDDB5\\uDDB6\\uDDB8\\uDDB9\\uDDBB\\uDDCD-\\uDDCF\\uDDD1-\\uDDDD]))/;\n    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n    var mobile_re = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n    var tablet_re = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\n    var format_split_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\](?:[^\\]\\\\]*(?:\\\\\\\\)*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?)/i;\n    var format_parts_re = /\\[\\[((?:-?[@!gbiuso])*);([^;]*);([^;\\]]*);?([^;\\]]*);?([^\\]]*)\\]([^\\]\\\\]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]+)\\]?/gi;\n    var format_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?/gi;\n    var format_exist_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]/gi;\n    var format_full_re = /^(\\[\\[(?:(?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\])([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)(\\])$/i;\n    var format_begin_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_start_re = /^(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_end_re = /\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\]?$/i;\n    var self_closing_re = /^(?:\\[\\[)?[^;]*@[^;]*;/;\n    var color_re = /^(?:#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})|rgba?\\([^)]+\\)|hsla?\\([^)]+\\))$/i;\n    var url_re = /(\\b(?:file|ftp|https?):\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'\\\\<>\\][)])+)/gi;\n    var url_nf_re = /\\b(?![^\"\\s[\\]]*])(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'\\\\<>\\][)])+)/gi;\n    var email_re = /((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))/g;\n    var url_full_re = /^(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'<>\\\\\\][)])+)$/gi;\n    var email_full_re = /^((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))$/g;\n    var command_re = /((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|`[^`\\\\]*(?:\\\\[\\S\\s][^`\\\\]*)*`|\\/[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimsuy]*(?=\\s|$)|(?:\\\\\\s|\\S))+)(?=\\s|$)/gi;\n    var extended_command_re = /^\\s*((terminal|cmd)::([a-z_]+)\\(([\\s\\S]*)\\))\\s*$/;\n    var format_exec_split_re = /(\\[\\[(?:-?[@!gbiuso])*;[^\\]]+\\](?:\\\\[[\\]]|[^\\]])*\\]|\\[\\[[\\s\\S]+?\\]\\])/;\n    var format_exec_re = /(\\[\\[[\\s\\S]+?\\]\\])/;\n    var float_re = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/;\n    var re_re = /^\\/((?:\\\\\\/|[^/]|\\[[^\\]]*\\/[^\\]]*\\])+)\\/([gimsuy]*)$/;\n    var string_re = /(\"(?:[^\"\\\\]|\\\\(?:\\\\\\\\)*\"|\\\\\\\\)*\"|'(?:[^'\\\\]|\\\\(?:\\\\\\\\)*'|\\\\\\\\)*'|`(?:[^`\\\\]|\\\\(?:\\\\\\\\)*`|\\\\\\\\)*`)/;\n    var unclosed_strings_re = /^(?=((?:[^\"']+|\"[^\"\\\\]*(?:\\\\[^][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[^][^'\\\\]*)*')*))\\1./;\n    var broken_image = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\"><title id=\"title2\">rounded</title><path id=\"terminal-broken-image\" d=\"m 14,10 h 2 v 1 a 3,3 0 0 1 -3,3 H 3 A 3,3 0 0 1 0,11 H 4.5 A 1.00012,1.00012 0 0 0 5.207,10.707 L 6.5,9.414 7.793,10.707 a 0.99963,0.99963 0 0 0 1.41406,0 l 2.36719,-2.36719 1.80127,1.44092 A 0.99807,0.99807 0 0 0 14,10 Z M 16,3 V 8 H 14.35059 L 12.12451,6.21924 A 0.99846,0.99846 0 0 0 10.793,6.293 L 8.5,8.586 7.207,7.293 a 0.99962,0.99962 0 0 0 -1.41406,0 L 4.08594,9 H 0 V 3 A 3,3 0 0 1 3,0 h 10 a 3,3 0 0 1 3,3 z M 6,4.5 A 1.5,1.5 0 1 0 4.5,6 1.5,1.5 0 0 0 6,4.5 Z\" /></svg>';\n    var use_broken_image = '<svg class=\"terminal-broken-image\" role=\"presentation\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><use xlink:href=\"#terminal-broken-image\"/></svg>';\n    /* eslint-enable */\n    // -------------------------------------------------------------------------\n    // :: features flags\n    // -------------------------------------------------------------------------\n    // taken from https://hacks.mozilla.org/2011/09/detecting-and-generating-\n    // css-animations-in-javascript/\n    var animation_supported = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        var animation = false,\n            domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),\n            elm = document.createElement('div');\n        if (elm.style.animationName) {\n            animation = true;\n        }\n        if (animation === false) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                var name = domPrefixes[i] + 'AnimationName';\n                if (elm.style[name] !== undefined) {\n                    animation = true;\n                    break;\n                }\n            }\n        }\n        elm = null;\n        return animation;\n    })();\n    // -------------------------------------------------------------------------\n    var agent = (root.navigator || window.navigator).userAgent;\n    var is_IE = /MSIE|Trident/.test(agent) || /rv:11.0/i.test(agent);\n    var is_IEMobile = /IEMobile/.test(agent);\n    // -------------------------------------------------------------------------\n    var is_ch_unit_supported = (function() {\n        if (is_IE && !is_IEMobile) {\n            return false;\n        }\n        if (typeof document === 'undefined') {\n            return true; // run without browser context\n        }\n        var div = document.createElement('div');\n        div.style.width = '1ch';\n        return div.style.width === '1ch';\n    })();\n    // -------------------------------------------------------------------------\n    var is_css_variables_supported = root.CSS && root.CSS.supports &&\n            root.CSS.supports('--fake-var', 0);\n    // -------------------------------------------------------------------------\n    var is_android = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\n    // -------------------------------------------------------------------------\n    var is_key_native = (function is_key_native() {\n        if (!('KeyboardEvent' in root && 'key' in root.KeyboardEvent.prototype)) {\n            return false;\n        }\n        var proto = root.KeyboardEvent.prototype;\n        var get = Object.getOwnPropertyDescriptor(proto, 'key').get;\n        return !!get.toString().match(/\\[native code\\]/);\n    })();\n    // -------------------------------------------------------------------------\n    var is_browser = (function() {\n        try {\n            return this === window;\n        } catch (e) {\n            return false;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    var is_mobile = (function(a) {\n        var check = false;\n        if (mobile_re.test(a) || tablet_re.test(a.substr(0, 4))) {\n            check = true;\n        }\n        // detect iPad 13\n        // ref: https://stackoverflow.com/a/57924983/387194s\n        if (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1) {\n            return true;\n        }\n        return check;\n    })(navigator.userAgent || navigator.vendor || root.opera);\n    // -------------------------------------------------------------------------\n    // IE ch unit bug detection - better that UserAgent that can be changed\n    // -------------------------------------------------------------------------\n    var ch_unit_bug = false;\n    if (is_browser) {\n        $(function() {\n            function width(e) {\n                return e[0].getBoundingClientRect().width;\n            }\n            var base = '<span style=\"font-family: monospace;visibility:hidden;';\n            var ch = $(base + 'width:1ch;overflow: hidden\">&nbsp;</span>');\n            ch.appendTo('body');\n            var space = $(base + '\">&nbsp;</span>').appendTo('body');\n            // in FireFox the size of space is fraction larger #579\n            ch_unit_bug = Math.abs(width(ch) - width(space)) > 0.0001;\n            ch.remove();\n            space.remove();\n        });\n    }\n    // -----------------------------------------------------------------------\n    // :: css helper that work with css variables\n    // :: jQuery css method from 3.4 support them by default\n    // -----------------------------------------------------------------------\n    function css(node, obj, value) {\n        if (node instanceof $.fn.init) {\n            node.each(function() {\n                css(this, obj, value);\n            });\n        } else if ($.isPlainObject(obj)) {\n            Object.keys(obj).forEach(function(key) {\n                node.style.setProperty(key, obj[key]);\n            });\n        } else if (typeof value === 'undefined') {\n            return node.style.getPropertyValue(obj);\n        } else {\n            node.style.setProperty(obj, value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: hide elements from screen readers\n    // -----------------------------------------------------------------------\n    function a11y_hide(element) {\n        element.attr({\n            role: 'presentation',\n            'aria-hidden': 'true'\n        });\n    }\n    // ---------------------------------------------------------------------\n    // :: alert only first exception of type\n    // ---------------------------------------------------------------------\n    var excepctions = [];\n    function alert_exception(label, e) {\n        if (arguments[0] instanceof $.terminal.Exception) {\n            label = arguments[0].type;\n            e = arguments[0];\n        }\n        var message = (label ? label + ': ' : '') + exception_message(e);\n        if (excepctions.indexOf(message) === -1) {\n            excepctions.push(message);\n            setTimeout(function() {\n                throw e;\n            }, 0);\n            //alert(message + (e.stack ? '\\n' + e.stack : ''));\n        }\n    }\n    // ---------------------------------------------------------------------\n    // ref: https://stackoverflow.com/a/6248722/387194\n    function generate_id() {\n        // I generate the UID from two parts here\n        // to ensure the random number provide enough bits.\n        var firstPart = (Math.random() * 46656) | 0;\n        var secondPart = (Math.random() * 46656) | 0;\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\n        return firstPart + secondPart;\n    }\n    // ---------------------------------------------------------------------\n    // :; detect if mouse event happen on scrollbar\n    // ---------------------------------------------------------------------\n    function scrollbar_event(e, node) {\n        var left = node.offset().left;\n        return node.outerWidth() <= e.clientX - left;\n    }\n    // ---------------------------------------------------------------------\n    // :: Return exception message as string\n    // ---------------------------------------------------------------------\n    function exception_message(e) {\n        if (typeof e === 'string') {\n            return e;\n        } else if (typeof e.fileName === 'string') {\n            return e.fileName + ': ' + e.message;\n        } else {\n            return e.message;\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: CYCLE DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Cycle() {\n        var data = [].slice.call(arguments);\n        var pos = 0;\n        $.extend(this, {\n            get: function() {\n                return data;\n            },\n            index: function() {\n                return pos;\n            },\n            rotate: function(skip, init) {\n                if (init === undefined) {\n                    init = pos;\n                } else if (init === pos) {\n                    return;\n                }\n                if (!skip) {\n                    var defined = data.filter(function(item) {\n                        return typeof item !== 'undefined';\n                    });\n                    if (!defined.length) {\n                        return;\n                    }\n                }\n                if (!data.length) {\n                    return;\n                }\n                if (data.length === 1) {\n                    return data[0];\n                } else {\n                    if (pos === data.length - 1) {\n                        pos = 0;\n                    } else {\n                        ++pos;\n                    }\n                    if (typeof data[pos] !== 'undefined') {\n                        return data[pos];\n                    } else {\n                        return this.rotate(true, init);\n                    }\n                }\n            },\n            length: function() {\n                return data.length;\n            },\n            remove: function(index) {\n                delete data[index];\n            },\n            set: function(item) {\n                for (var i = data.length; i--;) {\n                    if (data[i] === item) {\n                        pos = i;\n                        return;\n                    }\n                }\n                this.append(item);\n                pos = data.length - 1;\n            },\n            front: function() {\n                if (data.length) {\n                    var index = pos;\n                    var restart = false;\n                    while (!data[index]) {\n                        index++;\n                        if (index > data.length) {\n                            if (restart) {\n                                break;\n                            }\n                            index = 0;\n                            restart = true;\n                        }\n                    }\n                    return data[index];\n                }\n            },\n            map: function(fn) {\n                return data.map(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        return fn(item, i);\n                    }\n                    return null;\n                }).filter(Boolean);\n            },\n            forEach: function(fn) {\n                return data.forEach(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        fn(item, i);\n                    }\n                });\n            },\n            append: function(item) {\n                data.push(item);\n            }\n        });\n    }\n    /*\n    function time() {\n        // performance.now almost equal Date.now()- performance.timing.navigationStart\n        // the difference check should be almost the same\n        return performance ? performance.now() : Date.now();\n    }\n    */\n    // -----------------------------------------------------------------------\n    // :: STACK DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Stack(init) {\n        var data = is_array(init) ? init : init ? [init] : [];\n        $.extend(this, {\n            data: function() {\n                return data;\n            },\n            map: function(fn) {\n                return $.map(data, fn);\n            },\n            size: function() {\n                return data.length;\n            },\n            pop: function() {\n                if (data.length === 0) {\n                    return null;\n                } else {\n                    var value = data[data.length - 1];\n                    data = data.slice(0, data.length - 1);\n                    return value;\n                }\n            },\n            push: function(value) {\n                data = data.concat([value]);\n                return value;\n            },\n            top: function() {\n                return data.length > 0 ? data[data.length - 1] : null;\n            },\n            clone: function() {\n                return new Stack(data.slice(0));\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    // :: Class for Worker that do some computation when needed\n    // :: if validation function return false it mean that condition changed\n    // :: and cache need to be cleared. If value was not processed it will run\n    // :: the action\n    // -------------------------------------------------------------------------\n    function WorkerCache(options) {\n        var settings = $.extend({\n            validation: $.noop,\n            action: $.noop,\n            onCache: $.noop\n        }, options);\n        this._onCache = settings.onCache.bind(this);\n        this._action = settings.action.bind(this);\n        this._validation = settings.validation.bind(this);\n        if ('Map' in root) {\n            this._cache = new Map();\n        }\n    }\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.validate = function(key) {\n        var valid = this._validation(key);\n        var test = valid === undefined || valid === true;\n        if (!test) {\n            this._cache.clear();\n        }\n        return test;\n    };\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.get = function(key) {\n        if (!this._cache) {\n            return this._action(key);\n        }\n        var value;\n        if (this.validate(key) && this._cache.has(key)) {\n            value = this._cache.get(key);\n            this._onCache({cache: value});\n            return value;\n        }\n        value = this._action(key);\n        this._cache.set(key, value);\n        return value;\n    };\n    // -------------------------------------------------------------------------\n    // :: HISTORY CLASS\n    // -------------------------------------------------------------------------\n    function History(name, size, memory) {\n        var enabled = true;\n        var storage_key = '';\n        if (typeof name === 'string' && name !== '') {\n            storage_key = name + '_';\n        }\n        storage_key += 'commands';\n        var data;\n        if (memory) {\n            data = [];\n        } else {\n            data = $.Storage.get(storage_key);\n            data = data ? JSON.parse(data) : [];\n        }\n        var pos = data.length - 1;\n        $.extend(this, {\n            append: function(item) {\n                if (enabled) {\n                    if (data[data.length - 1] !== item) {\n                        data.push(item);\n                        if (size && data.length > size) {\n                            data = data.slice(-size);\n                        }\n                        pos = data.length - 1;\n                        if (!memory) {\n                            $.Storage.set(storage_key, JSON.stringify(data));\n                        }\n                    }\n                }\n            },\n            set: function(new_data) {\n                if (is_array(new_data)) {\n                    data = new_data;\n                    if (!memory) {\n                        $.Storage.set(storage_key, JSON.stringify(data));\n                    }\n                }\n            },\n            data: function() {\n                return data;\n            },\n            reset: function() {\n                pos = data.length - 1;\n            },\n            last: function() {\n                return data[data.length - 1];\n            },\n            end: function() {\n                return pos === data.length - 1;\n            },\n            position: function() {\n                return pos;\n            },\n            current: function() {\n                return data[pos];\n            },\n            next: function() {\n                var old = pos;\n                if (pos < data.length - 1) {\n                    ++pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            previous: function() {\n                var old = pos;\n                if (pos > 0) {\n                    --pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            clear: function() {\n                data = [];\n                this.purge();\n            },\n            enabled: function() {\n                return enabled;\n            },\n            enable: function() {\n                enabled = true;\n            },\n            purge: function() {\n                if (!memory) {\n                    $.Storage.remove(storage_key);\n                }\n            },\n            disable: function() {\n                enabled = false;\n            },\n            toggle: function(value) {\n                if (typeof value === 'undefined') {\n                    enabled = !enabled;\n                } else {\n                    enabled = value;\n                }\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    function OutputLines(settings) {\n        this._settings = settings;\n        this._lines = [];\n        this._snapshot = [];\n    }\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.make_snapshot = function(snapshot) {\n        this._snapshot.push(snapshot);\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.get_partial = function() {\n        var last = this._snapshot[this._snapshot.length - 1];\n        return last;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.update_snapshot = function(index, snapshot) {\n        this._snapshot[index] = snapshot;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.limit_snapshot = function(limit) {\n        this._snapshot = this._snapshot.slice(limit);\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.clear_snapshot = function() {\n        this._snapshot = [];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.get_snapshot = function() {\n        return this._snapshot.reduce(function(acc, arr) {\n            return acc.concat(arr);\n        }, []).join('\\n');\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.join = function() {\n        var args = [].slice.call(arguments);\n        if (args.some(is_function)) {\n            return function() {\n                return args.reduce(function(acc, arg) {\n                    if (is_function(acc)) {\n                        acc = acc();\n                    }\n                    if (is_function(arg)) {\n                        arg = arg();\n                    }\n                    if (is_promise(acc) || is_promise(arg)) {\n                        return $.when(acc, arg).then(function(acc, arg) {\n                            return acc + arg;\n                        });\n                    }\n                    return arg;\n                });\n            };\n        } else if (args.some(is_promise)) {\n            return args.reduce(function(acc, arg) {\n                return $.when(acc, arg).then(function(acc, arg) {\n                    return acc + arg;\n                });\n            });\n        }\n        return args.join('');\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.import = function(data) {\n        this._lines = data;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.push = function(data) {\n        var value = data[0];\n        var options = data[1];\n        if (this.has_newline()) {\n            this._lines.push(data);\n        } else {\n            var last_line = this.last_line();\n            last_line[0] = this.join(last_line[0], value);\n            last_line[1].newline = options.newline;\n        }\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.clear = function(fn) {\n        this._lines.forEach(function(line, i) {\n            var options = line[1];\n            if (is_function(options.onClear)) {\n                options.onClear.call(self, fn(i));\n            }\n        });\n        this._lines = [];\n        this._snapshot = [];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.data = function() {\n        return this._lines;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.has_newline = function() {\n        if (this._lines.length === 0) {\n            return true;\n        }\n        return this.last_line()[1].newline;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.last_line = function() {\n        var len = this._lines.length;\n        return this._lines[len - 1];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.update = function(index, value, options) {\n        if (value === null) {\n            this._lines.splice(index, 1);\n        } else {\n            this._lines[index][0] = value;\n            if (options) {\n                this._lines[index][1] = $.extend(this._lines[index][1], options);\n            }\n            return this._lines[index][1];\n        }\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.length = function() {\n        return this._lines.length;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.valid_index = function(index) {\n        return !!this._lines[index];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.render = function(cols, fn) {\n        var settings = this._settings();\n        var lines_to_show = [];\n        this._snapshot = [];\n        if (settings.outputLimit >= 0) {\n            // flush will limit lines but if there is lot of\n            // lines we don't need to show them and then remove\n            // them from terminal\n            var limit;\n            if (settings.outputLimit === 0) {\n                limit = cols;\n            } else {\n                limit = settings.outputLimit;\n            }\n            this._lines.forEach(function(line, index) {\n                var value = line[0];\n                var options = line[1];\n                lines_to_show.push({\n                    value: value,\n                    index: index,\n                    options: options\n                });\n            });\n            var pivot = lines_to_show.length - limit - 1;\n            lines_to_show = lines_to_show.slice(pivot);\n        } else {\n            lines_to_show = this._lines.map(function(line, index) {\n                return {\n                    value: line[0],\n                    index: index,\n                    options: line[1]\n                };\n            });\n        }\n        return fn(lines_to_show);\n    };\n    // -------------------------------------------------------------------------\n    // :: FormatBuffer is a class that buffer line printed on terminal\n    // :: with optional format of the text, the class also usse cache\n    // :: the options in the constructor is a function that should returns\n    // :: settings for given format, the settings may change while the terminal\n    // :: is running, that's why they are dynamic in form of a function\n    // -------------------------------------------------------------------------\n    function FormatBuffer(options) {\n        this._options = options;\n        if ('Map' in root) {\n            this._format_cache = new Map();\n        }\n        this._output_buffer = [];\n    }\n    // -------------------------------------------------------------------------\n    FormatBuffer.NEW_LINE = 1;\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.format = function format(arg, newline, raw) {\n        var use_cache = this._format_cache && this._settings.useCache;\n\n        if (use_cache) {\n            var args = JSON.stringify([arg, this._settings]);\n            if (this._format_cache.has(args)) {\n                return this._format_cache.get(args);\n            }\n        }\n        var data = {\n            line: $.terminal.format(\n                arg,\n                this._settings\n            ),\n            raw: raw,\n            newline: newline\n        };\n        if (use_cache) {\n            this._format_cache.set(args, data);\n        }\n        return data;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.empty = function() {\n        return !this._output_buffer.length;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.append = function(arg, index, options, raw) {\n        this._settings = $.extend({\n            useCache: true\n        }, this._options(options));\n\n        this._output_buffer.push(FormatBuffer.NEW_LINE);\n\n        if (arg instanceof Array) {\n            var raw_lines = raw.split('\\n');\n            for (var i = 0, len = arg.length; i < len; ++i) {\n                if (arg[i] === '' || arg[i] === '\\r') {\n                    this._output_buffer.push({line: '', raw: ''});\n                } else {\n                    var formatted = this.format(arg[i], i === len - 1, raw_lines[i]);\n                    this._output_buffer.push(formatted);\n                }\n            }\n        } else if (!options.raw) {\n            this._output_buffer.push(this.format(arg, false, raw));\n        } else {\n            this._output_buffer.push({line: arg, raw: raw});\n        }\n        this._output_buffer.push({\n            finalize: options.finalize,\n            index: index,\n            newline: options.newline\n        });\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.clear_cache = function() {\n        if (this._format_cache) {\n            this._format_cache.clear();\n        }\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.output = function() {\n        return this._output_buffer.slice();\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.is_empty = function() {\n        return !this._output_buffer.length;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.clear = function() {\n        this._output_buffer = [];\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.forEach = function(fn) {\n        var i = 0;\n        while (i < this._output_buffer.length) {\n            var data = this._output_buffer[i++];\n            if (data === FormatBuffer.NEW_LINE) {\n                fn();\n            } else {\n                fn(data);\n            }\n        }\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.flush = function(render) {\n        this.forEach(render);\n        this.clear();\n    };\n    // -------------------------------------------------------------------------\n    // :: function that handle all cases of prompt and call the function set\n    // :: with a string\n    // -------------------------------------------------------------------------\n    function with_prompt(prompt, set, context) {\n        function error(e) {\n            var prompt = $.terminal.escape_brackets('[ERR]> ');\n            set('[[;red;]' + prompt + ']');\n            alert_exception('Prompt', e);\n        }\n        switch (typeof prompt) {\n            case 'string':\n                set(prompt);\n                break;\n            case 'function':\n                try {\n                    var ret = prompt.call(context, function(string) {\n                        set(string);\n                    });\n                    if (typeof ret === 'string') {\n                        set(ret);\n                    }\n                    if (ret && ret.then) {\n                        ret.then(set).catch(error);\n                    }\n                } catch (e) {\n                    error(e);\n                }\n                break;\n        }\n    }\n    // -------------------------------------------------------------------------\n    // :: COMMAND LINE PLUGIN\n    // -------------------------------------------------------------------------\n    var cmd_index = 0;\n    $.cmd = {\n        defaults: {\n            mask: false,\n            caseSensitiveSearch: true,\n            historySize: 60,\n            prompt: '> ',\n            enabled: true,\n            history: true,\n            onPositionChange: $.noop,\n            onCommandChange: $.noop,\n            inputStyle: 'textarea',\n            mobileDelete: is_mobile,\n            onPaste: $.noop,\n            clickTimeout: 200,\n            holdTimeout: 400,\n            holdRepeatTimeout: 200,\n            mobileIngoreAutoSpace: [],\n            repeatTimeoutKeys: [],\n            tabindex: 1,\n            tabs: 4\n        }\n    };\n    $.fn.cmd = function(options) {\n        var settings = $.extend({}, $.cmd.defaults, options);\n        function mobile_ignore_key(key) {\n            return settings.mobileIngoreAutoSpace.length &&\n                settings.mobileIngoreAutoSpace.indexOf(key) !== -1 && is_android;\n        }\n        var self = this;\n        var maybe_data = self.data('cmd');\n        if (maybe_data) {\n            return maybe_data;\n        }\n        var id = cmd_index++;\n        self.addClass('cmd');\n        var wrapper = $('<div class=\"cmd-wrapper\"/>').appendTo(self);\n        wrapper.append('<span class=\"cmd-prompt\"></span>');\n        wrapper.append('<div class=\"cmd-cursor-line\">' +\n                       '<span></span>' +\n                       '<span class=\"cmd-cursor\">' +\n                       '<span data-text class=\"end\"><span>&nbsp;</span></span>' +\n                       '</span>' +\n                       '<span></span>' +\n                       '</div>');\n        var cursor_line = wrapper.find('.cmd-cursor-line');\n        // a11y: don't read command it's in textarea that's in focus\n        a11y_hide(cursor_line);\n        // on mobile the only way to hide textarea on desktop it's needed because\n        // textarea show up after focus\n        //self.append('<span class=\"mask\"></mask>');\n        var clip;\n        if (is_mobile) {\n            clip = (function() {\n                var $node = $('<div class=\"cmd-editable\" ' +\n                              'contenteditable=\"plaintext-only\" ' +\n                              'spellcheck=\"false\"/>').attr({\n                    autocapitalize: 'off',\n                    autocorrect: 'off',\n                    spellcheck: 'false',\n                    tabindex: settings.tabindex\n                }).insertAfter(self);\n                $node.on('focus', function() {\n                    self.enable();\n                }).on('blur', function() {\n                    self.disable();\n                });\n                var timer;\n                var clip = {\n                    $node: $node,\n                    val: function(value) {\n                        if (typeof value === 'undefined') {\n                            return $node.text();\n                        } else {\n                            $node.html(value);\n                        }\n                    },\n                    reset: function() {\n                        clearTimeout(timer);\n                        timer = setTimeout(function() {\n                            $node.css({\n                                top: '',\n                                bottom: ''\n                            });\n                        }, 400);\n                    },\n                    focus: function() {\n                        css($node[0], {\n                            top: 'calc(var(--terminal-scroll, 0) * 1px)'\n                        });\n                        clip.reset();\n                    },\n                    blur: function() {\n                        $node.css({\n                            top: '100%',\n                            bottom: 0\n                        }).blur();\n                        // just in case of Webkit bug\n                        window.getSelection().removeAllRanges();\n                        clip.reset();\n                    }\n                };\n                return clip;\n            })();\n            self.addClass('cmd-mobile');\n        } else {\n            clip = (function() {\n                var id = generate_id();\n                var $node = $('<textarea>').attr({\n                    autocapitalize: 'off',\n                    spellcheck: 'false',\n                    id: id,\n                    tabindex: settings.tabindex\n                }).addClass('cmd-clipboard').appendTo(self);\n                // some a11y to make lighthouse happy\n                $node.before('<label class=\"visually-hidden\" for=\"' + id + '\">' +\n                             'Clipbard textarea for jQuery Terminal</label>');\n                return {\n                    $node: $node,\n                    val: function(value) {\n                        // even if value is undeifned\n                        // when calling val(value) it return jQuery object\n                        if (typeof value === 'undefined') {\n                            return $node.val();\n                        } else {\n                            return $node.val(value);\n                        }\n                    }\n                };\n            })();\n            clip.val(' ');\n        }\n        if (settings.width) {\n            self.width(settings.width);\n        }\n        var num_chars; // calculated by resize\n        var char_width;\n        var last_rendered_prompt;\n        var prompt_last_line;\n        var just_prompt_len;\n        var extra_prompt_margin = 0;\n        var prompt_len;\n        var prompt_node = self.find('.cmd-prompt');\n        var reverse_search = false;\n        var rev_search_str = '';\n        var reverse_search_position = null;\n        var backup_prompt;\n        var command = '';\n        var last_command;\n        // text from selection using CTRL+SHIFT+C (as in Xterm)\n        var kill_text = ''; // text from command that kill part of the command\n        var position = 0;\n        var prompt;\n        var enabled;\n        var formatted_position = 0;\n        var name, history;\n        var cursor = self.find('.cmd-cursor');\n        var animation;\n        var restart_animation;\n        var paste_count = 0;\n        // use \\uFFFF to mark newline extra character\n        // so we can hide it by css when using text selection\n        var line_marker = '\\uFFFF';\n        var line_marker_re = /\\uFFFF$/;\n        var empty_marker_re = /^\\uFFFF$/;\n        function get_char_pos(e) {\n            var node = $(e.target);\n            if (node.is('span,img,a')) {\n                node = node.closest('[data-text]');\n                return node.index() +\n                    node.parent('span').prevAll().find('[data-text]').length +\n                    node.closest('[role=\"presentation\"]')\n                        .prevUntil('.cmd-prompt').find('[data-text]').length;\n            } else if (node.is('div[role=\"presentation\"]')) {\n                var last = !node.next().length;\n                return node.find('[data-text]').length +\n                    node.prevUntil('.cmd-prompt').find('[data-text]').length -\n                    (last ? 0 : 1);\n            }\n        }\n        // IE mapping\n        var key_mapping = {\n            'SPACEBAR': ' ',\n            'UP': 'ArrowUP',\n            'DOWN': 'ArrowDown',\n            'LEFT': 'ArrowLeft',\n            'RIGHT': 'ArrowRight',\n            'DEL': 'Delete',\n            'MULTIPLY': '*',\n            'DIVIDE': '/',\n            'SUBTRACT': '-',\n            'ADD': '+'\n        };\n        function ie_key_fix(e) {\n            var key = e.key.toUpperCase();\n            if (key_mapping[key]) {\n                return key_mapping[key];\n            }\n            return key;\n        }\n        function get_key(e) {\n            if (e.key) {\n                var key = ie_key_fix(e).toUpperCase();\n                if (key === 'CONTROL') {\n                    return 'CTRL';\n                } else {\n                    var combo = [];\n                    if (e.ctrlKey) {\n                        combo.push('CTRL');\n                    }\n                    if (e.metaKey && key !== 'META') {\n                        combo.push('META');\n                    }\n                    if (e.shiftKey && key !== 'SHIFT') {\n                        combo.push('SHIFT');\n                    }\n                    if (e.altKey && key !== 'ALT') {\n                        combo.push('ALT');\n                    }\n                    if (combo.length && key === ' ') {\n                        key = 'SPACEBAR';\n                    }\n                    if (e.key) {\n                        combo.push(key);\n                    }\n                    return combo.join('+');\n                }\n            }\n        }\n        // -----------------------------------------------------------------\n        // for invoking shortcuts using terminal::keydown\n        // taken from https://github.com/cvan/keyboardevent-key-polyfill/\n        var keycodes = {\n            3: 'Cancel',\n            6: 'Help',\n            8: 'Backspace',\n            9: 'Tab',\n            12: 'Clear',\n            13: 'Enter',\n            16: 'Shift',\n            17: 'Control',\n            18: 'Alt',\n            19: 'Pause',\n            20: 'CapsLock',\n            27: 'Escape',\n            28: 'Convert',\n            29: 'NonConvert',\n            30: 'Accept',\n            31: 'ModeChange',\n            32: ' ',\n            33: 'PageUp',\n            34: 'PageDown',\n            35: 'End',\n            36: 'Home',\n            37: 'ArrowLeft',\n            38: 'ArrowUp',\n            39: 'ArrowRight',\n            40: 'ArrowDown',\n            41: 'Select',\n            42: 'Print',\n            43: 'Execute',\n            44: 'PrintScreen',\n            45: 'Insert',\n            46: 'Delete',\n            48: ['0', ')'],\n            49: ['1', '!'],\n            50: ['2', '@'],\n            51: ['3', '#'],\n            52: ['4', '$'],\n            53: ['5', '%'],\n            54: ['6', '^'],\n            55: ['7', '&'],\n            56: ['8', '*'],\n            57: ['9', '('],\n            91: 'OS',\n            93: 'ContextMenu',\n            144: 'NumLock',\n            145: 'ScrollLock',\n            181: 'VolumeMute',\n            182: 'VolumeDown',\n            183: 'VolumeUp',\n            186: [';', ':'],\n            187: ['=', '+'],\n            188: [',', '<'],\n            189: ['-', '_'],\n            190: ['.', '>'],\n            191: ['/', '?'],\n            192: ['`', '~'],\n            219: ['[', '{'],\n            220: ['\\\\', '|'],\n            221: [']', '}'],\n            222: [\"'\", '\"'],\n            224: 'Meta',\n            225: 'AltGraph',\n            246: 'Attn',\n            247: 'CrSel',\n            248: 'ExSel',\n            249: 'EraseEof',\n            250: 'Play',\n            251: 'ZoomOut'\n        };\n        var i;\n        // Function keys (F1-24).\n        for (i = 1; i < 25; i++) {\n            keycodes[111 + i] = 'F' + i;\n        }\n        // Printable ASCII characters.\n        var letter = '';\n        for (i = 65; i < 91; i++) {\n            letter = String.fromCharCode(i);\n            keycodes[i] = [letter.toLowerCase(), letter.toUpperCase()];\n        }\n        var reversed_keycodes = {};\n        Object.keys(keycodes).forEach(function(which) {\n            if (is_array(keycodes[which])) {\n                keycodes[which].forEach(function(key) {\n                    reversed_keycodes[key.toUpperCase()] = which;\n                });\n            } else {\n                reversed_keycodes[keycodes[which].toUpperCase()] = which;\n            }\n        });\n        // -----------------------------------------------------------------\n        var keymap;\n        var default_keymap = {\n            'ALT+D': delete_forward({clipboard: true}),\n            'HOLD+ALT+D': delete_forward({clipboard: true, hold: true}),\n            'HOLD+DELETE': delete_forward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+DELETE': delete_forward({clipboard: false, hold: true}),\n            'ENTER': function() {\n                if (history && command && !settings.mask &&\n                    ((is_function(settings.historyFilter) &&\n                      settings.historyFilter(command)) ||\n                     (settings.historyFilter instanceof RegExp &&\n                      command.match(settings.historyFilter)) ||\n                     !settings.historyFilter)) {\n                    history.append(command);\n                }\n                var tmp = command;\n                // fix scroll the page where there is no scrollbar\n                clip.$node.blur();\n                history.reset();\n\n                // for next input event on firefox/android with google keyboard\n                prev_command = '';\n                no_keydown = true;\n\n                var promise;\n                if (settings.commands) {\n                    promise = settings.commands.call(self, tmp);\n                }\n                if (is_function(prompt)) {\n                    if (promise && is_function(promise.then)) {\n                        promise.then(draw_prompt);\n                    } else {\n                        draw_prompt();\n                    }\n                }\n                self.set('');\n                clip.val('');\n                clip.$node.focus();\n                return false;\n            },\n            'SHIFT+ENTER': function() {\n                self.insert('\\n');\n                return true;\n            },\n            'BACKSPACE': backspace_key,\n            'SHIFT+BACKSPACE': backspace_key,\n            'TAB': function() {\n                self.insert('\\t');\n            },\n            'CTRL+D': function() {\n                self['delete'](1);\n                return false;\n            },\n            'DELETE': function() {\n                self['delete'](1);\n                return true;\n            },\n            'HOLD+ARROWUP': up_arrow,\n            'ARROWUP': up_arrow,\n            'CTRL+ARROWUP': prev_history,\n            'CTRL+P': prev_history,\n            'ARROWDOWN': down_arrow,\n            'HOLD+ARROWDOWN': down_arrow,\n            'CTRL+N': next_history,\n            'CTRL+ARROWDOWN': next_history,\n            'ARROWLEFT': left,\n            'HOLD+ARROWLEFT': debounce(left, 10),\n            'CTRL+B': left,\n            'CTRL+ARROWLEFT': function() {\n                // jump to one character after last space before prevoius word\n                var len = position - 1;\n                var pos = 0;\n                if (command[len] === ' ') {\n                    --len;\n                }\n                for (var i = len; i > 0; --i) {\n                    if (command[i] === ' ' && command[i + 1] !== ' ') {\n                        pos = i + 1;\n                        break;\n                    } else if (command[i] === '\\n' &&\n                               command[i + 1] !== '\\n') {\n                        pos = i;\n                        break;\n                    }\n                }\n                self.position(pos);\n            },\n            'CTRL+R': function() {\n                if (reverse_search) {\n                    reverse_history_search(true);\n                } else {\n                    backup_prompt = prompt;\n                    draw_reverse_prompt();\n                    last_command = command;\n                    self.set('');\n                    redraw();\n                    reverse_search = true;\n                }\n                return false;\n            },\n            'CTRL+G': function() {\n                if (reverse_search) {\n                    prompt = backup_prompt;\n                    draw_prompt();\n                    self.set(last_command);\n                    redraw();\n                    reverse_search = false;\n                    rev_search_str = '';\n                    return false;\n                }\n            },\n            'ARROWRIGHT': right,\n            'HOLD+ARROWRIGHT': debounce(right, 10),\n            'CTRL+F': right,\n            'CTRL+ARROWRIGHT': function() {\n                // jump to beginning or end of the word\n                if (command[position] === ' ') {\n                    ++position;\n                }\n                var re = /\\S[\\n\\s]{2,}|[\\n\\s]+\\S?/;\n                var match = command.slice(position).match(re);\n                if (!match || match[0].match(/^\\s+$/)) {\n                    self.position(bare_text(command).length);\n                } else if (match[0][0] !== ' ') {\n                    position += match.index + 1;\n                } else {\n                    position += match.index + match[0].length - 1;\n                    if (match[0][match[0].length - 1] !== ' ') {\n                        --position;\n                    }\n                }\n                redraw();\n            },\n            'F12': return_true, // Allow Firebug\n            'END': end(true),\n            'CTRL+END': end(),\n            'CTRL+E': end(),\n            'HOME': home(true),\n            'CTRL+HOME': home(),\n            'CTRL+A': home(),\n            'SHIFT+INSERT': paste_event,\n            'CTRL+SHIFT+T': return_true, // open closed tab\n            'CTRL+W': delete_backward({clipboard: true, hold: false}),\n            'HOLD+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'CTRL+H': function() {\n                if (command !== '' && position > 0) {\n                    self['delete'](-1);\n                }\n                return false;\n            },\n            'CTRL+X': return_true,\n            'CTRL+C': function() {\n                return get_selected_html() === '';\n            },\n            'CTRL+T': return_true,\n            'CTRL+Y': function() {\n                if (kill_text !== '') {\n                    self.insert(kill_text);\n                }\n            },\n            'CTRL+V': paste_event,\n            'META+V': paste_event,\n            'CTRL+K': function() {\n                var len = text(command).length;\n                if (len > position) {\n                    kill_text = self['delete'](len - position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+U': function() {\n                if (command !== '' && position !== 0) {\n                    kill_text = self['delete'](-position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+TAB': function() {\n                return false;\n            },\n            'META+`': return_true, // CMD+` switch browser window on Mac\n            'META+R': return_true, // CMD+R page reload in Chrome Mac\n            'META+L': return_true // CLD+L jump into Ominbox on Chrome Mac\n        };\n        // -------------------------------------------------------------------------------\n        function delete_forward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_forward() {\n                    self['delete'](1);\n                    return false;\n                };\n            }\n            return function delete_word_forward() {\n                var re = / *[^ ]+ *(?= )|[^ ]+$/;\n                var substring = command.slice(position);\n                var m = substring.match(re);\n                if (m) {\n                    kill_text = m[0];\n                    if (options.clipboard) {\n                        text_to_clipboard(clip.$node, kill_text);\n                    }\n                }\n                self.set(\n                    command.slice(0, position) +\n                        command.slice(position).replace(re, ''),\n                    true\n                );\n                // chrome jump to address bar\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function delete_backward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_backward() {\n                    self['delete'](-1);\n                };\n            }\n            return function delete_word_backward() {\n                // don't work in Chromium (can't prevent close tab)\n                if (command !== '' && position !== 0) {\n                    var m = command.slice(0, position).match(/([^ ]* *$)/);\n                    if (m[0].length) {\n                        kill_text = self['delete'](-m[0].length);\n                        if (options.clipboard) {\n                            text_to_clipboard(clip.$node, kill_text);\n                        }\n                    }\n                }\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function return_true() {\n            return true;\n        }\n        // -------------------------------------------------------------------------------\n        function paste_event() {\n            clip.val('');\n            paste_count = 0;\n            if (self.isenabled() && !clip.$node.is(':focus')) {\n                clip.$node.trigger('focus', [true]);\n            }\n            clip.$node.one('input', paste);\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Paste content to terminal using hidden textarea\n        // ---------------------------------------------------------------------\n        function paste() {\n            if (paste_count++ > 0) {\n                return;\n            }\n            function set() {\n                clip.val(command);\n                fix_textarea();\n            }\n            function insert(text) {\n                self.insert(text);\n                set();\n            }\n            if (self.isenabled()) {\n                //wait until Browser insert text to textarea\n                self.oneTime(100, function() {\n                    var value = clip.val().replace(/\\r/g, '');\n                    if (is_function(settings.onPaste)) {\n                        var ret = settings.onPaste.call(self, {\n                            target: self,\n                            text: value\n                        });\n                        if (ret !== undefined) {\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, insert);\n                            } else if (typeof ret === 'string') {\n                                insert(ret);\n                            } else if (ret === false) {\n                                set();\n                            }\n                            return;\n                        }\n                    }\n                    insert(value);\n                });\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function prev_history() {\n            if (first_up_history) {\n                last_command = command;\n                self.set(history.current());\n            } else {\n                self.set(history.previous());\n            }\n            first_up_history = false;\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function next_history() {\n            if (history.end()) {\n                first_up_history = true;\n                self.set(last_command);\n            } else {\n                self.set(history.next());\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function have_newlines(string) {\n            return string.match(/\\n/);\n        }\n        // -------------------------------------------------------------------------------\n        function have_wrapping(string, prompt_len) {\n            var lengths = string.split('\\n').map(function(line) {\n                return $.terminal.length(line);\n            });\n            if (prompt_len) {\n                lengths[0] += prompt_len;\n            }\n            var wrap = lengths.filter(function(len) {\n                return len >= num_chars;\n            });\n            return !!wrap.length;\n        }\n        // -------------------------------------------------------------------------------\n        function simple_split_command_line(formatted) {\n            var prompt = last_rendered_prompt;\n            var lines = $.terminal.split_equal(prompt + formatted, num_chars);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            lines = lines.map($.terminal.unescape_brackets);\n            lines[0] = lines[0].replace(re, '');\n            return lines;\n        }\n        // -------------------------------------------------------------------------------\n        function up_arrow() {\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var before = $.terminal.substring(formatted, 0, position);\n            var col = self.column();\n            var cursor_line = self.find('.cmd-cursor-line');\n            var line = cursor_line.prevUntil('span').length;\n            // case when line is wrapped and we are below prompt\n            if (line === 1 && col <= prompt_len) {\n                self.position(0);\n                return false;\n            }\n            if (line === 0) {\n                return prev_history();\n            }\n            if (have_newlines(before) || have_wrapping(before, prompt_len)) {\n                var prev = cursor_line.prev();\n                var splitted = prev.is('.cmd-end-line');\n                var lines = simple_split_command_line(formatted);\n                prev = lines[line - 1];\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                if (left_over > 0) {\n                    diff = col;\n                    if (line - 1 === 0) {\n                        diff -= prompt_len;\n                    }\n                    diff = col + prev.substring(diff).length;\n                    if (splitted) {\n                        ++diff;\n                    }\n                } else {\n                    diff = col + 1;\n                }\n                self.position(-diff, true);\n                return false;\n            } else {\n                return prev_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function down_arrow() {\n            // use format and strip so we get visual strings (formatting can change text)\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var after = $.terminal.substring(formatted, position);\n            if (have_newlines(after) || have_wrapping(after)) {\n                var lines = simple_split_command_line(formatted);\n                var col = self.column();\n                var cursor_line = self.find('.cmd-cursor-line');\n                var $line = cursor_line.prevUntil('span');\n                var line = $line.length;\n                var ending = cursor_line.is('.cmd-end-line');\n                var next_broken = cursor_line.next().is('.cmd-end-line');\n                var next = lines[line + 1];\n                if (!next) {\n                    return next_history();\n                }\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                // move to next line if at the end move to end of next line\n                if (left_over === 0) {\n                    diff = next.length;\n                    if (next_broken) {\n                        diff++;\n                    }\n                } else {\n                    diff = Math.min(col, next.length) + left_over;\n                    if (line === 0) {\n                        diff += prompt_len;\n                    }\n                    if (ending) {\n                        // correction for splitted line that don't have extra space\n                        diff += 1;\n                    }\n                }\n                self.position(diff, true);\n                return false;\n            } else {\n                return next_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function backspace_key() {\n            if (reverse_search) {\n                rev_search_str = rev_search_str.slice(0, -1);\n                draw_reverse_prompt();\n            } else if (command !== '' && position > 0) {\n                self['delete'](-1);\n            }\n            // for next input after naitve backspace\n            // we need timeout because we don't want it to trigger\n            // for current input but next one\n            self.oneTime(1, function() {\n                no_keydown = true;\n            });\n        }\n        // -------------------------------------------------------------------------------\n        function left() {\n            if (position > 0) {\n                self.position(-1, true);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function right() {\n            if (position < bare_text(command).length) {\n                self.position(1, true);\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function home(line) {\n            function home() {\n                self.position(0);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var string = command.substring(0, self.position());\n                        self.position(string.lastIndexOf('\\n') + 1);\n                    } else {\n                        home();\n                    }\n                };\n            } else {\n                return home;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function end(line) {\n            function end() {\n                self.position(text(command).length);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var lines = command.split('\\n');\n                        var pos = self.position();\n                        var sum = 0;\n                        for (var i = 0; i < lines.length; ++i) {\n                            sum += lines[i].length;\n                            if (sum > pos) {\n                                self.position(sum + i);\n                                return;\n                            }\n                        }\n                    }\n                    end();\n                };\n            } else {\n                return end;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function mobile_focus() {\n            //if (is_touch) {\n            var $clip = clip.$node;\n            var focus = $clip.is(':focus');\n            if (enabled) {\n                if (!focus) {\n                    //clip.trigger('focus', [true]);\n                }\n                self.oneTime(10, function() {\n                    if (!$clip.is(':focus') && enabled) {\n                        $clip.trigger('focus', [true]);\n                    }\n                });\n            } else if (focus && !enabled) {\n                $clip.trigger('blur', [true]);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // fix for .cursor span animation that should only be applied when\n        // animation is equal to terminal-blink\n        // -------------------------------------------------------------------------------\n        function fix_cursor() {\n            if (animation_supported) {\n                var style = window.getComputedStyle(cursor[0]);\n                var animationName = style.getPropertyValue('--animation');\n                animationName = animationName.replace(/^\\s*|\\s*$/g, '');\n                var _class = self.attr('class');\n                if (_class.match(/-animation/)) {\n                    _class = _class.replace(/[a-z]+-animation/g, '');\n                }\n                if (animationName && !animationName.match(/blink/)) {\n                    var className = animationName.replace(/terminal-/, '') + '-animation';\n                    if (!_class.match(className)) {\n                        _class += ' ' + className;\n                    }\n                }\n                _class = _class.replace(/\\s+/g, ' ');\n                if (_class !== self.attr('class').replace(/\\s+/g, ' ')) {\n                    self.attr('class', _class);\n                }\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // on mobile you can't delete character if input is empty (event\n        // will not fire) so we fake text entry, we could just put dummy\n        // data but we put real command and position\n        // -------------------------------------------------------------------------------\n        function fix_textarea(position_only) {\n            if (!self.isenabled()) {\n                return;\n            }\n            // delay worked while experimenting\n            self.oneTime(10, function() {\n                // we use space before command to show select all context menu\n                // idea taken from CodeMirror\n                if (!is_mobile && clip.val() !== command && !position_only) {\n                    clip.val(' ' + command);\n                }\n                if (enabled) {\n                    self.oneTime(10, function() {\n                        try {\n                            var pos = !is_mobile ? position + 1 : position;\n                            // we check first to improve performance\n                            if (clip.$node.caret() !== pos) {\n                                clip.$node.caret(pos);\n                            }\n                        } catch (e) {\n                            // firefox throw NS_ERROR_FAILURE ignore\n                        }\n                    });\n                }\n            });\n        }\n        // -------------------------------------------------------------------------------\n        // terminal animation don't work on android because they animate\n        // 2 properties\n        // -------------------------------------------------------------------------------\n        if (animation_supported && !is_android) {\n            animation = function(toggle) {\n                if (toggle) {\n                    cursor.addClass('cmd-blink');\n                } else {\n                    cursor.removeClass('cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                var new_cursor = cursor.clone();\n                new_cursor.insertBefore(cursor);\n                cursor.remove();\n                cursor = new_cursor;\n            };\n        } else {\n            var animating = false;\n            animation = function(toggle) {\n                if (toggle && !animating) {\n                    animating = true;\n                    cursor.addClass('cmd-inverted cmd-blink');\n                    self.everyTime(500, 'blink', blink);\n                } else if (animating && !toggle) {\n                    animating = false;\n                    self.stopTime('blink', blink);\n                    cursor.removeClass('cmd-inverted cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                animation(false);\n                animation(true);\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Blinking cursor function\n        // ---------------------------------------------------------------------\n        function blink() {\n            cursor.toggleClass('cmd-inverted');\n        }\n        // ---------------------------------------------------------------------\n        // :: Set prompt for reverse search\n        // ---------------------------------------------------------------------\n        function draw_reverse_prompt() {\n            prompt = '(reverse-i-search)`' + rev_search_str + \"': \";\n            draw_prompt();\n        }\n        // ---------------------------------------------------------------------\n        // :: Disable reverse search\n        // ---------------------------------------------------------------------\n        function clear_reverse_state() {\n            prompt = backup_prompt;\n            reverse_search = false;\n            reverse_search_position = null;\n            rev_search_str = '';\n        }\n        // ---------------------------------------------------------------------\n        // :: Search through command line history. If next is not defined or\n        // :: false it searches for the first item from the end. If true it\n        // :: search for the next item\n        // ---------------------------------------------------------------------\n        function reverse_history_search(next) {\n            var history_data = history.data();\n            var regex, save_string;\n            var len = history_data.length;\n            if (next && reverse_search_position > 0) {\n                len -= reverse_search_position;\n            }\n            if (rev_search_str.length > 0) {\n                for (var j = rev_search_str.length; j > 0; j--) {\n                    save_string = $.terminal.escape_regex(rev_search_str.slice(0, j));\n                    if (settings.caseSensitiveSearch) {\n                        regex = new RegExp(save_string);\n                    } else {\n                        regex = new RegExp(save_string, 'i');\n                    }\n                    for (var i = len; i--;) {\n                        if (regex.test(history_data[i])) {\n                            reverse_search_position = history_data.length - i;\n                            self.position(history_data[i].indexOf(save_string));\n                            self.set(history_data[i], true);\n                            redraw();\n                            if (rev_search_str.length !== j) {\n                                rev_search_str = rev_search_str.slice(0, j);\n                                draw_reverse_prompt();\n                            }\n                            return;\n                        }\n                    }\n                }\n            }\n            rev_search_str = ''; // clear if not found any\n        }\n        // ---------------------------------------------------------------------\n        // :: calculate width of hte character\n        // ---------------------------------------------------------------------\n        function get_char_width() {\n            var $prompt = self.find('.cmd-prompt');\n            var html = $prompt.html();\n            $prompt.html('<span>&nbsp;</span>');\n            var width = $prompt.find('span')[0].getBoundingClientRect().width;\n            $prompt.html(html);\n            return width;\n        }\n        // ---------------------------------------------------------------------\n        // :: return number of characters in command line\n        // ---------------------------------------------------------------------\n        function get_num_chars(char_width) {\n            var width = self.width();\n            return Math.floor(width / char_width);\n        }\n        // ---------------------------------------------------------------------\n        // :: Split String that fit into command line where first line need to\n        // :: fit next to prompt (need to have less characters)\n        // ---------------------------------------------------------------------\n        function process_cmd_line(string) {\n            function split(string) {\n                return $.terminal.split_equal(string, num_chars);\n            }\n            // -----------------------------------------------------------------\n            function skip_empty(array) {\n                // we remove lines that are leftovers after adding space at the end\n                var result = [];\n                array.forEach(function(line, i) {\n                    if ($.terminal.strip(line).match(empty_marker_re)) {\n                        result[i] = false;\n                        // lines that will get removed need line ending on previos\n                        // line so code that check that marker works correctly\n                        if (i > 0) {\n                            result[i - 1] += line_marker;\n                        }\n                    } else {\n                        result[i] = array[i];\n                    }\n                });\n                return result.filter(function(line) {\n                    return line !== false;\n                });\n            }\n            // -----------------------------------------------------------------\n            var line = prompt_node.find('.cmd-line');\n            var prompt;\n            if (line.length) {\n                prompt = line.nextUntil('.cmd-line').text();\n            } else {\n                prompt = prompt_node.text();\n            }\n            prompt = $.terminal.escape_brackets(prompt);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            var array;\n            if (string.match(/\\n/)) {\n                var tmp = string.split('\\n');\n                var first_len = num_chars - prompt_len - 1;\n                for (var i = 0; i < tmp.length - 1; ++i) {\n                    tmp[i] += line_marker;\n                }\n                // split first line\n                if (strlen(tmp[0]) > first_len) {\n                    array = split(prompt + tmp[0]);\n                    array[0] = array[0].replace(re, '');\n                    array = skip_empty(array);\n                } else {\n                    array = [tmp[0]];\n                }\n                // process rest of the lines\n                for (i = 1; i < tmp.length; ++i) {\n                    if (strlen(tmp[i]) > num_chars) {\n                        var splitted = split(tmp[i]);\n                        if (i < tmp.length - 1) {\n                            splitted = skip_empty(splitted);\n                        }\n                        array = array.concat(splitted);\n                    } else {\n                        array.push(tmp[i]);\n                    }\n                }\n            } else {\n                array = split(prompt + string, num_chars);\n                array[0] = array[0].replace(re, '');\n            }\n            // fix issue with cursor that was cut off #379\n            if (array.length > 1) {\n                var len = $.terminal.length(array[array.length - 1]);\n                if (len === num_chars) {\n                    array.push('');\n                }\n            }\n            return array;\n        }\n        // ---------------------------------------------------------------------\n        var cmd_line_worker = new WorkerCache({\n            validation: function(key) {\n                var result = false;\n                if ((!this._previous_value || this._previous_value === key) &&\n                    (!this._cols || this._cols === num_chars)) {\n                    result = true;\n                }\n                this._previous_value = key;\n                this._cols = num_chars;\n                return result;\n            },\n            action: process_cmd_line\n        });\n        // ---------------------------------------------------------------------\n        function split_command_line(string) {\n            return cmd_line_worker.get(string);\n        }\n        // ---------------------------------------------------------------------\n        // :: use custom formatting\n        // ---------------------------------------------------------------------\n        function formatting(string, skip_formatted_position) {\n            // we don't want to format command when user type formatting in\n            try {\n                string = $.terminal.escape_formatting(string);\n                var format_options = $.extend({}, settings, {\n                    unixFormattingEscapeBrackets: true,\n                    position: position,\n                    command: true\n                });\n                var formatted = $.terminal.apply_formatters(string, format_options);\n                var output = $.terminal.normalize(formatted[0]);\n                var max = $.terminal.length(output);\n                if (!skip_formatted_position) {\n                    formatted_position = formatted[1];\n                    // fix issue with nested formatting where max length\n                    // is checked before nested_formatting flatten formatting\n                    if (formatted_position > max) {\n                        formatted_position = max;\n                    }\n                }\n                return output;\n            } catch (e) {\n                alert_exception('[Formatting]', e.stack);\n                return string;\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: format and encode the string\n        // ---------------------------------------------------------------------\n        function format(string, before) {\n            //string = $.terminal.normalize(string);\n            var encoded = $.terminal.encode(wrap(string), {\n                tabs: settings.tabs,\n                before: before\n            });\n            return $.terminal.format(encoded, {\n                charWidth: settings.charWidth,\n                allowedAttributes: settings.allowedAttributes || []\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create new string with all characters in it's own\n        // :: formatting - it will only have style if the input is formatting\n        // :: this function is not very usefull so it's not in $.terminal\n        // ---------------------------------------------------------------------\n        function wrap(string) {\n            return $.terminal.partition(string).join('');\n        }\n        // ---------------------------------------------------------------------\n        // :: shortcut helpers\n        // ---------------------------------------------------------------------\n        function length(str, raw) {\n            return $.terminal.length(str, raw);\n        }\n        // ---------------------------------------------------------------------\n        function is_multiline(str) {\n            return strlen(text(str)) > num_chars - prompt_len - 1 ||\n                str.match(/\\n/);\n        }\n        // ---------------------------------------------------------------------\n        function substring(str, start, end) {\n            return $.terminal.substring(str, start, end);\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that check if string is valid emoji formatting\n        // ---------------------------------------------------------------------\n        function is_emoji_formatting(str) {\n            if ($.terminal.is_formatting(str)) {\n                return str.replace(format_parts_re, '$4').match(/^emoji /);\n            }\n            return false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Function that displays the command line. Split long lines and\n        // :: place cursor in the right place\n        // ---------------------------------------------------------------------\n        var redraw = (function() {\n            var before = cursor.prev();\n            var after = cursor.next();\n            var cursor_line = cursor.parent();\n            // -----------------------------------------------------------------\n            // :: Draw line with the cursor\n            // -----------------------------------------------------------------\n            function draw_cursor_line(string, options) {\n                var end_line = string.match(line_marker_re);\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                }\n                cursor_line.toggleClass('cmd-end-line', !!end_line);\n                var cursor_end_line = false;\n                var settings = $.extend({\n                    prompt: '',\n                    last: false\n                }, options);\n                var position = settings.position;\n                var len = length(string);\n                var prompt = settings.prompt;\n                var c;\n                if (position === len) {\n                    before.html(format(string));\n                    c = '&nbsp;';\n                    empty_cursor();\n                    after.html('');\n                } else if (position === 0) {\n                    before.html('');\n                    c = substring(string, 0, 1);\n                    cursor.html(format(c));\n                    after.html(format(substring(string, 1), prompt + c));\n                } else {\n                    var before_str = $.terminal.substring(string, 0, position);\n                    before.html(format(before_str, prompt));\n                    c = substring(string, position, position + 1);\n                    var c_before = (prompt + before_str).replace(/^.*\\t/, '');\n                    cursor.html(format(c, c_before));\n                    if (position === len - 1) {\n                        cursor_end_line = true;\n                        after.html('');\n                    } else {\n                        if (c.match(/\\t/)) {\n                            c_before = '';\n                        } else {\n                            c_before += c;\n                        }\n                        after.html(format(substring(string, position + 1), c_before));\n                    }\n                }\n                if (ch_unit_bug) {\n                    if (typeof wcwidth !== 'undefined') {\n                        // handle emoji and wide characters in IE or\n                        // other possible browsers that don't have valid ch unit\n                        var size = strlen(text(c));\n                        if (size === 1 && is_emoji_formatting(c)) {\n                            size = 2;\n                        }\n                        cursor.width(char_width * size);\n                    } else {\n                        cursor.width(char_width);\n                    }\n                }\n                cursor.toggleClass('cmd-end-line', cursor_end_line);\n                // fix for animation when changing --animation dynamically\n                fix_cursor();\n                var cursor_len = $.terminal.length(cursor.text());\n                if (cursor_len > 1) {\n                    var node = cursor.find('[data-text]')[0];\n                    node.style.setProperty('--length', cursor_len);\n                }\n                // synchronize css animations (it's not that important because if user\n                // will change animation she should disable animation on span, but it\n                // looks nicer until she disable that inner animation)\n                restart_animation();\n            }\n            // -----------------------------------------------------------------\n            function div(string, before) {\n                var end_line = string.match(line_marker_re);\n                var result = '<div role=\"presentation\" aria-hidden=\"true\"';\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                    result += ' class=\"cmd-end-line\"';\n                }\n                result += '>' + format(string, before || '') + '</div>';\n                return result;\n            }\n            // -----------------------------------------------------------------\n            function empty_cursor() {\n                // data-text is for consistency in CSS and end class is for unit tests\n                cursor.html('<span data-text class=\"end\"><span>&nbsp;<span></span>');\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines after the cursor\n            // -----------------------------------------------------------------\n            function lines_after(lines) {\n                var last_ins = cursor_line;\n                $.each(lines, function(i, line) {\n                    last_ins = $(div(line)).insertAfter(last_ins);\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines before the cursor\n            // -----------------------------------------------------------------\n            function lines_before(lines) {\n                $.each(lines, function(i, line) {\n                    cursor_line.before(div(line, i === 0 ? prompt_last_line : ''));\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Redraw function\n            // -----------------------------------------------------------------\n            return function() {\n                var string;\n                switch (typeof settings.mask) {\n                    case 'boolean':\n                        string = settings.mask ? command.replace(/./g, '*') : command;\n                        break;\n                    case 'string':\n                        string = command.replace(/./g, settings.mask);\n                        break;\n                }\n                var formatted = formatting(string);\n                var pos;\n                if (length(formatted) === text(string).length) {\n                    pos = position;\n                } else {\n                    pos = formatted_position;\n                }\n                var i;\n                wrapper.css({\n                    display: 'none'\n                });\n                wrapper.find('div:not(.cmd-cursor-line)').remove();\n                before.html('');\n                if (is_multiline(formatted)) {\n                    var tabs = formatted.match(/\\t/g);\n                    var original_string = formatted;\n                    //quick tabulation hack\n                    if (tabs) {\n                        formatted = formatted.replace(/\\t/g, '\\x00\\x00\\x00\\x00');\n                    }\n                    var array = split_command_line(formatted);\n                    if (tabs) {\n                        array = $.map(array, function(line) {\n                            return line.replace(/\\x00\\x00\\x00\\x00/g, '\\t');\n                        });\n                    }\n                    var first_len = length(array[0]);\n                    //cursor in first line\n                    if (first_len === 0 && array.length === 1) {\n                        // skip empty line\n                    } else if (pos < first_len) {\n                        draw_cursor_line(array[0], {\n                            length: array.length,\n                            position: pos,\n                            prompt: prompt_last_line\n                        });\n                        lines_after(array.slice(1));\n                    } else if (pos === first_len) {\n                        // first char acter of second line\n                        cursor_line.before(div(array[0], prompt_last_line));\n                        draw_cursor_line(array[1] || '', {\n                            length: array.length,\n                            position: 0,\n                            last: array.length <= 2\n                        });\n                        if (array.length > 2) {\n                            lines_after(array.slice(2));\n                        }\n                    } else {\n                        var last = array.slice(-1)[0];\n                        var len = length(original_string);\n                        var from_last = len - pos;\n                        var last_len = length(last);\n                        var new_pos = 0;\n                        if (from_last === -1) {\n                            from_last = 0;\n                        }\n                        if (from_last <= last_len) { // in last line\n                            lines_before(array.slice(0, -1));\n                            if (last_len === from_last) {\n                                new_pos = 0;\n                            } else {\n                                new_pos = last_len - from_last;\n                            }\n                            draw_cursor_line(last, {\n                                length: array.length,\n                                position: new_pos,\n                                last: true\n                            });\n                        } else {\n                            // more lines, cursor in the middle\n                            var line_index;\n                            var current;\n                            new_pos = pos;\n                            for (i = 0; i < array.length; ++i) {\n                                var current_len = $.terminal.length(array[i]);\n                                if (new_pos > current_len) {\n                                    new_pos -= current_len;\n                                } else {\n                                    break;\n                                }\n                            }\n                            current = array[i];\n                            line_index = i;\n                            // cursor on first character in line\n                            if (new_pos === length(current)) {\n                                new_pos = 0;\n                                current = array[++line_index];\n                                if (current === undefined) {\n                                    //should never happen\n                                    var msg = $.terminal.defaults.strings.redrawError;\n                                    throw new Error(msg);\n                                }\n                            }\n                            draw_cursor_line(current, {\n                                length: array.length,\n                                position: new_pos\n                            });\n                            lines_before(array.slice(0, line_index));\n                            lines_after(array.slice(line_index + 1));\n                        }\n                    }\n                    self.find('.cmd-cursor-line ~ div:last-of-type')\n                        .append('<span></span>');\n                } else if (formatted === '') {\n                    before.html('');\n                    empty_cursor();\n                    after.html('');\n                } else {\n                    draw_cursor_line(formatted, {\n                        length: 1,\n                        position: pos\n                    });\n                }\n                var in_line = cursor_line.prevUntil('.cmd-prompt').length;\n                if (is_css_variables_supported) {\n                    self[0].style.setProperty('--cursor-line', in_line);\n                } else {\n                    clip.$node.css('top', in_line * 14 + 'px');\n                }\n                wrapper.css({\n                    display: ''\n                });\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: find position that match display position for commands that\n        // :: change length by formatters\n        // ---------------------------------------------------------------------\n        var find_position = (function() {\n            function make_guess(string, position) {\n                var opts = $.extend({}, settings, {\n                    position: position,\n                    command: true\n                });\n                return $.terminal.apply_formatters(string, opts)[1];\n            }\n            function cmp(search_pos, pos, string) {\n                var guess = make_guess(string, pos);\n                if (guess === search_pos) {\n                    var next_guess = make_guess(string, pos + 1);\n                    if (next_guess > search_pos) {\n                        return 0;\n                    }\n                    return 1;\n                } else if (guess < search_pos) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            }\n            return function(string, formatted_position) {\n                if (formatted_position === 0) {\n                    return 0;\n                }\n                string = bare_text(string);\n                var codepoint_len = string.length;\n                var str = $.terminal.escape_brackets(command);\n                var pos = binary_search(0, codepoint_len, formatted_position, cmp, [str]);\n                var chars = $.terminal.split_characters(string);\n                if (codepoint_len > chars.length) {\n                    var len = 0;\n                    for (var i = 0; i < chars.length; ++i) {\n                        len += chars[i].length;\n                        if (len >= pos) {\n                            return len;\n                        }\n                    }\n                }\n                return pos;\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: Draw prompt that can be a function or a string\n        // ---------------------------------------------------------------------\n        var prev_prompt_data;\n        var draw_prompt = (function() {\n            function format_prompt(prompt) {\n                if (!prompt) {\n                    just_prompt_len = 0;\n                    prompt_len = just_prompt_len + extra_prompt_margin;\n                    return prompt;\n                }\n                var lines = $.terminal.split_equal(prompt, num_chars).map(function(line) {\n                    if (!$.terminal.have_formatting(line)) {\n                        return '[[;;]' + $.terminal.escape_brackets(line) + ']';\n                    }\n                    return $.terminal.format_split(line).map(function(str) {\n                        if ($.terminal.is_formatting(str)) {\n                            return str;\n                        }\n                        return '[[;;]' + $.terminal.escape_brackets(str) + ']';\n                    }).join('');\n                });\n                var options = {\n                    charWidth: settings.charWidth\n                };\n                prompt_last_line = lines[lines.length - 1];\n                var encoded_last_line = $.terminal.encode(lines[lines.length - 1], {\n                    tabs: settings.tabs\n                });\n                var last_line = $.terminal.format(encoded_last_line, options);\n                just_prompt_len = strlen(text(encoded_last_line));\n                prompt_len = just_prompt_len + extra_prompt_margin;\n                return lines.slice(0, -1).map(function(line) {\n                    line = $.terminal.encode(line, {\n                        tabs: settings.tabs\n                    });\n                    return '<span class=\"cmd-line\">' +\n                           $.terminal.format(line, options) +\n                           '</span>';\n                }).concat([last_line]).join('\\n');\n            }\n            function set(prompt) {\n                if (prompt) {\n                    prompt = $.terminal.apply_formatters(prompt, {prompt: true});\n                    prompt = $.terminal.normalize(prompt);\n                    prompt = crlf(prompt);\n                }\n                var formatted = format_prompt(prompt);\n                last_rendered_prompt = prompt;\n                // zero width space to make sure prompt margin takes up space,\n                // so that echo with newline: false works when prompt is empty\n                formatted = formatted || $.terminal.format('[[;;]\\u200b]');\n                // update prompt if changed\n                if (prompt_node.html() !== formatted) {\n                    prompt_node.html(formatted);\n                    // fix for Chrome bug width selection\n                    // https://bugs.chromium.org/p/chromium/issues/detail?id=1087787\n                    var spans = prompt_node.find('> span span');\n                    clip.$node.attr('data-cmd-prompt', prompt_node.text());\n                    if (is_ch_unit_supported) {\n                        prompt_node.hide();\n                        spans.each(function() {\n                            var self = $(this);\n                            var len = strlen(self.text());\n                            if (len === 0) {\n                                self.css('width', 1);\n                            } else {\n                                self.css('width', len + 'ch');\n                            }\n                        });\n                        prompt_node.show();\n                    }\n                }\n            }\n            return function() {\n                // the data is used as cancelable reference because we have ref\n                // data object that is hold in closure and we remove `set` function\n                // so previous call to function prompt will be ignored\n                if (prev_prompt_data && prev_prompt_data.set) {\n                    prev_prompt_data.set = $.noop;\n                    // remove reference for garbage collector\n                    prev_prompt_data = null;\n                }\n                var data = prev_prompt_data = {\n                    set: set\n                };\n                with_prompt(prompt, function(prompt) {\n                    data.set(prompt);\n                }, self);\n            };\n        })();\n        // ---------------------------------------------------------------------\n        function fire_change_command() {\n            if (is_function(settings.onCommandChange)) {\n                settings.onCommandChange.call(self, command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Command Line Methods\n        // ---------------------------------------------------------------------\n        $.extend(self, {\n            option: function(name, value) {\n                if (typeof value === 'undefined') {\n                    return settings[name];\n                } else {\n                    settings[name] = value;\n                }\n                return self;\n            },\n            name: function(string) {\n                if (string !== undefined) {\n                    name = string;\n                    var enabled = history && history.enabled() || !history;\n                    history = new History(\n                        name,\n                        settings.historySize,\n                        settings.history === 'memory'\n                    );\n                    // disable new history if old was disabled\n                    if (!enabled) {\n                        history.disable();\n                    }\n                    return self;\n                } else {\n                    return name;\n                }\n            },\n            purge: function() {\n                history.clear();\n                return self;\n            },\n            history: function() {\n                return history;\n            },\n            'delete': function(n, stay) {\n                var removed, string;\n                if (n === 0) {\n                    return \"\";\n                } else if (n < 0) {\n                    if (position > 0) {\n                        // this may look weird but if n is negative we need\n                        // to use +\n                        removed = command.slice(0, position).slice(n);\n                        string = bare_text(command);\n                        string = string.slice(0, position + n) +\n                            string.slice(position, string.length);\n                        if (!stay) {\n                            self.position(position + n);\n                        }\n                    }\n                } else if (command !== '') {\n                    string = text(command);\n                    if (position < string.length) {\n                        removed = string.slice(position).slice(0, n);\n                        string = string.slice(0, position) +\n                            string.slice(position + n, string.length);\n                    }\n                }\n                if (removed) {\n                    command = string;\n                }\n                redraw();\n                fix_textarea();\n                fire_change_command();\n                return removed;\n            },\n            set: function(string, stay, silent) {\n                if (string !== undefined) {\n                    command = string;\n                    if (!stay) {\n                        self.position(bare_text(command).length);\n                    }\n                    redraw();\n                    fix_textarea();\n                    if (!silent) {\n                        fire_change_command();\n                    }\n                }\n                return self;\n            },\n            keymap: function(new_keymap, value) {\n                function wrap(key, fn) {\n                    var original = default_keymap[key];\n                    if (is_function(original)) {\n                        original = original.bind(self);\n                    }\n                    return function(e) {\n                        // new keymap function will get default as 2nd argument\n                        return fn.call(self, e, original);\n                    };\n                }\n                if (new_keymap === null) {\n                    keymap = default_keymap;\n                    return self;\n                } else if (typeof new_keymap === 'undefined') {\n                    return keymap;\n                } else if (typeof new_keymap === 'string') {\n                    if (typeof value === 'undefined') {\n                        if (keymap[new_keymap]) {\n                            return keymap[new_keymap];\n                        } else if (default_keymap[new_keymap]) {\n                            return default_keymap[new_keymap];\n                        }\n                    } else {\n                        keymap[new_keymap] = wrap(new_keymap, value);\n                    }\n                } else {\n                    keymap = $.extend(\n                        {},\n                        keymap ? keymap : default_keymap,\n                        $.omap(new_keymap || {}, wrap)\n                    );\n                    return self;\n                }\n            },\n            insert: function(string, stay) {\n                var bare_command = bare_text(command);\n                var len = bare_text(string).length;\n                if (position === bare_command.length) {\n                    string = bare_command + string;\n                } else if (position === 0) {\n                    string = string + bare_command;\n                } else {\n                    string = bare_command.slice(0, position) +\n                        string + bare_command.slice(position);\n                }\n                command = string;\n                if (!stay) {\n                    self.position(len, true, true);\n                }\n                fix_textarea();\n                redraw();\n                fire_change_command();\n                return self;\n            },\n            get: function() {\n                return command;\n            },\n            commands: function(commands) {\n                if (commands) {\n                    settings.commands = commands;\n                    return self;\n                } else {\n                    return commands;\n                }\n            },\n            destroy: function() {\n                doc.unbind('keypress.cmd', keypress_event);\n                doc.unbind('keydown.cmd', keydown_event);\n                doc.unbind('input.cmd', input_event);\n                self.stopTime('blink', blink);\n                self.find('.cmd-wrapper').remove();\n                self.find('.cmd-prompt, .cmd-clipboard, .cmd-editable').remove();\n                self.removeClass('cmd').removeData('cmd').off('.cmd');\n                return self;\n            },\n            column: function(include_prompt) {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                var re = /\\n?([^\\n]*)$/;\n                var match = before.match(re);\n                var col = match[1].length;\n                if (!have_newlines(before) &&\n                    (include_prompt || have_wrapping(before, prompt_len))) {\n                    col += prompt_len;\n                }\n                if (col === 0) {\n                    return col;\n                }\n                col %= num_chars;\n                if (col === 0) {\n                    return num_chars;\n                }\n                return col;\n            },\n            line: function() {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                return before.split(/\\n/).length - 1;\n            },\n            // inform cursor about size of partial output line\n            __set_prompt_margin: function(len) {\n                extra_prompt_margin = len;\n                prompt_len = just_prompt_len + extra_prompt_margin;\n            },\n            prompt: function(user_prompt) {\n                if (user_prompt === true) {\n                    return last_rendered_prompt;\n                } else if (user_prompt === undefined) {\n                    return prompt;\n                } else {\n                    var should_redraw = user_prompt !== prompt;\n                    if (typeof user_prompt === 'string' ||\n                        typeof user_prompt === 'function') {\n                        prompt = user_prompt;\n                    } else {\n                        throw new Error('prompt must be a function or string');\n                    }\n                    if (should_redraw) {\n                        draw_prompt();\n                        // we could check if command is longer then numchars-new\n                        // prompt\n                        redraw();\n                    }\n                    return self;\n                }\n            },\n            kill_text: function() {\n                return kill_text;\n            },\n            position: function(n, relative, silent) {\n                if (typeof n === 'number') {\n                    var pos = position;\n                    var len = bare_text(command).length;\n                    if (relative) {\n                        position += n;\n                    } else if (n < 0) {\n                        position = 0;\n                    } else if (n > len) {\n                        position = len;\n                    } else {\n                        position = n;\n                    }\n                    if (pos !== position) {\n                        redraw();\n                        if (!silent && is_function(settings.onPositionChange)) {\n                            settings.onPositionChange(position, formatted_position);\n                        }\n                        fix_textarea(true);\n                    }\n                    return self;\n                } else {\n                    return position;\n                }\n            },\n            refresh: function() {\n                draw_prompt();\n                redraw();\n                fix_textarea(true);\n                return self;\n            },\n            // if formatter change length of the strings (like emoji demo) we need to keep\n            // track of two different positions one for command and one for display\n            display_position: function(n, relative) {\n                if (n === undefined) {\n                    return formatted_position;\n                } else {\n                    // double escape\n                    var string = formatting($.terminal.escape_formatting(command), true);\n                    var len = length(string);\n                    var command_len = bare_text(command).length;\n                    var new_formatted_pos;\n                    if (relative) {\n                        new_formatted_pos = formatted_position + n;\n                    } else if (n > len) {\n                        new_formatted_pos = len;\n                    } else {\n                        new_formatted_pos = n;\n                    }\n                    if (len === command_len) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(new_formatted_pos);\n                    }\n                    if (len === new_formatted_pos) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(command_len);\n                    }\n                    var pos = find_position(command, new_formatted_pos);\n                    if (pos !== -1) {\n                        formatted_position = new_formatted_pos;\n                        self.position(pos);\n                    }\n                    return self;\n                }\n            },\n            visible: (function() {\n                var visible = self.visible;\n                return function() {\n                    visible.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            show: (function() {\n                var show = self.show;\n                return function() {\n                    show.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            resize: function(num) {\n                char_width = get_char_width();\n                var new_num_chars;\n                if (typeof num === 'number') {\n                    new_num_chars = num;\n                } else {\n                    new_num_chars = get_num_chars(char_width);\n                }\n                if (num_chars !== new_num_chars || arguments[0] === true) {\n                    num_chars = new_num_chars;\n                    redraw();\n                    draw_prompt();\n                }\n                return self;\n            },\n            invoke_key: function(shortcut) {\n                if (!enabled) {\n                    warn('invoke_key(\"' + shortcut + '\") called on disabled terminal');\n                }\n                var keys = shortcut.toUpperCase().split('+');\n                var key = keys.pop();\n                var ctrl = keys.indexOf('CTRL') !== -1;\n                var shift = keys.indexOf('SHIFT') !== -1;\n                var alt = keys.indexOf('ALT') !== -1;\n                var meta = keys.indexOf('META') !== -1;\n                var e = $.Event(\"keydown\", {\n                    ctrlKey: ctrl,\n                    shiftKey: shift,\n                    altKey: alt,\n                    metaKey: meta,\n                    which: reversed_keycodes[key],\n                    key: key\n                });\n                var doc = $(document.documentElement || window);\n                doc.trigger(e);\n                e = $.Event(\"keypress\");\n                e.key = key;\n                e.which = e.keyCode = 0;\n                doc.trigger(e);\n                return self;\n            },\n            clip: function() {\n                return clip;\n            },\n            enable: function(silent) {\n                if (!enabled) {\n                    enabled = true;\n                    self.addClass('enabled');\n                    try {\n                        if (!clip.$node.is(':focus')) {\n                            clip.$node.focus();\n                        }\n                        clip.$node.caret(position);\n                    } catch (e) {\n                        // firefox throw NS_ERROR_FAILURE - ignore\n                    }\n                    animation(true);\n                    if (!silent && is_function(prompt)) {\n                        draw_prompt();\n                    }\n                    fix_cursor();\n                    fix_textarea();\n                }\n                mobile_focus();\n                return self;\n            },\n            isenabled: function() {\n                return enabled;\n            },\n            disable: function(focus) {\n                enabled = false;\n                self.removeClass('enabled');\n                animation(false);\n                if (!focus) {\n                    mobile_focus();\n                }\n                return self;\n            },\n            mask: function(new_mask) {\n                if (typeof new_mask === 'undefined') {\n                    return settings.mask;\n                } else {\n                    settings.mask = new_mask;\n                    redraw();\n                    return self;\n                }\n            }\n        });\n        // ---------------------------------------------------------------------\n        // :: INIT\n        // ---------------------------------------------------------------------\n        self.name(settings.name || settings.prompt || '');\n        if (settings.prompt !== false) {\n            prompt = settings.prompt;\n            draw_prompt();\n        }\n        if (settings.enabled === true) {\n            self.enable();\n        }\n        char_width = get_char_width();\n        num_chars = get_num_chars(char_width);\n        if (!settings.history) {\n            history.disable();\n        }\n        var first_up_history = true;\n        // skip_keypress - hack for Android that was inserting characters on\n        // backspace\n        var skip_keypress = false;\n        var dead_key = false;\n        var single_key = false;\n        var no_keypress = false;\n        var no_key = false;\n        var no_keydown = true;\n        var backspace = false;\n        var process = false;\n        var hold = false;\n        var hold_pause = false;\n        var skip_insert;\n        // we hold text before keydown to fix backspace for Android/Chrome/SwiftKey\n        // keyboard that generate keycode 229 for all keys #296\n        var prev_command = '';\n        var prev_key;\n        // ---------------------------------------------------------------------\n        // :: Keydown Event Handler\n        // ---------------------------------------------------------------------\n        function is_backspace(e) {\n            return e.key.toUpperCase() === 'BACKSPACE' || e.which === 8;\n        }\n        // ---------------------------------------------------------------------\n        function is_single(e) {\n            return e.key && e.key.length === 1 && !e.ctrlKey;\n        }\n        // ---------------------------------------------------------------------\n        function is_delay_key(key) {\n            var specials = ['HOLD+SHIFT+BACKSPACE', 'HOLD+BACKSPACE'];\n            return specials.indexOf(key) !== -1 && settings.mobileDelete ||\n                settings.repeatTimeoutKeys.indexOf(key) !== -1;\n        }\n        // ---------------------------------------------------------------------\n        function clear_reverse_search_key(e) {\n            // arrows / Home / End / ENTER\n            return e.which === 35 || e.which === 36 ||\n                e.which === 37 || e.which === 38 ||\n                e.which === 39 || e.which === 40 ||\n                e.which === 13 || e.which === 27;\n        }\n        var skip_keydown = false;\n        // ---------------------------------------------------------------------\n        // function complexicity is 35 when adding this exception\n        // eslint-disable-next-line complexity\n        function keydown_event(e) {\n            debug('keydown \"' + e.key + '\" ' + e.fake + ' ' + e.which);\n            var result;\n            process = (e.key || '').toLowerCase() === 'process' || e.which === 0;\n            dead_key = no_keypress && single_key && !is_backspace(e);\n            // special keys don't trigger keypress fix #293\n            try {\n                if (!e.fake) {\n                    single_key = is_single(e);\n                    // chrome on android support key property but it's \"Unidentified\"\n                    no_key = String(e.key).toLowerCase() === 'unidentified';\n                    backspace = is_backspace(e);\n                }\n            } catch (exception) {}\n            // keydown created in input will have text already inserted and we\n            // want text before input\n            if (e.key === \"Unidentified\") {\n                no_keydown = true;\n                // android swift keyboard have always which == 229 we will triger proper\n                // event in input with e.fake == true\n                return;\n            }\n            // meta and os are special keydown triggered by Emoji picker on Windows 10\n            // meta is in Google Chrome is is in Firefox\n            if (!e.fake && ['meta', 'os'].indexOf(e.key.toLowerCase()) === -1) {\n                no_keydown = false;\n            }\n            no_keypress = true;\n            // Meta+V did bind input but it didin't happen because terminal paste\n            // prevent native insert action\n            clip.$node.off('input', paste);\n            var key = get_key(e);\n            if (is_function(settings.keydown)) {\n                e.key = ie_key_fix(e);\n                result = settings.keydown.call(self, e);\n                if (result !== undefined) {\n                    //skip_keypress = true;\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (key !== prev_key) {\n                clear_hold();\n            }\n            // CTRL+C hanlding is only exception of cmd aware terminal logic\n            // cmd need to call CTRL+C keymap when terminal is not enabled\n            if (enabled || (key === 'CTRL+C' && is_terminal_selected(self))) {\n                if (hold) {\n                    prev_key = key;\n                    key = 'HOLD+' + key;\n                    if (hold_pause) {\n                        return;\n                    }\n                    if (settings.holdRepeatTimeout > 0 && is_delay_key(key)) {\n                        hold_pause = true;\n                        self.oneTime(settings.holdRepeatTimeout, 'delay', function() {\n                            hold_pause = false;\n                        });\n                    }\n                } else {\n                    self.oneTime(settings.holdTimeout, 'hold', function() {\n                        hold = true;\n                    });\n                    prev_key = key;\n                }\n                // if e.fake ignore of space is handled in input and next keydown\n                // is not triggered this is just in case code since on Android\n                // keydown is not triggered only input so event is always fake on Android\n                if (!e.fake && is_android) {\n                    if (skip_keydown) {\n                        clear_hold();\n                        skip_keydown = false;\n                        return false;\n                    }\n                    if (mobile_ignore_key(key)) {\n                        skip_keydown = true;\n                    } else if (mobile_ignore_key(prev_key)) {\n                        // just in case next key is different then space\n                        skip_keydown = false;\n                    }\n                }\n                restart_animation();\n                // CTRL+V don't fire keypress in IE11\n                skip_insert = ['CTRL+V', 'META+V'].indexOf(key) !== -1;\n                // only enter will reset history (and down arrow on last command)\n                if (key.toLowerCase() === 'enter') {\n                    first_up_history = true;\n                }\n                if (reverse_search && clear_reverse_search_key(e)) {\n                    clear_reverse_state();\n                    draw_prompt();\n                    if (e.which === 27) { // ESC\n                        self.set('');\n                    }\n                    redraw();\n                    if (e.which === 13) {\n                        keydown_event.call(this, e);\n                    }\n                } else if (is_function(keymap[key])) {\n                    result = keymap[key](e);\n                    if (result === true) {\n                        return;\n                    }\n                    if (result !== undefined) {\n                        return result;\n                    }\n                } else if (e.altKey) {\n                    return;\n                } else {\n                    skip_keypress = false;\n                    return;\n                }\n                // this will prevent for instance backspace to go back one page\n                //skip_keypress = true;\n                //e.preventDefault();\n            }\n        }\n        function clear_hold() {\n            self.stopTime('hold');\n            self.stopTime('delay');\n            hold_pause = hold = false;\n        }\n        var doc = $(document.documentElement || window);\n        self.keymap(settings.keymap || {});\n        function keypress_event(e) {\n            debug('keypress \"' + e.key + '\" ' + e.fake);\n            clear_hold();\n            var result;\n            if (!e.fake) {\n                no_keypress = false;\n            }\n            if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                return;\n            }\n            if (skip_keypress) {\n                return;\n            }\n            if (is_function(settings.keypress)) {\n                result = settings.keypress.call(self, e);\n                if (result !== undefined) {\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (enabled) {\n                if (e.fake) {\n                    // event created in input, we prevent inserting text\n                    // in different interpreter when keydown called pop\n                    return;\n                }\n                // key polyfill is not correct for keypress\n                // https://github.com/cvan/keyboardevent-key-polyfill/issues/15\n                var key;\n                if (is_key_native) {\n                    key = e.key;\n                    // fixing IE inconsistency #362\n                    var normalized = key.toUpperCase();\n                    if (key_mapping[normalized]) {\n                        key = key_mapping[normalized];\n                    }\n                }\n                if (!key || no_key) {\n                    key = String.fromCharCode(e.which);\n                }\n                if ($.inArray(e.which, [13, 0, 8]) > -1) {\n                    if (e.keyCode === 123) { // for F12 which === 0\n                        return;\n                    }\n                    return false;\n                    // which === 100 - d\n                } else if (key && (!e.ctrlKey || (e.ctrlKey && e.ctrlKey)) &&\n                           (!(e.altKey && e.which === 100) || e.altKey) &&\n                           !dead_key) {\n                    // dead_key are handled by input event\n                    if (reverse_search) {\n                        rev_search_str += key;\n                        reverse_history_search();\n                        draw_reverse_prompt();\n                    } else if (key.length === 1) {\n                        self.insert(key);\n                    }\n                }\n            }\n        }\n        function event(type, chr, which) {\n            var event = $.Event(type);\n            event.which = which;\n            event.key = chr;\n            event.fake = true;\n            doc.trigger(event);\n        }\n        var skip_input = false;\n        function finalize_input_event() {\n            prev_command = command;\n            skip_insert = false;\n            no_keydown = true;\n        }\n        function input_event() {\n            debug('input ' + no_keydown + ' || ' + process + ' ((' + no_keypress +\n                  ' || ' + dead_key + ') && !' + skip_insert + ' && (' + single_key +\n                  ' || ' + no_key + ') && !' + backspace + ')');\n            // correct for fake space used for select all context menu hack\n            var val = clip.val();\n            if (!is_mobile) {\n                val = val.replace(/^ /, '');\n            }\n            // Some Androids don't fire keypress - #39\n            // if there is dead_key we also need to grab real character #158\n            // Firefox/Android with google keyboard don't fire keydown and keyup #319\n            if (no_keydown || process || ((no_keypress || dead_key) &&\n                                          !skip_insert &&\n                                          (single_key || no_key) && !backspace)) {\n                if (val && val === command) {\n                    if (is_android) {\n                        // ignore autocomplete on GBoard keyboard #693\n                        if (no_keydown) {\n                            event('keydown', 'Enter', 13);\n                        }\n                    }\n                    finalize_input_event();\n                    return;\n                }\n                var pos = position;\n                // backspace is set in keydown if no keydown we need to get new one\n                if (no_keydown) {\n                    var cmd = prev_command;\n                    backspace = cmd.slice(0, cmd.length - 1).length === val.length;\n                }\n                if (skip_input) {\n                    skip_input = false;\n                    clip.val(command);\n                    return;\n                }\n                if (reverse_search) {\n                    rev_search_str = val;\n                    reverse_history_search();\n                    draw_reverse_prompt();\n                } else {\n                    var str = val.slice(position);\n                    if (str.length === 1 || backspace) {\n                        // original not optimized function called once\n                        var chr = get_next_character(str);\n                        if (mobile_ignore_key(chr)) {\n                            skip_input = true;\n                        }\n                        // we trigger events so keypress and keydown callback work\n                        if (no_keydown) {\n                            var keycode;\n                            if (backspace) {\n                                keycode = 8;\n                            } else {\n                                keycode = str.toUpperCase().charCodeAt(0);\n                            }\n                            event('keydown', backspace ? 'Backspace' : str, keycode);\n                        }\n                        if (no_keypress && !backspace) {\n                            event('keypress', chr, str.charCodeAt(0));\n                        }\n                    }\n                    if (backspace) {\n                        prev_command = command;\n                        return;\n                    }\n                    // if user return false in keydown we don't want to insert text\n                    if (skip_insert) {\n                        skip_insert = false;\n                        return;\n                    }\n                    self.set(val);\n                }\n                if (backspace) {\n                    self.position(pos - 1);\n                } else {\n                    // user enter more then one character if click on complete word\n                    // on android\n                    self.position(pos + Math.abs(val.length - prev_command.length));\n                }\n            }\n            finalize_input_event();\n        }\n        doc.bind('keypress.cmd', keypress_event);\n        doc.bind('keydown.cmd', keydown_event);\n        doc.bind('keyup.cmd', clear_hold);\n        doc.bind('input.cmd', input_event);\n        (function() {\n            if (is_mobile) {\n                $(self[0]).add(clip.$node).on('touchstart.cmd', function() {\n                    if (!self.isenabled()) {\n                        clip.focus();\n                    } else {\n                        clip.blur();\n                    }\n                });\n                self.disable();\n                return;\n            }\n            var was_down = false;\n            var count = 0;\n            self.on('mousedown.cmd', function() {\n                was_down = true;\n            }).on('mouseup.cmd', function(e) {\n                function trigger() {\n                    var $target = $(e.target);\n                    var is_prompt = $target.is('.cmd-prompt');\n                    if (!is_prompt && down && get_selected_html() === '') {\n                        if (enabled) {\n                            if ($target.is('.cmd')) {\n                                self.position(text(command).length);\n                            } else {\n                                self.display_position(get_char_pos(e));\n                            }\n                        }\n                    }\n                    count = 0;\n                }\n                // we get button from event for testing normally it's on originalEvent\n                var button;\n                if (e.originalEvent === undefined) {\n                    button = e.button;\n                } else {\n                    button = e.originalEvent.button;\n                }\n                if (button === 0 && get_selected_html() === '') {\n                    var name = 'click_' + id;\n                    if (++count === 1) {\n                        var down = was_down;\n                        if (enabled) {\n                            if (settings.clickTimeout === 0) {\n                                trigger();\n                            } else {\n                                self.oneTime(settings.clickTimeout, name, trigger);\n                            }\n                        } else {\n                            count = 0;\n                        }\n                    } else {\n                        self.stopTime(name);\n                        count = 0;\n                    }\n                }\n                was_down = false;\n            });\n        })();\n        self.data('cmd', self);\n        if (!('KeyboardEvent' in window && 'key' in window.KeyboardEvent.prototype)) {\n            setTimeout(function() {\n                throw new Error('key event property not supported try https://github.' +\n                                'com/inexorabletash/polyfill/blob/master/keyboard.js');\n            }, 0);\n        }\n        return self;\n    }; // cmd plugin\n    // -------------------------------------------------------------------------\n    var strlen = (function() {\n        if (typeof wcwidth === 'undefined') {\n            return function(string) {\n                // fix empty prompt that use 0 width space\n                string = string.replace(/\\u200B/g, '');\n                return $.terminal.length(string);\n            };\n        } else {\n            return wcwidth;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function count_selfclosing_formatting(string) {\n        var count = 0;\n        if ($.terminal.have_formatting(string)) {\n            var re = new RegExp(format_parts_re.source, 'i'); // without g flag\n            $.terminal.format_split(string).forEach(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    var m = str.match(re);\n                    if (m && m[1].match(/@/) && m[6] === '') {\n                        count++;\n                    }\n                }\n            });\n        }\n        return count;\n    }\n    // -------------------------------------------------------------------------\n    // entiteis are case sensitive\n    // generated from https://www.freeformatter.com/html-entities.html\n    // -------------------------------------------------------------------------\n    var entities = {\n        \"&amp;\": \"&\",\n        \"&lt;\": \"<\",\n        \"&gt;\": \">\",\n        \"&Agrave;\": \"\",\n        \"&Aacute;\": \"\",\n        \"&Acirc;\": \"\",\n        \"&Atilde;\": \"\",\n        \"&Auml;\": \"\",\n        \"&Aring;\": \"\",\n        \"&AElig;\": \"\",\n        \"&Ccedil;\": \"\",\n        \"&Egrave;\": \"\",\n        \"&Eacute;\": \"\",\n        \"&Ecirc;\": \"\",\n        \"&Euml;\": \"\",\n        \"&Igrave;\": \"\",\n        \"&Iacute;\": \"\",\n        \"&Icirc;\": \"\",\n        \"&Iuml;\": \"\",\n        \"&ETH;\": \"\",\n        \"&Ntilde;\": \"\",\n        \"&Ograve;\": \"\",\n        \"&Oacute;\": \"\",\n        \"&Ocirc;\": \"\",\n        \"&Otilde;\": \"\",\n        \"&Ouml;\": \"\",\n        \"&Oslash;\": \"\",\n        \"&Ugrave;\": \"\",\n        \"&Uacute;\": \"\",\n        \"&Ucirc;\": \"\",\n        \"&Uuml;\": \"\",\n        \"&Yacute;\": \"\",\n        \"&THORN;\": \"\",\n        \"&szlig;\": \"\",\n        \"&agrave;\": \"\",\n        \"&aacute;\": \"\",\n        \"&acirc;\": \"\",\n        \"&atilde;\": \"\",\n        \"&auml;\": \"\",\n        \"&aring;\": \"\",\n        \"&aelig;\": \"\",\n        \"&ccedil;\": \"\",\n        \"&egrave;\": \"\",\n        \"&eacute;\": \"\",\n        \"&ecirc;\": \"\",\n        \"&euml;\": \"\",\n        \"&igrave;\": \"\",\n        \"&iacute;\": \"\",\n        \"&icirc;\": \"\",\n        \"&iuml;\": \"\",\n        \"&eth;\": \"\",\n        \"&ntilde;\": \"\",\n        \"&ograve;\": \"\",\n        \"&oacute;\": \"\",\n        \"&ocirc;\": \"\",\n        \"&otilde;\": \"\",\n        \"&ouml;\": \"\",\n        \"&oslash;\": \"\",\n        \"&ugrave;\": \"\",\n        \"&uacute;\": \"\",\n        \"&ucirc;\": \"\",\n        \"&uuml;\": \"\",\n        \"&yacute;\": \"\",\n        \"&thorn;\": \"\",\n        \"&yuml;\": \"\",\n        \"&nbsp;\": \"\",\n        \"&iexcl;\": \"\",\n        \"&cent;\": \"\",\n        \"&pound;\": \"\",\n        \"&curren;\": \"\",\n        \"&yen;\": \"\",\n        \"&brvbar;\": \"\",\n        \"&sect;\": \"\",\n        \"&uml;\": \"\",\n        \"&copy;\": \"\",\n        \"&ordf;\": \"\",\n        \"&laquo;\": \"\",\n        \"&not;\": \"\",\n        \"&shy;\": \"\",\n        \"&reg;\": \"\",\n        \"&macr;\": \"\",\n        \"&deg;\": \"\",\n        \"&plusmn;\": \"\",\n        \"&sup2;\": \"\",\n        \"&sup3;\": \"\",\n        \"&acute;\": \"\",\n        \"&micro;\": \"\",\n        \"&para;\": \"\",\n        \"&cedil;\": \"\",\n        \"&sup1;\": \"\",\n        \"&ordm;\": \"\",\n        \"&raquo;\": \"\",\n        \"&frac14;\": \"\",\n        \"&frac12;\": \"\",\n        \"&frac34;\": \"\",\n        \"&iquest;\": \"\",\n        \"&times;\": \"\",\n        \"&divide;\": \"\",\n        \"&forall;\": \"\",\n        \"&part;\": \"\",\n        \"&exist;\": \"\",\n        \"&empty;\": \"\",\n        \"&nabla;\": \"\",\n        \"&isin;\": \"\",\n        \"&notin;\": \"\",\n        \"&ni;\": \"\",\n        \"&prod;\": \"\",\n        \"&sum;\": \"\",\n        \"&minus;\": \"\",\n        \"&lowast;\": \"\",\n        \"&radic;\": \"\",\n        \"&prop;\": \"\",\n        \"&infin;\": \"\",\n        \"&ang;\": \"\",\n        \"&and;\": \"\",\n        \"&or;\": \"\",\n        \"&cap;\": \"\",\n        \"&cup;\": \"\",\n        \"&int;\": \"\",\n        \"&there4;\": \"\",\n        \"&sim;\": \"\",\n        \"&cong;\": \"\",\n        \"&asymp;\": \"\",\n        \"&ne;\": \"\",\n        \"&equiv;\": \"\",\n        \"&le;\": \"\",\n        \"&ge;\": \"\",\n        \"&sub;\": \"\",\n        \"&sup;\": \"\",\n        \"&nsub;\": \"\",\n        \"&sube;\": \"\",\n        \"&supe;\": \"\",\n        \"&oplus;\": \"\",\n        \"&otimes;\": \"\",\n        \"&perp;\": \"\",\n        \"&sdot;\": \"\",\n        \"&Alpha;\": \"\",\n        \"&Beta;\": \"\",\n        \"&Gamma;\": \"\",\n        \"&Delta;\": \"\",\n        \"&Epsilon;\": \"\",\n        \"&Zeta;\": \"\",\n        \"&Eta;\": \"\",\n        \"&Theta;\": \"\",\n        \"&Iota;\": \"\",\n        \"&Kappa;\": \"\",\n        \"&Lambda;\": \"\",\n        \"&Mu;\": \"\",\n        \"&Nu;\": \"\",\n        \"&Xi;\": \"\",\n        \"&Omicron;\": \"\",\n        \"&Pi;\": \"\",\n        \"&Rho;\": \"\",\n        \"&Sigma;\": \"\",\n        \"&Tau;\": \"\",\n        \"&Upsilon;\": \"\",\n        \"&Phi;\": \"\",\n        \"&Chi;\": \"\",\n        \"&Psi;\": \"\",\n        \"&Omega;\": \"\",\n        \"&alpha;\": \"\",\n        \"&beta;\": \"\",\n        \"&gamma;\": \"\",\n        \"&delta;\": \"\",\n        \"&epsilon;\": \"\",\n        \"&zeta;\": \"\",\n        \"&eta;\": \"\",\n        \"&theta;\": \"\",\n        \"&iota;\": \"\",\n        \"&kappa;\": \"\",\n        \"&lambda;\": \"\",\n        \"&mu;\": \"\",\n        \"&nu;\": \"\",\n        \"&xi;\": \"\",\n        \"&omicron;\": \"\",\n        \"&pi;\": \"\",\n        \"&rho;\": \"\",\n        \"&sigmaf;\": \"\",\n        \"&sigma;\": \"\",\n        \"&tau;\": \"\",\n        \"&upsilon;\": \"\",\n        \"&phi;\": \"\",\n        \"&chi;\": \"\",\n        \"&psi;\": \"\",\n        \"&omega;\": \"\",\n        \"&thetasym;\": \"\",\n        \"&upsih;\": \"\",\n        \"&piv;\": \"\",\n        \"&OElig;\": \"\",\n        \"&oelig;\": \"\",\n        \"&Scaron;\": \"\",\n        \"&scaron;\": \"\",\n        \"&Yuml;\": \"\",\n        \"&fnof;\": \"\",\n        \"&circ;\": \"\",\n        \"&tilde;\": \"\",\n        \"&ensp;\": \"\",\n        \"&emsp;\": \"\",\n        \"&thinsp;\": \"\",\n        \"&zwnj;\": \"\",\n        \"&zwj;\": \"\",\n        \"&lrm;\": \"\",\n        \"&rlm;\": \"\",\n        \"&ndash;\": \"\",\n        \"&mdash;\": \"\",\n        \"&lsquo;\": \"\",\n        \"&rsquo;\": \"\",\n        \"&sbquo;\": \"\",\n        \"&ldquo;\": \"\",\n        \"&rdquo;\": \"\",\n        \"&bdquo;\": \"\",\n        \"&dagger;\": \"\",\n        \"&Dagger;\": \"\",\n        \"&bull;\": \"\",\n        \"&hellip;\": \"\",\n        \"&permil;\": \"\",\n        \"&prime;\": \"\",\n        \"&Prime;\": \"\",\n        \"&lsaquo;\": \"\",\n        \"&rsaquo;\": \"\",\n        \"&oline;\": \"\",\n        \"&euro;\": \"\",\n        \"&trade;\": \"\",\n        \"&larr;\": \"\",\n        \"&uarr;\": \"\",\n        \"&rarr;\": \"\",\n        \"&darr;\": \"\",\n        \"&harr;\": \"\",\n        \"&crarr;\": \"\",\n        \"&lceil;\": \"\",\n        \"&rceil;\": \"\",\n        \"&lfloor;\": \"\",\n        \"&rfloor;\": \"\",\n        \"&loz;\": \"\",\n        \"&spades;\": \"\",\n        \"&clubs;\": \"\",\n        \"&hearts;\": \"\",\n        \"&diams;\": \"\"\n    };\n    // -------------------------------------------------------------------------\n    function render_entities(str) {\n        return str.replace(/&#(x?)([0-9]+);/g, function(_, hex, code) {\n            code = parseInt(code, hex ? 16 : 10);\n            return String.fromCharCode(code);\n        }).replace(/(&[^;]+;)/g, function(_, entity) {\n            return entities[entity] || entity;\n        });\n    }\n    // -------------------------------------------------------------------------\n    function bare_text(string) {\n        if (!string.match(/&/)) {\n            return string;\n        }\n        return render_entities(safe(string));\n    }\n    // -------------------------------------------------------------------------\n    function text(string) {\n        return bare_text($.terminal.strip(string));\n    }\n    // -------------------------------------------------------------------------\n    function safe(string) {\n        if (!string.match(/[<>&]/)) {\n            return string;\n        }\n        return string.replace(/&(?![^;]+;)/g, '&amp;')\n            .replace(/>/g, '&gt;').replace(/</g, '&lt;');\n    }\n    // -------------------------------------------------------------------------\n    function crlf(string) {\n        return string.replace(/\\r/g, '');\n    }\n    // -------------------------------------------------------------------------\n    function char_len(chr) {\n        return entity_re.test(chr) ? 1 : chr.length;\n    }\n    // -------------------------------------------------------------------------\n    function make_re_fn(re) {\n        return function(string) {\n            var m = string.match(re);\n            if (starts_with(m)) {\n                return m[1];\n            }\n        };\n    }\n    // -------------------------------------------------------------------------\n    function starts_with(match) {\n        return match && match.index === 0;\n    }\n    // -------------------------------------------------------------------------\n    // :: optimized higher order function that it check complex regexes\n    // :: only when bigger string match those regexes, function is always\n    // :: used in loop when you process whole string, it's used to create local\n    // :: get_next_character function only cmd in input use original\n    // :: not optimized function\n    // -------------------------------------------------------------------------\n    function make_next_char_fun(string) {\n        var tests = [];\n        [\n            entity_re,\n            emoji_re,\n            combine_chr_re\n        ].forEach(function(re) {\n            if (string.match(re)) {\n                tests.push(make_re_fn(re));\n            }\n        });\n        if (string.match(astral_symbols_re)) {\n            tests.push(function(string) {\n                var m1 = string.match(astral_symbols_re);\n                if (starts_with(m1)) {\n                    var m2 = string.match(combine_chr_re);\n                    if (m2 && m2.index === 1) {\n                        return string.slice(0, 3);\n                    }\n                    return m1[1];\n                }\n            });\n        }\n        return function(string) {\n            for (var i = 0; i < tests.length; ++i) {\n                var test = tests[i];\n                var ret = test(string);\n                if (ret) {\n                    return ret;\n                }\n            }\n            return string[0];\n        };\n    }\n    // -------------------------------------------------------------------------\n    // :: function that return character from beginning of the string\n    // :: counting emoji, suroggate pairs and combine characters\n    // -------------------------------------------------------------------------\n    function get_next_character(string) {\n        var match_entity = string.match(entity_re);\n        if (starts_with(match_entity)) {\n            return match_entity[1];\n        }\n        var match_combo = string.match(combine_chr_re);\n        if (starts_with(match_combo)) {\n            return match_combo[1];\n        }\n        var match_emoji = string.match(emoji_re);\n        if (starts_with(match_emoji)) {\n            return match_emoji[1];\n        } else if (string.charCodeAt(0) < 255) {\n            return string[0];\n        } else {\n            var astral_match = string.match(astral_symbols_re);\n            if (starts_with(astral_match)) {\n                match_combo = string.match(combine_chr_re);\n                if (match_combo && match_combo.index === 1) {\n                    return string.slice(0, 3);\n                }\n                return string.slice(0, 2);\n            } else {\n                return string[0];\n            }\n        }\n    }\n    // -------------------------------------------------------------------------\n    // normalize position for counting emoji and extra chars\n    // -------------------------------------------------------------------------\n    function normalize_position(string, position) {\n        if (position === 0) {\n            return position;\n        }\n        string = $.terminal.strip(string);\n        var result = $.terminal.split_characters(string).reduce(function(acc, chr) {\n            if (typeof acc === 'number') {\n                return acc;\n            }\n            var length = acc.length + char_len(chr);\n            if (length >= position) {\n                return acc.position + 1;\n            }\n            return {\n                position: acc.position + 1,\n                length: length\n            };\n        }, {position: 0, length: 0});\n        if (typeof result === 'number') {\n            return result;\n        } else {\n            return result.position;\n        }\n    }\n    // -------------------------------------------------------------------------\n    function char_width_prop(len, options) {\n        if (len === 0) {\n            return 'width: 1px';\n        } else if (is_ch_unit_supported) {\n            return 'width: ' + len + 'ch';\n        } else if (!is_css_variables_supported) {\n            if (options.charWidth) {\n                return 'width: ' + (options.charWidth * len) + 'px';\n            }\n        } else {\n            return '--length: ' + len;\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    // options {charWidth}\n    function extra_css(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var len = strlen(bare);\n            if (len > 1 && len !== $.terminal.length(bare)) {\n                return char_width_prop(len, options);\n            }\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    function wide_characters(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var chars = $.terminal.split_characters(bare);\n            if (chars.length === 1) {\n                return text;\n            }\n            var specs = chars.map(function(chr) {\n                return {\n                    len: strlen(chr),\n                    chr: chr\n                };\n            }).reduce(function(arr, spec) {\n                var last = arr[arr.length - 1];\n                if (last) {\n                    if (last.len !== spec.len) {\n                        return arr.concat([{\n                            sum: spec.len,\n                            len: spec.len,\n                            specs: [spec]\n                        }]);\n                    } else {\n                        arr.pop();\n                        return arr.concat([{\n                            sum: last.sum + spec.len,\n                            len: last.len,\n                            specs: last.specs.concat(spec)\n                        }]);\n                    }\n                }\n                return [{\n                    sum: spec.len,\n                    specs: [spec],\n                    len: spec.len\n                }];\n            }, []);\n            return specs.map(function(spec) {\n                if (spec.len === 1) {\n                    return make_string(spec);\n                }\n                var style = char_width_prop(spec.sum, options);\n                if (spec.sum === chars.length || !style.length) {\n                    return '<span>' + make_string(spec) + '</span>';\n                } else if (spec.specs.length > 1) {\n                    return wrap(style, spec.specs.map(function(spec) {\n                        return wrap(char_width_prop(spec.len), spec.chr);\n                    }).join(''));\n                } else {\n                    return wrap(style, make_string(spec));\n                }\n            }).join('');\n        }\n        function make_string(spec) {\n            return spec.specs.map(function(spec) {\n                return spec.chr;\n            }).join('');\n        }\n        function wrap(style, str) {\n            return '<span style=\"' + style + '\">' + str + '</span>';\n        }\n        return text;\n    }\n    // ---------------------------------------------------------------------\n    // :: Binary search utility\n    // ---------------------------------------------------------------------\n    function binary_search(start, end, search_pos, compare_fn, more_args) {\n        var len = end - start;\n        var mid = start + Math.floor(len / 2);\n        var args = [search_pos, mid].concat(more_args);\n        var cmp = compare_fn.apply(null, args);\n        if (cmp === 0) {\n            return mid;\n        } else if (cmp > 0 && len > 1) {\n            return binary_search(\n                mid,\n                end,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else if (cmp < 0 && len > 1) {\n            return binary_search(\n                start,\n                mid,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else {\n            return -1;\n        }\n    }\n    // -----------------------------------------------------------------\n    // :: selection utilities - should work in modern browser including IE9\n    // -----------------------------------------------------------------\n    function is_terminal_selected(cmd) {\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.toString()) {\n                var node = selection.getRangeAt(0).startContainer.parentNode;\n                var term = $(node).closest('.terminal');\n                return term.length && (cmd && term.find('.cmd').is(cmd) || !cmd);\n            }\n        }\n    }\n    // -----------------------------------------------------------------\n    function get_selected_html() {\n        var html = '';\n        if (is_function(window.getSelection)) {\n            var sel = window.getSelection();\n            if (sel.rangeCount) {\n                var container = document.createElement('div');\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    container.appendChild(sel.getRangeAt(i).cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        return html;\n    }\n    // -----------------------------------------------------------------\n    function with_selection(fn) {\n        var html = '';\n        var ranges = [];\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.rangeCount) {\n                var container = document.createElement(\"div\");\n                for (var i = 0, len = selection.rangeCount; i < len; ++i) {\n                    var range = selection.getRangeAt(i).cloneRange();\n                    ranges.push(range);\n                    container.appendChild(range.cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        fn(html);\n        if (ranges.length) {\n            selection.removeAllRanges();\n            ranges.forEach(function(range) {\n                selection.addRange(range);\n            });\n        }\n        return html !== '';\n    }\n    // -----------------------------------------------------------------\n    function process_selected_line() {\n        var $self = $(this);\n        var result = $self.text();\n        if ($self.hasClass('cmd-end-line')) {\n            result += '\\n';\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------\n    function process_div(element) {\n        // span is empty line, div is default case with text\n        return $(element).find('> div, > span')\n            .map(process_selected_line).get().join('\\n').replace(/\\n$/, '');\n    }\n    // -----------------------------------------------------------------\n    function process_selected_html(html) {\n        var stdout;\n        var text = '';\n        var $html = $('<div>' + html + '</div>');\n        if (html.match(/<\\/div>/)) {\n            // match multiple echo output\n            stdout = $html.find('div[data-index]').map(function() {\n                return process_div(this);\n            }).get().join('\\n');\n            // match inside single echo output\n            if (!stdout && html.match(/style=\"width: 100%;?\"/)) {\n                stdout = process_div($html);\n            }\n            text = stdout;\n        }\n        var $prompt = $html.find('.cmd-prompt');\n        if ($prompt.length) {\n            if (text.length) {\n                text += '\\n';\n            }\n            text += $prompt.text();\n        }\n        var $cmd_lines = $html.find('[role=\"presentation\"]');\n        if ($cmd_lines.length) {\n            text += $cmd_lines.map(process_selected_line).get().join('');\n        }\n        if (!text.length && html) {\n            text = $html.text();\n        }\n        return text.replace(/\\xA0/g, ' '); // fix &nbsp; space\n    }\n    // ---------------------------------------------------------------------\n    // :: copy given DOM element text to clipboard\n    // ---------------------------------------------------------------------\n    var support_copy = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        if (!is_function(document.queryCommandSupported)) {\n            return false;\n        }\n        return document.queryCommandSupported('copy');\n    })();\n    // ---------------------------------------------------------------------\n    var text_to_clipboard;\n    if (support_copy) {\n        text_to_clipboard = function text_to_clipboard($textarea, text) {\n            var val = $textarea.val();\n            var had_focus = $textarea.is(':focus');\n            var pos = $textarea.caret();\n            if (window.navigator && window.navigator.clipboard) {\n                navigator.clipboard.writeText(text);\n            } else if (had_focus) {\n                $textarea.val(text).focus();\n                $textarea[0].select();\n                document.execCommand('copy');\n                $textarea.val(val);\n                $textarea.caret(pos);\n            } else {\n                var $text = $('<textarea/>').css({\n                    position: 'fixed',\n                    top: 0,\n                    left: 0\n                }).appendTo('body');\n                $text.val(text).focus();\n                $text[0].select();\n                document.execCommand('copy');\n                $text.blur();\n                $text.remove();\n            }\n            return true;\n        };\n    } else {\n        text_to_clipboard = $.noop;\n    }\n    // ---------------------------------------------------------------------\n    var get_textarea_selection = (function() {\n        function noop() {\n            return '';\n        }\n        if (typeof document === 'undefined') {\n            return noop;\n        }\n        var textarea = document.createElement('textarea');\n        var selectionStart = 'selectionStart' in textarea;\n        textarea = null;\n        if (selectionStart) {\n            return function(textarea) {\n                var length = textarea.selectionEnd - textarea.selectionStart;\n                return textarea.value.substr(textarea.selectionStart, length);\n            };\n        } else if (document.selection) {\n            return function() {\n                var range = document.selection.createRange();\n                return range.text();\n            };\n        } else {\n            return noop;\n        }\n    })();\n    // ---------------------------------------------------------------------\n    function clear_textarea_selection(textarea) {\n        textarea.selectionStart = textarea.selectionEnd = 0;\n    }\n    // ---------------------------------------------------------------------\n    // :: return string that are common in all elements of the array\n    // ---------------------------------------------------------------------\n    function common_string(string, array, matchCase) {\n        if (!array.length) {\n            return '';\n        }\n        var type = string_case(string);\n        var result = [];\n        for (var j = string.length; j < array[0].length; ++j) {\n            var push = false;\n            var candidate = array[0].charAt(j),\n                candidateLower = candidate.toLowerCase();\n            for (var i = 1; i < array.length; ++i) {\n                push = true;\n                var current = array[i].charAt(j),\n                    currentLower = current.toLowerCase();\n                if (candidate !== current) {\n                    if (matchCase || type === 'mixed') {\n                        push = false;\n                        break;\n                    } else if (candidateLower === currentLower) {\n                        if (type === 'lower') {\n                            candidate = candidate.toLowerCase();\n                        } else if (type === 'upper') {\n                            candidate = candidate.toUpperCase();\n                        } else {\n                            push = false;\n                            break;\n                        }\n                    } else {\n                        push = false;\n                        break;\n                    }\n                }\n            }\n            if (push) {\n                result.push(candidate);\n            } else {\n                break;\n            }\n        }\n        return string + result.join('');\n    }\n    // ---------------------------------------------------------------------\n    function trigger_terminal_change(next) {\n        terminals.forEach(function(term) {\n            term.settings().onTerminalChange.call(term, next);\n        });\n    }\n    // ---------------------------------------------------------------------\n    var select = (function() {\n        if (root.getSelection) {\n            var selection = root.getSelection();\n            if (selection.setBaseAndExtent) {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    selection.setBaseAndExtent(start, 0, end, 1);\n                };\n            } else {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    var range = document.createRange();\n                    range.setStart(start, 0);\n                    range.setEnd(end, end.childNodes.length);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                };\n            }\n        } else {\n            return $.noop;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function process_command(original, fn) {\n        var string = original.trim();\n        var array = string.match(command_re) || [];\n        if (array.length) {\n            var name = array.shift();\n            var args = $.map(array, function(arg) {\n                if (arg.match(/^[\"']/)) {\n                    arg = arg.replace(/\\n/g, '\\\\u0000\\\\u0000\\\\u0000\\\\u0000');\n                    arg = fn(arg);\n                    return arg.replace(/\\x00\\x00\\x00\\x00/g, '\\n');\n                }\n                return fn(arg);\n            });\n            var quotes = $.map(array, function(arg) {\n                var m = arg.match(/^(['\"`]).*\\1$/);\n                return m && m[1] || '';\n            });\n            var rest = string.slice(name.length).trim();\n            return {\n                command: original,\n                name: name,\n                args: args,\n                args_quotes: quotes,\n                rest: rest\n            };\n        } else {\n            return {\n                command: original,\n                name: '',\n                args: [],\n                args_quotes: [],\n                rest: ''\n            };\n        }\n    }\n    // -------------------------------------------------------------------------\n    $.terminal = {\n        version: '2.31.1',\n        date: 'Thu, 30 Dec 2021 10:56:33 +0000',\n        // colors from https://www.w3.org/wiki/CSS/Properties/color/keywords\n        color_names: [\n            'transparent', 'currentcolor', 'black', 'silver', 'gray', 'white',\n            'maroon', 'red', 'purple', 'fuchsia', 'green', 'lime', 'olive',\n            'yellow', 'navy', 'blue', 'teal', 'aqua', 'aliceblue',\n            'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque',\n            'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n            'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral',\n            'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue',\n            'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkgrey',\n            'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange',\n            'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n            'darkslateblue', 'darkslategray', 'darkslategrey', 'darkturquoise',\n            'darkviolet', 'deeppink', 'deepskyblue', 'dimgray', 'dimgrey',\n            'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia',\n            'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'green',\n            'greenyellow', 'grey', 'honeydew', 'hotpink', 'indianred', 'indigo',\n            'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen',\n            'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan',\n            'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightgrey',\n            'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue',\n            'lightslategray', 'lightslategrey', 'lightsteelblue', 'lightyellow',\n            'lime', 'limegreen', 'linen', 'magenta', 'maroon',\n            'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n            'mediumseagreen', 'mediumslateblue', 'mediumspringgreen',\n            'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream',\n            'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive',\n            'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod',\n            'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip',\n            'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'red',\n            'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown',\n            'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue',\n            'slategray', 'slategrey', 'snow', 'springgreen', 'steelblue', 'tan',\n            'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat',\n            'white', 'whitesmoke', 'yellow', 'yellowgreen', 'rebeccapurple'],\n        // for unit tests\n        Cycle: Cycle,\n        History: History,\n        Stack: Stack,\n        // ---------------------------------------------------------------------\n        // :: Validate html color (it can be name or hex)\n        // ---------------------------------------------------------------------\n        valid_color: function valid_color(color) {\n            if (color.match(color_re)) {\n                return true;\n            } else {\n                return $.inArray(color.toLowerCase(), $.terminal.color_names) !== -1;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function check if given string contain invalid strings\n        // ---------------------------------------------------------------------\n        unclosed_strings: function unclosed_strings(string) {\n            return !!string.match(unclosed_strings_re);\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape all special regex characters, so it can be use as regex to\n        // :: match exact string that contain those characters\n        // ---------------------------------------------------------------------\n        escape_regex: function escape_regex(str) {\n            if (typeof str === 'string') {\n                var special = /([-\\\\^$[\\]()+{}?*.|])/g;\n                return str.replace(special, '\\\\$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: test if string contain formatting\n        // ---------------------------------------------------------------------\n        have_formatting: function have_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_exist_re);\n        },\n        is_formatting: function is_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_full_re);\n        },\n        // ---------------------------------------------------------------------\n        is_extended_command: function is_extended_command(str) {\n            return typeof str === 'string' &&\n                str.match(format_exec_re) &&\n                !$.terminal.is_formatting(str);\n        },\n        // ---------------------------------------------------------------------\n        each_extended_command: function(string, fn) {\n            var parts = string.split(format_exec_split_re);\n            return $.map(parts, function(string) {\n                if ($.terminal.is_extended_command(string)) {\n                    var command = string.replace(/^\\[\\[|\\]\\]$/g, '');\n                    return fn(command) || '';\n                }\n                return string;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: return array of formatting and text between them\n        // ---------------------------------------------------------------------\n        format_split: function format_split(str) {\n            return str.split(format_split_re).filter(Boolean);\n        },\n        // ---------------------------------------------------------------------\n        // :: replace that return position after replace for working with\n        // :: replacement that change length of the string\n        // :: source https://stackoverflow.com/a/46756077/387194\n        // ---------------------------------------------------------------------\n        tracking_replace: function tracking_replace(string, rex, replacement, position) {\n            if (!(rex instanceof RegExp)) {\n                throw new Error('tracking_replace: Second argument need to be RegExp');\n            }\n            function substring(string, start, end) {\n                return string.slice(start, end);\n            }\n            function length(string) {\n                return $.terminal.strip(string).length;\n            }\n            var new_string = \"\";\n            var match;\n            var index = 0;\n            var rep_string;\n            var new_position = position;\n            var start;\n            rex.lastIndex = 0; // Just to be sure\n            while ((match = rex.exec(string))) {\n                // if regex don't have g flag lastIndex will not work\n                if (rex.global) {\n                    // Add any of the original string we just skipped\n                    var last_index = length(substring(string, 0, rex.lastIndex));\n                    start = last_index - length(match[0]);\n                } else {\n                    start = match.index;\n                    last_index = start + length(match[0]);\n                }\n                if (index < start) {\n                    new_string += substring(string, index, start);\n                }\n                index = last_index;\n                // Build the replacement string. This just handles $$ and $n,\n                // you may want to add handling for $`, $', and $&.\n                if (typeof replacement === 'function') {\n                    rep_string = replacement.apply(null, match);\n                } else {\n                    rep_string = replacement.replace(/\\$(\\$|\\d)/g, function(m, c0) {\n                        if (c0 === \"$\") {\n                            return \"$\";\n                        }\n                        return match[c0];\n                    });\n                }\n                // Add on the replacement\n                new_string += rep_string;\n                // If the position is affected...\n                if (start < position) {\n                    // ... update it:\n                    var rep_len = length(rep_string);\n                    rep_len += count_selfclosing_formatting(rep_string);\n                    if (last_index < position) {\n                        // It's after the replacement, move it\n                        new_position = Math.max(\n                            0,\n                            new_position +\n                            rep_len -\n                            length(match[0])\n                        );\n                    } else {\n                        // It's *in* the replacement, put it just after\n                        new_position += rep_len - (position - start);\n                    }\n                }\n                // If the regular expression doesn't have the g flag, break here so\n                // we do just one replacement (and so we don't have an endless loop!)\n                if (!rex.global) {\n                    break;\n                }\n            }\n            // Add on any trailing text in the string\n            if (index < length(string)) {\n                new_string += substring(string, index);\n            }\n            // Return the string and the updated position\n            if (string === new_string) {\n                return [string, position];\n            }\n            return [new_string, new_position];\n        },\n        // ---------------------------------------------------------------------\n        // :: helper function used by substring and split_equal it loop over\n        // :: string and execute callback with text count and other data\n        // ---------------------------------------------------------------------\n        iterate_formatting: function iterate_formatting(string, callback) {\n            function is_space(i) {\n                return string.slice(i - 6, i) === '&nbsp;' ||\n                    string.slice(i - 1, i).match(/\\s/);\n            }\n            // ----------------------------------------------------------------\n            function match_entity(index) {\n                return string.slice(index).match(entity_re);\n            }\n            // ----------------------------------------------------------------\n            function is_open_formatting(i) {\n                return string[i] === '[' && string[i + 1] === '[';\n            }\n            // ----------------------------------------------------------------\n            function is_escape_bracket(i) {\n                return string[i - 1] !== '\\\\' && string[i] === '\\\\' &&\n                    string[i + 1] === ']';\n            }\n            // ----------------------------------------------------------------\n            function is_text(i) {\n                return not_formatting && (string[i] !== ']' || !have_formatting)\n                    && !opening;\n            }\n            // ----------------------------------------------------------------\n            // :: function will skip to next character in main loop\n            // :: TODO: improve performance of emoji regex and check whole\n            // :: string it's complex string if not use simple function\n            // ----------------------------------------------------------------\n            var get_next_character = make_next_char_fun(string);\n            function next_iteration() {\n                var char = get_next_character(substring);\n                if (char.length > 1 && $.terminal.length(substring) > 1) {\n                    return char.length - 1;\n                }\n                return 0;\n            }\n            // ----------------------------------------------------------------\n            function is_next_space() {\n                return (is_space(i) && (not_formatting || opening)) &&\n                    (space === -1 && prev_space !== i || space !== -1);\n            }\n            // ----------------------------------------------------------------\n            // :: last iteration or one before closing formatting\n            // ----------------------------------------------------------------\n            var last = false;\n            function is_last() {\n                if (i === string.length - 1 && !last) {\n                    last = true;\n                } else {\n                    last = formatting && !!substring.match(/^.]$/);\n                }\n                return last;\n            }\n            // ----------------------------------------------------------------\n            var have_formatting = $.terminal.have_formatting(string);\n            var formatting = '';\n            var in_text = false;\n            var count = 0;\n            var match;\n            var space = -1;\n            var space_count = -1;\n            var prev_space;\n            var length = 0;\n            var offset = 0;\n            var re_ent = /(&[^;]+);$/;\n            for (var i = 0; i < string.length; i++) {\n                var substring = string.slice(i);\n                match = substring.match(format_start_re);\n                if (match) {\n                    formatting = match[1];\n                    in_text = false;\n                } else if (formatting) {\n                    if (string[i] === ']') {\n                        if (in_text) {\n                            formatting = '';\n                            in_text = false;\n                        } else {\n                            in_text = true;\n                        }\n                    }\n                } else {\n                    in_text = true;\n                }\n                var not_formatting = (formatting && in_text) || !formatting;\n                var opening = is_open_formatting(i);\n                if (is_next_space()) {\n                    space = i;\n                    space_count = count;\n                }\n                var braket = string[i].match(/[[\\]]/);\n                offset = 0;\n                if (not_formatting) {\n                    // treat entity as one character\n                    if (string[i] === '&') {\n                        match = match_entity(i);\n                        if (match) {\n                            i += match[1].length - 2; // 2 because continue adds 1 to i\n                            continue;\n                        }\n                        ++count;\n                        ++length;\n                    } else if (is_escape_bracket(i)) {\n                        // escape \\] and \\\\ counts as one character\n                        ++count;\n                        ++length;\n                        offset = 1;\n                        i += 1;\n                    } else if (!braket || !have_formatting) {\n                        ++count;\n                        ++length;\n                    }\n                }\n                if (is_text(i)) {\n                    if (strlen(string[i]) === 2) {\n                        length++;\n                    }\n                    var char = get_next_character(substring);\n                    var size = char.length;\n                    // begining of enity that we've skipped, we are at the end\n                    if (char === ';') {\n                        match = string.slice(0, i + 1).match(re_ent);\n                        if (match) {\n                            offset = match[1].length;\n                            size = offset + 1;\n                        }\n                    }\n                    var data = {\n                        last: is_last(),\n                        count: count,\n                        index: i - offset,\n                        formatting: formatting,\n                        length: length,\n                        text: in_text,\n                        size: size,\n                        space: space,\n                        space_count: space_count\n                    };\n                    var ret = callback(data);\n                    if (ret === false) {\n                        break;\n                    } else if (ret) {\n                        if (ret.count !== undefined) {\n                            count = ret.count;\n                        }\n                        if (ret.length !== undefined) {\n                            length = ret.length;\n                        }\n                        if (ret.space !== undefined) {\n                            prev_space = space;\n                            space = ret.space;\n                        }\n                        if (ret.index !== undefined) {\n                            i = ret.index;\n                            continue;\n                        }\n                    }\n                } else if (i === string.length - 1 && !last) {\n                    // last iteration, if formatting have last bracket,\n                    // from formatting, then last iteration\n                    // was already called (in if) #550\n                    callback({\n                        last: true,\n                        count: count + 1,\n                        index: i,\n                        formatting: formatting,\n                        length: 0,\n                        text: in_text,\n                        space: space\n                    });\n                }\n                // handle emoji, suroggate pairs and combine characters\n                if (in_text) {\n                    i += next_iteration();\n                }\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function return string splitted into single characters\n        // :: each character is wrapped into formatting from input string\n        // :: or empty formatting so it will create span when using with ::format\n        // ---------------------------------------------------------------------\n        partition: function partition(string) {\n            if (!$.terminal.have_formatting(string)) {\n                var chars = $.terminal.split_characters(string);\n                return chars.map(wrap);\n            }\n            var result = [];\n            function wrap(string) {\n                if (string.match(/\\\\$/)) {\n                    string += '\\\\';\n                }\n                return '[[;;]' + string + ']';\n            }\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\\\]$/)) {\n                        string = string.replace(/\\\\]/g, '\\\\\\\\]');\n                    }\n                } else {\n                    string = wrap(string);\n                }\n                return string;\n            }\n            $.terminal.iterate_formatting(string, function(data) {\n                if (data.text) {\n                    var text = [];\n                    if (data.formatting) {\n                        text.push(data.formatting);\n                    }\n                    text.push(string.substring(data.index, data.index + data.size));\n                    if (data.formatting) {\n                        text.push(']');\n                    }\n                    result.push(formatting(text.join('')));\n                }\n            });\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: formatting aware substring function\n        // ---------------------------------------------------------------------\n        substring: function substring(string, start_index, end_index) {\n            var chars = $.terminal.split_characters(string);\n            if (!chars.slice(start_index, end_index).length) {\n                return '';\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return chars.slice(start_index, end_index).join('');\n            }\n            var start = 0;\n            var end;\n            var start_formatting = '';\n            var end_formatting = '';\n            var prev_index;\n            var offset = 1;\n            $.terminal.iterate_formatting(string, function(data) {\n                if (start_index && data.count === start_index + 1) {\n                    start = data.index;\n                    if (data.formatting) {\n                        start_formatting = data.formatting;\n                    }\n                }\n                if (end_index && data.count === end_index) {\n                    end_formatting = data.formatting;\n                    prev_index = data.index;\n                    offset = data.size;\n                }\n                if (data.count === end_index + 1) {\n                    end = data.index;\n                    if (data.formatting) {\n                        end = prev_index + offset;\n                    }\n                }\n            });\n            if (start_index && !start) {\n                return '';\n            }\n            if (end === undefined) {\n                end = string.length;\n            }\n            string = start_formatting + string.slice(start, end);\n            if (end_formatting) {\n                string = string.replace(/(\\[\\[^\\]]+)?\\]$/, '');\n                string += ']';\n            }\n            return string;\n        },\n        // ---------------------------------------------------------------------\n        // :: add format text as 5th paramter to formatting it's used for\n        // :: data attribute in format function - and fix unclosed &\n        // ---------------------------------------------------------------------\n        normalize: function normalize(string) {\n            string = string.replace(format_re, function(_, format, text) {\n                if (format.match(self_closing_re) && text === '') {\n                    return '[[' + format + '] ]';\n                }\n                if (text === '') {\n                    return '';\n                }\n                function safe(string) {\n                    return string.replace(/\\\\\\]/g, '&#93;').replace(/\\n/g, '\\\\n')\n                        .replace(/&nbsp;/g, ' ');\n                }\n                format = safe(format);\n                var semicolons = format.match(/;/g).length;\n                // missing semicolons\n                if (semicolons >= 4) {\n                    var args = format.split(/;/);\n                    var start = args.slice(0, 4).join(';');\n                    var arg = args.slice(4).join(';');\n                    return '[[' + start + ';' + (arg || text) + ']' + text + ']';\n                } else if (semicolons === 2) {\n                    semicolons = ';;';\n                } else if (semicolons === 3) {\n                    semicolons = ';';\n                }\n                // return '[[' + format + ']' + text + ']';\n                // closing braket will break formatting so we need to escape\n                // those using html entity equvalent\n                // space is hack for images that break iterate_formatting\n                format += semicolons + safe(text);\n                return '[[' + format + ']' + text + ']';\n            });\n            return $.terminal.amp(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: split text into lines with equal length so each line can be\n        // :: rendered separately (text formatting can be longer then a line).\n        // ---------------------------------------------------------------------\n        split_equal: function split_equal(str, length, keep_words) {\n            var prev_format = '';\n            var result = [];\n            var array = $.terminal.normalize(str).split(/\\n/g);\n            for (var i = 0, len = array.length; i < len; ++i) {\n                if (array[i] === '') {\n                    result.push('');\n                    continue;\n                }\n                var line = array[i];\n                var get_next_character = make_next_char_fun(line);\n                var first_index = 0;\n                var output;\n                var line_length = line.length;\n                var last_bracket = !!line.match(/\\[\\[[^\\]]+\\](?:[^\\][]|\\\\\\])+\\]$/);\n                $.terminal.iterate_formatting(line, function(data) {\n                    var chr, substring;\n                    if (data.length >= length || data.last ||\n                        (data.length === length - 1 &&\n                         strlen(line[data.index + 1]) === 2)) {\n                        var can_break = false;\n                        // TODO: this need work\n                        if (keep_words && data.space !== -1) {\n                            // replace html entities with characters\n                            var stripped = text(line).substring(data.space_count);\n                            // real length, not counting formatting\n                            stripped = stripped.slice(0, length).trim();\n                            var text_len = strlen(stripped);\n                            if (stripped.match(/\\s/) || text_len < length) {\n                                can_break = true;\n                            }\n                        }\n                        // if words is true we split at last space and make next loop\n                        // continue where the space where located\n                        var after_index = data.index + data.size;\n                        if (last_bracket) {\n                            after_index += 1;\n                        }\n                        var new_index;\n                        if (keep_words && data.space !== -1 &&\n                            after_index !== line_length && can_break) {\n                            output = line.slice(first_index, data.space);\n                            new_index = data.space - 1;\n                        } else {\n                            substring = line.slice(data.index);\n                            chr = get_next_character(substring);\n                            output = line.slice(first_index, data.index) + chr;\n                            if (data.last && last_bracket && chr !== ']') {\n                                output += ']';\n                            }\n                            new_index = data.index + chr.length - 1;\n                        }\n                        if (keep_words) {\n                            output = output.replace(/^(&nbsp;|\\s)+|(&nbsp;|\\s)+$/g, '');\n                        }\n                        first_index = (new_index || data.index) + 1;\n                        if (prev_format) {\n                            var closed_formatting = output.match(/^[^\\]]*\\]/);\n                            output = prev_format + output;\n                            if (closed_formatting) {\n                                prev_format = '';\n                            }\n                        }\n                        var matched = output.match(format_re);\n                        if (matched) {\n                            var last = matched[matched.length - 1];\n                            if (last[last.length - 1] !== ']') {\n                                prev_format = last.match(format_begin_re)[1];\n                                output += ']';\n                            } else if (output.match(format_end_re)) {\n                                output = output.replace(format_end_re, '');\n                                prev_format = last.match(format_begin_re)[1];\n                            }\n                        }\n                        result.push(output);\n                        // modify loop by returing new data\n                        return {index: new_index, length: 0, space: -1};\n                    }\n                });\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape & that's not part of entity\n        // ---------------------------------------------------------------------\n        amp: function amp(str) {\n            return str.replace(/&(?!#[0-9]+;|#x[0-9a-f]+;|[a-z]+;)/gi, '&amp;');\n        },\n        // ---------------------------------------------------------------------\n        // :: Encode formating as html for insertion into DOM\n        // ---------------------------------------------------------------------\n        encode: function encode(str, options) {\n            var settings = $.extend({\n                tabs: 4,\n                before: ''\n            }, options);\n            return $.terminal.amp(str).replace(/</g, '&lt;').replace(/>/g, '&gt;')\n                .replace(/ /g, '&nbsp;').split('\\n').map(function(line) {\n                    var splitted = line.split(/((?:\\[\\[[^\\]]+\\])?\\t(?:\\])?)/);\n                    splitted = splitted.filter(Boolean);\n                    return splitted.map(function(str, i) {\n                        if (str.match(/\\t/)) {\n                            return str.replace(/\\t([^\\t]*)$/, function(_, end) {\n                                if (i !== 0 && splitted[i - 1].match(/\\t\\]?$/)) {\n                                    var sp = new Array(settings.tabs + 1).join('&nbsp;');\n                                    return sp + end;\n                                } else {\n                                    var before = splitted.slice(i - 1, i).join('');\n                                    if (settings.before && i <= 1) {\n                                        before = settings.before + before;\n                                    }\n                                    var len = $.terminal.length(before);\n                                    var chars = settings.tabs - (len % settings.tabs);\n                                    if (chars === 0) {\n                                        chars = 4;\n                                    }\n                                    return new Array(chars + 1).join('&nbsp;') + end;\n                                }\n                            });\n                        }\n                        return str;\n                    }).join('');\n                }).join('\\n');\n        },\n        // -----------------------------------------------------------------------\n        // :: Default formatter that allow for nested formatting, example:\n        // :: [[;;#000]hello [[;#f00;]red] world]\n        // -----------------------------------------------------------------------\n        nested_formatting: function nested_formatting(string) {\n            if (!$.terminal.have_formatting(string)) {\n                return string;\n            }\n            var stack = [];\n            var re = /((?:\\[\\[(?:[^\\][]|\\\\\\])+\\])?(?:[^\\][]|\\\\\\])*\\]?)/;\n            var format_re = /\\[\\[([^\\][]+)\\][\\s\\S]*/;\n            var format_split_re = /^\\[\\[([^;]*);([^;]*);([^\\]]*)\\]/;\n            var class_i = 3; // index of the class in formatting\n            var attrs_i = 5; // index of attributes in formatting\n            // ---------------------------------------------------------------------------\n            function unique(value, index, self) {\n                return self.indexOf(value) === index;\n            }\n            // ---------------------------------------------------------------------------\n            function update_style(new_style, old_style) {\n                new_style = parse_style(new_style);\n                if (!old_style) {\n                    return new_style;\n                }\n                return $.extend(old_style, new_style);\n            }\n            // ---------------------------------------------------------------------------\n            function parse_style(string) {\n                var style = {};\n                string.split(/\\s*;\\s*/).forEach(function(string) {\n                    var parts = string.split(':').map(function(string) {\n                        return string.trim();\n                    });\n                    var prop = parts[0];\n                    var value = parts[1];\n                    style[prop] = value;\n                });\n                return style;\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_formatting(input) {\n                var result = input.slice();\n                if (input[attrs_i]) {\n                    result[attrs_i] = stringify_attrs(input[attrs_i]);\n                }\n                if (input[class_i]) {\n                    result[class_i] = stringify_class(input[class_i]);\n                }\n                result[0] = stringify_styles(input[0]);\n                return result.join(';');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_styles(input) {\n                var ignore = input.filter(function(s) {\n                    return s[0] === '-';\n                }).map(function(s) {\n                    return s[1];\n                });\n                return input.filter(function(s) {\n                    return ignore.indexOf(s) === -1 && ignore.indexOf(s[1]) === -1;\n                }).join('');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_attrs(attrs) {\n                return JSON.stringify(attrs, function(key, value) {\n                    if (key === 'style') {\n                        return stringify_style(value);\n                    }\n                    return value;\n                });\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_class(klass) {\n                return klass.filter(unique).join(' ');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_style(style) {\n                return Object.keys(style).map(function(prop) {\n                    return prop + ':' + style[prop];\n                }).join(';');\n            }\n            // ---------------------------------------------------------------------------\n            function get_inherit_style(stack) {\n                function update_attrs(value) {\n                    if (!output[attrs_i]) {\n                        output[attrs_i] = {};\n                    }\n                    try {\n                        var new_attrs = JSON.parse(value);\n                        if (new_attrs.style) {\n                            var new_style = new_attrs.style;\n                            var old_style = output[attrs_i].style;\n                            new_attrs.style = update_style(new_style, old_style);\n                            output[attrs_i] = $.extend(\n                                new_attrs,\n                                output[attrs_i],\n                                {\n                                    style: update_style(new_style, old_style)\n                                }\n                            );\n                        } else {\n                            output[attrs_i] = $.extend(\n                                new_attrs,\n                                output[attrs_i]\n                            );\n                        }\n                    } catch (e) {\n                        warn('Invalid JSON ' + value);\n                    }\n                }\n                var output = [[], '', ''];\n                if (!stack.length) {\n                    return output;\n                }\n                for (var i = stack.length; i--;) {\n                    var formatting = stack[i].split(';');\n                    if (formatting.length > 5) {\n                        var last = formatting.slice(5).join(';');\n                        formatting = formatting.slice(0, 5).concat(last);\n                    }\n                    var style = formatting[0].split(/(-?[@!gbiuso])/g).filter(Boolean);\n                    style.forEach(function(s) {\n                        if (output[0].indexOf(s) === -1) {\n                            output[0].push(s);\n                        }\n                    });\n                    for (var j = 1; j < formatting.length; ++j) {\n                        var value = formatting[j].trim();\n                        if (value) {\n                            if (j === class_i) {\n                                if (!output[class_i]) {\n                                    output[class_i] = [];\n                                }\n                                var classes = value.split(/\\s+/);\n                                output[class_i] = output[class_i].concat(classes);\n                            } else if (j === attrs_i) {\n                                update_attrs(value);\n                            } else if (!output[j]) {\n                                output[j] = value;\n                            }\n                        }\n                    }\n                }\n                return stringify_formatting(output);\n            }\n            return string.split(re).filter(Boolean).map(function(string) {\n                var style;\n                if (string.match(/^\\[\\[/) && !$.terminal.is_extended_command(string)) {\n                    var formatting = string.replace(format_re, '$1');\n                    var is_formatting = $.terminal.is_formatting(string);\n                    string = string.replace(format_split_re, '');\n                    stack.push(formatting);\n                    if ($.terminal.nested_formatting.__inherit__) {\n                        style = get_inherit_style(stack);\n                    } else {\n                        style = formatting;\n                    }\n                    if (!is_formatting) {\n                        string += ']';\n                    } else {\n                        stack.pop();\n                    }\n                    string = '[[' + style + ']' + string;\n                } else {\n                    var pop = false;\n                    if (string.match(/\\]/)) {\n                        pop = true;\n                    }\n                    if (stack.length) {\n                        if ($.terminal.nested_formatting.__inherit__) {\n                            style = get_inherit_style(stack);\n                        } else {\n                            style = stack[stack.length - 1];\n                        }\n                        string = '[[' + style + ']' + string;\n                    }\n                    if (pop) {\n                        stack.pop();\n                    } else if (stack.length) {\n                        string += ']';\n                    }\n                }\n                return string;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: safe function that will render text as it is\n        // ---------------------------------------------------------------------\n        escape_formatting: function escape_formatting(string) {\n            return $.terminal.escape_brackets(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: apply custom formatters only to text\n        // ---------------------------------------------------------------------\n        apply_formatters: function apply_formatters(string, settings) {\n            if (string === \"\") {\n                if (settings && typeof settings.position === 'number') {\n                    return [\"\", settings.position];\n                } else {\n                    return \"\";\n                }\n            }\n            function test_lengths(formatter, index, ret, string) {\n                if (!formatter.__no_warn__ &&\n                    $.terminal.length(ret) !== $.terminal.length(string)) {\n                    warn('Your formatter[' + index + '] change length of the string, ' +\n                         'you should use [regex, replacement] formatter or function ' +\n                         ' that return [replacement, position] instead');\n                }\n            }\n            function should_format(options) {\n                if (!settings || !options) {\n                    return true;\n                }\n                var props = ['echo', 'command', 'prompt'];\n                var have_any = props.some(function(name) {\n                    return options[name] === true;\n                });\n                if (!have_any) {\n                    return true;\n                }\n                for (var i = props.length; i--;) {\n                    var prop = props[i];\n                    if (options[prop] === true && settings[prop] === true) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            settings = settings || {};\n            var formatters = settings.formatters || $.terminal.defaults.formatters;\n            var i = 0;\n            function apply_function_formatter(formatter, input) {\n                var options = $.extend({}, settings, {\n                    position: input[1]\n                });\n                var ret = formatter(input[0], options);\n                if (typeof ret === 'string') {\n                    test_lengths(formatter, i - 1, ret, input[0]);\n                    if (typeof ret === 'string') {\n                        return [ret, options.position];\n                    }\n                    return input;\n                } else if (is_array(ret) && ret.length === 2) {\n                    return ret;\n                } else {\n                    return input;\n                }\n            }\n            var input;\n            if (typeof settings.position === 'number') {\n                input = [string, settings.position];\n            } else {\n                input = [string, 0];\n            }\n            try {\n                var result = formatters.reduce(function(input, formatter) {\n                    i++;\n                    // __meta__ is for safe formatter that can handle formatters\n                    // inside formatters. for other usage we use format_split so one\n                    // formatter don't mess with formatter that was previous\n                    // on the list\n                    if (typeof formatter === 'function' && formatter.__meta__) {\n                        return apply_function_formatter(formatter, input);\n                    } else {\n                        var length = 0;\n                        var found_position = false;\n                        var splitted = $.terminal.format_split(input[0]);\n                        var partials = splitted.map(function(string) {\n                            var position;\n                            var this_len = text(string).length;\n                            // first position that match is used for this partial\n                            if (input[1] < length + this_len && !found_position) {\n                                position = input[1] - length;\n                                found_position = true;\n                            } else if (found_position) {\n                                // -1 indicate that we will not track position because it\n                                // was in one of the previous parial strings\n                                position = -1;\n                            } else {\n                                // initial position for replacers\n                                position = input[1];\n                            }\n                            // length is used to correct position after replace\n                            var length_before = length;\n                            var result;\n                            length += this_len;\n                            if ($.terminal.is_formatting(string)) {\n                                if (found_position) {\n                                    return [string, position];\n                                }\n                                return [string, -1];\n                            } else {\n                                if (is_array(formatter)) {\n                                    var options = formatter[2] || {};\n                                    result = [string, position < 0 ? 0 : position];\n                                    if (result[0].match(formatter[0]) &&\n                                        should_format(formatter[2])) {\n                                        if (options.loop) {\n                                            while (result[0].match(formatter[0])) {\n                                                result = $.terminal.tracking_replace(\n                                                    result[0],\n                                                    formatter[0],\n                                                    formatter[1],\n                                                    result[1]\n                                                );\n                                            }\n                                        } else {\n                                            result = $.terminal.tracking_replace(\n                                                result[0],\n                                                formatter[0],\n                                                formatter[1],\n                                                result[1]\n                                            );\n                                        }\n                                    }\n                                    if (position < 0) {\n                                        return [result[0], -1];\n                                    }\n                                } else if (typeof formatter === 'function') {\n                                    result = apply_function_formatter(formatter, [\n                                        string, position\n                                    ]);\n                                }\n                                if (typeof result !== 'undefined') {\n                                    // correct position becuase it's relative\n                                    // to partial and we need global for whole string\n                                    if (result[1] !== -1) {\n                                        result[1] += length_before;\n                                    }\n                                    var after_len = text(result[0]).length;\n                                    if (after_len !== this_len) {\n                                    }\n                                    return result;\n                                }\n                                return [string, -1];\n                            }\n                        });\n                        var position_partial = partials.filter(function(partial) {\n                            return partial[1] !== -1;\n                        })[0];\n                        var string = partials.map(function(partial) {\n                            return partial[0];\n                        }).join('');\n                        var position;\n                        if (typeof position_partial === 'undefined') {\n                            position = input[1];\n                        } else {\n                            position = position_partial[1];\n                        }\n                        // to make sure that output position is not outside the string\n                        var max = text(string).length;\n                        max += count_selfclosing_formatting(string);\n                        if (position > max) {\n                            position = max;\n                        }\n                        if (string === input[0]) {\n                            return input;\n                        }\n                        var before = $.terminal.strip(input[0]);\n                        var after = $.terminal.strip(string);\n                        if (before === after) {\n                            return [string, input[1]];\n                        }\n                        return [string, position];\n                    }\n                }, input);\n                if (typeof settings.position === 'number') {\n                    var codepoint_len = $.terminal.strip(result[0]).length;\n                    if ($.terminal.length(result[0]) < codepoint_len) {\n                        var position = result[1];\n                        position = normalize_position(result[0], position);\n                        var max = $.terminal.length(result[0]);\n                        if (position > max) {\n                            position = max;\n                        }\n                        result[1] = position;\n                    }\n                    return result;\n                } else {\n                    return result[0];\n                }\n            } catch (e) {\n                var msg = 'Error in formatter [' + (i - 1) + ']';\n                formatters.splice(i - 1);\n                throw new $.terminal.Exception('formatting', msg, e.stack);\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace terminal formatting with html\n        // ---------------------------------------------------------------------\n        format: function format(str, options) {\n            var settings = $.extend({}, {\n                linksNoReferrer: false,\n                linksNoFollow: false,\n                allowedAttributes: [],\n                charWidth: undefined,\n                escape: true,\n                anyLinks: false\n            }, options || {});\n            // -----------------------------------------------------------------\n            function filter_attr_names(names) {\n                if (names.length && settings.allowedAttributes.length) {\n                    return names.filter(function(name) {\n                        if (name === 'data-text') {\n                            return false;\n                        }\n                        var allowed = false;\n                        var filters = settings.allowedAttributes;\n                        for (var i = 0; i < filters.length; ++i) {\n                            if (filters[i] instanceof RegExp) {\n                                if (filters[i].test(name)) {\n                                    allowed = true;\n                                    break;\n                                }\n                            } else if (filters[i] === name) {\n                                allowed = true;\n                                break;\n                            }\n                        }\n                        return allowed;\n                    });\n                }\n                return [];\n            }\n            // -----------------------------------------------------------------\n            function clean_data(data, text) {\n                if (data === '') {\n                    return text;\n                } else {\n                    return data.replace(/&#93;/g, ']')\n                        .replace(/>/g, '&gt;')\n                        .replace(/</g, '&lt;')\n                        .replace(/\"/g, '&quot;');\n                }\n            }\n            // -----------------------------------------------------------------\n            function add_attrs(attrs) {\n                if (attrs) {\n                    var keys = filter_attr_names(Object.keys(attrs));\n                    if (keys.length) {\n                        return ' ' + keys.map(function(name) {\n                            var value = attrs[name].replace(/\"/g, '&quot;');\n                            return name + '=\"' + value + '\"';\n                        }).join(' ');\n                    }\n                }\n                return '';\n            }\n            // -----------------------------------------------------------------\n            function rel_attr() {\n                var rel = [\"noopener\"];\n                if (settings.linksNoReferrer) {\n                    rel.unshift(\"noreferrer\");\n                }\n                if (settings.linksNoFollow) {\n                    rel.unshift(\"nofollow\");\n                }\n                return rel;\n            }\n            // -----------------------------------------------------------------\n            // test if this is valid Path\n            // -----------------------------------------------------------------\n            function is_path(url) {\n                return url.match(/^\\.{1,2}\\//) ||\n                    url.match(/^\\//) ||\n                    !(url.match(/\\//) || url.match(/^[^:]+:/));\n            }\n            // -----------------------------------------------------------------\n            function with_url_validation(fn) {\n                return function(url) {\n                    if (settings.anyLinks) {\n                        return true;\n                    }\n                    var test = fn(url);\n                    if (!test) {\n                        warn('Invalid URL ' + url + ' only http(s) ftp and Path ' +\n                             'are allowed');\n                    }\n                    return test;\n                };\n            }\n            // -----------------------------------------------------------------\n            var valid_href = with_url_validation(function(url) {\n                return url.match(/^((https?|file|ftp):\\/\\/|\\.{0,2}\\/)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            var valid_src = with_url_validation(function(url) {\n                return url.match(/^(https?:|file:|blob:|data:)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            function format(s, style, color, background, _class, data_text, text) {\n                function pre_process_link(data) {\n                    var result;\n                    if (data.match(email_re)) {\n                        result = '<a href=\"mailto:' + data + '\"';\n                    } else {\n                        // only http and ftp links (prevent javascript)\n                        // unless user force it with anyLinks option\n                        if (!valid_href(data)) {\n                            data = '';\n                        }\n                        result = '<a target=\"_blank\"';\n                        if (data) {\n                            result += ' href=\"' + data + '\"';\n                        }\n                        result += ' rel=\"' + rel_attr().join(' ') + '\"';\n                    }\n                    return result;\n                }\n                function pre_process_image(data) {\n                    var result = '<img';\n                    if (valid_src(data)) {\n                        result += ' src=\"' + data + '\"';\n                        if (text) {\n                            result += ' alt=\"' + text + '\"';\n                        }\n                    }\n                    return result;\n                }\n                var attrs;\n                if (data_text.match(/;/)) {\n                    try {\n                        var splitted = data_text.split(';');\n                        var str = splitted.slice(1).join(';')\n                            .replace(/&nbsp;/g, ' ')\n                            .replace(/&lt;/g, '<')\n                            .replace(/&gt;/g, '>');\n                        if (str.match(/^\\s*\\{[^}]*\\}\\s*$/)) {\n                            attrs = JSON.parse(str);\n                            data_text = splitted[0];\n                        }\n                    } catch (e) {\n                    }\n                }\n                if (text === '' && !style.match(/@/)) {\n                    return ''; //'<span>&nbsp;</span>';\n                }\n                text = safe(text);\n                text = text.replace(/\\\\\\]/g, '&#93;');\n                if (settings.escape) {\n                    // inside formatting we need to unescape escaped slashes\n                    // but this escape is not needed when echo - don't know why\n                    text = text.replace(/\\\\\\\\/g, '\\\\');\n                }\n                var style_str = '';\n                if (style.indexOf('b') !== -1) {\n                    style_str += 'font-weight:bold;';\n                }\n                var text_decoration = [];\n                if (style.indexOf('u') !== -1) {\n                    text_decoration.push('underline');\n                }\n                if (style.indexOf('s') !== -1) {\n                    text_decoration.push('line-through');\n                }\n                if (style.indexOf('o') !== -1) {\n                    text_decoration.push('overline');\n                }\n                if (text_decoration.length) {\n                    style_str += 'text-decoration:' +\n                        text_decoration.join(' ') + ';';\n                }\n                if (style.indexOf('i') !== -1) {\n                    style_str += 'font-style:italic;';\n                }\n                if ($.terminal.valid_color(color)) {\n                    style_str += [\n                        'color:' + color,\n                        '--color:' + color,\n                        '--original-color:' + color\n                    ].join(';') + ';';\n                    if (style.indexOf('!') !== -1) {\n                        style_str += '--link-color:' + color + ';';\n                    }\n                    if (style.indexOf('g') !== -1) {\n                        style_str += 'text-shadow:0 0 5px ' + color + ';';\n                    }\n                }\n                if ($.terminal.valid_color(background)) {\n                    style_str += [\n                        'background-color:' + background,\n                        '--background:' + background\n                    ].join(';') + ';';\n                }\n                var data = clean_data(data_text, text);\n                var extra = extra_css(text, settings);\n                if (extra) {\n                    text = wide_characters(text, settings);\n                    style_str += extra;\n                }\n                var result;\n                if (style.indexOf('!') !== -1) {\n                    result = pre_process_link(data);\n                } else if (style.indexOf('@') !== -1) {\n                    result = pre_process_image(data);\n                } else {\n                    result = '<span';\n                }\n                if (attrs && attrs.style) {\n                    // merge style attr and colors #617\n                    attrs.style = style_str + attrs.style;\n                    style_str = '';\n                }\n                result += add_attrs(attrs);\n                if (style_str !== '') {\n                    result += ' style=\"' + style_str + '\"';\n                }\n                if (_class !== '') {\n                    result += ' class=\"' + _class + '\"';\n                }\n                // links and image need data-text attribute cmd click behavior\n                // formatter can return links.\n                if (style.indexOf('!') !== -1) {\n                    result += ' data-text>' + text + '</a>';\n                } else if (style.indexOf('@') !== -1) {\n                    result += ' data-text/>';\n                } else {\n                    result += ' data-text=\"' + data + '\">' +\n                        '<span>' + text + '</span></span>';\n                }\n                return result;\n            }\n            if (typeof str === 'string') {\n                // support for formating foo[[u;;]bar]baz[[b;#fff;]quux]zzz\n                var splitted = $.terminal.format_split(str);\n                str = $.map(splitted, function(text) {\n                    if (text === '') {\n                        return text;\n                    } else if ($.terminal.is_formatting(text)) {\n                        // fix &nbsp; inside formatting because encode is called\n                        // before format\n                        text = text.replace(/\\[\\[[^\\]]+\\]/, function(text) {\n                            return text.replace(/&nbsp;/g, ' ');\n                        });\n                        return text.replace(format_parts_re, format);\n                    } else {\n                        text = safe(text);\n                        text = text.replace(/\\\\\\]/, '&#93;');\n                        var data = clean_data(text);\n                        var extra = extra_css(text, settings);\n                        var prefix;\n                        if (extra.length) {\n                            text = wide_characters(text, settings);\n                            prefix = '<span style=\"' + extra + '\"';\n                        } else {\n                            prefix = '<span';\n                        }\n                        return prefix + ' data-text=\"' + data + '\">' + text + '</span>';\n                    }\n                }).join('');\n                return str.replace(/<span><br\\s*\\/?><\\/span>/gi, '<br/>');\n            } else {\n                return '';\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace brackets with html entities\n        // ---------------------------------------------------------------------\n        escape_brackets: function escape_brackets(string) {\n            return string.replace(/\\[/g, '&#91;')\n                .replace(/\\]/g, '&#93;')\n                .replace(/\\\\/g, '&#92;');\n        },\n        // ---------------------------------------------------------------------\n        // :: complmentary function\n        // ---------------------------------------------------------------------\n        unescape_brackets: function unescape_brackets(string) {\n            return string.replace(/&#91;/g, '[')\n                .replace(/&#93;/g, ']')\n                .replace(/&#92;/g, '\\\\');\n        },\n        // ---------------------------------------------------------------------\n        // :: return number of characters without formatting\n        // ---------------------------------------------------------------------\n        length: function(string, raw) {\n            if (!string) {\n                return 0;\n            }\n            return $.terminal.split_characters(raw ? string : text(string)).length;\n        },\n        // ---------------------------------------------------------------------\n        // :: split characters handling emoji, surogate pairs and combine chars\n        // ---------------------------------------------------------------------\n        split_characters: function split_characters(string) {\n            var result = [];\n            var get_next_character = make_next_char_fun(string);\n            while (string.length) {\n                var chr = get_next_character(string);\n                string = string.slice(chr.length);\n                result.push(chr);\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: return string where array items are in columns padded spaces\n        // :: after adding align tabs arr.join('\\t\\t') looks much better\n        // ---------------------------------------------------------------------\n        columns: function(array, cols, space) {\n            var no_formatting = array.map(function(string) {\n                return $.terminal.strip(string);\n            });\n            var lengths = no_formatting.map(function(string) {\n                return strlen(string);\n            });\n            if (typeof space === 'undefined') {\n                space = 4;\n            }\n            var length = Math.max.apply(null, lengths) + space;\n            // we need value - 1 because index starts from 0\n            var column_limit = Math.floor(cols / length) - 1;\n            if (column_limit < 1) {\n                return array.join('\\n');\n            }\n            var lines = [];\n            for (var i = 0, len = array.length; i < len; i += column_limit) {\n                var line = array.slice(i, i + column_limit);\n                var last = line.pop();\n                lines.push(line.reduce(function(acc, string) {\n                    var stripped = $.terminal.strip(string);\n                    var pad = new Array(length - stripped.length + 1).join(' ');\n                    acc.push(string + pad);\n                    return acc;\n                }, []).join('') + last);\n            }\n            return lines.join('\\n');\n        },\n        // ---------------------------------------------------------------------\n        // :: Remove formatting from text\n        // ---------------------------------------------------------------------\n        strip: function strip(str) {\n            if (!$.terminal.have_formatting(str)) {\n                return str;\n            }\n            return $.terminal.format_split(str).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    str = str.replace(format_parts_re, '$6');\n                    return str.replace(/\\\\([[\\]])/g, function(whole, bracket) {\n                        return bracket;\n                    });\n                }\n                return str;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: Return active terminal\n        // ---------------------------------------------------------------------\n        active: function active() {\n            return terminals.front();\n        },\n        // ---------------------------------------------------------------------\n        // :: Implmentation detail id is always length of terminals Cycle\n        // ---------------------------------------------------------------------\n        last_id: function last_id() {\n            var len = terminals.length();\n            return len - 1;\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that works with strings like 'asd' 'asd\\' asd' \"asd asd\"\n        // :: asd\\ 123 -n -b / [^ ]+ / /\\s+/ asd\\ a it creates a regex and\n        // :: numbers and replaces escape characters in double quotes\n        // :: if strict is set to false it only strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        parse_argument: function parse_argument(arg, strict) {\n            function parse_string(string) {\n                // split string to string literals and non-strings\n                return string.split(string_re).map(function(string) {\n                    // remove quotes if before are even number of slashes\n                    // we don't remove slases becuase they are handled by JSON.parse\n                    if (string.match(/^['\"`]/)) {\n                        // fixing regex to match empty string is not worth it\n                        if (string === '\"\"' || string === \"''\" || string === \"``\") {\n                            return '';\n                        }\n                        var quote = string[0];\n                        var re = new RegExp(\"(\\\\\\\\\\\\\\\\(?:\\\\\\\\\\\\\\\\)*)\" + quote, \"g\");\n                        string = string.replace(re, '$1').replace(/^[`'\"]|[`'\"]$/g, '');\n                        if (quote === \"'\") {\n                            string = string.replace(/\"/g, '\\\\\"');\n                        }\n                    }\n                    string = '\"' + string + '\"';\n                    // use build in function to parse rest of escaped characters\n                    return JSON.parse(string);\n                }).join('');\n            }\n            if (strict === false) {\n                if (arg[0] === \"'\" && arg[arg.length - 1] === \"'\") {\n                    return arg.replace(/^'|'$/g, '');\n                } else if (arg[0] === \"`\" && arg[arg.length - 1] === \"`\") {\n                    return arg.replace(/^`|`$/g, '');\n                } else if (arg[0] === '\"' && arg[arg.length - 1] === '\"') {\n                    return arg.replace(/^\"|\"$/g, '').replace(/\\\\([\" ])/g, '$1');\n                } else if (arg.match(/\\/.*\\/[gimy]*$/)) {\n                    return arg;\n                } else if (arg.match(/['\"`]]/)) {\n                    // part of arg is in quote\n                    return parse_string(arg);\n                } else {\n                    return arg.replace(/\\\\ /g, ' ');\n                }\n            }\n            if (arg === 'true') {\n                return true;\n            } else if (arg === 'false') {\n                return false;\n            }\n            var regex = arg.match(re_re);\n            if (regex) {\n                return new RegExp(regex[1], regex[2]);\n            } else if (arg.match(/['\"`]/)) {\n                return parse_string(arg);\n            } else if (arg.match(/^-?[0-9]+$/)) {\n                return parseInt(arg, 10);\n            } else if (arg.match(float_re)) {\n                return parseFloat(arg);\n            } else {\n                return arg.replace(/\\\\(['\"() ])/g, '$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function split and parse arguments\n        // ---------------------------------------------------------------------\n        parse_arguments: function parse_arguments(string) {\n            return $.map(string.match(command_re) || [], $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Function split and strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        split_arguments: function split_arguments(string) {\n            return $.map(string.match(command_re) || [], function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that returns an object {name,args}. Arguments are parsed\n        // :: using the function parse_arguments\n        // ---------------------------------------------------------------------\n        parse_command: function parse_command(string) {\n            return process_command(string, $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Same as parse_command but arguments are parsed using split_arguments\n        // ---------------------------------------------------------------------\n        split_command: function split_command(string) {\n            return process_command(string, function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :; function that parse arguments like yargs library\n        // ---------------------------------------------------------------------\n        parse_options: function parse_options(arg, options) {\n            var settings = $.extend({}, {\n                boolean: []\n            }, options);\n            if (typeof arg === 'string') {\n                return parse_options($.terminal.split_arguments(arg), options);\n            }\n            var result = {\n                _: []\n            };\n            function token(value) {\n                this.value = value;\n            }\n            var rest = arg.reduce(function(acc, arg) {\n                var str = typeof arg === 'string' ? arg : '';\n                if (str.match(/^--?[^-]/) && acc instanceof token) {\n                    result[acc.value] = true;\n                }\n                if (str.match(/^--[^-]/)) {\n                    var name = str.replace(/^--/, '');\n                    if (settings.boolean.indexOf(name) === -1) {\n                        return new token(name);\n                    } else {\n                        result[name] = true;\n                    }\n                } else if (str.match(/^-[^-]/)) {\n                    var single = str.replace(/^-/, '').split('');\n                    if (settings.boolean.indexOf(single.slice(-1)[0]) === -1) {\n                        var last = single.pop();\n                    }\n                    single.forEach(function(single) {\n                        result[single] = true;\n                    });\n                    if (last) {\n                        return new token(last);\n                    }\n                } else if (acc instanceof token) {\n                    result[acc.value] = arg;\n                } else if (arg) {\n                    result._.push(arg);\n                }\n                return null;\n            }, null);\n            if (rest instanceof token) {\n                result[rest.value] = true;\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: function executed for each text inside [[ .... ]] in echo\n        // ---------------------------------------------------------------------\n        extended_command: function extended_command(term, string, options) {\n            var settings = $.extend({\n                invokeMethods: false\n            }, options);\n            var deferred = new $.Deferred();\n            try {\n                change_hash = false;\n                var m = string.match(extended_command_re);\n                if (m) {\n                    if (!settings.invokeMethods) {\n                        warn('To invoke terminal or cmd methods you need to enable ' +\n                             'invokeMethods option');\n                        deferred.reject();\n                    } else {\n                        string = m[1];\n                        var obj = m[2] === 'terminal' ? term : term.cmd();\n                        var fn = m[3];\n                        try {\n                            var args = eval('[' + m[4] + ']');\n                            if (!obj[fn]) {\n                                term.error('Unknow function ' + fn);\n                            } else {\n                                var ret = obj[fn].apply(term, args);\n                                if (ret && ret.then) {\n                                    return ret;\n                                }\n                            }\n                            deferred.resolve();\n                        } catch (e) {\n                            term.error('Invalid invocation in ' +\n                                       $.terminal.escape_brackets(string));\n                            deferred.reject();\n                        }\n                    }\n                } else {\n                    return term.exec(string, true).done(function() {\n                        change_hash = true;\n                    });\n                }\n            } catch (e) {\n                // error is process in exec\n                deferred.reject();\n            }\n            return deferred.promise();\n        },\n        // ---------------------------------------------------------------------\n        // :: ES6 iterator for a given string that handle emoji and formatting\n        // ---------------------------------------------------------------------\n        iterator: function(string) {\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\]\\\\\\]/)) {\n                        string = string.replace(/\\]\\\\\\]/g, ']\\\\\\\\]');\n                    }\n                }\n                return string;\n            }\n            if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n                var len = $.terminal.length(string);\n                var i = 0;\n                var obj = {};\n                obj[Symbol.iterator] = function() {\n                    return {\n                        next: function() {\n                            if (i < len) {\n                                var text = $.terminal.substring(string, i, i + 1);\n                                i++;\n                                return {\n                                    value: formatting(text)\n                                };\n                            } else {\n                                return {\n                                    done: true\n                                };\n                            }\n                        }\n                    };\n                };\n                return obj;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: object that can be used in string methods intead of regex\n        // ---------------------------------------------------------------------\n        formatter: new (function() {\n            try {\n                this[Symbol.split] = function(string) {\n                    return $.terminal.format_split(string);\n                };\n                this[Symbol.match] = function(string) {\n                    return string.match(format_re);\n                };\n                this[Symbol.replace] = function(string, replacer) {\n                    return string.replace(format_parts_re, replacer);\n                };\n                this[Symbol.search] = function(string) {\n                    return string.search(format_re);\n                };\n            } catch (e) {\n            }\n        })(),\n        // ---------------------------------------------------------------------\n        // :: helper function that add formatter before nested_formatting\n        // ---------------------------------------------------------------------\n        new_formatter: function(formatter) {\n            var formatters = $.terminal.defaults.formatters;\n            for (var i = 0; i < formatters.length; ++i) {\n                if (formatters[i] === $.terminal.nested_formatting) {\n                    formatters.splice(i, 0, formatter);\n                    return;\n                }\n            }\n            formatters.push(formatter);\n        }\n    };\n    // -------------------------------------------------------------------------\n    $.terminal.Exception = function Terminal_Exception(type, message, stack) {\n        if (arguments.length === 1) {\n            this.message = arguments[0];\n            this.type = 'TERMINAL';\n        } else {\n            this.type = type;\n            this.message = message;\n            if (stack) {\n                this.stack = stack;\n            }\n        }\n    };\n    $.terminal.Exception.prototype = new Error();\n    $.terminal.Exception.prototype.toString = function() {\n        return this.message + '\\n' + this.stack;\n    };\n    // -----------------------------------------------------------------------\n    // Helper plugins and functions\n    // -----------------------------------------------------------------------\n    $.fn.visible = function() {\n        return this.css('visibility', 'visible');\n    };\n    $.fn.hidden = function() {\n        return this.css('visibility', 'hidden');\n    };\n    // -----------------------------------------------------------------------\n    var warnings = [];\n    function warn(msg) {\n        msg = '[jQuery Terminal] ' + msg;\n        if (warnings.indexOf(msg) === -1) {\n            warnings.push(msg);\n            /* eslint-disable */\n            if (console) {\n                if (console.warn) {\n                    console.warn(msg);\n                } else if (console.log) {\n                    console.log(msg);\n                }\n                /* eslint-enable */\n            } else {\n                // prevent catching in outer try..catch\n                setTimeout(function() {\n                    throw new Error('WARN: ' + msg);\n                }, 0);\n            }\n        }\n    }\n    // -----------------------------------------------------------------------\n    // JSON-RPC CALL\n    // -----------------------------------------------------------------------\n    var ids = {}; // list of url based ids of JSON-RPC\n    $.jrpc = function(url, method, params, success, error) {\n        var deferred = new $.Deferred();\n        var options;\n        if ($.isPlainObject(url)) {\n            options = url;\n        } else {\n            options = {\n                url: url,\n                method: method,\n                params: params,\n                success: success,\n                error: error\n            };\n        }\n        function validJSONRPC(response) {\n            return $.isNumeric(response.id) &&\n                (typeof response.result !== 'undefined' ||\n                 typeof response.error !== 'undefined');\n        }\n        ids[options.url] = ids[options.url] || 0;\n        var request = {\n            'jsonrpc': '2.0',\n            'method': options.method,\n            'params': options.params,\n            'id': ++ids[options.url]\n        };\n        $.ajax({\n            url: options.url,\n            beforeSend: function beforeSend(jxhr, settings) {\n                if (is_function(options.request)) {\n                    options.request(jxhr, request);\n                }\n                settings.data = JSON.stringify(request);\n            },\n            success: function success(response, status, jqXHR) {\n                var content_type = jqXHR.getResponseHeader('Content-Type');\n                if (!content_type.match(/(application|text)\\/json/)) {\n                    warn('Response Content-Type is neither application/json' +\n                         ' nor text/json');\n                }\n                var json;\n                try {\n                    json = JSON.parse(response);\n                } catch (e) {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON', e);\n                    } else {\n                        throw new $.terminal.Exception('JSON', 'Invalid JSON', e.stack);\n                    }\n                    deferred.reject({message: 'Invalid JSON', response: response});\n                    return;\n                }\n                if (is_function(options.response)) {\n                    options.response(jqXHR, json);\n                }\n                if (validJSONRPC(json) || options.method === 'system.describe') {\n                    // don't catch errors in success callback\n                    if (options.success) {\n                        options.success(json, status, jqXHR);\n                    }\n                    deferred.resolve(json);\n                } else {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON-RPC');\n                    }\n                    deferred.reject({message: 'Invalid JSON-RPC', response: response});\n                }\n            },\n            error: options.error,\n            contentType: 'application/json',\n            dataType: 'text',\n            async: true,\n            cache: false,\n            // timeout: 1,\n            type: 'POST'\n        });\n        return deferred.promise();\n    };\n    // -----------------------------------------------------------------------\n    $.rpc = function(url, method, params) {\n        var deferred = new $.Deferred();\n        function success(res) {\n            if (res.error) {\n                deferred.reject(res.error);\n            } else {\n                deferred.resolve(res.result);\n            }\n        }\n        function error(jqXHR, status, message) {\n            deferred.reject({message: message});\n        }\n        $.jrpc(url, method, params, success, error);\n        return deferred.promise();\n    };\n    // -----------------------------------------------------------------------\n    function terminal_ready(term) {\n        return !!(term.closest('body').length &&\n                  term.is(':visible') &&\n                  term.find('.cmd-prompt').length);\n    }\n    // -----------------------------------------------------------------------\n    // :: Create fake terminal to calcualte the dimention of one character\n    // :: this will make terminal work if terminal div is not added to the\n    // :: DOM at init like with:\n    // :: $('<div/>').terminal().echo('foo bar').appendTo('body');\n    // -----------------------------------------------------------------------\n    function get_char_size(term) {\n        var rect;\n        if (terminal_ready(term)) {\n            var $prompt = term.find('.cmd-prompt').clone().css({\n                visiblity: 'hidden',\n                position: 'absolute'\n            });\n            $prompt.appendTo(term.find('.cmd')).html('&nbsp;');\n            rect = $prompt[0].getBoundingClientRect();\n            $prompt.remove();\n        } else {\n            var temp = $('<div class=\"terminal terminal-temp\"><div class=\"terminal-' +\n                         'wrapper\"><div class=\"terminal-output\"><div><div class=\"te' +\n                         'rminal-line\" style=\"float: left\"><span>&nbsp;</span></div' +\n                         '></div></div></div>').appendTo('body');\n            temp.addClass(term.attr('class')).attr('id', term.attr('id'));\n            if (term) {\n                var style = term.attr('style');\n                if (style) {\n                    style = style.split(/\\s*;\\s*/).filter(function(s) {\n                        return !s.match(/display\\s*:\\s*none/i);\n                    }).join(';');\n                    temp.attr('style', style);\n                }\n            }\n            rect = temp.find('.terminal-line')[0].getBoundingClientRect();\n        }\n        var result = {\n            width: rect.width,\n            height: rect.height\n        };\n        if (temp) {\n            temp.remove();\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------------\n    // :: calculate numbers of characters\n    // -----------------------------------------------------------------------\n    function get_num_chars(terminal, char_size) {\n        var width = terminal.find('.terminal-fill').width();\n        var result = Math.floor(width / char_size.width);\n        // random number to not get NaN in node.js but big enough to\n        // not wrap exception\n        return result || 1000;\n    }\n    // -----------------------------------------------------------------------\n    // :: Calculate number of lines that fit without scroll\n    // -----------------------------------------------------------------------\n    function get_num_rows(terminal, char_size) {\n        var height = terminal.find('.terminal-fill').height();\n        return Math.floor(height / char_size.height);\n    }\n    // -----------------------------------------------------------------------\n    function all(array, fn) {\n        var same = array.filter(function(item) {\n            return item[fn]() === item;\n        });\n        return same.length === array.length;\n    }\n    // -----------------------------------------------------------------------\n    function string_case(string) {\n        var array = string.split('');\n        if (all(array, 'toLowerCase')) {\n            return 'lower';\n        } else if (all(array, 'toUpperCase')) {\n            return 'upper';\n        } else {\n            return 'mixed';\n        }\n    }\n    // -----------------------------------------------------------------------\n    function same_case(string) {\n        return string_case(string) !== 'mixed';\n    }\n    // -----------------------------------------------------------------------\n    // fix for jQuery bug\n    function is_function(object) {\n        return get_type(object) === 'function';\n    }\n    // -----------------------------------------------------------------------\n    function is_object(object) {\n        return object && typeof object === 'object';\n    }\n    // -----------------------------------------------------------------------\n    function is_promise(object) {\n        return is_object(object) && is_function(object.then || object.done);\n    }\n    // -----------------------------------------------------------------------\n    function is_deferred(object) {\n        return is_promise(object) && is_function(object.promise);\n    }\n    // -----------------------------------------------------------------------\n    if (!Array.isArray) {\n        Array.isArray = function(arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n    // -----------------------------------------------------------------------\n    function is_array(object) {\n        return Array.isArray(object);\n    }\n    // -----------------------------------------------------------------------\n    function get_type(object) {\n        if (typeof object === 'function') {\n            return 'function';\n        }\n        if (object === null) {\n            return object + '';\n        }\n        if (Array.isArray(object)) {\n            return 'array';\n        }\n        if (typeof object === 'object') {\n            return 'object';\n        }\n        return typeof object;\n    }\n    // -----------------------------------------------------------------------\n    // :: TERMINAL PLUGIN CODE\n    // -----------------------------------------------------------------------\n    var version_set = !$.terminal.version.match(/^\\{\\{/);\n    var copyright = 'Copyright (c) 2011-2021 Jakub T. Jankiewicz ' +\n        '<https://jcubic.pl/me>';\n    var version_string = version_set ? ' v. ' + $.terminal.version : ' ';\n    // regex is for placing version string aligned to the right\n    var reg = new RegExp(' {' + version_string.length + '}$');\n    var name_ver = 'jQuery Terminal Emulator' +\n        (version_set ? version_string : '');\n    // -----------------------------------------------------------------------\n    // :: Terminal Signatures\n    // -----------------------------------------------------------------------\n    var signatures = [\n        ['jQuery Terminal', '(c) 2011-2021 jcubic'],\n        [name_ver, copyright.replace(/^Copyright | *<.*>/g, '')],\n        [name_ver, copyright.replace(/^Copyright /, '')],\n        [\n            '      _______                 ________                        __',\n            '     / / _  /_ ____________ _/__  ___/______________  _____  / /',\n            ' __ / / // / // / _  / _/ // / / / _  / _/     / /  \\\\/ / _ \\\\/ /',\n            '/  / / // / // / ___/ // // / / / ___/ // / / / / /\\\\  / // / /__',\n            '\\\\___/____ \\\\\\\\__/____/_/ \\\\__ / /_/____/_//_/_/_/_/_/  \\\\/\\\\__\\\\_\\\\___/',\n            '         \\\\/          /____/                                   '\n                .replace(reg, ' ') + version_string,\n            copyright\n        ],\n        [\n            '      __ _____                     ________                            ' +\n                '  __',\n            '     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___ ' +\n                ' / /',\n            ' __ / // // // // // _  // _// // / / // _  // _//     // //  \\\\/ // _ ' +\n                '\\\\/ /',\n            '/  / // // // // // ___// / / // / / // ___// / / / / // // /\\\\  // // ' +\n                '/ /__',\n            '\\\\___//____ \\\\\\\\___//____//_/ _\\\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\\\' +\n                '__\\\\_\\\\___/',\n            ('          \\\\/              /____/                                     ' +\n             '     ').replace(reg, '') + version_string,\n            copyright\n        ]\n    ];\n    // -----------------------------------------------------------------------\n    // :: Default options\n    // -----------------------------------------------------------------------\n    $.terminal.nested_formatting.__meta__ = true;\n    // if set to false nested formatting will not inherit styles colors and attribues\n    $.terminal.nested_formatting.__inherit__ = true;\n    // nested formatting will always return different length so we silent the warning\n    $.terminal.nested_formatting.__no_warn__ = true;\n    $.terminal.defaults = {\n        prompt: '> ',\n        history: true,\n        exit: true,\n        clear: true,\n        enabled: true,\n        maskChar: '*',\n        wrap: true,\n        checkArity: true,\n        raw: false,\n        tabindex: 1,\n        invokeMethods: false,\n        exceptionHandler: null,\n        pauseEvents: true,\n        softPause: false,\n        mousewheel: null,\n        touchscroll: null,\n        memory: false,\n        cancelableAjax: true,\n        processArguments: true,\n        execAnimation: false,\n        execAnimationDelay: 100,\n        linksNoReferrer: false,\n        useCache: true,\n        anyLinks: false,\n        linksNoFollow: false,\n        processRPCResponse: null,\n        completionEscape: true,\n        onCommandChange: null,\n        mobileDelete: is_mobile,\n        onPositionChange: null,\n        convertLinks: true,\n        extra: {},\n        tabs: 4,\n        historySize: 60,\n        scrollObject: null,\n        historyState: false,\n        importHistory: false,\n        historyFilter: null,\n        echoCommand: true,\n        scrollOnEcho: true,\n        login: null,\n        outputLimit: -1,\n        formatters: [$.terminal.nested_formatting],\n        unixFormatting: {\n            escapeBrackets: false,\n            ansiParser: {},\n            ansiArt: false\n        },\n        onAjaxError: null,\n        pasteImage: true,\n        scrollBottomOffset: 20,\n        wordAutocomplete: true,\n        caseSensitiveAutocomplete: true,\n        caseSensitiveSearch: true,\n        clickTimeout: 200,\n        holdTimeout: 400,\n        holdRepeatTimeout: 200,\n        repeatTimeoutKeys: [],\n        mobileIngoreAutoSpace: [],\n        request: $.noop,\n        response: $.noop,\n        describe: 'procs',\n        onRPCError: null,\n        keymap: null,\n        doubleTab: null,\n        doubleTabEchoCommand: false,\n        completion: false,\n        onInit: $.noop,\n        onClear: $.noop,\n        onBlur: $.noop,\n        onFocus: $.noop,\n        onTerminalChange: $.noop,\n        onExit: $.noop,\n        onPush: $.noop,\n        onPop: $.noop,\n        keypress: $.noop,\n        keydown: $.noop,\n        renderHandler: null,\n        onAfterRedraw: $.noop,\n        onEchoCommand: $.noop,\n        onPaste: $.noop,\n        onFlush: $.noop,\n        onBeforeCommand: null,\n        onAfterCommand: null,\n        onBeforeEcho: null,\n        onAfterEcho: null,\n        onBeforeLogin: null,\n        onAfterLogout: null,\n        onBeforeLogout: null,\n        allowedAttributes: ['title', /^aria-/, 'id', /^data-/],\n        strings: {\n            comletionParameters: 'From version 1.0.0 completion function need to' +\n                ' have two arguments',\n            wrongPasswordTryAgain: 'Wrong username or password try again!',\n            wrongPassword: 'Wrong username or password!',\n            ajaxAbortError: 'Error while aborting ajax call!',\n            wrongArity: \"Wrong number of arguments. Function '%s' expects %s got\" +\n                ' %s!',\n            commandNotFound: \"Command '%s' Not Found!\",\n            oneRPCWithIgnore: 'You can use only one rpc with describe == false ' +\n                'or rpc without system.describe',\n            oneInterpreterFunction: \"You can't use more than one function (rpc \" +\n                'without system.describe or with option describe == false count' +\n                 's as one)',\n            loginFunctionMissing: \"You didn't specify a login function\",\n            noTokenError: 'Access denied (no token)',\n            serverResponse: 'Server responded',\n            wrongGreetings: 'Wrong value of greetings parameter',\n            notWhileLogin: \"You can't call `%s' function while in login\",\n            loginIsNotAFunction: 'Authenticate must be a function',\n            canExitError: \"You can't exit from main interpreter\",\n            invalidCompletion: 'Invalid completion',\n            invalidSelector: 'Sorry, but terminal said that you use invalid ' +\n                'selector!',\n            invalidTerminalId: 'Invalid Terminal ID',\n            login: 'login',\n            password: 'password',\n            recursiveLoop: 'Recursive loop in echo detected, skip',\n            notAString: '%s function: argument is not a string',\n            redrawError: 'Internal error, wrong position in cmd redraw',\n            invalidStrings: 'Command %s have unclosed strings',\n            defunctTerminal: \"You can't call method on terminal that was destroyed\"\n        }\n    };\n    // -------------------------------------------------------------------------\n    // :: All terminal globals\n    // -------------------------------------------------------------------------\n    var requests = []; // for canceling on CTRL+D\n    var terminals = new Cycle(); // list of terminals global in this scope\n    // state for all terminals, terminals can't have own array fo state because\n    // there is only one popstate event\n    var save_state = []; // hold objects returned by export_view by history API\n    var hash_commands;\n    var change_hash = false; // don't change hash on Init\n    var fire_hash_change = true;\n    var first_instance = true; // used by history state\n    $.fn.terminal = function(init_interpreter, options) {\n        function StorageHelper(memory) {\n            if (memory) {\n                this.storage = {};\n            }\n            this.set = function(key, value) {\n                if (memory) {\n                    this.storage[key] = value;\n                } else {\n                    $.Storage.set(key, value);\n                }\n            };\n            this.get = function(key) {\n                if (memory) {\n                    return this.storage[key];\n                } else {\n                    return $.Storage.get(key);\n                }\n            };\n            this.remove = function(key) {\n                if (memory) {\n                    delete this.storage[key];\n                } else {\n                    $.Storage.remove(key);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function\n        // ---------------------------------------------------------------------\n        function get_processed_command(command) {\n            if ($.terminal.unclosed_strings(command)) {\n                var string = $.terminal.escape_brackets(command);\n                var message = sprintf(strings().invalidStrings, \"`\" + string + \"`\");\n                throw new $.terminal.Exception(message);\n            } else if (is_function(settings.processArguments)) {\n                return process_command(command, settings.processArguments);\n            } else if (settings.processArguments) {\n                return $.terminal.parse_command(command);\n            } else {\n                return $.terminal.split_command(command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that use option to render objects\n        // ---------------------------------------------------------------------\n        function preprocess_value(value, options) {\n            if ($.terminal.Animation && value instanceof $.terminal.Animation) {\n                value.start(self);\n                return false;\n            }\n            if (is_function(settings.renderHandler)) {\n                var ret = settings.renderHandler.call(self, value, options, self);\n                if (ret === false) {\n                    return false;\n                }\n                if (typeof ret === 'string' || is_node(ret) || is_promise(ret)) {\n                    return ret;\n                } else {\n                    return value;\n                }\n            }\n            return value;\n        }\n        // ---------------------------------------------------------------------\n        // :: call when line is out of view when outputLimit is used\n        // :: NOTE: it's not called when less plugin is used onClear is called\n        // :: instead because less call term::clear() after export old view\n        // ---------------------------------------------------------------------\n        function unmount(node) {\n            var index = node.data('index');\n            var line = lines[index];\n            var options = line[1];\n            if (is_function(options.unmount)) {\n                options.unmount.call(self, node);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function used in render and in update\n        // ---------------------------------------------------------------------\n        function prepare_render(value, options) {\n            if (is_node(value)) {\n                var settings = $.extend({}, options, {\n                    raw: true,\n                    finalize: function(div) {\n                        div.find('.terminal-render-item').replaceWith(value);\n                        if (options && is_function(options.finalize)) {\n                            options.finalize(div, self);\n                        }\n                    }\n                });\n                return ['<div class=\"terminal-render-item\"/>', settings];\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that renders DOM nodes and jQuery objects\n        // ---------------------------------------------------------------------\n        function render(value, options) {\n            var ret = prepare_render(value, options);\n            if (ret) {\n                self.echo.apply(self, ret);\n                return true;\n            }\n        }\n        // ---------------------------------------------------------------------\n        function get_node(index) {\n            return output.find('[data-index=' + index + ']');\n        }\n        // ---------------------------------------------------------------------\n        // :: test if object can be rendered\n        // ---------------------------------------------------------------------\n        function is_node(object) {\n            return object instanceof $.fn.init || object instanceof Element;\n        }\n        // ---------------------------------------------------------------------\n        // :: Display object on terminal\n        // ---------------------------------------------------------------------\n        function display_object(object) {\n            object = preprocess_value(object);\n            if (object === false) {\n                return;\n            }\n            if (render(object)) {\n                return;\n            }\n            if (typeof object === 'string') {\n                self.echo(object);\n            } else if (is_array(object)) {\n                self.echo($.map(object, function(object) {\n                    return JSON.stringify(object);\n                }).join(' '));\n            } else if (typeof object === 'object') {\n                self.echo(JSON.stringify(object));\n            } else {\n                self.echo(object);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display line code in the file if line numbers are present\n        // ---------------------------------------------------------------------\n        function print_line(url_spec, cols) {\n            var re = /(.*):([0-9]+):([0-9]+)$/;\n            // google chrome have line and column after filename\n            var m = url_spec.match(re);\n            if (m) {\n                // TODO: do we need to call pause/resume or return promise?\n                self.pause(settings.softPause);\n                $.get(m[1], function(response) {\n                    var file = m[1];\n                    var code = response.split('\\n');\n                    var n = +m[2] - 1;\n                    var start = n > 2 ? n - 2 : 0;\n                    var lines = code.slice(start, n + 3).map(function(line, i) {\n                        var prefix = '[' + (n + i - 1) + ']: ';\n                        var limit = cols - prefix.length - 4;\n                        if (line.length > limit) {\n                            line = line.substring(0, limit) + '...';\n                        }\n                        if (n > 2 ? i === 2 : i === n) {\n                            line = '[[;#f00;]' +\n                                $.terminal.escape_brackets(line) + ']';\n                        }\n                        return prefix + line;\n                    }).filter(Boolean).join('\\n');\n                    if (lines.length) {\n                        self.echo('[[b;white;]' + file + ']');\n                        self.echo(lines).resume();\n                    }\n                }, 'text');\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function display_json_rpc_error(error) {\n            if (is_function(settings.onRPCError)) {\n                settings.onRPCError.call(self, error);\n            } else {\n                self.error('&#91;RPC&#93; ' + error.message);\n                if (error.error && error.error.message) {\n                    error = error.error;\n                    // more detailed error message\n                    var msg = '\\t' + error.message;\n                    if (error.file) {\n                        msg += ' in file \"' + error.file.replace(/.*\\//, '') + '\"';\n                    }\n                    if (error.at) {\n                        msg += ' at line ' + error.at;\n                    }\n                    self.error(msg);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from url string\n        // ---------------------------------------------------------------------\n        function make_basic_json_rpc(url, auth) {\n            var interpreter = function(method, params) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: params,\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(json) {\n                        if (json.error) {\n                            display_json_rpc_error(json.error);\n                        } else if (is_function(settings.processRPCResponse)) {\n                            settings.processRPCResponse.call(self, json.result, self);\n                        } else if (json.result !== null) {\n                            display_object(json.result);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // this is the interpreter function\n            return function(command, terminal) {\n                if (command === '') {\n                    return;\n                }\n                try {\n                    command = get_processed_command(command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    display_exception(e, 'TERMINAL (get_processed_command)');\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                if (!auth || command.name === 'help') {\n                    // allows to call help without a token\n                    interpreter(command.name, command.args);\n                } else {\n                    var token = terminal.token(true);\n                    if (token) {\n                        interpreter(command.name, [token].concat(command.args));\n                    } else {\n                        // should never happen\n                        terminal.error('&#91;AUTH&#93; ' + strings().noTokenError);\n                    }\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from Object. If the value is object\n        // :: it will create nested interpreters\n        // ---------------------------------------------------------------------\n        function make_object_interpreter(object, arity, login, fallback) {\n            // function that maps commands to object methods\n            // it keeps terminal context\n            return function(user_command, terminal) {\n                if (user_command === '') {\n                    return;\n                }\n                var command;\n                try {\n                    command = get_processed_command(user_command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    if (is_function(settings.exception)) {\n                        settings.exception(e, self);\n                    } else {\n                        self.error('Error: ' + (e.message || e));\n                    }\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                var val = object[command.name];\n                var type = get_type(val);\n                if (type === 'function') {\n                    if (arity && val.length !== command.args.length) {\n                        self.error(\n                            '&#91;Arity&#93; ' +\n                                sprintf(\n                                    strings().wrongArity,\n                                    command.name,\n                                    val.length,\n                                    command.args.length\n                                )\n                        );\n                    } else {\n                        return val.apply(self, command.args);\n                    }\n                } else if (type === 'object' || type === 'string') {\n                    var commands = [];\n                    if (type === 'object') {\n                        commands = Object.keys(val);\n                        val = make_object_interpreter(\n                            val,\n                            arity,\n                            login\n                        );\n                    }\n                    terminal.push(val, {\n                        prompt: command.name + '> ',\n                        name: command.name,\n                        completion: type === 'object' ? commands : undefined\n                    });\n                } else if (is_function(fallback)) {\n                    fallback(user_command, self);\n                } else if (is_function(settings.onCommandNotFound)) {\n                    settings.onCommandNotFound.call(self, user_command, self);\n                } else {\n                    terminal.error(sprintf(strings().commandNotFound, command.name));\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        function ajax_error(xhr, status, error) {\n            self.resume(); // onAjaxError can use pause/resume call it first\n            if (is_function(settings.onAjaxError)) {\n                settings.onAjaxError.call(self, xhr, status, error);\n            } else if (status !== 'abort') {\n                self.error('&#91;AJAX&#93; ' + status + ' - ' +\n                           strings().serverResponse + ':\\n' +\n                           $.terminal.escape_brackets(xhr.responseText));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpreter object based on JSON-RPC meta data\n        // ---------------------------------------------------------------------\n        function make_json_rpc_object(url, auth, success) {\n            function jrpc_success(json) {\n                if (json.error) {\n                    display_json_rpc_error(json.error);\n                } else if (is_function(settings.processRPCResponse)) {\n                    settings.processRPCResponse.call(self, json.result, self);\n                } else {\n                    display_object(json.result);\n                }\n                self.resume();\n            }\n            function jrpc_request(jxhr, request) {\n                try {\n                    settings.request.call(self, jxhr, request, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function jrpc_response(jxhr, response) {\n                try {\n                    settings.response.call(self, jxhr, response, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function response(response) {\n                var procs = response;\n                // we check if it's false before we call this function but\n                // it don't hurt to be explicit here\n                if (settings.describe !== false && settings.describe !== '') {\n                    settings.describe.split('.').forEach(function(field) {\n                        procs = procs[field];\n                    });\n                }\n                if (procs && procs.length) {\n                    var interpreter_object = {};\n                    $.each(procs, function(_, proc) {\n                        if ($.isPlainObject(proc) && typeof proc.name === 'string') {\n                            interpreter_object[proc.name] = function() {\n                                var append = auth && proc.name !== 'help';\n                                var args = Array.prototype.slice.call(arguments);\n                                var args_len = args.length + (append ? 1 : 0);\n                                if (settings.checkArity && proc.params &&\n                                    proc.params.length !== args_len) {\n                                    self.error(\n                                        '&#91;Arity&#93; ' +\n                                            sprintf(\n                                                strings().wrongArity,\n                                                proc.name,\n                                                proc.params.length,\n                                                args_len\n                                            )\n                                    );\n                                } else {\n                                    self.pause(settings.softPause);\n                                    if (append) {\n                                        var token = self.token(true);\n                                        if (token) {\n                                            args = [token].concat(args);\n                                        } else {\n                                            self.error('&#91;AUTH&#93; ' +\n                                                       strings().noTokenError);\n                                        }\n                                    }\n                                    $.jrpc({\n                                        url: url,\n                                        method: proc.name,\n                                        params: args,\n                                        request: jrpc_request,\n                                        response: jrpc_response,\n                                        success: jrpc_success,\n                                        error: ajax_error\n                                    });\n                                }\n                            };\n                        }\n                    });\n                    var login = typeof auth === 'string' ? auth : 'login';\n                    interpreter_object.help = interpreter_object.help || function(fn) {\n                        if (typeof fn === 'undefined') {\n                            var names = procs.map(function(proc) {\n                                return proc.name;\n                            }).join(', ') + ', help';\n                            self.echo('Available commands: ' + names);\n                        } else {\n                            var found = false;\n                            $.each(procs, function(_, proc) {\n                                if (proc.name === fn) {\n                                    found = true;\n                                    var msg = '';\n                                    msg += '[[bu;;]' + proc.name + ']';\n                                    if (proc.params) {\n                                        var params = proc.params;\n                                        if (auth && proc.name !== login) {\n                                            params = params.slice(1);\n                                        }\n                                        msg += ' ' + params.join(' ');\n                                    }\n                                    if (proc.help) {\n                                        msg += '\\n' + proc.help;\n                                    }\n                                    self.echo(msg);\n                                    return false;\n                                }\n                            });\n                            if (!found) {\n                                if (fn === 'help') {\n                                    self.echo('[[bu;;]help] [method]\\ndisplay help ' +\n                                              'for the method or list of methods if not' +\n                                              ' specified');\n                                } else {\n                                    var msg = 'Method `' + fn + \"' not found \";\n                                    self.error(msg);\n                                }\n                            }\n                        }\n                    };\n                    success(interpreter_object);\n                } else {\n                    success(null);\n                }\n            }\n            return $.jrpc({\n                url: url,\n                method: 'system.describe',\n                params: [],\n                success: response,\n                request: jrpc_request,\n                response: jrpc_response,\n                error: function error() {\n                    success(null);\n                }\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpeter function and call finalize with\n        // :: interpreter and optional completion\n        // ---------------------------------------------------------------------\n        function make_interpreter(user_intrp, login, finalize) {\n            finalize = finalize || $.noop;\n            var type = get_type(user_intrp);\n            var object;\n            var result = {};\n            var rpc_count = 0; // only one rpc can be use for array\n            var fn_interpreter;\n            if (type === 'array') {\n                object = {};\n                // recur will be called when previous acync call is finished\n                (function recur(interpreters, success) {\n                    if (interpreters.length) {\n                        var first = interpreters[0];\n                        var rest = interpreters.slice(1);\n                        var type = get_type(first);\n                        if (type === 'string') {\n                            self.pause(settings.softPause);\n                            if (settings.describe === false) {\n                                if (++rpc_count === 1) {\n                                    fn_interpreter = make_basic_json_rpc(first, login);\n                                } else {\n                                    self.error(strings().oneRPCWithIgnore);\n                                }\n                                recur(rest, success);\n                            } else {\n                                make_json_rpc_object(first, login, function(new_obj) {\n                                    if (new_obj) {\n                                        $.extend(object, new_obj);\n                                    } else if (++rpc_count === 1) {\n                                        fn_interpreter = make_basic_json_rpc(\n                                            first,\n                                            login\n                                        );\n                                    } else {\n                                        self.error(strings().oneRPCWithIgnore);\n                                    }\n                                    self.resume();\n                                    recur(rest, success);\n                                });\n                            }\n                        } else if (type === 'function') {\n                            if (fn_interpreter) {\n                                self.error(strings().oneInterpreterFunction);\n                            } else {\n                                fn_interpreter = first;\n                            }\n                            recur(rest, success);\n                        } else if (type === 'object') {\n                            $.extend(object, first);\n                            recur(rest, success);\n                        }\n                    } else {\n                        success();\n                    }\n                })(user_intrp, function() {\n                    finalize({\n                        interpreter: make_object_interpreter(\n                            object,\n                            false,\n                            login,\n                            fn_interpreter && fn_interpreter.bind(self)\n                        ),\n                        completion: Object.keys(object)\n                    });\n                });\n            } else if (type === 'string') {\n                if (settings.describe === false) {\n                    object = {\n                        interpreter: make_basic_json_rpc(user_intrp, login)\n                    };\n                    if ($.isArray(settings.completion)) {\n                        object.completion = settings.completion;\n                    }\n                    finalize(object);\n                } else {\n                    self.pause(settings.softPause);\n                    make_json_rpc_object(user_intrp, login, function(object) {\n                        if (object) {\n                            result.interpreter = make_object_interpreter(\n                                object,\n                                false,\n                                login\n                            );\n                            result.completion = Object.keys(object);\n                        } else {\n                            // no procs in system.describe\n                            result.interpreter = make_basic_json_rpc(user_intrp, login);\n                        }\n                        finalize(result);\n                        self.resume();\n                    });\n                }\n            } else if (type === 'object') {\n                finalize({\n                    interpreter: make_object_interpreter(\n                        user_intrp,\n                        settings.checkArity,\n                        login\n                    ),\n                    completion: Object.keys(user_intrp)\n                });\n            } else {\n                // allow $('<div/>').terminal();\n                if (type === 'undefined') {\n                    user_intrp = $.noop;\n                } else if (type !== 'function') {\n                    var msg = type + ' is invalid interpreter value';\n                    throw new $.terminal.Exception(msg);\n                }\n                // single function don't need bind\n                finalize({\n                    interpreter: user_intrp,\n                    completion: settings.completion\n                });\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create JSON-RPC authentication function\n        // ---------------------------------------------------------------------\n        function make_json_rpc_login(url, login) {\n            var method = get_type(login) === 'boolean' ? 'login' : login;\n            return function(user, passwd, callback) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: [user, passwd],\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(response) {\n                        if (!response.error && response.result) {\n                            callback(response.result);\n                        } else {\n                            // null will trigger message that login fail\n                            callback(null);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // default name is login so you can pass true\n        }\n        // ---------------------------------------------------------------------\n        // :: display Exception on terminal\n        // ---------------------------------------------------------------------\n        function display_exception(e, label, silent) {\n            if (is_function(settings.exceptionHandler)) {\n                settings.exceptionHandler.call(self, e, label);\n            } else {\n                self.exception(e, label);\n                if (!silent) {\n                    setTimeout(function() {\n                        throw e;\n                    }, 0);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function links(string) {\n            function format(_, style, color, background, _class, data, text) {\n                function formatting(s, text) {\n                    return '[[' + [\n                        style + (s || ''),\n                        color,\n                        background,\n                        _class,\n                        text || data\n                    ].join(';') + ']';\n                }\n                function escaped(_) {\n                    return ']' + formatting('!', _) + _ + ']' + formatting();\n                }\n                if (!style.match(/!/)) {\n                    var m = text.match(email_full_re) || text.match(url_full_re);\n                    if (m) {\n                        return formatting('!', m[1]) + text + ']';\n                    } else if (text.match(email_re) || text.match(url_nf_re)) {\n                        var output = text.replace(email_re, escaped)\n                            .replace(url_nf_re, escaped);\n                        return formatting('', data) + output + ']';\n                    }\n                }\n                return _;\n            }\n            function linkify(string) {\n                return string.replace(email_re, '[[!;;]$1]').\n                    replace(url_nf_re, '[[!;;]$1]');\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return linkify(string);\n            }\n            return $.terminal.format_split(string).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    return str.replace(format_parts_re, format);\n                } else {\n                    return linkify(str);\n                }\n            }).join('');\n        }\n        // ---------------------------------------------------------------------\n        function should_wrap(string, options) {\n            return (strlen(text(string)) > options.cols ||\n                    string.match(/\\n/)) &&\n                ((settings.wrap === true &&\n                  options.wrap === undefined) ||\n                 settings.wrap === false &&\n                 options.wrap === true);\n        }\n        // ---------------------------------------------------------------------\n        var line_cache;\n        if ('Map' in root) {\n            line_cache = new Map();\n        }\n        // ---------------------------------------------------------------------\n        function process_extended_commands(string, line, line_settings) {\n            if (line_settings.exec || line.options.clear_exec) {\n                return $.terminal.each_extended_command(string, function(command) {\n                    // redraw should not execute commands and it have\n                    // and lines variable have all extended commands\n                    if (line_settings.exec) {\n                        line.options.exec = false;\n                        line.options.clear_exec = true;\n                        var trim = command.trim();\n                        if (prev_exec_cmd && prev_exec_cmd === trim) {\n                            prev_exec_cmd = '';\n                            self.error(strings().recursiveLoop);\n                        } else {\n                            prev_exec_cmd = trim;\n                            $.terminal.extended_command(self, command, {\n                                invokeMethods: line_settings.invokeMethods\n                            }).then(function() {\n                                prev_exec_cmd = '';\n                            });\n                        }\n                    }\n                });\n            }\n            return string;\n        }\n        // ---------------------------------------------------------------------\n        function process_line(line) {\n            // prevent exception in display exception\n            try {\n                var use_cache = !is_function(line.value);\n                var line_settings = $.extend({\n                    exec: true,\n                    raw: false,\n                    finalize: $.noop,\n                    useCache: use_cache,\n                    invokeMethods: false,\n                    formatters: true,\n                    convertLinks: settings.convertLinks\n                }, line.options || {});\n                var string = stringify_value(line.value);\n                if (string && is_function(string.then)) {\n                    // handle function that return a promise #629\n                    return string.then(function(string) {\n                        process_line($.extend(line, {\n                            value: string,\n                            options: line_settings\n                        }));\n                    });\n                }\n                if (string !== '') {\n                    if (!line_settings.raw) {\n                        if (settings.useCache && line_settings.useCache) {\n                            var key = string;\n                            if (line_cache && line_cache.has(key)) {\n                                var data = line_cache.get(key);\n                                buffer.append(\n                                    data.input,\n                                    line.index,\n                                    line_settings,\n                                    data.raw\n                                );\n                                return true;\n                            }\n                        }\n                        if (line_settings.formatters) {\n                            try {\n                                string = $.terminal.apply_formatters(\n                                    string,\n                                    $.extend(settings, {echo: true})\n                                );\n                            } catch (e) {\n                                display_exception(e, 'FORMATTING');\n                            }\n                        }\n                        string = process_extended_commands(string, line, line_settings);\n                        if (string === '') {\n                            return;\n                        }\n                        if (line_settings.convertLinks) {\n                            string = links(string);\n                        }\n                        var raw_string = string;\n                        string = crlf($.terminal.normalize(string));\n                        string = $.terminal.encode(string, {\n                            tabs: settings.tabs\n                        });\n                        //string = $.terminal.normalize(string);\n                        var array;\n                        var cols = line_settings.cols = self.cols();\n                        if (should_wrap(string, line_settings)) {\n                            var words = line_settings.keepWords;\n                            array = $.terminal.split_equal(string, cols, words);\n                        } else if (string.match(/\\n/)) {\n                            array = string.split(/\\n/);\n                        }\n                    }\n                } else {\n                    raw_string = '';\n                }\n                var arg = array || string;\n                if (line_cache && key && use_cache) {\n                    line_cache.set(key, {input: arg, raw: raw_string});\n                }\n                buffer.append(arg, line.index, line_settings, raw_string);\n            } catch (e) {\n                buffer.clear();\n                // don't display exception if exception throw in terminal\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL');\n                } else {\n                    alert_exception('[Internal Exception(process_line)]', e);\n                }\n            }\n            // is it work with unpromise that ignore undefined\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Update terminal lines\n        // ---------------------------------------------------------------------\n        function redraw(options) {\n            options = $.extend({}, {\n                // should be used when single line is updated\n                update: false,\n                // should be used if you want to scroll to bottom after redraw\n                scroll: true\n            }, options || {});\n            if (!options.update) {\n                command_line.resize(num_chars);\n                // we don't want reflow while processing lines\n                var detached_output = output.empty().detach();\n            }\n            try {\n                buffer.clear();\n                unpromise(lines.render(self.rows(), function(lines_to_show) {\n                    return lines_to_show.map(function(line) {\n                        return process_line(line);\n                    });\n                }), function() {\n                    self.flush(options);\n                    if (!options.update) {\n                        command_line.before(detached_output); // reinsert output\n                    }\n                    fire_event('onAfterRedraw');\n                });\n            } catch (e) {\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL (redraw)');\n                } else {\n                    alert_exception('[redraw]', e);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function limit output lines based on outputLimit option\n        // ---------------------------------------------------------------------\n        function limit_lines() {\n            if (settings.outputLimit >= 0) {\n                var limit;\n                if (settings.outputLimit === 0) {\n                    limit = self.rows();\n                } else {\n                    limit = settings.outputLimit;\n                }\n                var $lines = output.find('> div > div');\n                if ($lines.length + 1 > limit) {\n                    var max = $lines.length - limit + 1;\n                    var for_remove = $lines.slice(0, max);\n                    // you can't get parent if you remove the\n                    // element so we first get the parent\n                    var parents = for_remove.parent();\n                    for_remove.remove();\n                    parents.each(function() {\n                        var $self = $(this);\n                        if ($self.is(':empty')) {\n                            unmount($self);\n                            // there can be divs inside parent that\n                            // was not removed\n                            $self.remove();\n                        }\n                    });\n                    lines.limit_snapshot(max);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display user greetings or terminal signature\n        // ---------------------------------------------------------------------\n        function show_greetings() {\n            if (settings.greetings === undefined) {\n                // signature have ascii art so it's not suite for screen readers\n                self.echo(self.signature, {finalize: a11y_hide, formatters: false});\n            } else if (settings.greetings) {\n                var type = typeof settings.greetings;\n                if (type === 'string') {\n                    self.echo(settings.greetings);\n                } else if (type === 'function') {\n                    self.echo(function() {\n                        try {\n                            return settings.greetings.call(self, self.echo);\n                        } catch (e) {\n                            settings.greetings = null;\n                            display_exception(e, 'greetings');\n                        }\n                    });\n                } else {\n                    self.error(strings().wrongGreetings);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display prompt and last command\n        // ---------------------------------------------------------------------\n        function echo_command(command) {\n            if (typeof command === 'undefined') {\n                command = self.get_command();\n            }\n            // true will return last rendered string\n            var prompt = command_line.prompt(true);\n            var mask = command_line.mask();\n            switch (typeof mask) {\n                case 'string':\n                    command = command.replace(/./g, mask);\n                    break;\n                case 'boolean':\n                    if (mask) {\n                        command = command.replace(/./g, settings.maskChar);\n                    } else {\n                        command = $.terminal.escape_formatting(command);\n                    }\n                    break;\n            }\n            var options = {\n                exec: false,\n                formatters: false,\n                finalize: function finalize(div) {\n                    a11y_hide(div.addClass('terminal-command'));\n                    fire_event('onEchoCommand', [div, command]);\n                }\n            };\n            command = $.terminal.apply_formatters(command, {command: true});\n            self.echo(prompt + command, options);\n        }\n        // ---------------------------------------------------------------------\n        function have_scrollbar() {\n            return fill.outerWidth() !== self.outerWidth();\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function that restore state. Call import_view or exec\n        // ---------------------------------------------------------------------\n        function restore_state(spec) {\n            // spec [terminal_id, state_index, command]\n            var terminal = terminals.get()[spec[0]];\n            if (!terminal) {\n                throw new $.terminal.Exception(strings().invalidTerminalId);\n            }\n            var command_idx = spec[1];\n            if (save_state[command_idx]) { // state exists\n                terminal.import_view(save_state[command_idx]);\n            } else {\n                // restore state\n                change_hash = false;\n                var command = spec[2];\n                if (command) {\n                    terminal.exec(command).done(function() {\n                        change_hash = true;\n                        save_state[command_idx] = terminal.export_view();\n                    });\n                }\n            }\n            /*if (spec[3].length) {\n                restore_state(spec[3]);\n            }*/\n        }\n        // ---------------------------------------------------------------------\n        function make_label_error(label) {\n            return function(e) {\n                self.error('[' + label + '] ' + (e.message || e)).resume();\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function maybe_update_hash() {\n            if (change_hash) {\n                fire_hash_change = false;\n                location.hash = '#' + JSON.stringify(hash_commands);\n                setTimeout(function() {\n                    fire_hash_change = true;\n                }, 100);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Wrapper over interpreter, it implements exit and catches all\n        // :: exeptions from user code and displays them on the terminal\n        // ---------------------------------------------------------------------\n        var first_command = true;\n        var resume_callbacks = [];\n        function commands(command, silent, exec) {\n            function init_state() {\n                // execHash need first empty command too\n                if (settings.historyState || settings.execHash && exec) {\n                    if (!save_state.length) {\n                        // first command in first terminal don't have hash\n                        self.save_state();\n                    } else {\n                        self.save_state(null);\n                    }\n                }\n            }\n            // -----------------------------------------------------------------\n            function before_async_exec() {\n                // variables defined later in commands\n                if (!exec) {\n                    change_hash = true;\n                    if (settings.historyState) {\n                        self.save_state(command, false);\n                    }\n                    change_hash = saved_change_hash;\n                }\n            }\n            // -----------------------------------------------------------------\n            function after_exec() {\n                deferred.resolve();\n                fire_event('onAfterCommand', [command]);\n            }\n            // -----------------------------------------------------------------\n            function show(result) {\n                if (typeof result !== 'undefined') {\n                    display_object(result);\n                }\n                after_exec();\n                self.resume();\n            }\n            // -----------------------------------------------------------------\n            function is_animation_promise(ret) {\n                return is_function(ret.done || ret.then) && animating;\n            }\n            // -----------------------------------------------------------------\n            function invoke() {\n                // Call user interpreter function\n                var result = interpreter.interpreter.call(self, command, self);\n                before_async_exec();\n                if (result) {\n                    // auto pause/resume when user return promises\n                    // it should not pause when user return promise from read()\n                    if (!force_awake) {\n                        if (is_animation_promise(result)) {\n                            paused = true;\n                        } else {\n                            self.pause(settings.softPause);\n                        }\n                    }\n                    force_awake = false;\n                    var error = make_label_error('Command');\n                    // when for native Promise object work only in jQuery 3.x\n                    if (is_function(result.done || result.then)) {\n                        return unpromise(result, show, error);\n                    } else {\n                        return $.when(result).done(show).catch(error);\n                    }\n                } else {\n                    if (paused) {\n                        resume_callbacks.push(function() {\n                            // exec with resume/pause in user code\n                            after_exec();\n                        });\n                    } else {\n                        after_exec();\n                    }\n                    return deferred.promise();\n                }\n            }\n            // -----------------------------------------------------------------\n            // first command store state of the terminal before the command get\n            // executed\n            if (first_command) {\n                first_command = false;\n                init_state();\n            }\n            try {\n                // this callback can disable commands\n                if (fire_event('onBeforeCommand', [command]) === false) {\n                    return;\n                }\n                if (exec) {\n                    prev_exec_cmd = command.trim();\n                    prev_command = $.terminal.split_command(prev_exec_cmd);\n                } else {\n                    prev_command = $.terminal.split_command(command);\n                }\n                if (!ghost()) {\n                    // exec execute this function wihout the help of cmd plugin\n                    // that add command to history on enter\n                    if (exec && (is_function(settings.historyFilter) &&\n                                 settings.historyFilter(command) ||\n                                 command.match(settings.historyFilter))) {\n                        command_line.history().append(command);\n                    }\n                }\n                var interpreter = interpreters.top();\n                if (!silent && settings.echoCommand) {\n                    echo_command(command);\n                }\n                // new promise will be returned to exec that will resolve his\n                // returned promise\n                var deferred = new $.Deferred();\n                // we need to save sate before commands is deleyd because\n                // execute_extended_command disable it and it can be executed\n                // after delay\n                var saved_change_hash = change_hash;\n                if (command.match(/^\\s*login\\s*$/) && self.token(true)) {\n                    before_async_exec();\n                    if (self.level() > 1) {\n                        self.logout(true);\n                    } else {\n                        self.logout();\n                    }\n                    after_exec();\n                } else if (settings.exit && command.match(/^\\s*exit\\s*$/) &&\n                           !in_login) {\n                    before_async_exec();\n                    var level = self.level();\n                    if (level === 1 && self.get_token() || level > 1) {\n                        if (self.get_token(true)) {\n                            self.set_token(undefined, true);\n                        }\n                        self.pop();\n                    }\n                    after_exec();\n                } else if (settings.clear && command.match(/^\\s*clear\\s*$/) &&\n                           !in_login) {\n                    before_async_exec();\n                    self.clear();\n                    after_exec();\n                } else {\n                    var ret = invoke();\n                    if (ret) {\n                        return ret;\n                    }\n                }\n                return deferred.promise();\n            } catch (e) {\n                display_exception(e, 'USER', exec);\n                self.resume();\n                if (exec) {\n                    throw e;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: The logout function removes Storage, disables history and runs\n        // :: the login function. This function is called only when options.login\n        // :: function is defined. The check for this is in the self.pop method\n        // ---------------------------------------------------------------------\n        function global_logout() {\n            if (fire_event('onBeforeLogout', [], true) === false) {\n                return;\n            }\n            clear_loging_storage();\n            fire_event('onAfterlogout', [], true);\n            self.login(global_login_fn, true, initialize);\n        }\n        // ---------------------------------------------------------------------\n        function clear_loging_storage() {\n            var name = self.prefix_name(true) + '_';\n            storage.remove(name + 'token');\n            storage.remove(name + 'login');\n        }\n        // ---------------------------------------------------------------------\n        // :: Save the interpreter name for use with purge\n        // ---------------------------------------------------------------------\n        function maybe_append_name(interpreter_name) {\n            var storage_key = self.prefix_name() + '_interpreters';\n            var names = storage.get(storage_key);\n            if (names) {\n                names = JSON.parse(names);\n            } else {\n                names = [];\n            }\n            if ($.inArray(interpreter_name, names) === -1) {\n                names.push(interpreter_name);\n                storage.set(storage_key, JSON.stringify(names));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function enables history, sets prompt, runs interpreter function\n        // ---------------------------------------------------------------------\n        function prepare_top_interpreter(silent) {\n            var interpreter = interpreters.top();\n            var name = self.prefix_name(true);\n            if (!ghost()) {\n                maybe_append_name(name);\n            }\n            var login = self.login_name(true);\n            command_line.name(name + (login ? '_' + login : ''));\n            var prompt = interpreter.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            if (prompt !== command_line.prompt()) {\n                if (is_function(interpreter.prompt)) {\n                    // prevent flicker of old prompt until async prompt finishes\n                    command_line.prompt('');\n                }\n                command_line.prompt(interpreter.prompt);\n            }\n            if (typeof interpreter.history !== 'undefined') {\n                self.history().toggle(interpreter.history);\n            }\n            if ($.isPlainObject(interpreter.keymap)) {\n                command_line.keymap(null).keymap($.extend(\n                    {},\n                    terminal_init_keymap,\n                    $.omap(interpreter.keymap, function(name, fun) {\n                        return function() {\n                            var args = [].slice.call(arguments);\n                            try {\n                                return fun.apply(self, args);\n                            } catch (e) {\n                                display_exception(e, 'USER KEYMAP');\n                            }\n                        };\n                    })\n                ));\n            }\n            command_line.set('');\n            init_queue.resolve();\n            if (!silent && is_function(interpreter.onStart)) {\n                interpreter.onStart.call(self, self);\n            }\n        }\n        // ---------------------------------------------------------------------\n        function fire_event(name, args, skip_local) {\n            args = (args || []).concat([self]); // create new array\n            // even can be fired before interpreters is created\n            var top = interpreters && interpreters.top();\n            if (top && is_function(top[name]) && !skip_local) {\n                try {\n                    return top[name].apply(self, args);\n                } catch (e) {\n                    delete top[name];\n                    display_exception(e, name);\n                }\n            } else if (is_function(settings[name])) {\n                try {\n                    return settings[name].apply(self, args);\n                } catch (e) {\n                    settings[name] = null;\n                    display_exception(e, name);\n                }\n            }\n        }\n        var scroll_to_view = (function() {\n            function scroll_to_view(visible) {\n                if (!visible) {\n                    // try catch for Node.js unit tests\n                    try {\n                        self.scroll_to(self.find('.cmd-cursor-line'));\n                        return true;\n                    } catch (e) {\n                        return true;\n                    }\n                }\n            }\n            // we don't want debounce in Unit Tests\n            if (typeof global !== 'undefined' && typeof global.it === 'function') {\n                return scroll_to_view;\n            }\n            return debounce(scroll_to_view, 100, {\n                leading: true,\n                trailing: false\n            });\n        })();\n        // ---------------------------------------------------------------------\n        function make_cursor_visible() {\n            var cursor = self.find('.cmd-cursor-line');\n            return cursor.is_fully_in_viewport(self).then(scroll_to_view);\n        }\n        // ---------------------------------------------------------------------\n        function replace_hash(state) {\n            if (typeof history !== 'undefined' && history.replaceState) {\n                var new_hash = '#' + JSON.stringify(state);\n                var url = location.href.replace(/#.*$/, new_hash);\n                history.replaceState(null, '', url);\n            }\n        }\n        // ---------------------------------------------------------------------\n        function hashchange() {\n            if (fire_hash_change && settings.execHash) {\n                try {\n                    if (location.hash) {\n                        var hash = location.hash.replace(/^#/, '');\n                        hash_commands = JSON.parse(decodeURIComponent(hash));\n                    } else {\n                        hash_commands = [];\n                    }\n                    if (hash_commands.length) {\n                        restore_state(hash_commands[hash_commands.length - 1]);\n                    } else if (save_state[0]) {\n                        self.import_view(save_state[0]);\n                    }\n                } catch (e) {\n                    display_exception(e, 'TERMINAL');\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function initialize() {\n            prepare_top_interpreter();\n            show_greetings();\n            if (lines.length) {\n                // for case when showing long error before init\n                if (echo_delay.length) {\n                    // for case when greetting is async function\n                    $.when.apply($, echo_delay).then(self.refresh);\n                } else {\n                    self.refresh();\n                }\n            }\n            function next() {\n                onPause = $.noop;\n                if (!was_paused && self.enabled()) {\n                    // resume login if user didn't call pause in onInit\n                    // if user pause in onInit wait with exec until it\n                    // resume\n                    self.resume(true);\n                }\n            }\n            // was_paused flag is workaround for case when user call exec before\n            // login and pause in onInit, 3rd exec will have proper timing (will\n            // execute after onInit resume)\n            var was_paused = false;\n            if (is_function(settings.onInit)) {\n                onPause = function() { // local in terminal\n                    was_paused = true;\n                };\n                var ret;\n                try {\n                    ret = settings.onInit.call(self, self);\n                } catch (e) {\n                    display_exception(e, 'OnInit');\n                } finally {\n                    if (!is_promise(ret)) {\n                        next();\n                    } else {\n                        ret.then(next).catch(function(e) {\n                            display_exception(e, 'OnInit');\n                            next();\n                        });\n                    }\n                }\n            }\n            if (first_instance) {\n                first_instance = false;\n                $(window).on('hashchange', hashchange);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: If Ghost don't store anything in localstorage\n        // ---------------------------------------------------------------------\n        function ghost() {\n            return in_login || command_line.mask() !== false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Keydown event handler\n        // ---------------------------------------------------------------------\n        function user_key_down(e) {\n            var result, top = interpreters.top();\n            if (is_function(top.keydown)) {\n                result = top.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            } else if (is_function(settings.keydown)) {\n                result = settings.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            }\n        }\n        var keymap = {\n            'CTRL+D': function(e, original) {\n                if (!in_login) {\n                    if (command_line.get() === '') {\n                        if (interpreters.size() > 1 ||\n                            is_function(global_login_fn)) {\n                            self.pop('');\n                        } else {\n                            self.resume();\n                        }\n                    } else {\n                        original();\n                    }\n                }\n                return false;\n            },\n            'CTRL+C': function() {\n                with_selection(function(html) {\n                    if (html === '') {\n                        var command = self.get_command();\n                        var position = self.get_position();\n                        command = command.slice(0, position) + '^C' +\n                            command.slice(position + 2);\n                        echo_command(command);\n                        self.set_command('');\n                    } else {\n                        var clip = self.find('textarea');\n                        text_to_clipboard(clip, process_selected_html(html));\n                    }\n                });\n                return false;\n            },\n            'CTRL+L': function() {\n                self.clear();\n                return false;\n            },\n            'TAB': function(e, orignal) {\n                // TODO: move this to cmd plugin\n                //       add completion = array | function\n                //       !!! Problem complete more then one key need terminal\n                var top = interpreters.top(), completion, caseSensitive;\n                if (typeof top.caseSensitiveAutocomplete !== 'undefined') {\n                    caseSensitive = top.caseSensitiveAutocomplete;\n                } else {\n                    caseSensitive = settings.caseSensitiveAutocomplete;\n                }\n                if (settings.completion &&\n                    get_type(settings.completion) !== 'boolean' &&\n                    top.completion === undefined) {\n                    completion = settings.completion;\n                } else {\n                    completion = top.completion;\n                }\n                if (completion === 'settings') {\n                    completion = settings.completion;\n                }\n                function resolve(commands) {\n                    // local copy\n                    commands = commands.slice();\n                    // default commands should not match for arguments\n                    if (!self.before_cursor(false).match(/\\s/)) {\n                        if (settings.clear && $.inArray('clear', commands) === -1) {\n                            commands.push('clear');\n                        }\n                        if (settings.exit && $.inArray('exit', commands) === -1) {\n                            commands.push('exit');\n                        }\n                    }\n                    self.complete(commands, {\n                        echo: true,\n                        word: settings.wordAutocomplete,\n                        escape: settings.completionEscape,\n                        caseSensitive: caseSensitive,\n                        echoCommand: settings.doubleTabEchoCommand,\n                        doubleTab: settings.doubleTab\n                    });\n                }\n                if (completion) {\n                    switch (get_type(completion)) {\n                        case 'function':\n                            var string = self.before_cursor(settings.wordAutocomplete);\n                            if (completion.length === 3) {\n                                var error = new Error(strings().comletionParameters);\n                                display_exception(error, 'USER');\n                                return false;\n                            }\n                            var result = completion.call(self, string, resolve);\n                            unpromise(result, resolve, make_label_error('Completion'));\n                            break;\n                        case 'array':\n                            resolve(completion);\n                            break;\n                        default:\n                            throw new $.terminal.Exception(strings().invalidCompletion);\n                    }\n                } else {\n                    orignal();\n                }\n                return false;\n            },\n            'CTRL+V': function(e, original) {\n                original(e);\n                self.oneTime(200, function() {\n                    self.scroll_to_bottom();\n                });\n                return true;\n            },\n            'CTRL+TAB': function() {\n                if (terminals.length() > 1) {\n                    self.focus(false);\n                    return false;\n                }\n            },\n            'PAGEDOWN': function() {\n                self.scroll(self.height());\n            },\n            'PAGEUP': function() {\n                self.scroll(-self.height());\n            }\n        };\n        // ---------------------------------------------------------------------\n        function key_down(e) {\n            // Prevent to be executed by cmd: CTRL+D, TAB, CTRL+TAB (if more\n            // then one terminal)\n            var result, i;\n            if (animating) {\n                return false;\n            }\n            if (self.enabled()) {\n                if (!self.paused()) {\n                    result = user_key_down(e);\n                    if (result !== undefined) {\n                        return result;\n                    }\n                    if (e.which !== 9) { // not a TAB\n                        tab_count = 0;\n                    }\n                } else {\n                    if (!settings.pauseEvents) {\n                        result = user_key_down(e);\n                        if (result !== undefined) {\n                            return result;\n                        }\n                    }\n                    if (e.which === 68 && e.ctrlKey) { // CTRL+D (if paused)\n                        if (settings.pauseEvents) {\n                            result = user_key_down(e);\n                            if (result !== undefined) {\n                                return result;\n                            }\n                        }\n                        if (requests.length) {\n                            for (i = requests.length; i--;) {\n                                var r = requests[i];\n                                if (r.readyState !== 4) {\n                                    try {\n                                        r.abort();\n                                    } catch (error) {\n                                        if (is_function(settings.exceptionHandler)) {\n                                            settings.exceptionHandler.call(\n                                                self,\n                                                e,\n                                                'AJAX ABORT'\n                                            );\n                                        } else {\n                                            self.error(strings().ajaxAbortError);\n                                        }\n                                    }\n                                }\n                            }\n                            requests = [];\n                        }\n                        self.resume();\n                    }\n                    return false;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function key_press(e) {\n            var top = interpreters.top();\n            if (enabled && (!paused || !settings.pauseEvents)) {\n                if (is_function(top.keypress)) {\n                    return top.keypress.call(self, e, self);\n                } else if (is_function(settings.keypress)) {\n                    return settings.keypress.call(self, e, self);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Typing animation generator\n        // ---------------------------------------------------------------------\n        function typed(finish_typing_fn) {\n            return function typing_animation(message, options) {\n                var formattted = $.terminal.apply_formatters(message);\n                animating = true;\n                var prompt = self.get_prompt();\n                var char_i = 0;\n                var len = $.terminal.length(formattted);\n                if (message.length > 0) {\n                    var new_prompt = '';\n                    if (options.prompt) {\n                        new_prompt = options.prompt;\n                    } else {\n                        self.set_prompt('');\n                    }\n                    var bottom = self.is_bottom();\n                    var interval = setInterval(function() {\n                        var chr = $.terminal.substring(formattted, char_i, char_i + 1);\n                        new_prompt += chr;\n                        self.set_prompt(new_prompt);\n                        if (chr === '\\n' && bottom) {\n                            self.scroll_to_bottom();\n                        }\n                        char_i++;\n                        if (char_i === len) {\n                            clearInterval(interval);\n                            setTimeout(function() {\n                                // swap command with prompt\n                                finish_typing_fn(message, prompt, options);\n                                animating = false;\n                            }, options.delay);\n                        }\n                    }, options.delay);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        var typed_prompt = typed(function(message, _, options) {\n            self.set_prompt(message);\n            options.finalize();\n        });\n        // ---------------------------------------------------------------------\n        var typed_message = typed(function(message, prompt, options) {\n            self.set_prompt(prompt);\n            self.echo(message, $.extend({}, options, {typing: false}));\n        });\n        // ---------------------------------------------------------------------\n        var typed_enter = (function() {\n            var helper = typed(function(message, prompt, options) {\n                self.set_prompt(prompt);\n                with_prompt(prompt, function(prompt) {\n                    self.echo(prompt + message, $.extend({}, options, {typing: false}));\n                }, self);\n            });\n            return function(prompt, message, options) {\n                return helper(message, $.extend({}, options, {prompt: prompt}));\n            };\n        })();\n        // ---------------------------------------------------------------------\n        function with_typing(kind, else_fn, finalize_fn) {\n            return function with_typing_fn(string, options) {\n                var d = new $.Deferred();\n                when_ready(function ready() {\n                    var locals = $.extend({\n                        typing: false,\n                        delay: settings.execAnimationDelay\n                    }, options);\n                    if (locals.typing) {\n                        if (typeof string !== 'string') {\n                            return d.reject(kind + ': Typing animation require string');\n                        }\n                        if (typeof locals.delay !== 'number' || isNaN(locals.delay)) {\n                            return d.reject(kind + ': Invalid argument, delay need to' +\n                                            ' be a number');\n                        }\n                        var p = self.typing(kind, locals.delay, string, locals);\n                        p.then(function() {\n                            d.resolve();\n                        });\n                    } else {\n                        else_fn(string, locals);\n                    }\n                    if (is_function(finalize_fn)) {\n                        finalize_fn(string, locals);\n                    }\n                });\n                if (options && options.typing) {\n                    return d.promise();\n                }\n                return self;\n            };\n        }\n        // ---------------------------------------------------------------------\n        function ready(queue) {\n            return function(fun) {\n                queue.add(fun);\n            };\n        }\n        // ---------------------------------------------------------------------\n        function strings() {\n            return $.extend(\n                {},\n                $.terminal.defaults.strings,\n                settings && settings.strings || {}\n            );\n        }\n        // ---------------------------------------------------------------------\n        var self = this;\n        if (this.length > 1) {\n            return this.each(function() {\n                $.fn.terminal.call(\n                    $(this),\n                    init_interpreter,\n                    $.extend({name: self.selector}, options)\n                );\n            });\n        }\n        var body_terminal;\n        if (self.is('body,html')) {\n            // terminal already exists on body\n            if (self.hasClass('full-screen-terminal')) {\n                var data = self.find('> .terminal').data('terminal');\n                if (data) {\n                    return data;\n                }\n            }\n            body_terminal = self;\n            self = $('<div/>').appendTo('body');\n            $('body').addClass('full-screen-terminal');\n        } else if (self.data('terminal')) {\n            // terminal already exists\n            return self.data('terminal');\n        }\n        // -----------------------------------------------------------------\n        // TERMINAL METHODS\n        // -----------------------------------------------------------------\n        var public_api = $.omap({\n            id: function() {\n                return terminal_id;\n            },\n            // -------------------------------------------------------------\n            // :: Clear the output\n            // -------------------------------------------------------------\n            clear: function() {\n                if (fire_event('onClear') !== false) {\n                    buffer.clear();\n                    lines.clear(function(i) {\n                        return get_node(i);\n                    });\n                    output[0].innerHTML = '';\n                    self.prop({scrollTop: 0});\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return an object that can be used with import_view to\n            // :: restore the state\n            // -------------------------------------------------------------\n            export_view: function() {\n                var user_export = fire_event('onExport');\n                user_export = user_export || {};\n                return $.extend({}, {\n                    focus: enabled,\n                    mask: command_line.mask(),\n                    prompt: self.get_prompt(),\n                    command: self.get_command(),\n                    position: command_line.position(),\n                    lines: clone(lines.data()),\n                    interpreters: interpreters.clone(),\n                    history: command_line.history().data\n                }, user_export);\n            },\n            // -------------------------------------------------------------\n            // :: Restore the state of the previous exported view\n            // -------------------------------------------------------------\n            import_view: function(view) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'import_view'));\n                }\n                fire_event('onImport', [view]);\n                when_ready(function ready() {\n                    self.set_prompt(view.prompt);\n                    self.set_command(view.command);\n                    command_line.position(view.position);\n                    command_line.mask(view.mask);\n                    if (view.focus) {\n                        self.focus();\n                    }\n                    lines.import(clone(view.lines).filter(function(line) {\n                        return line[0];\n                    }));\n                    if (view.interpreters instanceof Stack) {\n                        interpreters = view.interpreters;\n                    }\n                    if (settings.importHistory) {\n                        command_line.history().set(view.history);\n                    }\n                    redraw();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Store current terminal state\n            // -------------------------------------------------------------\n            save_state: function(command, ignore_hash, index) {\n                // save_state.push({view:self.export_view(), join:[]});\n                if (typeof index !== 'undefined') {\n                    save_state[index] = self.export_view();\n                } else {\n                    save_state.push(self.export_view());\n                }\n                if (!$.isArray(hash_commands)) {\n                    hash_commands = [];\n                }\n                if (command !== undefined && !ignore_hash) {\n                    var state = [\n                        terminal_id,\n                        save_state.length - 1,\n                        command\n                    ];\n                    hash_commands.push(state);\n                    maybe_update_hash();\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Execute a command, it will handle commands that do AJAX\n            // :: calls and have delays, if the second argument is set to\n            // :: true it will not echo executed command\n            // :: if second argument is object is used as options\n            // -------------------------------------------------------------\n            exec: function(command, silent, options) {\n                function invoke(silent) {\n                    // commands may return promise from user code\n                    // it will resolve exec promise when user promise\n                    // is resolved\n                    var ret = commands(command, silent, true);\n                    unpromise(ret, function() {\n                        // reset prev command for push called after exec\n                        // so push didn't get name/prompt from exec command\n                        prev_command = null;\n                        d.resolve();\n                    }, function() {\n                        prev_command = null;\n                        d.reject();\n                    });\n                }\n                if (silent && typeof silent === 'object') {\n                    options = silent;\n                    silent = null;\n                }\n                var exec_settings = $.extend({\n                    deferred: null,\n                    silent: false,\n                    typing: false,\n                    delay: settings.execAnimationDelay\n                }, options);\n                if (silent === null) {\n                    silent = exec_settings.silent;\n                }\n                if (!is_deferred(exec_settings.deferred)) {\n                    exec_settings.deferred = new $.Deferred();\n                }\n                var d = exec_settings.deferred;\n                cmd_ready(function ready() {\n                    if ($.isArray(command)) {\n                        (function recur() {\n                            var cmd = command.shift();\n                            if (cmd) {\n                                self.exec(cmd, silent, options).done(recur);\n                            } else {\n                                d.resolve();\n                            }\n                        })();\n                    } else if (paused) {\n                        // both commands executed here (resume will call Term::exec)\n                        // delay command multiple time\n                        delayed_commands.push([command, silent, exec_settings]);\n                    } else if (exec_settings.typing && !silent) {\n                        var delay = exec_settings.delay;\n                        paused = true;\n                        var ret = self.typing('enter', delay, command, {\n                            delay: delay\n                        });\n                        ret.then(function() {\n                            paused = false;\n                            invoke(true);\n                        });\n                        d.then(function() {\n                            paused = false;\n                        });\n                    } else {\n                        invoke(silent);\n                    }\n                });\n                // while testing it didn't executed last exec when using this\n                // for resolved deferred\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: bypass login function that wait untill you type user/pass\n            // :: it hide implementation detail\n            // -------------------------------------------------------------\n            autologin: function(user, token, silent) {\n                self.trigger('terminal.autologin', [user, token, silent]);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function changes the prompt of the command line to login\n            // :: with a password and calls the user login function with\n            // :: the callback that expects a token. The login is successful\n            // :: if the user calls it with value that is truthy\n            // -------------------------------------------------------------\n            login: function(auth, infinite, success, error) {\n                logins.push([].slice.call(arguments));\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'login'));\n                }\n                if (!is_function(auth)) {\n                    throw new Error(strings().loginIsNotAFunction);\n                }\n                in_login = true;\n                if (self.token() && self.level() === 1 && !autologin) {\n                    in_login = false; // logout will call login\n                    self.logout(true);\n                } else if (self.token(true) && self.login_name(true)) {\n                    in_login = false;\n                    if (is_function(success)) {\n                        success();\n                    }\n                    return self;\n                }\n                // don't store login data in history\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                function popUserPass() {\n                    while (self.level() > level) {\n                        self.pop(undefined, true);\n                    }\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }\n                // so we know how many times call pop\n                var level = self.level();\n                function login_callback(user, token, silent) {\n                    if (token) {\n                        popUserPass();\n                        var name = self.prefix_name(true) + '_';\n                        storage.set(name + 'token', token);\n                        storage.set(name + 'login', user);\n                        in_login = false;\n                        fire_event('onAfterLogin', [user, token]);\n                        if (is_function(success)) {\n                            // will be used internaly since users know\n                            // when login success (they decide when\n                            // it happen by calling the callback -\n                            // this funtion)\n                            success();\n                        }\n                    } else {\n                        if (infinite) {\n                            if (!silent) {\n                                self.error(strings().wrongPasswordTryAgain);\n                            }\n                            self.pop(undefined, true).set_mask(false);\n                        } else {\n                            in_login = false;\n                            if (!silent) {\n                                self.error(strings().wrongPassword);\n                            }\n                            self.pop(undefined, true).pop(undefined, true);\n                        }\n                        // used only to call pop in push\n                        if (is_function(error)) {\n                            error();\n                        }\n                    }\n                    if (self.paused()) {\n                        self.resume();\n                    }\n                    self.off('terminal.autologin');\n                }\n                self.on('terminal.autologin', function(event, user, token, silent) {\n                    if (fire_event('onBeforeLogin', [user, token]) === false) {\n                        return;\n                    }\n                    login_callback(user, token, silent);\n                });\n                self.push(function(user) {\n                    self.set_mask(settings.maskChar).push(function(pass) {\n                        try {\n                            if (fire_event('onBeforeLogin', [user, pass]) === false) {\n                                popUserPass();\n                                return;\n                            }\n                            self.pause();\n                            var ret = auth.call(self, user, pass, function(\n                                token,\n                                silent) {\n                                login_callback(user, token, silent);\n                            });\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, function(token) {\n                                    login_callback(user, token);\n                                }).catch(function(err) {\n                                    self.pop(undefined, true).pop(undefined, true);\n                                    self.error(err.message);\n                                    if (is_function(error)) {\n                                        error();\n                                    }\n                                    if (self.paused()) {\n                                        self.resume();\n                                    }\n                                    self.off('terminal.autologin');\n                                });\n                            }\n                        } catch (e) {\n                            display_exception(e, 'AUTH');\n                        }\n                    }, {\n                        prompt: strings().password + ': ',\n                        name: 'password'\n                    });\n                }, {\n                    prompt: strings().login + ': ',\n                    name: 'login'\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: User defined settings and defaults as well\n            // -------------------------------------------------------------\n            settings: function() {\n                return settings;\n            },\n            // -------------------------------------------------------------\n            // :: Get string before cursor\n            // -------------------------------------------------------------\n            before_cursor: function(word) {\n                var pos = command_line.position();\n                var command = command_line.get().slice(0, pos);\n                var cmd_strings = command.split(' ');\n                var string; // string before cursor that will be completed\n                if (word) {\n                    if (cmd_strings.length === 1) {\n                        string = cmd_strings[0];\n                    } else {\n                        var m = command.match(/(\\\\?\")/g);\n                        var double_quotes = m ? m.filter(function(chr) {\n                            return !chr.match(/^\\\\/);\n                        }).length : 0;\n                        m = command.match(/'/g);\n                        var single_quote = m ? m.length : 0;\n                        if (single_quote % 2 === 1) {\n                            string = command.match(/('[^']*)$/)[0];\n                        } else if (double_quotes % 2 === 1) {\n                            string = command.match(/(\"(?:[^\"]|\\\\\")*)$/)[0];\n                        } else {\n                            string = cmd_strings[cmd_strings.length - 1];\n                            for (i = cmd_strings.length - 1; i > 0; i--) {\n                                // treat escape space as part of the string\n                                var prev_string = cmd_strings[i - 1];\n                                if (prev_string[prev_string.length - 1] === '\\\\') {\n                                    string = cmd_strings[i - 1] + ' ' + string;\n                                } else {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    string = command;\n                }\n                return string;\n            },\n            // -------------------------------------------------------------\n            // :: complete word or command based on array of words\n            // -------------------------------------------------------------\n            complete: function(commands, options) {\n                options = $.extend({\n                    word: true,\n                    echo: false,\n                    escape: true,\n                    echoCommand: false,\n                    caseSensitive: true,\n                    doubleTab: null\n                }, options || {});\n                var sensitive = options.caseSensitive;\n                // cursor can be in the middle of the command\n                // so we need to get the text before the cursor\n                var string = self.before_cursor(options.word).replace(/\\\\\"/g, '\"');\n                var quote = false;\n                if (options.word) {\n                    if (string.match(/^\"/)) {\n                        quote = '\"';\n                    } else if (string.match(/^'/)) {\n                        quote = \"'\";\n                    }\n                    if (quote) {\n                        string = string.replace(/^[\"']/, '');\n                    }\n                }\n                if (tab_count % 2 === 0) {\n                    command = self.before_cursor(options.word);\n                } else {\n                    var test = self.before_cursor(options.word);\n                    if (test !== command) {\n                        // command line changed between TABS - ignore\n                        return;\n                    }\n                }\n                var safe = $.terminal.escape_regex(string);\n                if (options.escape) {\n                    safe = safe.replace(/(\\\\+)([\"'() ])/g, function(_, slash, chr) {\n                        if (chr.match(/[()]/)) {\n                            return slash + '\\\\?\\\\' + chr;\n                        } else {\n                            return slash + '?' + chr;\n                        }\n                    });\n                }\n                function escape(string) {\n                    if (quote === '\"') {\n                        string = string.replace(/\"/g, '\\\\\"');\n                    }\n                    if (!quote && options.escape) {\n                        string = string.replace(/([\"'() ])/g, '\\\\$1');\n                    }\n                    return string;\n                }\n                function matched_strings() {\n                    var matched = [];\n                    for (var i = commands.length; i--;) {\n                        if (commands[i].match(/\\n/) && options.word) {\n                            warn('If you use commands with newlines you ' +\n                                 'should use word option for complete or' +\n                                 ' wordAutocomplete terminal option');\n                        }\n                        if (regex.test(commands[i])) {\n                            var match = escape(commands[i]);\n                            if (!sensitive && same_case(match)) {\n                                if (string.toLowerCase() === string) {\n                                    match = match.toLowerCase();\n                                } else if (string.toUpperCase() === string) {\n                                    match = match.toUpperCase();\n                                }\n                            }\n                            matched.push(match);\n                        }\n                    }\n                    return matched;\n                }\n                var flags = sensitive ? '' : 'i';\n                var regex = new RegExp('^' + safe, flags);\n                var matched = matched_strings();\n                function replace(input, replacement) {\n                    var text = self.get_command();\n                    var pos = self.get_position();\n                    var re = new RegExp('^' + input, 'i');\n                    var pre = text.slice(0, pos);\n                    var post = text.slice(pos);\n                    var to_insert = replacement.replace(re, '') + (quote || '');\n                    self.set_command(pre + to_insert + post);\n                    self.set_position((pre + to_insert).length);\n                }\n                if (matched.length === 1) {\n                    if (options.escape) {\n                        replace(safe, matched[0]);\n                    } else {\n                        self.insert(matched[0].replace(regex, '') + (quote || ''));\n                    }\n                    command = self.before_cursor(options.word);\n                    return true;\n                } else if (matched.length > 1) {\n                    if (++tab_count >= 2) {\n                        tab_count = 0;\n                        if (options.echo) {\n                            if (is_function(options.doubleTab)) {\n                                // new API old is keep for backward compatibility\n                                if (options.echoCommand) {\n                                    echo_command();\n                                }\n                                var ret = options.doubleTab.call(\n                                    self,\n                                    string,\n                                    matched,\n                                    echo_command\n                                );\n                                if (typeof ret === 'undefined') {\n                                    return true;\n                                } else {\n                                    return ret;\n                                }\n                            } else if (options.doubleTab !== false) {\n                                echo_command();\n                                var text = matched.slice().reverse().join('\\t\\t');\n                                self.echo($.terminal.escape_brackets(text), {\n                                    keepWords: true,\n                                    formatters: false\n                                });\n                            }\n                            return true;\n                        }\n                    } else {\n                        var common = common_string(escape(string), matched, sensitive);\n                        if (common) {\n                            replace(safe, common);\n                            command = self.before_cursor(options.word);\n                            return true;\n                        }\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return commands function from top interpreter\n            // -------------------------------------------------------------\n            commands: function() {\n                return interpreters.top().interpreter;\n            },\n            // -------------------------------------------------------------\n            // :: Low Level method that overwrites interpreter\n            // -------------------------------------------------------------\n            set_interpreter: function(user_intrp, login) {\n                var defer = $.Deferred();\n                function overwrite_interpreter() {\n                    self.pause(settings.softPause);\n                    make_interpreter(user_intrp, login, function(result) {\n                        self.resume();\n                        var top = interpreters.top();\n                        $.extend(top, result);\n                        prepare_top_interpreter(true);\n                        defer.resolve();\n                    });\n                }\n                if (is_function(login)) {\n                    self.login(login, true, overwrite_interpreter);\n                } else if (get_type(user_intrp) === 'string' && login) {\n                    self.login(\n                        make_json_rpc_login(user_intrp, login),\n                        true,\n                        overwrite_interpreter\n                    );\n                } else {\n                    overwrite_interpreter();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Show user greetings or terminal signature\n            // -------------------------------------------------------------\n            greetings: function() {\n                show_greetings();\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return true if terminal is paused false otherwise\n            // -------------------------------------------------------------\n            paused: function() {\n                return paused;\n            },\n            // -------------------------------------------------------------\n            // :: Pause the terminal, it should be used for ajax calls\n            // -------------------------------------------------------------\n            pause: function(visible) {\n                cmd_ready(function ready() {\n                    onPause();\n                    paused = true;\n                    command_line.disable(visible || is_android);\n                    if (!visible) {\n                        command_line.find('.cmd-prompt').hidden();\n                    }\n                    fire_event('onPause');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Resume the previously paused terminal\n            // -------------------------------------------------------------\n            resume: function(silent) {\n                cmd_ready(function ready() {\n                    paused = false;\n                    if (enabled && terminals.front() === self) {\n                        command_line.enable(silent);\n                    }\n                    command_line.find('.cmd-prompt').visible();\n                    var original = delayed_commands;\n                    delayed_commands = [];\n                    for (var i = 0; i < original.length; ++i) {\n                        self.exec.apply(self, original[i]);\n                    }\n                    self.trigger('resume');\n                    var fn = resume_callbacks.shift();\n                    if (fn) {\n                        fn();\n                    }\n                    self.scroll_to_bottom();\n                    fire_event('onResume');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of characters that fit into the width of\n            // :: the terminal\n            // -------------------------------------------------------------\n            cols: function() {\n                if (settings.numChars) {\n                    return settings.numChars;\n                }\n                if (!num_chars || num_chars === 1000) {\n                    num_chars = get_num_chars(self, char_size);\n                }\n                return num_chars;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of lines that fit into the height of the\n            // :: terminal\n            // -------------------------------------------------------------\n            rows: function() {\n                if (settings.numRows) {\n                    return settings.numRows;\n                }\n                if (!num_rows) {\n                    num_rows = get_num_rows(self, char_size);\n                }\n                return num_rows;\n            },\n            // -------------------------------------------------------------\n            // :: Return the History object\n            // -------------------------------------------------------------\n            history: function() {\n                return command_line.history();\n            },\n            // -------------------------------------------------------------\n            // :: Return size of the terminal instance\n            // -------------------------------------------------------------\n            geometry: function() {\n                var style = window.getComputedStyle(self[0]);\n                function padding(name) {\n                    return parseInt(style.getPropertyValue('padding-' + name), 10) || 0;\n                }\n                var left = padding('left');\n                var right = padding('right');\n                var top = padding('top');\n                var bottom = padding('bottom');\n                return {\n                    terminal: {\n                        padding: {\n                            left: left,\n                            right: right,\n                            top: top,\n                            bottom: bottom\n                        },\n                        width: old_width + left + right,\n                        height: old_height + top + bottom\n                    },\n                    char: char_size,\n                    cols: this.cols(),\n                    rows: this.rows()\n                };\n            },\n            // -------------------------------------------------------------\n            // :: toggle recording of history state\n            // -------------------------------------------------------------\n            history_state: function(toggle) {\n                function run() {\n                    settings.historyState = true;\n                    if (!save_state.length) {\n                        self.save_state();\n                    } else if (terminals.length() > 1) {\n                        self.save_state(null);\n                    }\n                }\n                if (toggle) {\n                    // if set to true and if set from user command we need\n                    // not to include the command\n                    if (typeof window.setImmediate === 'undefined') {\n                        setTimeout(run, 0);\n                    } else {\n                        setImmediate(run);\n                    }\n                } else {\n                    settings.historyState = false;\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: clear the history state\n            // -------------------------------------------------------------\n            clear_history_state: function() {\n                hash_commands = [];\n                save_state = [];\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Switch to the next terminal\n            // -------------------------------------------------------------\n            next: function() {\n                if (terminals.length() === 1) {\n                    return self;\n                } else {\n                    terminals.front().disable();\n                    var next = terminals.rotate().enable();\n                    // 50 provides buffer in viewport\n                    var x = next.offset().top - 50;\n                    $('html,body').animate({scrollTop: x}, 500);\n                    try {\n                        trigger_terminal_change(next);\n                    } catch (e) {\n                        display_exception(e, 'onTerminalChange');\n                    }\n                    return next;\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Make the terminal in focus or blur depending on the first\n            // :: argument. If there is more then one terminal it will\n            // :: switch to next one, if the second argument is set to true\n            // :: the events will be not fired. Used on init\n            // -------------------------------------------------------------\n            focus: function(toggle, silent) {\n                cmd_ready(function ready() {\n                    if (terminals.length() === 1) {\n                        if (toggle === false) {\n                            self.disable(silent);\n                        } else {\n                            self.enable(silent);\n                        }\n                    } else if (toggle === false) {\n                        self.next();\n                    } else {\n                        var front = terminals.front();\n                        if (front !== self) {\n                            // there should be only from terminal enabled but tests\n                            // sometime fail because there where more them one\n                            // where cursor have blink class\n                            terminals.forEach(function(terminal) {\n                                if (terminal !== self && terminal.enabled()) {\n                                    terminal.disable(silent);\n                                }\n                            });\n                            if (!silent) {\n                                try {\n                                    trigger_terminal_change(self);\n                                } catch (e) {\n                                    display_exception(e, 'onTerminalChange');\n                                }\n                            }\n                        }\n                        terminals.set(self);\n                        self.enable(silent);\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable/Enable terminal that can be enabled by click\n            // -------------------------------------------------------------\n            freeze: function(freeze) {\n                when_ready(function ready() {\n                    if (freeze) {\n                        self.disable();\n                        frozen = true;\n                    } else {\n                        frozen = false;\n                        self.enable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: check if terminal is frozen\n            // -------------------------------------------------------------\n            frozen: function() {\n                return frozen;\n            },\n            // -------------------------------------------------------------\n            // :: Enable the terminal\n            // -------------------------------------------------------------\n            enable: function(silent) {\n                if (!enabled && !frozen) {\n                    if (num_chars === undefined) {\n                        // enabling first time\n                        self.resize();\n                    }\n                    cmd_ready(function ready() {\n                        var ret;\n                        if (!silent && !enabled) {\n                            fire_event('onFocus');\n                        }\n                        if (!silent && ret === undefined || silent) {\n                            enabled = true;\n                            if (!self.paused()) {\n                                command_line.enable(true);\n                            }\n                        }\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: function clear formatting cache if you don't longer need it\n            // :: cache is used if option useCache is set to true\n            // -------------------------------------------------------------\n            clear_cache: 'Map' in root ? function() {\n                buffer.clear_cache();\n                line_cache.clear();\n                return self;\n            } : function() {\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable the terminal\n            // -------------------------------------------------------------\n            disable: function(silent) {\n                cmd_ready(function ready() {\n                    var ret;\n                    if (!silent && enabled) {\n                        ret = fire_event('onBlur');\n                    }\n                    if (!silent && ret === undefined || silent) {\n                        enabled = false;\n                        command_line.disable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if the terminal is enabled\n            // -------------------------------------------------------------\n            enabled: function() {\n                return enabled;\n            },\n            // -------------------------------------------------------------\n            // :: Return the terminal signature depending on the size of the terminal\n            // -------------------------------------------------------------\n            signature: function() {\n                var cols = self.cols();\n                for (var i = signatures.length; i--;) {\n                    var lengths = signatures[i].map(function(line) {\n                        return line.length;\n                    });\n                    if (Math.max.apply(null, lengths) <= cols) {\n                        return signatures[i].join('\\n') + '\\n';\n                    }\n                }\n                return '';\n            },\n            // -------------------------------------------------------------\n            // :: Return the version number\n            // -------------------------------------------------------------\n            version: function() {\n                return $.terminal.version;\n            },\n            // -------------------------------------------------------------\n            // :: Return actual command line object (jquery object with cmd\n            // :: methods)\n            // -------------------------------------------------------------\n            cmd: function() {\n                return command_line;\n            },\n            // -------------------------------------------------------------\n            // :: Return the current command entered by terminal\n            // -------------------------------------------------------------\n            get_command: function() {\n                return command_line.get();\n            },\n            // -------------------------------------------------------------\n            // :: better API than echo_command that supports animation\n            // -------------------------------------------------------------\n            enter: with_typing('enter', echo_command),\n            // -------------------------------------------------------------\n            // :: Change the command line to the new one\n            // -------------------------------------------------------------\n            set_command: function(command, silent) {\n                when_ready(function ready() {\n                    // TODO: refactor to use options - breaking change\n                    if (typeof command !== 'string') {\n                        command = JSON.stringify(command);\n                    }\n                    command_line.set(command, undefined, silent);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change position of the command line\n            // -------------------------------------------------------------\n            set_position: function(position, relative) {\n                when_ready(function ready() {\n                    command_line.position(position, relative);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return position of the command line\n            // -------------------------------------------------------------\n            get_position: function() {\n                return command_line.position();\n            },\n            // -------------------------------------------------------------\n            // :: Insert text into the command line after the cursor\n            // -------------------------------------------------------------\n            insert: function(string, stay) {\n                if (typeof string === 'string') {\n                    when_ready(function ready() {\n                        var bottom = self.is_bottom();\n                        command_line.insert(string, stay);\n                        if (settings.scrollOnEcho || bottom) {\n                            self.scroll_to_bottom();\n                        }\n                    });\n                    return self;\n                } else {\n                    throw new Error(sprintf(strings().notAString, 'insert'));\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Set the prompt of the command line\n            // -------------------------------------------------------------\n            set_prompt: with_typing('prompt', function(prompt) {\n                if (is_function(prompt)) {\n                    command_line.prompt(function(callback) {\n                        return prompt.call(self, callback, self);\n                    });\n                } else {\n                    command_line.prompt(prompt);\n                }\n            }, function(prompt) {\n                interpreters.top().prompt = prompt;\n            }),\n            // -------------------------------------------------------------\n            // :: Return the prompt used by the terminal\n            // -------------------------------------------------------------\n            get_prompt: function() {\n                return interpreters.top().prompt;\n                // command_line.prompt(); - can be a wrapper\n                //return command_line.prompt();\n            },\n            // -------------------------------------------------------------\n            // :: Enable or Disable mask depedning on the passed argument\n            // :: the mask can also be character (in fact it will work with\n            // :: strings longer then one)\n            // -------------------------------------------------------------\n            set_mask: function(mask) {\n                when_ready(function ready() {\n                    command_line.mask(mask === true ? settings.maskChar : mask);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the ouput of the terminal as text\n            // :: the output may contain user terminal formatting\n            // -------------------------------------------------------------\n            get_output: function(raw) {\n                if (raw) {\n                    return lines.data();\n                } else {\n                    return lines.get_snapshot();\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Recalculate and redraw everything\n            // -------------------------------------------------------------\n            resize: function(width, height) {\n                if (!self.is(':visible')) {\n                    // delay resize if terminal not visible\n                    self.stopTime('resize');\n                    self.oneTime(500, 'resize', function() {\n                        self.resize(width, height);\n                    });\n                } else {\n                    if (width && height) {\n                        self.width(width);\n                        self.height(height);\n                    }\n                    width = self.width();\n                    height = self.height();\n                    if (typeof settings.numChars !== 'undefined' ||\n                        typeof settings.numRows !== 'undefined') {\n                        command_line.resize(settings.numChars);\n                        self.refresh();\n                        fire_event('onResize');\n                        return;\n                    }\n                    var new_num_chars = get_num_chars(self, char_size);\n                    var new_num_rows = get_num_rows(self, char_size);\n                    // only if number of chars changed\n                    if (new_num_chars !== num_chars ||\n                        new_num_rows !== num_rows) {\n                        self.clear_cache();\n                        num_chars = new_num_chars;\n                        num_rows = new_num_rows;\n                        command_line.resize(num_chars);\n                        self.refresh();\n                        fire_event('onResize');\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: redraw the terminal and invalidate cache\n            // -------------------------------------------------------------\n            refresh: function() {\n                if (char_size.width !== 0) {\n                    self[0].style.setProperty('--char-width', char_size.width);\n                }\n                self.clear_cache();\n                if (command) {\n                    command_line.resize();\n                }\n                redraw({\n                    scroll: false,\n                    update: true\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Flush the output to the terminal\n            // -------------------------------------------------------------\n            flush: function(options) {\n                options = $.extend({}, {\n                    update: false,\n                    scroll: true\n                }, options || {});\n                when_ready(function ready() {\n                    try {\n                        if (buffer.is_empty()) {\n                            return self;\n                        }\n                        var bottom = self.is_bottom();\n                        var scroll = (settings.scrollOnEcho && options.scroll) || bottom;\n                        var wrapper;\n                        // print all lines\n                        var first = true;\n                        var appending_to_partial = false;\n                        var partial = $();\n                        var snapshot;\n                        if (!options.update) {\n                            partial = self.find('.partial');\n                            snapshot = lines.get_partial();\n                        }\n                        // TODO: refactor buffer.flush(), there is way\n                        //       to many levels of abstractions in one place\n                        buffer.flush(function(data) {\n                            if (!data) {\n                                if (!partial.length) {\n                                    wrapper = $('<div/>');\n                                    snapshot = [];\n                                } else if (first) {\n                                    first = false;\n                                    appending_to_partial = true;\n                                    wrapper = partial;\n                                }\n                            } else if (is_function(data.finalize)) {\n                                if (scroll) {\n                                    wrapper.find('img').on('load', function() {\n                                        self.scroll_to_bottom();\n                                    });\n                                }\n                                // this is finalize function from echo\n                                if (options.update) {\n                                    lines.update_snapshot(data.index, snapshot);\n                                    var selector = '> div[data-index=' + data.index + ']';\n                                    var node = output.find(selector);\n                                    if (node.html() !== wrapper.html()) {\n                                        node.replaceWith(wrapper);\n                                    }\n                                } else {\n                                    wrapper.appendTo(output);\n                                    if (!partial.length) {\n                                        lines.make_snapshot(snapshot);\n                                    }\n                                }\n                                wrapper.attr('data-index', data.index);\n                                appending_to_partial = !data.newline;\n                                wrapper.toggleClass('partial', appending_to_partial);\n                                if (appending_to_partial) {\n                                    partial = wrapper;\n                                }\n                                data.finalize(wrapper);\n                            } else {\n                                var line = data.line;\n                                var div;\n                                if (typeof data.raw === 'string') {\n                                    if (appending_to_partial) {\n                                        snapshot[snapshot.length - 1] += data.raw;\n                                    } else {\n                                        snapshot.push(data.raw);\n                                    }\n                                }\n                                if (appending_to_partial) {\n                                    div = wrapper.children().last().append(line);\n                                    appending_to_partial = false;\n                                } else {\n                                    div = $('<div/>').html(line);\n                                    if (data.newline) {\n                                        div.addClass('cmd-end-line');\n                                    }\n                                    wrapper.append(div);\n                                }\n                                // width = '100%' does some weird extra magic\n                                // that makes the height correct. Any other\n                                // value doesn't work.\n                                div.css('width', '100%');\n                            }\n                        });\n                        var cmd_prompt = self.find('.cmd-prompt');\n                        var cmd_outer = self.find('.cmd');\n                        partial = self.find('.partial');\n                        var last_row;\n                        if (partial.length === 0) {\n                            cmd_prompt.css('margin-left', 0);\n                            cmd_outer.css('top', 0);\n                            command_line.__set_prompt_margin(0);\n                            last_row = self.find('.terminal-output div:last-child' +\n                                                 ' div:last-child');\n                            // check if the div is parital fix #695\n                            if (last_row.css('display') === 'inline-block') {\n                                last_row.css({\n                                    width: '100%',\n                                    display: ''\n                                });\n                            }\n                        } else {\n                            last_row = partial.children().last();\n                            // Remove width='100%' for two reasons:\n                            // 1. so we can measure the width right here\n                            // 2. so that the background of this last line of output\n                            //    doesn't occlude the first line of input to the right\n                            last_row.css({\n                                width: '',\n                                display: 'inline-block'\n                            });\n                            var last_row_rect = last_row[0].getBoundingClientRect();\n                            var partial_width = last_row_rect.width;\n                            // Shift command prompt up one line and to the right\n                            // enough so that it appears directly next to the\n                            // partially constructed output line\n                            cmd_prompt.css('margin-left', partial_width);\n                            cmd_outer.css('top', -last_row_rect.height);\n                            // Measure length of partial line in characters\n                            var char_width = self.geometry().char.width;\n                            var prompt_margin = Math.round(partial_width / char_width);\n                            command_line.__set_prompt_margin(prompt_margin);\n                        }\n                        limit_lines();\n                        fire_event('onFlush');\n                        var cmd_cursor = self.find('.cmd-cursor');\n                        var offset = self.find('.cmd').offset();\n                        var self_offset = self.offset();\n                        setTimeout(function() {\n                            css(self[0], {\n                                '--terminal-height': self.height(),\n                                '--terminal-x': offset.left - self_offset.left,\n                                '--terminal-y': offset.top - self_offset.top,\n                                '--terminal-scroll': self.prop('scrollTop')\n                            });\n                            // Firefox won't reflow the cursor automatically, so\n                            // hide it briefly then reshow it\n                            cmd_cursor.hide();\n                            setTimeout(function() {\n                                cmd_cursor.show();\n                            }, 0);\n                        }, 0);\n                        if (scroll) {\n                            self.scroll_to_bottom();\n                        }\n                    } catch (e1) {\n                        if (is_function(settings.exceptionHandler)) {\n                            try {\n                                settings.exceptionHandler.call(\n                                    self,\n                                    e1,\n                                    'TERMINAL (Flush)'\n                                );\n                            } catch (e2) {\n                                settings.exceptionHandler = $.noop;\n                                alert_exception('[exceptionHandler]', e2);\n                            }\n                        } else {\n                            alert_exception('[Flush]', e1);\n                        }\n                    } finally {\n                        buffer.clear();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Update the output line - line number can be negative\n            // -------------------------------------------------------------\n            update: function(line, value, options) {\n                when_ready(function ready() {\n                    if (line < 0) {\n                        line = lines.length() + line; // yes +\n                    }\n                    if (!lines.valid_index(line)) {\n                        self.error('Invalid line number ' + line);\n                    } else if (value === null) {\n                        lines.update(line, null);\n                        output.find('[data-index=' + line + ']').remove();\n                    } else {\n                        value = preprocess_value(value, {\n                            update: true,\n                            line: line\n                        });\n                        if (value === false) {\n                            return self;\n                        }\n                        unpromise(value, function(value) {\n                            var ret = prepare_render(value, options);\n                            if (ret) {\n                                value = ret[0];\n                                options = ret[1];\n                            }\n                            options = lines.update(line, value, options);\n                            var next = process_line({\n                                value: value,\n                                index: line,\n                                options: options\n                            });\n                            // process_line can return a promise\n                            // value is function that resolve to promise\n                            unpromise(next, function() {\n                                // trigger flush even if next is undefined\n                                self.flush({\n                                    scroll: false,\n                                    update: true\n                                });\n                            });\n                        });\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: convenience method for removing selected line\n            // -------------------------------------------------------------\n            remove_line: function(line) {\n                return self.update(line, null);\n            },\n            // -------------------------------------------------------------\n            // :: return index of last line in case when you need to update\n            // :: after something is echo on the terminal\n            // -------------------------------------------------------------\n            last_index: function() {\n                return lines.length() - 1;\n            },\n            // -------------------------------------------------------------\n            // :: Print data to the terminal output. It can have options\n            // :: * flush - indicate that arg should be send to DOM\n            // :: * raw - indicate if it should handle input as html\n            // :: * finalize - function call with container div\n            // :: * keepWords - inform how to wrap text\n            // :: * formatters - inform function if it should use formatters\n            // ::   on input string - good to prevent XSS when you want\n            // ::   advanced server side controling of terminal\n            // :: you can echo: promise, function, strings array or string\n            // -------------------------------------------------------------\n            echo: function(arg, options) {\n                var arg_defined = arguments.length > 0;\n                var d = new $.Deferred();\n                function echo(arg) {\n                    try {\n                        var locals = $.extend({\n                            flush: true,\n                            exec: true,\n                            raw: settings.raw,\n                            finalize: $.noop,\n                            unmount: $.noop,\n                            delay: settings.execAnimationDelay,\n                            ansi: false,\n                            typing: false,\n                            keepWords: false,\n                            invokeMethods: settings.invokeMethods,\n                            onClear: null,\n                            formatters: true,\n                            allowedAttributes: settings.allowedAttributes,\n                            newline: true\n                        }, options || {});\n                        // finalize function is passed around and invoked\n                        // in terminal::flush after content is added to DOM\n                        (function(finalize) {\n                            locals.finalize = function(div) {\n                                if (locals.raw) {\n                                    div.addClass('raw');\n                                }\n                                if (locals.ansi) {\n                                    div.addClass('ansi');\n                                }\n                                try {\n                                    if (is_function(finalize)) {\n                                        finalize.call(self, div);\n                                    }\n                                    var $images = div.find('img');\n                                    $images.each(function() {\n                                        var self = $(this);\n                                        var img = new Image();\n                                        img.onerror = function() {\n                                            self.replaceWith(use_broken_image);\n                                        };\n                                        img.src = this.src;\n                                    });\n                                } catch (e) {\n                                    display_exception(e, 'USER:echo(finalize)');\n                                    finalize = null;\n                                }\n                            };\n                        })(locals.finalize);\n                        if (locals.flush) {\n                            // flush buffer if there was no flush after previous echo\n                            if (!buffer.empty()) {\n                                self.flush();\n                            }\n                        }\n                        if (fire_event('onBeforeEcho', [arg]) === false) {\n                            return;\n                        }\n                        if (locals.typing) {\n                            if (typeof arg !== 'string') {\n                                return d.reject('echo: Typing animation require string' +\n                                                ' or promise that resolve to string');\n                            }\n                            if (typeof locals.delay !== 'number' || isNaN(locals.delay)) {\n                                return d.reject('echo: Invalid argument, delay need to' +\n                                                ' be a number');\n                            }\n                            var p = self.typing('echo', locals.delay, arg, locals);\n                            p.then(function() {\n                                d.resolve();\n                            });\n                            return;\n                        }\n                        var value;\n                        if (typeof arg === 'function') {\n                            value = arg.bind(self);\n                        } else if (typeof arg === 'undefined') {\n                            if (arg_defined) {\n                                value = String(arg);\n                            } else {\n                                value = '';\n                            }\n                        } else {\n                            var ret = preprocess_value(arg, {});\n                            if (ret === false) {\n                                return self;\n                            }\n                            value = ret;\n                        }\n                        if (is_promise(value)) {\n                            echo_promise = true;\n                        }\n                        unpromise(value, function(value) {\n                            if (render(value, locals)) {\n                                return self;\n                            }\n                            var index = lines.length();\n                            var last_newline = lines.has_newline();\n                            if (!last_newline) {\n                                index--;\n                            }\n                            if (!locals.newline && value[value.length - 1] === '\\n') {\n                                // This adjusts the value, so that when it updates or\n                                // refresh the lines list it does the right thing.\n                                value = value.slice(0, -1);\n                                locals.newline = true;\n                            }\n                            var next = process_line({\n                                value: value,\n                                options: locals,\n                                index: index\n                            });\n                            // queue async functions in echo\n                            if (is_promise(next)) {\n                                echo_promise = true;\n                            }\n                            lines.push([value, locals]);\n                            unpromise(next, function() {\n                                // extended commands should be processed only\n                                // once in echo and not on redraw\n                                if (locals.flush) {\n                                    self.flush();\n                                    fire_event('onAfterEcho', [arg]);\n                                }\n                                echo_promise = false;\n                                var original = echo_delay;\n                                echo_delay = [];\n                                for (var i = 0; i < original.length; ++i) {\n                                    self.echo.apply(self, original[i]);\n                                }\n                            });\n                        });\n                    } catch (e) {\n                        // if echo throw exception we can't use error to\n                        // display that exception\n                        if (is_function(settings.exceptionHandler)) {\n                            settings.exceptionHandler.call(self, e, 'TERMINAL (echo)');\n                        } else {\n                            alert_exception('[Terminal.echo]', e);\n                        }\n                    }\n                }\n                if (echo_promise) {\n                    echo_delay.push([arg, options]);\n                } else {\n                    echo(arg);\n                }\n                if (options && options.typing) {\n                    return d.promise();\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            typing: function(type, delay, string, options) {\n                var d = new $.Deferred();\n                var settings;\n                var finish;\n                if (typeof options === 'object') {\n                    finish = options.finalize || $.noop;\n                    settings = $.extend({}, options, {\n                        delay: delay,\n                        finalize: done\n                    });\n                } else {\n                    finish = options || $.noop;\n                    settings = {\n                        delay: delay,\n                        finalize: done\n                    };\n                }\n                function done() {\n                    d.resolve();\n                    if (is_function(finish)) {\n                        finish.apply(self, arguments);\n                    }\n                }\n                when_ready(function ready() {\n                    if (['prompt', 'echo', 'enter'].indexOf(type) >= 0) {\n                        if (type === 'prompt') {\n                            typed_prompt(string, settings);\n                        } else if (type === 'echo') {\n                            typed_message(string, settings);\n                        } else if (type === 'enter') {\n                            with_prompt(self.get_prompt(), function(prompt) {\n                                typed_enter(prompt, string, settings);\n                            }, self);\n                        }\n                    } else {\n                        d.reject('Invalid type only `echo` and `prompt` are supported');\n                    }\n                });\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: echo red text\n            // -------------------------------------------------------------\n            error: function(message, options) {\n                options = $.extend({}, options, {raw: false, formatters: false});\n                function format(string) {\n                    if (typeof string !== 'string') {\n                        string = String(string);\n                    }\n                    // quick hack to fix trailing backslash\n                    var str = $.terminal.escape_brackets(string).\n                        replace(/\\\\$/, '&#92;').\n                        replace(url_re, ']$1[[;;;terminal-error]');\n                    return '[[;;;terminal-error]' + str + ']';\n                }\n                if (typeof message === 'function') {\n                    return self.echo(function() {\n                        return format(message.call(self));\n                    }, options);\n                }\n                if (message && message.then) {\n                    message.then(function(string) {\n                        self.echo(format(string));\n                    }).catch(make_label_error('Echo Error'));\n                    return self;\n                }\n                return self.echo(format(message), options);\n            },\n            // -------------------------------------------------------------\n            // :: Display Exception on terminal\n            // -------------------------------------------------------------\n            exception: function(e, label) {\n                var message = exception_message(e);\n                if (label) {\n                    message = '&#91;' + label + '&#93;: ' + message;\n                }\n                if (message) {\n                    self.error(message, {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-message');\n                        },\n                        keepWords: true\n                    });\n                }\n                if (typeof e.fileName === 'string') {\n                    // display filename and line which throw exeption\n                    self.pause(settings.softPause);\n                    $.get(e.fileName, function(file) {\n                        var num = e.lineNumber - 1;\n                        var line = file.split('\\n')[num];\n                        if (line) {\n                            self.error('[' + e.lineNumber + ']: ' + line);\n                        }\n                        self.resume();\n                    }, 'text');\n                }\n                if (e.stack) {\n                    var stack = $.terminal.escape_brackets(e.stack);\n                    var output = stack.split(/\\n/g).map(function(trace) {\n                        // nested formatting will handle urls but that formatting\n                        // can be removed - this code was created before\n                        // that formatting existed (see commit ce01c3f5)\n                        return '[[;;;terminal-error]' +\n                            trace.replace(url_re, function(url) {\n                                return ']' + url + '[[;;;terminal-error]';\n                            }) + ']';\n                    }).join('\\n');\n                    self.echo(output, {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-stack-trace');\n                        },\n                        formatters: false\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Scroll Div that holds the terminal\n            // -------------------------------------------------------------\n            scroll: function(amount) {\n                var pos;\n                amount = Math.round(amount);\n                if (self.prop) { // work with jQuery > 1.6\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                } else {\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Exit all interpreters and logout. The function will throw\n            // :: exception if there is no login provided\n            // -------------------------------------------------------------\n            logout: function(local) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'logout'));\n                }\n                when_ready(function ready() {\n                    if (local) {\n                        var login = logins.pop();\n                        self.set_token(undefined, true);\n                        self.login.apply(self, login);\n                    } else if (interpreters.size() === 1 && self.token()) {\n                        self.logout(true);\n                    } else {\n                        while (interpreters.size() > 1) {\n                            // pop will call global_logout that will call login\n                            // and size will be > 0; this is workaround the problem\n                            if (self.token()) {\n                                self.logout(true).pop().pop();\n                            } else {\n                                self.pop();\n                            }\n                        }\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the token returned by callback function\n            // :: in login function. It does nothing (return undefined) if\n            // :: there is no login\n            // -------------------------------------------------------------\n            token: function(local) {\n                return storage.get(self.prefix_name(local) + '_token');\n            },\n            // -------------------------------------------------------------\n            // :: Function sets the token to the supplied value. This function\n            // :: works regardless of wherer settings.login is supplied\n            // -------------------------------------------------------------\n            set_token: function(token, local) {\n                var name = self.prefix_name(local) + '_token';\n                if (typeof token === 'undefined') {\n                    storage.remove(name);\n                } else {\n                    storage.set(name, token);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function get the token either set by the login method or\n            // :: by the set_token method.\n            // -------------------------------------------------------------\n            get_token: function(local) {\n                return self.token(local);\n            },\n            // -------------------------------------------------------------\n            // :: Function return Login name entered by the user\n            // -------------------------------------------------------------\n            login_name: function(local) {\n                return storage.get(self.prefix_name(local) + '_login');\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the name of current interpreter\n            // -------------------------------------------------------------\n            name: function() {\n                return interpreters.top().name;\n            },\n            // -------------------------------------------------------------\n            // :: Function return prefix name for login/token\n            // -------------------------------------------------------------\n            prefix_name: function(local) {\n                var name = (settings.name ? settings.name + '_' : '') +\n                    terminal_id;\n                if (local && interpreters.size() > 1) {\n                    var local_name = interpreters.map(function(intrp) {\n                        return intrp.name || '';\n                    }).slice(1).join('_');\n                    if (local_name) {\n                        name += '_' + local_name;\n                    }\n                }\n                return name;\n            },\n            // -------------------------------------------------------------\n            // :: wrapper for common use case\n            // -------------------------------------------------------------\n            read: function(message, success, cancel) {\n                var options;\n                if (typeof arguments[1] === 'object') {\n                    options = $.extend({\n                        typing: false,\n                        delay: settings.execAnimationDelay,\n                        success: $.noop,\n                        cancel: $.noop\n                    }, arguments[1]);\n                } else {\n                    options = {\n                        typing: false,\n                        success: success || $.noop,\n                        cancel: cancel || $.noop\n                    };\n                }\n                if (options.typing) {\n                    var prompt = self.get_prompt();\n                    options.typing = false;\n                    return self.typing('prompt', options.delay, message).then(function() {\n                        return self.set_prompt(prompt).read(message, options);\n                    });\n                }\n                // return from read() should not pause terminal\n                force_awake = true;\n                var defer = jQuery.Deferred();\n                var read = false;\n                self.push(function(string) {\n                    read = true;\n                    defer.resolve(string);\n                    if (is_function(options.success)) {\n                        options.success(string);\n                    }\n                    self.pop();\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }, {\n                    name: 'read',\n                    history: false,\n                    prompt: message || '',\n                    onExit: function() {\n                        if (!read) {\n                            defer.reject();\n                            if (is_function(options.cancel)) {\n                                options.cancel();\n                            }\n                        }\n                    }\n                });\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Push a new interenter on the Stack\n            // -------------------------------------------------------------\n            push: function(interpreter, options) {\n                cmd_ready(function ready() {\n                    options = options || {};\n                    var defaults = {\n                        infiniteLogin: false\n                    };\n                    var push_settings = $.extend({}, defaults, options);\n                    if (!push_settings.name && prev_command) {\n                        // name the interpreter from last command\n                        push_settings.name = prev_command.name;\n                    }\n                    if (push_settings.prompt === undefined) {\n                        push_settings.prompt = (push_settings.name || '>') + ' ';\n                    }\n                    // names.push(options.name);\n                    var top = interpreters.top();\n                    if (top) {\n                        top.mask = command_line.mask();\n                    }\n                    var was_paused = paused;\n                    function init() {\n                        fire_event('onPush', [top, interpreters.top()]);\n                        prepare_top_interpreter();\n                    }\n                    //self.pause();\n                    make_interpreter(interpreter, options.login, function(ret) {\n                        // result is object with interpreter and completion properties\n                        interpreters.push($.extend({}, ret, push_settings));\n                        if (push_settings.completion === true) {\n                            if ($.isArray(ret.completion)) {\n                                interpreters.top().completion = ret.completion;\n                            } else if (!ret.completion) {\n                                interpreters.top().completion = false;\n                            }\n                        }\n                        if (push_settings.login) {\n                            var error;\n                            var type = get_type(push_settings.login);\n                            if (type === 'function') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    push_settings.login,\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            } else if (get_type(interpreter) === 'string' &&\n                                       type === 'string' || type === 'boolean') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    make_json_rpc_login(\n                                        interpreter,\n                                        push_settings.login\n                                    ),\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            }\n                        } else {\n                            init();\n                        }\n                        if (!was_paused && self.enabled()) {\n                            self.resume();\n                        }\n                    });\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove the last interpreter from the Stack\n            // -------------------------------------------------------------\n            pop: function(string, silent) {\n                if (string !== undefined) {\n                    echo_command(string);\n                }\n                var token = self.token(true);\n                var top;\n                if (interpreters.size() === 1) {\n                    top = interpreters.top();\n                    if (settings.login) {\n                        if (!silent) {\n                            fire_event('onPop', [top, null]);\n                        }\n                        global_logout();\n                        fire_event('onExit');\n                    } else {\n                        self.error(strings().canExitError);\n                    }\n                } else {\n                    if (token) {\n                        clear_loging_storage();\n                    }\n                    var current = interpreters.pop();\n                    top = interpreters.top();\n                    prepare_top_interpreter();\n                    // restore mask\n                    self.set_mask(top.mask);\n                    if (!silent) {\n                        fire_event('onPop', [current, top]);\n                    }\n                    // we check in case if you don't pop from password interpreter\n                    if (in_login && self.get_prompt() !== strings().login + ': ') {\n                        in_login = false;\n                    }\n                    if (is_function(current.onExit)) {\n                        try {\n                            current.onExit.call(self, self);\n                        } catch (e) {\n                            current.onExit = $.noop;\n                            display_exception(e, 'onExit');\n                        }\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change terminal option(s) at runtime\n            // -------------------------------------------------------------\n            option: function(object_or_name, value) {\n                if (typeof value === 'undefined') {\n                    if (typeof object_or_name === 'string') {\n                        return settings[object_or_name];\n                    } else if (typeof object_or_name === 'object') {\n                        $.each(object_or_name, function(key, value) {\n                            settings[key] = value;\n                        });\n                    }\n                } else {\n                    settings[object_or_name] = value;\n                    if (object_or_name.match(/^num(Chars|Rows)$/)) {\n                        redraw();\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: invoke keydown shorcut\n            // -------------------------------------------------------------\n            invoke_key: function(shortcut) {\n                command_line.invoke_key(shortcut);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: change terminal keymap at runtime\n            // -------------------------------------------------------------\n            keymap: function(keymap, fn) {\n                if (arguments.length === 0) {\n                    return command_line.keymap();\n                }\n                if (typeof fn === 'undefined') {\n                    if (typeof keymap === 'string') {\n                        return command_line.keymap(keymap);\n                    } else if ($.isPlainObject(keymap)) {\n                        // argument is an object\n                        keymap = $.extend(\n                            {},\n                            terminal_init_keymap,\n                            $.omap(keymap || {}, function(key, fn) {\n                                if (!terminal_init_keymap[key]) {\n                                    return fn.bind(self);\n                                }\n                                return function(e, original) {\n                                    // new keymap function will get default as 2nd arg\n                                    return fn.call(self, e, function() {\n                                        return terminal_init_keymap[key](e, original);\n                                    });\n                                };\n                            })\n                        );\n                        command_line.keymap(null).keymap(keymap);\n                    }\n                } else if (typeof fn === 'function') {\n                    var key = keymap;\n                    if (!terminal_init_keymap[key]) {\n                        command_line.keymap(key, fn.bind(self));\n                    } else {\n                        command_line.keymap(key, function(e, original) {\n                            return fn.call(self, e, function() {\n                                return terminal_init_keymap[key](e, original);\n                            });\n                        });\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return how deep you are in nested interpreters\n            // -------------------------------------------------------------\n            level: function() {\n                return interpreters.size();\n            },\n            // -------------------------------------------------------------\n            // :: Reinitialize the terminal\n            // -------------------------------------------------------------\n            reset: function() {\n                when_ready(function ready() {\n                    self.clear();\n                    while (interpreters.size() > 1) {\n                        interpreters.pop();\n                    }\n                    initialize();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all local storage left by terminal, it will not\n            // :: logout you until you refresh the browser\n            // -------------------------------------------------------------\n            purge: function() {\n                when_ready(function ready() {\n                    var prefix = self.prefix_name() + '_';\n                    var names = storage.get(prefix + 'interpreters');\n                    if (names) {\n                        $.each(JSON.parse(names), function(_, name) {\n                            storage.remove(name + '_commands');\n                            storage.remove(name + '_token');\n                            storage.remove(name + '_login');\n                        });\n                    }\n                    command_line.purge();\n                    storage.remove(prefix + 'interpreters');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all events and DOM nodes left by terminal, it will\n            // :: not purge the terminal so you will have the same state\n            // :: when you refresh the browser\n            // -------------------------------------------------------------\n            destroy: function() {\n                when_ready(function ready() {\n                    command_line.destroy().remove();\n                    self.resizer('unbind');\n                    self.touch_scroll('unbind');\n                    font_resizer.resizer('unbind').remove();\n                    $(document).unbind('.terminal_' + self.id());\n                    $(window).unbind('.terminal_' + self.id());\n                    self.unbind('click wheel mousewheel mousedown mouseup');\n                    self.removeData('terminal').removeClass('terminal').\n                        unbind('.terminal');\n                    if (settings.width) {\n                        self.css('width', '');\n                    }\n                    if (settings.height) {\n                        self.css('height', '');\n                    }\n                    $(window).off('blur', blur_terminal).\n                        off('focus', focus_terminal);\n                    self.find('.terminal-fill, .terminal-font').remove();\n                    self.stopTime();\n                    terminals.remove(terminal_id);\n                    if (visibility_observer) {\n                        if (visibility_observer.unobserve) {\n                            visibility_observer.unobserve(self[0]);\n                        } else {\n                            clearInterval(visibility_observer);\n                        }\n                    }\n                    var scroll_marker = self.find('.terminal-scroll-marker');\n                    if (is_bottom_observer) {\n                        is_bottom_observer.unobserve(scroll_marker[0]);\n                    }\n                    scroll_marker.remove();\n                    if (mutation_observer) {\n                        mutation_observer.disconnect();\n                    }\n                    if (!terminals.length()) {\n                        $(window).off('hashchange');\n                    }\n                    if (is_mobile) {\n                        self.off([\n                            'touchstart.terminal',\n                            'touchmove.terminal',\n                            'touchend.terminal'\n                        ].join(' '));\n                    }\n                    output.remove();\n                    wrapper.remove();\n                    if (body_terminal) {\n                        var $body = $(body_terminal);\n                        if ($body.attr('class') === 'full-screen-terminal') {\n                            $body.removeAttr('class');\n                        } else {\n                            $body.removeClass('full-screen-terminal');\n                        }\n                        self.remove();\n                    }\n                    defunct = true;\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: ref: https://stackoverflow.com/a/18927969/387194\n            // -------------------------------------------------------------\n            scroll_to: function(elem) {\n                var scroll = self.scrollTop() - self.offset().top + $(elem).offset().top;\n                self.scrollTop(scroll);\n                return self;\n            },\n            // -------------------------------------------------------------\n            scroll_to_bottom: function() {\n                var scrollHeight;\n                if (self.prop) {\n                    scrollHeight = self.prop('scrollHeight');\n                } else {\n                    scrollHeight = self.attr('scrollHeight');\n                }\n                self.scrollTop(scrollHeight);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if terminal div or body is at the bottom\n            // :: is use scrollBottomOffset option as margin for the check\n            // -------------------------------------------------------------\n            is_bottom: function() {\n                if (settings.scrollBottomOffset === -1) {\n                    return false;\n                } else if (typeof is_bottom_detected === 'boolean') {\n                    return is_bottom_detected;\n                } else {\n                    var scroll_height, scroll_top, height;\n                    scroll_height = self[0].scrollHeight;\n                    scroll_top = self[0].scrollTop;\n                    height = self[0].offsetHeight;\n                    var limit = scroll_height - settings.scrollBottomOffset;\n                    return scroll_top + height > limit;\n                }\n            },\n            // -------------------------------------------------------------\n            // :: create terminal object clone, used by pipe\n            // -------------------------------------------------------------\n            duplicate: function() {\n                var copy = $(self);\n                return $.extend(copy, public_api);\n            },\n            // -------------------------------------------------------------\n            // :: return output flush buffer\n            // -------------------------------------------------------------\n            get_output_buffer: function(options) {\n                var settings = $.extend({\n                    html: false\n                }, options);\n                var result = [];\n                var append = false;\n                buffer.forEach(function(data) {\n                    if (data) {\n                        if (is_function(data.finalize)) {\n                            append = !data.newline;\n                        } else {\n                            var output;\n                            if (settings.html) {\n                                output = data.line;\n                            } else {\n                                output = data.raw;\n                            }\n                            if (append) {\n                                var last = result.length - 1;\n                                result[last] += output;\n                            } else {\n                                result.push(output);\n                            }\n                        }\n                    }\n                });\n                if (settings.html) {\n                    return result.map(function(line) {\n                        return '<div>' + line + '</div>';\n                    }).join('\\n');\n                }\n                return result.join('\\n');\n            },\n            // -------------------------------------------------------------\n            // :: clear flush buffer\n            // -------------------------------------------------------------\n            clear_buffer: function() {\n                buffer.clear();\n                return self;\n            }\n        }, function(name, fun) {\n            // wrap all functions and display execptions\n            return function() {\n                if (defunct) {\n                    if (!settings.exceptionHandler) {\n                        throw new $.terminal.Exception(strings().defunctTerminal);\n                    }\n                }\n                try {\n                    return fun.apply(self, [].slice.apply(arguments));\n                } catch (e) {\n                    // exec catch by command (resume call exec)\n                    if (name !== 'exec' && name !== 'resume') {\n                        display_exception(e, e.type || 'TERMINAL', true);\n                    }\n                    if (!settings.exceptionHandler) {\n                        throw e;\n                    }\n                }\n            };\n        });\n        $.extend(self, public_api);\n        // -----------------------------------------------------------------\n        // :: INIT CODE\n        // -----------------------------------------------------------------\n        if (self.length === 0) {\n            var msg = sprintf(strings().invalidSelector);\n            throw new $.terminal.Exception(msg);\n        }\n        self.data('terminal', self);\n        // synchronize the echo calls (used for async functions) that need\n        // to be called in order\n        var echo_delay = [];\n        var echo_promise = false;\n        // var names = []; // stack if interpreter names\n        var prev_command; // used for name on the terminal if not defined\n        var prev_exec_cmd;\n        var tab_count = 0; // for tab completion\n        var output; // .terminal-output jquery object\n        var terminal_id = terminals.length();\n        var force_awake = false; // flag used to don't pause when user return read() call\n        var num_chars; // numer of chars in line\n        var num_rows; // number of lines that fit without scrollbar\n        var command; // for tab completion\n        var logins = new Stack(); // stack of logins\n        var command_queue = new DelayQueue();\n        var animating = false; // true on typing animation\n        var init_queue = new DelayQueue();\n        var when_ready = ready(init_queue);\n        var cmd_ready = ready(command_queue);\n        var is_bottom_detected;\n        var is_bottom_observer;\n        var in_login = false;// some Methods should not be called when login\n        // TODO: Try to use mutex like counter for pause/resume\n        var onPause = $.noop;// used to indicate that user call pause onInit\n        var old_width, old_height;\n        var delayed_commands = []; // used when exec commands while paused\n        var settings = $.extend(\n            {},\n            $.terminal.defaults,\n            {\n                name: self.selector,\n                exit: !!(options && options.login || !options)\n            },\n            options || {}\n        );\n        if (typeof settings.width === 'number') {\n            self.width(settings.width);\n        }\n        if (typeof settings.height === 'number') {\n            self.height(settings.height);\n        }\n        var char_size = get_char_size(self);\n        // this is needed when terminal have selector with --size that is not\n        // bare .terminal so fake terminal will not get the proper size #602\n        var need_char_size_recalculate = !terminal_ready(self);\n        // so it's the same as in TypeScript definition for options\n        delete settings.formatters;\n        // used to throw error when calling methods on destroyed terminal\n        var defunct = false;\n        // ---------------------------------------------------------------------\n        // :: FormatBuffer is used to to buffer the lines that echoed\n        // :: it have append function that have 2 options raw and finalize\n        // :: raw - will not encode the string and finalize if a function that\n        // :: will have div container of the line as first argument\n        // :: actuall echo to the terminal happen when calling flush\n        // ---------------------------------------------------------------------\n        var buffer = new FormatBuffer(function(options) {\n            return {\n                linksNoReferrer: settings.linksNoReferrer,\n                linksNoFollow: settings.linksNoFollow,\n                anyLinks: settings.anyLinks,\n                charWidth: char_size.width,\n                useCache: settings.useCache,\n                escape: false,\n                allowedAttributes: options.allowedAttributes || []\n            };\n        });\n        var lines = new OutputLines(function() {\n            return settings;\n        });\n        var storage = new StorageHelper(settings.memory);\n        var enabled = settings.enabled;\n        var frozen = false;\n        var paused = false;\n        var autologin = true; // set to false if onBeforeLogin return false\n        var interpreters;\n        var command_line;\n        var old_enabled;\n        var visibility_observer;\n        var mutation_observer;\n        // backward compatibility\n        if (settings.ignoreSystemDescribe === true) {\n            settings.describe = false;\n        }\n        // register ajaxSend for cancel requests on CTRL+D\n        $(document).bind('ajaxSend.terminal_' + self.id(), function(e, xhr) {\n            requests.push(xhr);\n        });\n        var wrapper = $('<div class=\"terminal-wrapper\"/>').appendTo(self);\n        $(broken_image).hide().appendTo(wrapper);\n        var font_resizer = $('<div class=\"terminal-font\">&nbsp;</div>').appendTo(self);\n        var fill = $('<div class=\"terminal-fill\"/>').appendTo(self);\n        output = $('<div>').addClass('terminal-output').attr('role', 'log')\n            .appendTo(wrapper);\n        self.addClass('terminal');\n        // before login event\n        if (settings.login && fire_event('onBeforeLogin') === false) {\n            autologin = false;\n        }\n        // create json-rpc authentication function\n        var base_interpreter;\n        if (typeof init_interpreter === 'string') {\n            base_interpreter = init_interpreter;\n        } else if (is_array(init_interpreter)) {\n            // first JSON-RPC\n            for (var i = 0, len = init_interpreter.length; i < len; ++i) {\n                if (typeof init_interpreter[i] === 'string') {\n                    base_interpreter = init_interpreter[i];\n                    break;\n                }\n            }\n        }\n        var global_login_fn;\n        if (is_function(settings.login)) {\n            global_login_fn = settings.login;\n        } else if (base_interpreter &&\n            (typeof settings.login === 'string' || settings.login === true)) {\n            global_login_fn = make_json_rpc_login(base_interpreter, settings.login);\n        }\n        terminals.append(self);\n        function focus_terminal() {\n            if (old_enabled) {\n                self.focus();\n                self.scroll_to_bottom();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function blur_terminal() {\n            old_enabled = enabled;\n            self.disable().find('.cmd textarea').trigger('blur', [true]);\n        }\n        // -------------------------------------------------------------------------------\n        function stringify_value(value) {\n            if (is_function(value)) {\n                value = value();\n            }\n            if (value && is_function(value.then)) {\n                return value.then(stringify_value);\n            }\n            if (get_type(value) !== 'string') {\n                if (is_function(settings.parseObject)) {\n                    var ret = settings.parseObject(value);\n                    if (get_type(ret) === 'string') {\n                        value = ret;\n                    }\n                } else if (is_array(value)) {\n                    value = $.terminal.columns(value, self.cols(), settings.tabs);\n                } else {\n                    value = String(value);\n                }\n            }\n            return value;\n        }\n        // -------------------------------------------------------------------------------\n        function context_callback_proxy(fn) {\n            if (fn.proxy) {\n                return fn;\n            }\n            var wrapper = function(callback) {\n                return fn.call(self, callback, self);\n            };\n            wrapper.proxy = true;\n            return wrapper;\n        }\n        // -------------------------------------------------------------------------------\n        // paste event is not testable in node\n        // istanbul ignore next\n        function paste_event(e) {\n            e = e.originalEvent;\n            // we don't care about browser that don't support clipboard data\n            // those browser simple will not have this feature normal paste\n            // is cross-browser and it's handled by cmd plugin\n            function is_type(item, type) {\n                return item.type.indexOf(type) !== -1;\n            }\n            function echo_image(image) {\n                self.echo('<img src=\"' + image + '\"/>', {raw: true});\n            }\n            function data_uri(blob) {\n                var URL = window.URL || window.webkitURL;\n                return URL.createObjectURL(blob);\n            }\n            function echo(object, ignoreEvents) {\n                if (!ignoreEvents) {\n                    var event = {\n                        target: self\n                    };\n                    if (typeof object === 'string') {\n                        event.text = object;\n                    } else if (object instanceof Blob) {\n                        event.image = data_uri(object);\n                    }\n                    var ret = fire_event('onPaste', [event]);\n                    if (ret) {\n                        if (is_function(ret.then || ret.done)) {\n                            return (ret.then || ret.done).call(ret, function(ret) {\n                                echo(ret, true);\n                            });\n                        } else {\n                            echo(ret, true);\n                        }\n                    } else if (ret !== false) {\n                        echo(event.image || event.text, true);\n                    }\n                } else if (object instanceof Blob) {\n                    echo_image(data_uri(object));\n                } else if (typeof object === 'string') {\n                    if (object.match(/^(data:|blob:)/)) {\n                        echo_image(object);\n                    } else {\n                        self.insert(object);\n                    }\n                }\n            }\n            if (e.clipboardData) {\n                if (self.enabled()) {\n                    var items = e.clipboardData.items;\n                    if (items) {\n                        for (var i = 0; i < items.length; i++) {\n                            if (is_type(items[i], 'image') && settings.pasteImage) {\n                                var blob = items[i].getAsFile();\n                                echo(blob);\n                            } else if (is_type(items[i], 'text/plain')) {\n                                items[i].getAsString(function(text) {\n                                    echo(text.replace(/\\r/g, ''));\n                                });\n                            }\n                        }\n                    } else if (e.clipboardData.getData) {\n                        var text = e.clipboardData.getData('text/plain');\n                        echo(text.replace(/\\r/g, ''));\n                    }\n                    return false;\n                }\n            }\n        }\n        $(document).on('paste.terminal_' + self.id(), paste_event);\n        var terminal_init_keymap = $.extend(\n            {},\n            keymap,\n            $.omap(settings.keymap || {}, function(key, fn) {\n                if (!keymap[key]) {\n                    return fn.bind(self);\n                }\n                return function(e, original) {\n                    // new keymap function will get default as 2nd argument\n                    return fn.call(self, e, function() {\n                        return keymap[key](e, original);\n                    });\n                };\n            })\n        );\n        make_interpreter(init_interpreter, settings.login, function(interpreter) {\n            if (settings.completion && typeof settings.completion !== 'boolean' ||\n                !settings.completion) {\n                // overwrite interpreter completion by global setting #224\n                // we use string to indicate that it need to be taken from settings\n                // so we are able to change it using option API method\n                interpreter.completion = 'settings';\n            }\n            var prompt = settings.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            interpreters = new Stack($.extend({}, settings.extra, {\n                name: settings.name,\n                prompt: prompt,\n                keypress: settings.keypress,\n                keydown: settings.keydown,\n                resize: settings.onResize,\n                greetings: settings.greetings,\n                mousewheel: settings.mousewheel,\n                history: settings.history,\n                keymap: terminal_init_keymap\n            }, interpreter));\n            // CREATE COMMAND LINE\n            command_line = $('<div/>').appendTo(wrapper).cmd({\n                tabindex: settings.tabindex,\n                mobileDelete: settings.mobileDelete,\n                mobileIngoreAutoSpace: settings.mobileIngoreAutoSpace,\n                prompt: global_login_fn ? false : prompt,\n                history: settings.memory ? 'memory' : settings.history,\n                historyFilter: settings.historyFilter,\n                historySize: settings.historySize,\n                caseSensitiveSearch: settings.caseSensitiveSearch,\n                onPaste: settings.onPaste,\n                width: '100%',\n                enabled: false,\n                charWidth: char_size.width,\n                keydown: key_down,\n                keymap: terminal_init_keymap,\n                clickTimeout: settings.clickTimeout,\n                holdTimeout: settings.holdTimeout,\n                holdRepeatTimeout: settings.holdRepeatTimeout,\n                repeatTimeoutKeys: settings.repeatTimeoutKeys,\n                allowedAttributes: settings.allowedAttributes,\n                keypress: key_press,\n                tabs: settings.tabs,\n                onPositionChange: function() {\n                    var args = [].slice.call(arguments);\n                    make_cursor_visible();\n                    fire_event('onPositionChange', args);\n                },\n                onCommandChange: function(command) {\n                    // resize is not triggered when insert called just after init\n                    //  and scrollbar appear\n                    if (old_width !== fill.width()) {\n                        // resizer handler will update old_width\n                        self.resizer();\n                    }\n                    fire_event('onCommandChange', [command]);\n                    make_cursor_visible();\n                },\n                commands: commands\n            });\n            function disable(e) {\n                if (is_mobile) {\n                    return;\n                }\n                e = e.originalEvent;\n                if (e) {\n                    // e.terget is body when click outside of context menu to close it\n                    // even if you click on terminal\n                    var node = document.elementFromPoint(e.clientX, e.clientY);\n                    if (!$(node).closest('.terminal').length && self.enabled()) {\n                        // we only need to disable when click outside of terminal\n                        // click on other terminal is handled by focus event\n                        self.disable();\n                    }\n                }\n            }\n            self.oneTime(100, function() {\n                $(document).bind('click.terminal_' + self.id(), disable).\n                    bind('contextmenu.terminal_' + self.id(), disable);\n            });\n            var $win = $(window);\n            // cordova application, if keyboard was open and we resume, it will be\n            // closed so we need to disable terminal so you can enable it with tap\n            document.addEventListener(\"resume\", function() {\n                self.disable();\n            });\n            // istanbul ignore next\n            if (is_mobile) {\n                (function() {\n                    self.addClass('terminal-mobile');\n                    var start;\n                    var move;\n                    var enabled;\n                    var SENSITIVITY = 3;\n                    var clip = command_line.clip();\n                    var HOLD_TIME = 200;\n                    var timer;\n                    clip.$node.off('touchstart.cmd');\n                    self.on('touchstart.terminal', function(e) {\n                        e = e.originalEvent;\n                        window.touch_event = e;\n                        if (e.target.tagName.toLowerCase() === 'a') {\n                            return;\n                        }\n                        if (!frozen && e.touches.length === 1) {\n                            enabled = self.enabled();\n                            var point = e.touches[0];\n                            start = {\n                                x: point.clientX,\n                                y: point.clientY\n                            };\n                            timer = setTimeout(function() {\n                                start = null;\n                            }, HOLD_TIME);\n                        }\n                    }).on('touchmove.terminal', function(e) {\n                        if (e.touches.length === 1 && start) {\n                            var point = e.touches[0];\n                            var diff_x = Math.abs(point.clientX - start.x);\n                            var diff_y = Math.abs(point.clientY - start.y);\n                            if (diff_x > SENSITIVITY || diff_y > SENSITIVITY) {\n                                move = true;\n                            }\n                        }\n                    }).on('touchend.terminal', function() {\n                        if (start) {\n                            clearTimeout(timer);\n                            if (!move) {\n                                if (!enabled) {\n                                    clip.focus();\n                                    self.focus();\n                                } else {\n                                    clip.blur();\n                                    self.disable();\n                                }\n                            }\n                        }\n                        move = false;\n                        start = null;\n                    });\n                })();\n            } else {\n                // work weird on mobile\n                $win.on('focus.terminal_' + self.id(), focus_terminal).\n                    on('blur.terminal_' + self.id(), blur_terminal);\n                // context is used to check if terminal should not scroll to bottom\n                // after right click on  e.g. img, canvas, a and then click to hide\n                // the menu. The problem is that right click on those elements don't\n                // move the textarea to show proper context menu like save as on images\n                // or open on links. See #644 bug\n                var was_ctx_event;\n                // detect mouse drag\n                (function() {\n                    var count = 0;\n                    var $target;\n                    var name = 'click_' + self.id();\n                    var textarea = self.find('.cmd textarea');\n                    function click() {\n                        if ($target.is('.terminal') ||\n                            $target.is('.terminal-wrapper')) {\n                            var len = self.get_command().length;\n                            self.set_position(len);\n                        } else if ($target.closest('.cmd-prompt').length) {\n                            self.set_position(0);\n                        }\n                        if (!textarea.is(':focus')) {\n                            textarea.focus();\n                        }\n                        reset();\n                    }\n                    function reset() {\n                        count = 0;\n                        $target = null;\n                    }\n                    var ignore_elements = '.terminal-output textarea,' +\n                        '.terminal-output input';\n                    self.mousedown(function(e) {\n                        if (!scrollbar_event(e, fill)) {\n                            $target = $(e.target);\n                        }\n                    }).mouseup(function() {\n                        if (was_ctx_event) {\n                            was_ctx_event = false;\n                            return;\n                        }\n                        if ($target && $target.closest(ignore_elements).length) {\n                            if (enabled) {\n                                self.disable();\n                            }\n                        } else if (get_selected_html() === '' && $target) {\n                            if (++count === 1) {\n                                if (!frozen) {\n                                    if (!enabled) {\n                                        self.focus();\n                                        self.scroll_to_bottom();\n                                    } else {\n                                        var timeout = settings.clickTimeout;\n                                        self.oneTime(timeout, name, click);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                self.stopTime(name);\n                            }\n                        }\n                        reset();\n                    }).dblclick(function() {\n                        reset();\n                        self.stopTime(name);\n                    });\n                })();\n                (function() {\n                    var $clip = command_line.clip().$node;\n                    function is_context_event(e) {\n                        return e.type === 'mousedown' && e.buttons === 2 ||\n                            e.type === 'contextmenu';\n                    }\n                    var event_name;\n                    if ('oncontextmenu' in window) {\n                        event_name = 'contextmenu.terminal';\n                    } else {\n                        event_name = 'mousedown.terminal';\n                    }\n                    self.on(event_name, function(e) {\n                        was_ctx_event = get_selected_html() === '' && is_context_event(e);\n                        if (was_ctx_event) {\n                            var $target = $(e.target);\n                            if ($target.is('img,value,audio,object,canvas,a')) {\n                                return;\n                            }\n                            if (!self.enabled()) {\n                                self.enable();\n                            }\n                            var cmd_offset = command_line.offset();\n                            var cmd_rect = command_line[0].getBoundingClientRect();\n                            var self_offset = self.offset();\n                            var top_limit = self_offset.top - cmd_offset.top;\n                            var top = Math.max(e.pageY - cmd_offset.top - 20, top_limit);\n                            var left = e.pageX - cmd_offset.left - 20;\n                            var height = 4 * 14;\n                            var width = 5 * 14;\n                            var rect = self[0].getBoundingClientRect();\n                            // we need width without scrollbar\n                            var content_width = fill.outerWidth();\n                            // fix jumping when click near bottom or left edge #592\n                            var diff_h = (top + cmd_rect.top + height);\n                            diff_h = diff_h - rect.height - rect.top;\n                            var diff_w = (left + cmd_rect.left + width);\n                            // in Chrome scrollbar is added even when width\n                            // of textarea is smaller, adding 1px solved the issue\n                            diff_w = diff_w - content_width - rect.left;\n                            if (diff_h > 0) {\n                                height -= Math.ceil(diff_h);\n                            }\n                            if (diff_w > 0) {\n                                width -= Math.ceil(diff_w);\n                            }\n                            $clip.attr('style', [\n                                'left:' + left + 'px !important',\n                                'top:' + top + 'px !important',\n                                'width:' + width + 'px !important',\n                                'height:' + height + 'px !important'\n                            ].join(';'));\n                            if (!$clip.is(':focus')) {\n                                $clip.focus();\n                            }\n                            self.stopTime('textarea');\n                            self.oneTime(100, 'textarea', function() {\n                                var props = {\n                                    left: '',\n                                    top: '',\n                                    width: '',\n                                    height: ''\n                                };\n                                if (!is_css_variables_supported) {\n                                    var in_line = self.find('.cmd .cmd-cursor-line')\n                                        .prevUntil('.cmd-prompt').length;\n                                    props.top = in_line * 14 + 'px';\n                                }\n                                $clip.css(props);\n                            });\n                            self.stopTime('selection');\n                            self.everyTime(20, 'selection', function() {\n                                if ($clip[0].selection !== $clip[0].value) {\n                                    if (get_textarea_selection($clip[0])) {\n                                        clear_textarea_selection($clip[0]);\n                                        select(\n                                            self.find('.terminal-output')[0],\n                                            self.find('.cmd div:last-of-type')[0]\n                                        );\n                                        self.stopTime('selection');\n                                    }\n                                }\n                            });\n                        }\n                    });\n                })();\n                self.on('scroll', function() {\n                    var $textarea = self.find('textarea');\n                    var rect = self[0].getBoundingClientRect();\n                    var height = self[0].scrollHeight;\n                    var scrollTop = self.scrollTop();\n                    var diff = height - (scrollTop + rect.height);\n                    // if scrolled to bottom top need to be aligned with cursor line\n                    // done by CSS file using css variables\n                    if (diff === 0) {\n                        $textarea.css('top', '');\n                    } else {\n                        $textarea.css('top', -diff);\n                    }\n                });\n            }\n            self.on('click', 'a', function(e) {\n                var $this = $(this);\n                if ($this.closest('.terminal-exception').length) {\n                    var href = $this.attr('href');\n                    if (href.match(/:[0-9]+$/)) { // display line if specified\n                        e.preventDefault();\n                        print_line(href, self.cols());\n                    }\n                }\n                // refocus because links have tabindex in case where user want\n                // tab change urls, we can ignore this function on click\n                if (enabled) {\n                    self.find('.cmd textarea').focus();\n                }\n            });\n            function calculate_char_size() {\n                var width = char_size.width;\n                char_size = get_char_size(self);\n                if (width !== char_size.width) {\n                    command_line.option('charWidth', char_size.width).refresh();\n                }\n            }\n            resize();\n            function resize() {\n                if (self.is(':visible')) {\n                    var width = fill.width();\n                    var height = fill.height();\n                    if (need_char_size_recalculate) {\n                        need_char_size_recalculate = !terminal_ready(self);\n                        calculate_char_size();\n                    }\n                    // prevent too many calculations in IE\n                    if (old_height !== height || old_width !== width) {\n                        self.resize();\n                    }\n                    old_height = height;\n                    old_width = width;\n                }\n            }\n            function create_resizers() {\n                var options = {\n                    prefix: 'terminal-'\n                };\n                self.resizer('unbind').resizer(resize, options);\n                font_resizer.resizer('unbind').resizer(function() {\n                    calculate_char_size();\n                    self.resize();\n                }, options);\n            }\n            function bottom_detect(intersections) {\n                is_bottom_detected = intersections[0].intersectionRatio === 1;\n            }\n            function create_bottom_detect() {\n                if (window.IntersectionObserver) {\n                    var top = $('<div class=\"terminal-scroll-marker\"/>').appendTo(self);\n                    var marker = top;\n                    if (settings.scrollBottomOffset !== -1) {\n                        marker = $('<div/>').css({\n                            height: settings.scrollBottomOffset\n                        }).appendTo(top);\n                    }\n                    is_bottom_observer = new IntersectionObserver(bottom_detect, {\n                        root: self[0]\n                    });\n                    is_bottom_observer.observe(marker[0]);\n                }\n            }\n            // this observer can be added imedietely even if terminal is not in the DOM\n            // because both of the elements (root and target) are in same fragment\n            create_bottom_detect();\n            if (self.is(':visible')) {\n                create_resizers();\n            }\n            function observe_visibility() {\n                if (visibility_observer) {\n                    if (visibility_observer.unobserve) {\n                        visibility_observer.unobserve(self[0]);\n                    } else {\n                        clearInterval(visibility_observer);\n                    }\n                }\n                var was_enabled = self.enabled();\n                var visible = self.is(':visible');\n                if (was_enabled && !visible) {\n                    self.disable();\n                }\n                if (visible) {\n                    create_resizers();\n                } else {\n                    // hide terminal content until it's resized (and num chars calculated)\n                    wrapper.css('visibility', 'hidden');\n                }\n                function visibility_checker() {\n                    if (self.is(':visible') && !visible) {\n                        visible = true;\n                        create_resizers();\n                        calculate_char_size();\n                        resize();\n                        if (was_enabled) {\n                            self.enable();\n                        }\n                        wrapper.css('visibility', '');\n                    } else if (visible && !self.is(':visible')) {\n                        visible = false;\n                        was_enabled = $.terminal.active() === self && self.enabled();\n                        self.disable();\n                        wrapper.css('visibility', 'hidden');\n                    }\n                }\n                if (window.IntersectionObserver && self.css('position') !== 'fixed') {\n                    visibility_observer = new IntersectionObserver(visibility_checker, {\n                        root: null\n                    });\n                    visibility_observer.observe(self[0]);\n                } else {\n                    visibility_observer = setInterval(visibility_checker, 100);\n                }\n            }\n            var in_dom = !!self.closest('body').length;\n            var MutationObsrv = window.MutationObserver || window.WebKitMutationObserver;\n            if (MutationObsrv) {\n                mutation_observer = new MutationObsrv(function() {\n                    if (self.closest('body').length) {\n                        if (!in_dom) {\n                            self.scroll_to_bottom();\n                            // this observer need to be added when terminal is in the DOM\n                            observe_visibility();\n                            resize();\n                        }\n                        in_dom = true;\n                    } else if (in_dom) {\n                        in_dom = false;\n                    }\n                });\n                mutation_observer.observe(document.body, {childList: true});\n            }\n            if (in_dom) {\n                // check if element is in the DOM if not running IntersectionObserver\n                // don't make sense\n                observe_visibility();\n            }\n            command_queue.resolve();\n            // touch devices need touch event to get virtual keyboard\n            if (enabled && self.is(':visible') && !is_mobile) {\n                self.focus(undefined, true);\n            } else {\n                self.disable();\n            }\n            // -------------------------------------------------------------\n            // Run Login\n            if (is_function(global_login_fn)) {\n                self.login(global_login_fn, true, initialize);\n            } else {\n                initialize();\n            }\n            // -------------------------------------------------------------\n            // :: helper\n            function exec_spec(spec, options) {\n                var terminal = terminals.get()[spec[0]];\n                // execute if belong to this terminal\n                var defer = $.Deferred();\n                if (terminal && terminal_id === terminal.id()) {\n                    if (!spec[2]) {\n                        defer.resolve();\n                        return defer.promise();\n                    } else if (paused) {\n                        resume_callbacks.push(function() {\n                            return terminal.exec(spec[2], options).done(function() {\n                                terminal.save_state(spec[2], true, spec[1]);\n                                defer.resolve();\n                            });\n                        });\n                        return defer.promise();\n                    } else {\n                        return terminal.exec(spec[2], options).done(function() {\n                            terminal.save_state(spec[2], true, spec[1]);\n                        });\n                    }\n                }\n            }\n            // exec from hash called in each terminal instance\n            if (settings.execHash) {\n                if (location.hash) {\n                    // wait until login is initialized\n                    setTimeout(function() {\n                        try {\n                            var hash = location.hash.replace(/^#/, '');\n                            // yes no var - local inside terminal\n                            hash_commands = JSON.parse(decodeURIComponent(hash));\n                            if (!hash.match(/\\[/)) {\n                                // fix the hash to look like array if it's not\n                                replace_hash(hash_commands);\n                            }\n                            var i = 0;\n                            var options = {\n                                typing: settings.execAnimation,\n                                delay: settings.execAnimationDelay\n                            };\n                            (function recur() {\n                                var spec = hash_commands[i++];\n                                if (spec) {\n                                    exec_spec(spec, options).done(recur);\n                                } else {\n                                    change_hash = true;\n                                }\n                            })();// */\n                        } catch (e) {\n                            // invalid json - ignore\n                        }\n                    });\n                } else {\n                    change_hash = true;\n                }\n            } else {\n                change_hash = true; // if enabled later\n            }\n            // change_hash = true; // exec can now change hash\n            // -------------------------------------------------------------\n            /* istanbul ignore next */\n            (function() {\n                var shift = false;\n                $(document).bind('keydown.terminal_' + self.id(), function(e) {\n                    if (e.shiftKey) {\n                        shift = true;\n                    }\n                }).bind('keyup.terminal_' + self.id(), function(e) {\n                    // in Google Chromium/Linux shiftKey is false\n                    if (e.shiftKey || e.which === 16) {\n                        shift = false;\n                    }\n                });\n                // this could work without calling scroll on wheel event but we\n                // need it for cases where you have mouse wheel work differently\n                // like with less command that scroll text\n                function mousewheel(event, delta) {\n                    if (!shift) {\n                        var interpreter = interpreters.top();\n                        var ret;\n                        if (is_function(interpreter.mousewheel)) {\n                            ret = interpreter.mousewheel(event, delta, self);\n                        } else if (is_function(settings.mousewheel)) {\n                            ret = settings.mousewheel(event, delta, self);\n                        }\n                        if (ret === true) {\n                            return;\n                        }\n                        if ((have_scrollbar() || ret === false) && !event.ctrlKey) {\n                            event.stopPropagation();\n                            event.preventDefault();\n                        }\n                        if (ret === false) {\n                            return false;\n                        }\n                        if (delta > 0) {\n                            self.scroll(-40);\n                        } else {\n                            self.scroll(40);\n                        }\n                    }\n                }\n                if ($.event.special.mousewheel) {\n                    // we keep mousewheel plugin just in case\n                    self.on('mousewheel', mousewheel);\n                } else {\n                    // detection take from:\n                    // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n                    var event;\n                    var div = document.createElement(\"div\");\n                    if (\"onwheel\" in div) {\n                        event = \"wheel\"; // Modern browsers support \"wheel\"\n                    } else if (document.onmousewheel !== undefined) {\n                        // Webkit and IE support at least \"mousewheel\"\n                        event = \"mousewheel\";\n                    } else {\n                        // let's assume that remaining browsers are older Firefox\n                        event = \"DOMMouseScroll\";\n                    }\n                    div = null;\n                    self.on(event, function(e) {\n                        var delta;\n                        if (event === 'mousewheel') {\n                            delta = - 1 / 40 * e.originalEvent.wheelDelta;\n                        } else {\n                            delta = e.originalEvent.deltaY || e.originalEvent.detail;\n                        }\n                        mousewheel(e, -delta);\n                    });\n                }\n                self.touch_scroll(function(event) {\n                    var delta = event.current.clientY - event.previous.clientY;\n                    var ret;\n                    var interpreter = interpreters.top();\n                    if (is_function(interpreter.touchscroll)) {\n                        ret = interpreter.touchscroll(event, delta, self);\n                    } else if (is_function(settings.touchscroll)) {\n                        ret = settings.touchscroll(event, delta, self);\n                    }\n                    css(self[0], {\n                        '--terminal-scroll': self.prop('scrollTop')\n                    });\n                    if (ret === true) {\n                        return;\n                    }\n                    return false;\n                });\n            })();\n        }); // make_interpreter\n        return self;\n    }; // terminal plugin\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=style&index=0&id=30d18f94&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=style&index=0&id=0368514c&scoped=true&lang=sass&\"","import Vue from 'vue'\nimport VueI18n from 'vue-i18n'\nimport Quasar from 'quasar/src/vue-plugin.js';\n\nlet lang = document.getElementsByTagName('html')[0].getAttribute('lang')\nif (lang !== null) {\n    lang = lang.split('-', 2)[0]\n}\nVue.use(VueI18n)\n\nfunction loadLocaleMessages() {\n    const locales = require.context('../locales', true, /[A-Za-z0-9-_,\\s]+\\.json$/i)\n    const messages = {}\n    locales.keys().forEach(key => {\n        const matched = key.match(/([A-Za-z0-9-_]+)\\./i)\n        if (matched && matched.length > 1) {\n            const locale = matched[1]\n            messages[locale] = locales(key)\n        }\n    })\n    return messages\n}\n\nexport class I18n extends VueI18n {\n    public readonly $v: typeof VueI18n\n\n    constructor(options: VueI18n.I18nOptions) {\n        super(options)\n        this.$v = VueI18n\n    }\n}\n\nexport const i18n: I18n = new I18n({\n    locale: lang || process.env.VUE_APP_I18N_LOCALE || 'en',\n    fallbackLocale: process.env.VUE_APP_I18N_FALLBACK_LOCALE || 'en',\n    messages: loadLocaleMessages()\n})\n\nexport default i18n\nVue.prototype.$l = (key: string, values?: any[]): string => {\n    const res = i18n.t(key, values)\n    return res.toString()\n}\nVue.$l = Vue.prototype.$l\n"],"sourceRoot":""}