{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Terminal.vue?d9cd","webpack:///./src/lib/BlocklyHelper.ts","webpack:///./src/components/DataBlock.vue?5063","webpack:///./src/components/CodeBlockButton.vue?86c3","webpack:///./src/components/ErrorTip.vue?97bb","webpack:///./src/locales sync [A-Za-z0-9-_,\\s]+\\.json$/","webpack:///./src/components/RandomizerSettings.vue?53b8","webpack:///./src/lib/glsl/glsl.js","webpack:///./src/components/CodeBlocksSettings.vue?08ae","webpack:///./src/lib/ICompilerRegistry.ts","webpack:///./src/components/CodeBlocks.vue?730d","webpack:///./src/components/CodeBlock.vue?bd8e","webpack:///./src/components/ErrorTip.vue?06c2","webpack:///./src/components/ErrorTip.vue?ae25","webpack:///./src/components/ErrorTip.vue?9de3","webpack:///./src/components/ErrorTip.vue?cdc8","webpack:///./src/components/CodeBlockButton.vue?4ac2","webpack:///./src/components/CodeBlockButton.vue?8dde","webpack:///./src/components/CodeBlockButton.vue?3b91","webpack:///./src/components/CodeBlockButton.vue?5062","webpack:///./src/components/CodeBlock.vue?2089","webpack:///./src/components/CodeBlock.vue?f7f2","webpack:///./src/components/CodeBlock.vue?4831","webpack:///./src/components/CodePanel.vue?e16d","webpack:///./src/components/BaseBlock.vue?b9c1","webpack:///./src/components/BaseBlock.vue","webpack:///./src/components/BaseBlock.vue?2d8c","webpack:///./src/lib/ICodeBlocks.ts","webpack:///./src/AppEditor.vue?6f5a","webpack:///./src/components/PlaygroundCanvas.vue?0b7e","webpack:///./src/components/TipTap.vue?5d31","webpack:///./src/components/CodeBlockContainer.vue?5810","webpack:///./src/lib/IBlocklyHelper.ts","webpack:///./src/plugins/uuid.ts","webpack:///./src/plugins/quasar.ts","webpack:///./src/plugins/codemirror.ts","webpack:///./src/plugins/codeBlocks.ts","webpack:///./src/plugins/compilerState.ts","webpack:///./src/plugins/highlight.ts","webpack:///./src/plugins/tagger.ts","webpack:///./src/compiler/doppio.v001.js","webpack:///./src/compiler/teavm.v100.ts","webpack:///./src/compiler/teavm.v101.ts","webpack:///./src/compiler/java.ts","webpack:///./src/compiler/javascript.v100.ts","webpack:///./src/compiler/javascript.v101.ts","webpack:///./src/compiler/javascript.v102.ts","webpack:///./src/compiler/javascript.ts","webpack:///./src/compiler/python.v100.ts","webpack:///./src/compiler/python.v101.ts","webpack:///./src/compiler/python.v102.ts","webpack:///./src/compiler/python.ts","webpack:///./src/compiler/glsl.v100.ts","webpack:///./src/compiler/glsl.ts","webpack:///./src/lib/CompilerRegistry.ts","webpack:///./src/lib/scriptBlock.ts","webpack:///./src/App.vue?02cb","webpack:///./src/components/CodeBlocks.vue?12e9","webpack:///./src/components/CodeBlockContainer.vue?437f","webpack:///./src/lib/BlockloadManagers/PositioningManager.ts","webpack:///./src/lib/BlockloadManagers/BlocklyManager.ts","webpack:///./src/components/CodeBlockContainer.vue?2263","webpack:///./src/components/CodeBlockContainer.vue?e345","webpack:///./src/components/CodeBlockContainer.vue?c445","webpack:///./src/components/CodeBlocksSettings.vue?19b0","webpack:///./src/components/RandomizerSettings.vue?2fb7","webpack:///./src/components/RandomizerSetEditor.vue?e9c9","webpack:///./src/components/RandomizerSetEditor.vue?8956","webpack:///./src/components/RandomizerSetEditor.vue?515c","webpack:///./src/components/RandomizerSetEditor.vue","webpack:///./src/components/RandomizerSettings.vue?ec21","webpack:///./src/components/RandomizerSettings.vue?17b7","webpack:///./src/components/RandomizerSettings.vue?d205","webpack:///./src/components/CodeBlocksSettings.vue?dd5d","webpack:///./src/components/CodeBlocksSettings.vue?d44b","webpack:///./src/components/CodeBlocksSettings.vue?da51","webpack:///./src/components/CodePanel.vue?8c0b","webpack:///./src/components/CodePanel.vue?8d00","webpack:///./src/components/CodePanel.vue?2070","webpack:///./src/components/CodePanel.vue?4ef9","webpack:///./src/components/CodePlayground.vue?84b8","webpack:///./src/components/PlaygroundCanvas.vue?a4e3","webpack:///./src/components/PlaygroundCanvas.vue?3d8f","webpack:///./src/components/PlaygroundCanvas.vue?53fd","webpack:///./src/components/PlaygroundCanvas.vue?ce4c","webpack:///./src/components/CodePlayground.vue?6377","webpack:///./src/components/CodePlayground.vue?9969","webpack:///./src/components/CodePlayground.vue?32a7","webpack:///./src/components/CodeREPL.vue?fd97","webpack:///./src/components/Terminal.vue?5cf0","webpack:///./src/components/Terminal.vue?a698","webpack:///./src/components/Terminal.vue?2dfc","webpack:///./src/components/Terminal.vue?064a","webpack:///./src/components/CodeREPL.vue?40f0","webpack:///./src/components/CodeREPL.vue?df8e","webpack:///./src/components/CodeREPL.vue","webpack:///./src/components/SimpleText.vue?0129","webpack:///./src/components/TipTap.vue?51ff","webpack:///./src/components/TipTap.vue?f154","webpack:///./src/components/TipTap.vue?041e","webpack:///./src/components/TipTap.vue?fbce","webpack:///./src/components/SimpleText.vue?b0a8","webpack:///./src/components/SimpleText.vue?d8f3","webpack:///./src/components/SimpleText.vue","webpack:///./src/components/DataBlock.vue?480a","webpack:///./src/components/DataBlock.vue?0da6","webpack:///./src/components/DataBlock.vue?4e1b","webpack:///./src/components/DataBlock.vue?6b7a","webpack:///./src/components/CodeBlocks.vue?bdc4","webpack:///./src/components/CodeBlocks.vue?f12a","webpack:///./src/components/CodeBlocks.vue?73e2","webpack:///src/App.vue","webpack:///./src/App.vue?099c","webpack:///./src/App.vue?7d8b","webpack:///./src/AppEditor.vue?c892","webpack:///./src/components/CodeBlocksEditor.vue?ed7f","webpack:///./src/components/CodeBlocksEditor.vue","webpack:///./src/components/CodeBlocksEditor.vue?6cf9","webpack:///src/AppEditor.vue","webpack:///./src/AppEditor.vue?1c67","webpack:///./src/AppEditor.vue?6d6f","webpack:///./src/lib/BlockloadManagers/BlockManager.ts","webpack:///./src/lib/BlockloadManagers/PlaygroundManager.ts","webpack:///./src/lib/BlockloadManagers/DataManager.ts","webpack:///./src/lib/BlockloadManagers/REPLManager.ts","webpack:///./src/lib/codeBlocksManager.ts","webpack:///./src/main.ts","webpack:///./src/components/CodeBlock.vue?961a","webpack:///./src/App.vue?40d9","webpack:///./src/components/CodePlayground.vue?7cfb","webpack:///./src/lib/jquery.terminal.js","webpack:///./src/components/CodePlayground.vue?2ec8","webpack:///./src/components/DataBlock.vue?bcec","webpack:///./src/plugins/i18n.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","ColorThemeSelection","label","ColorHues","PredefinedBlockTypes","keys","map","ret","$l","ColorSelection","ColorSelectionWithNone","blockStyles","colour_blocks","colourPrimary","Colour","colourSecondary","colourTertiary","hat","list_blocks","List","logic_blocks","Logic","loop_blocks","Loop","math_blocks","Math","procedure_blocks","Procedure","text_blocks","Text","variable_blocks","Variable","variable_dynamic_blocks","Variable_dynamic","hat_blocks","categoryStyles","colour_category","colour","list_category","logic_category","loop_category","math_category","procedure_category","text_category","variable_category","variable_dynamic_category","BlocklyHelper","a","items","item","serializeToolboxItem","join","res","color","custom","this","serializeToolboxItems","serializeToolboxCategory","toolbox","catCount","categories","serializeToolboxCategories","cat","bl","cp","JSON","toHTMLColor","stringify","getBlockDescription","bls","xml","replace","cc","codeUndefines","Blockly","prepareBlocklyCode","codeString","_code","Function","$CodeBlock","itemForValue","forEach","cl","toColor","blocklyHelper","webpackContext","req","id","webpackContextResolve","mod","require","define","CodeMirror","words","str","obj","split","defineMode","config","parserConfig","curPunc","indentUnit","statementIndentUnit","dontAlignCalls","keywords","builtin","blockKeywords","atoms","hooks","multiLineStrings","indentStatements","isOperatorChar","tokenBase","stream","state","ch","next","tokenize","tokenString","test","eatWhile","eat","tokenComment","skipToEnd","cur","current","propertyIsEnumerable","quote","escaped","end","maybeEnd","Context","indented","column","align","prev","pushContext","col","indent","context","popContext","startState","basecolumn","startOfLine","token","ctx","sol","indentation","eatSpace","style","textAfter","Pass","firstChar","charAt","closing","electricChars","blockCommentStart","blockCommentEnd","lineComment","fold","cppHook","skipTo","eol","def","mimes","add","prop","helperType","registerHelper","defineMIME","modeProps","ErrorSeverity","render","_vm","_h","$createElement","_c","_self","class","typeName","directives","rawName","expression","attrs","block","isBookmarkPanel","ref","boxClass","options","namePrefix","parentID","on","onCodeReady","onCodeFocus","onCodeChangeDefered","onCodeKeyHandle","staticClass","_v","_s","$t","altCode","altOptions","onAltCodeReady","onAltCodeFocus","onAltCodeChangeDefered","_e","staticRenderFns","severityClass","severityIcon","_l","iconForSeverity","severity","classForSeverity","component","QIcon","QTooltip","iconName","onClick","bookmarked","uuid","appSettings","$GlobalEventHub","$emit","bookmarkMe","$on","onBookmark","$off","required","default","QBtn","ErrorTipCtor","extend","codeUpdateTimer","codeUpdateStartTime","continuousCodeUpdateTimer","codeNeedsTagUpdate","altCodeUpdateTimer","altCodeUpdateStartTime","canBookmark","editMode","codemirror","allMarks","getDoc","getAllMarks","className","$tagger","rnd","templ","clear","altcodemirror","clearGutter","editor","display","input","textarea","codeBox","$el","querySelectorAll","el","trim","$","text","content","iliasTypeNr","updateDiagnosticDisplay","onCodeChange","whenBlockIsReady","altBox","$nextTick","onAltCodeChange","alternativeContent","updateTagDisplay","updateHeight","newCode","now","Date","getTime","doIt","lineCountHint","doc","size","firstLineNumber","firstLine","tb","querySelector","emitWhenTypingInViewMode","indexOf","arguments","didAddText","keyCode","visibleLines","static","setSize","round","max","scopeUUID","replaceTemplateTagInString","newValue","randomizer","active","clearTagMarkers","getMarkers","markText","start","inclusiveLeft","inclusiveRight","title","startStyle","endStyle","hookClick","val","errors","clearErrorDisplay","first","line","info","lineInfo","element","gutterMarkers","$component","setGutterMarker","propsData","$mount","$refs","hasAlternativeContent","tagSet","hidden","readonly","toLowerCase","actualContent","theme","lineNumbers","tabSize","autoCloseBrackets","readOnly","gutters","refresh","readyWhenMounted","buildIt","log","addKeyMap","cMirror","Tab","execCommand","replaceTemplateTags","BaseBlock","validator","b","components","CodeBlockButton","muteReadyState","readyCount","whenBlockIsDestroyed","KnownBlockTypes","CodeOutputTypes","CodeExpansionType","BlockPrimaryColors","BlockSecondaryColors","BlockTertiaryColors","BlockOutputTypes","BlockSequenceTypes","BlockArgumentTypes","KnownBlocklyTypes","use","plugins","Dialog","animations","lang","set","mimeTypesForLanguage","mime","displayName","css","fortran","glsl","html","java","javascript","perl","php","python","loadSettings","scope","baseurl","settings","opt","outputObject","magicString","resultData","Array","isArray","json","idx","DATA","AUTO","MAGIC","substr","pString","parse","ee","parsedString","too","language","k","sort","refreshAllCodeMirrorsSync","find","globalState","SEVERITY_ERROR","SEVERITY_WARNING","Warning","$SEVERITY_ERROR","$SEVERITY_WARNING","$compilerState","globalStateHidden","globalStateMessage","runButtonForceHide","methods","hideGlobalState","displayGlobalState","setAllRunButtons","what","configure","useBR","registerLanguage","reg_hl","reg_code","$vue","processElements","inLang","elements","hasAttribute","processElement","processElementSimple","txt","innerHTML","m1","m2","m3","m4","m5","highlight","highlightAuto","MathJax","Hub","Register","StartupHook","highlightAll","highlightElement","hljs","$hljs","directive","binding","componentUpdated","randomAndTemplateTag","lines","markers","regex","RegExp","exec","index","lastIndex","marker","h","$uuid","v4","calle","processString","m0","tags","inTag","innerText","onclick","clickFunction","values","tagEl","$q","dialog","i18n","persistent","prompt","model","ok","icon","cancel","onOk","replaceTemplateTag","onCancel","onDismiss","me","self","highlighted","javaRunOverhead","runJavaWorker","questionID","callingCodeBlocks","max_ms","log_callback","info_callback","err_callback","compileFailedCallback","finishedExecutionCB","forceReload","exp","match","worker","Worker","Vue","timer","addEventListener","stdout","stderr","postMessage","cmd","terminate","JavaExec","setRunButton","showMessage","msg","enabled","singleton","loadedlibs","version","canRun","canStop","allowsContinousCompilation","allowsPersistentArguments","allowsMessagePassing","acceptsJSONArgument","allowsREPL","didPreload","requestedPreload","isReady","isRunning","preload","triggerResourceLoad","lock","initialize","initFileSystems","reroutStdStreams","ready","compileAndRun","args","runCreate","created","teaVMRunOverhead","experimental","deprecated","teaworker","sessionCompileListener","sessionID","sessionWorker","createTeaWorker","whenReady","command","mainClass","url","executionFinished","booted","compilerTimeout","time","replaceRec","getMainClass","regexpMainClass","myListener","phase","lineNumber","startLineNumber","startColumn","endLineNumber","endColumn","kind","humanReadable","runTimeout","removeEventListener","status","runListener","workerrun","runStart","javaCompiler_V100","keepAlive","didReceiveMessage","postMessageFunction","wr","dequeuePostponedMessages","whenFinishedHandler","beforeStartHandler","messagePosting","allowMessagePassing","javaCompiler_V101","versions","JavaCompilers","runJavaScriptWorker","not_allowed_keywords","prefixCode","postfixCode","URL","createObjectURL","Blob","testTimeout","testTimeoutIntern","onmessage","lineno","colno","javascriptCompiler_V100","startTime","performance","triggerTimeout","startExecution","willStartExecution","workerLibraries","$compilerRegistry","loadLibraries","libraries","compilerRegistry","registerDOMLib","javascriptCompiler_V101","javascriptCompiler_V102","JavascriptCompilers","runPythonWorker","prog","maxRuntime","logCallback","infoCallback","errCallback","finishCallback","replaceAllPoly","pyInp","messageData","pyProg","maxMS","stdOut","pythonCompiler_V100","legacy","spareWorker","runningWorker","pythonCompiler_V101","pythonLegacyCompiler_V101","legacyPython","python3","getWorker","setReady","interpreter","names","withREPL","onStateChange","onLog","onError","sub","incomplete","fatal","pythonCompiler_V102","PythonCompilers","runGLSLWorker","outputData","blocks","filter","hasCode","v100","GLSLCompilers","compilers","loadedURIs","updateMappings","afterLoadFinished","isLoadingLibs","langs","libs","utility","registerSingle","v","registerLibs","compilerInfo","cmps","languageType","oldVersion","newVersion","oldName","newName","loadedName","uri","order","onBuildSandboxEnv","didLoad","sandbox","domLibs","getLibObjects","uris","reduce","concat","domLibraries","whenLoaded","urisForDOMLibs","dlibs","loadURIs","loadCount","u","loadLib","register","Chart","THREE","lil","Phaser","IsometricMapGame","d3","addUpdateMapping","brain","tf","legacyCodeTemplate","prefix","postfix","v101CodeTemplate","v102CodeTemplate","jsErrorParser","columnNumber","stack","Number","$jsErrorParser","sandboxProxies","WeakMap","compileCode","addLoadedToSandbox","oldRequestAnimationFrame","requestAnimationFrame","callback","jQuery","Map","String","create$","createTextNode","getElementById","getElementsByClassName","devicePixelRatio","has","sandboxProxy","Proxy","unscopables","fkt","didInit","_runConfig","queuedMessages","queuedIncomingMessages","RESOURCES","init","update","requestsOriginalVersion","dequeueIncoming","pushError","rebuild","lazyInit","addArgumentsTo","cfg","doPostMessageToWorker","onMessage","beforeStart","whenFinished","addBlockDataFromBlocks","addBlockDataFromBlock","addBlockData","canvasElement","runner","resources","requests","array","fetch","response","blob","arrayBuffer","_runInit","catch","arunner","run","outputElement","parents","reset","output","processedOutput","initialOutput","parseError","onParseError","staticStyle","addonClass","backgroundColorClass","blockInfo","hasBookmark","panelBlock","onCompilerChange","onCompilerVersionChange","onRunStateChange","onContinousCompileStateChange","onMessagePassingChange","onKeepAliveChange","onPersistentArgumentsChange","onLanguageChange","onCharacterLimitChange","onTimeoutChange","onWorkerLibChange","onDomLibChange","onThemeChange","onOutputParserChange","onTypeChange","onVisibleLinesChange","onPlacementChange","onScriptVersionChange","moveUp","moveDown","removeBlock","onSetAutoReset","onReloadResources","onSetGenerateTemplate","onChangeOrder","themeForBlock","mimeType","activeTagSet","continuousCompile","blockBecameReady","onViewCodeChange","finalOutputObject","eventHub","onPlaygroundChangedOutput","onRunFromPlayground","$$v","$set","showGlobalMessages","stop","addNewBlock","hasREPL","center","domProps","outputHTML","colorClass","bgClass","types","scopedSlots","_u","fn","showTypeInfoDialog","proxy","typeObj","validNumber","hasAltComntent","scriptVersions","scriptVersionObj","shouldAutoReset","shouldReloadResources","shouldGenerateTemplate","canDefinePlacement","width","height","alignments","canMoveUp","positions","canMoveDown","expanded","toggleExpanded","$event","composing","serializedOptions","_t","inBlock","positioninLoadManager","customBlocks","arr","prepareCode","message0","args0","nextStatement","previousStatement","toString","blockly","toolboxInput","toolboxStr","defaultToolbox","toolboxOverride","useOverride","codes","loadFromDatablock","showControls","isTrue","loadCustomBlocks","loadToolbox","loadOverrideToolbox","loadCode","_expanded","blocklyLoader","loaders","blockTag","frank","settingsMenu","PLAYGROUND","TEXT","BLOCKHIDDEN","BLOCKSTATIC","BLOCK","BLOCKLY","REPL","scriptVersion","isNaN","refreshAllCodeMirrors","newID","isLast","objIn","extended","path","nr","filteredCopy","shouldAutoreset","generateTemplate","toArray","cm","QCard","QCardSection","QSelect","QPopupProxy","QInput","QToggle","QSlideTransition","QBanner","QItem","QItemSection","QItemLabel","languageHasCompiler","runCode","canContinousCompile","compiledLanguages","compilerLanguageObj","compilerVersions","compilerVersion","_g","_b","itemProps","itemEvents","isDeprecatedVersion","compilerLanguage","isExperimentalVersion","accepstArguments","showArgsInfoDialog","canPersistentArguments","persistentArguments","showPersistentArgsInfoDialog","messagePassing","showMessagesInfoDialog","showAliveInfoDialog","maxCharacters","outputParsers","outputParser","themes","codeTheme","solutionTheme","domLibrary","workerLibrary","addTag","tagClass","removeTag","addSet","isVisible","isCompleteSet","setVisible","getFullSet","removeSet","onShow","knownTags","_newTagName","previewIndex","sets","flat","ct","odata","RandomizerSetEditor","QList","QAvatar","languages","getCompiler","knownLanguages","versionsForLanguage","cmp","compiler","executionTimeout","vv","workerLibs","solution","continuousCompilation","showInfoDialog","RandomizerSettings","onExpandClick","saveBlock","visibleLinesNow","noContent","codeExpanded","actualAltContent","themeForCodeBlock","getThemeForBlock","_blockErrors","panelWidth","CodeBlock","runCount","emitRun","onCanvasChange","onDidInit","isExpandedAuto","setExpandedAuto","isExpandedLarge","setExpandedLarge","isExpandedTiny","setExpandedTiny","innerPlaygroundContainer","canvas","resetResources","resetBlockData","whenMounted","isPreparingRun","lastRun","needsCodeRebuild","initAndRebuildErrors","TINY","LARGE","resetBeforeRun","updateErrors","hasErrors","onFinalOutputObject","setExpanded","rebuildCode","reInitCode","onNextTick","invalidate","doInit","can","jStr","originalMode","PlaygroundCanvas","QBtnGroup","canStartREPL","emitStop","_m","sleep","term","echo","welcomeMessage","ps1","ps2","unlock","pause","set_prompt","newline","resume","terminal","greetings","waitReady","Terminal","updatedContentDefered","previewValue","updatedContent","eb","editBox","QField","textUpdateTimer","textUpdateStartTime","newVal","TipTap","onUpload","openImage","uploader","click","files","fl","startsWith","fr","FileReader","addImageURL","readAsDataURL","fileName","img","formatOutput","didInitialize","sansoutput","didClip","_finalOutputObject","didRunOnce","bookmarkedBlock","triggerRecompileWhenFinished","randomizerActive","nfo","newOutput","format_info","formatedText","format_error","last","nextLine","infoErrorOutput","processed","playgrounds","processMixedOutput","onRunFinished","resetOutput","clearDiagnostics","_args","initArgsForLanguage","runOptions","logInfo","logError","processDiagnostics","success","overrideOutput","returnState","finishedExecution","storeDefaultArgs","clearDefaultArgs","runConfig","blockid","completeSource","ctrlKey","metaKey","preventDefault","onkey","onBookmarkBlock","forceRun","CodeBlockContainer","CodeBlocksSettings","CodePlayground","SimpleText","CodePanel","CodeREPL","DataBlock","QLayout","QPageContainer","blockById","changeOrder","alts","textContent","blockLoader","playgroundLoader","dataLoader","REPLLoader","replaceRandomTagsInString","so","dataObj","recreateScriptObject","lineCount","newType","oldType","scopeSelector","useShadowDOM","shadowRoot","outerHTML","parent","parentElement","rewrap","replaceChild","shadow","attachShadow","each","st","link","cloneNode","inData","dataset","tagName","randomizerPreviewIndex","randomizerKnownTags","randomizerSets","question","cInfo","mapLibrary","blIn","as","toUpperCase","loader","constructBlock","MainBlock","defaultArgs","id1","id2","swap","props","AppEditor","App","instantiateVue","CodeBlocksManager","allCodeBlockParents","cbm","search","replacement","pattern","newstr","productionTip","mount","mountInElement","mountCodeBlocks","sprintf","cache","format","parse_tree","argv","arg","pad","pad_character","pad_length","cursor","tree_length","node_type","get_type","fromCharCode","parseInt","toExponential","parseFloat","toFixed","str_repeat","fmt","_fmt","arg_names","field_list","replacement_field","field_match","vsprintf","_argv","variable","multiplier","global","factory","root","jquery","wcwidth","debug","DelayQueue","callbacks","Callbacks","resolved","fire","omap","text_length","Clone","clone_object","tmp","clone_array","is_function","clone","localStorage","delete","hasLS","testKey","storage","setItem","removeItem","hasCookies","cookie","isLS","wls","wc","dt","setTime","toGMTString","rls","rc","nn","ca","dls","dc","Storage","remove","debounce","FUNC_ERROR_TEXT","isObject","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","nativeMax","nativeMin","min","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","timeWaiting","shouldInvoke","trailingEdge","flush","debounced","isInvoking","make_callback_plugin","factory_settings","noop","destroy","trigger","unbind","data_name","$this","handler","fireWith","removeData","jquery_resolve","defer","Deferred","unpromise","done","when","everyTime","interval","times","belay","oneTime","stopTime","guid","powers","timeParse","num","mult","counter","isFunction","constructor","$timers","$timerID","inProgress","setInterval","timers","clearInterval","_fn","lab","navigator","userAgent","one","els","undef","nativeSplit","compliantExecNpcg","separator","limit","separator2","lastLength","flags","ignoreCase","multiline","sticky","lastLastIndex","source","caret","pos","isContentEditable","contentEditable","getSelection","is","focus","range1","getRangeAt","range2","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","selectionStart","selection","createRange","body","createTextRange","moveToElementText","setEndPoint","range","bookmark","duplicate","getBookmark","moveToBookmark","moveStart","collapse","focusNode","setSelectionRange","select","resizer","ResizeObserver","observe","iframe","addClass","appendTo","contentWindow","observer","unobserve","off","touch_scroll","origin","previous","originalEvent","touches","is_fully_in_viewport","is_visible","node","container","box","getBoundingClientRect","viewport","top","bottom","IntersectionObserver","item_observer","entries","isIntersecting","ratio","entity_re","combine_chr_re","astral_symbols_re","emoji_re","mobile_re","tablet_re","format_split_re","format_parts_re","format_re","format_exist_re","format_full_re","format_begin_re","format_start_re","format_end_re","self_closing_re","color_re","url_re","url_nf_re","email_re","url_full_re","email_full_re","command_re","extended_command_re","format_exec_split_re","format_exec_re","float_re","re_re","string_re","unclosed_strings_re","broken_image","use_broken_image","animation_supported","animation","domPrefixes","elm","animationName","agent","is_IE","is_IEMobile","is_ch_unit_supported","div","is_css_variables_supported","CSS","supports","is_android","is_key_native","KeyboardEvent","proto","getOwnPropertyDescriptor","is_browser","is_mobile","check","platform","maxTouchPoints","vendor","opera","ch_unit_bug","isPlainObject","setProperty","getPropertyValue","a11y_hide","attr","role","base","space","abs","excepctions","alert_exception","Exception","exception_message","generate_id","firstPart","random","secondPart","scrollbar_event","left","offset","outerWidth","clientX","Cycle","rotate","skip","defined","append","front","restart","Boolean","Stack","is_array","pop","WorkerCache","validation","action","onCache","_onCache","_action","_validation","_cache","History","memory","storage_key","new_data","position","old","purge","enable","disable","toggle","OutputLines","_settings","_lines","_snapshot","FormatBuffer","_options","_format_cache","_output_buffer","with_prompt","escape_brackets","string","validate","valid","make_snapshot","snapshot","get_partial","update_snapshot","limit_snapshot","clear_snapshot","get_snapshot","acc","some","is_promise","import","has_newline","last_line","onClear","len","valid_index","cols","lines_to_show","outputLimit","pivot","NEW_LINE","raw","use_cache","useCache","empty","raw_lines","formatted","finalize","clear_cache","is_empty","cmd_index","defaults","mask","caseSensitiveSearch","historySize","history","onPositionChange","onCommandChange","inputStyle","mobileDelete","onPaste","clickTimeout","holdTimeout","holdRepeatTimeout","mobileIngoreAutoSpace","repeatTimeoutKeys","tabindex","tabs","mobile_ignore_key","maybe_data","wrapper","clip","num_chars","char_width","last_rendered_prompt","prompt_last_line","just_prompt_len","cursor_line","$node","autocapitalize","autocorrect","spellcheck","insertAfter","blur","removeAllRanges","before","prompt_len","backup_prompt","last_command","restart_animation","extra_prompt_margin","prompt_node","reverse_search","rev_search_str","reverse_search_position","kill_text","formatted_position","paste_count","line_marker","line_marker_re","empty_marker_re","get_char_pos","closest","prevAll","prevUntil","key_mapping","ie_key_fix","get_key","combo","shiftKey","altKey","keycodes","3","6","8","9","12","13","16","17","18","19","20","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","48","49","50","51","52","53","54","55","56","57","91","93","144","145","181","182","183","186","187","188","189","190","191","192","219","220","221","222","224","225","246","247","248","249","250","251","letter","keymap","reversed_keycodes","which","default_keymap","delete_forward","clipboard","hold","historyFilter","prev_command","no_keydown","commands","draw_prompt","insert","backspace_key","up_arrow","prev_history","down_arrow","next_history","reverse_history_search","draw_reverse_prompt","redraw","right","re","bare_text","return_true","home","paste_event","delete_backward","get_selected_html","text_to_clipboard","substring","isenabled","paste","fix_textarea","first_up_history","have_newlines","have_wrapping","lengths","wrap","simple_split_command_line","split_equal","escape_regex","unescape_brackets","formatting","strip","splitted","diff","left_over","after","$line","ending","next_broken","lastIndexOf","sum","mobile_focus","$clip","fix_cursor","getComputedStyle","_class","position_only","removeClass","new_cursor","insertBefore","animating","blink","toggleClass","clear_reverse_state","save_string","history_data","get_char_width","$prompt","get_num_chars","floor","process_cmd_line","skip_empty","nextUntil","first_len","strlen","cmd_line_worker","_previous_value","_cols","split_command_line","skip_formatted_position","escape_formatting","format_options","unixFormattingEscapeBrackets","apply_formatters","normalize","encoded","encode","charWidth","allowedAttributes","partition","is_multiline","is_emoji_formatting","is_formatting","prev_prompt_data","draw_cursor_line","end_line","cursor_end_line","empty_cursor","before_str","c_before","cursor_len","lines_after","last_ins","lines_before","original_string","from_last","last_len","new_pos","line_index","current_len","strings","redrawError","in_line","find_position","make_guess","opts","search_pos","guess","next_guess","codepoint_len","binary_search","chars","split_characters","format_prompt","have_formatting","format_split","encoded_last_line","crlf","spans","hide","show","fire_change_command","option","stay","removed","silent","new_keymap","original","bare_command","keypress_event","keydown_event","input_event","include_prompt","__set_prompt_margin","user_prompt","should_redraw","relative","display_position","new_formatted_pos","command_len","visible","resize","new_num_chars","invoke_key","shortcut","warn","ctrl","alt","meta","Event","documentElement","new_mask","skip_insert","prev_key","skip_keypress","dead_key","single_key","no_keypress","no_key","backspace","process","hold_pause","is_backspace","is_single","is_delay_key","specials","clear_reverse_search_key","skip_keydown","fake","exception","keydown","clear_hold","is_terminal_selected","keypress","normalized","inArray","chr","skip_input","finalize_input_event","keycode","get_next_character","charCodeAt","was_down","count","$target","is_prompt","down","button","count_selfclosing_formatting","entities","render_entities","_","hex","entity","safe","char_len","make_re_fn","starts_with","make_next_char_fun","tests","match_entity","match_combo","match_emoji","astral_match","normalize_position","char_width_prop","extra_css","bare","wide_characters","specs","spec","make_string","compare_fn","more_args","mid","startContainer","sel","rangeCount","cloneContents","with_selection","ranges","addRange","process_selected_line","$self","hasClass","process_div","process_selected_html","$html","$cmd_lines","support_copy","queryCommandSupported","$textarea","had_focus","writeText","$text","get_textarea_selection","selectionEnd","clear_textarea_selection","common_string","matchCase","string_case","candidate","candidateLower","currentLower","trigger_terminal_change","terminals","onTerminalChange","setBaseAndExtent","setStart","childNodes","process_command","quotes","rest","args_quotes","date","color_names","valid_color","unclosed_strings","special","is_extended_command","each_extended_command","parts","tracking_replace","rex","rep_string","new_string","new_position","last_index","c0","rep_len","iterate_formatting","is_space","is_open_formatting","is_escape_bracket","is_text","not_formatting","opening","next_iteration","char","is_next_space","prev_space","is_last","in_text","space_count","re_ent","braket","start_index","end_index","prev_index","start_formatting","end_formatting","semicolons","amp","keep_words","prev_format","first_index","line_length","last_bracket","can_break","stripped","text_len","new_index","after_index","closed_formatting","matched","sp","nested_formatting","class_i","attrs_i","unique","update_style","new_style","old_style","parse_style","stringify_formatting","stringify_attrs","stringify_class","stringify_styles","ignore","stringify_style","klass","get_inherit_style","update_attrs","new_attrs","classes","__inherit__","test_lengths","formatter","__no_warn__","should_format","have_any","formatters","apply_function_formatter","__meta__","found_position","partials","this_len","length_before","loop","position_partial","partial","linksNoReferrer","linksNoFollow","escape","anyLinks","filter_attr_names","allowed","filters","clean_data","add_attrs","rel_attr","unshift","is_path","with_url_validation","valid_href","valid_src","background","data_text","pre_process_link","pre_process_image","style_str","text_decoration","extra","columns","no_formatting","column_limit","whole","bracket","last_id","parse_argument","strict","parse_string","parse_arguments","split_arguments","parse_command","split_command","parse_options","boolean","single","extended_command","invokeMethods","deferred","change_hash","eval","iterator","replacer","new_formatter","warnings","ids","terminal_ready","get_char_size","rect","visiblity","temp","char_size","get_num_rows","same","same_case","is_object","is_deferred","jrpc","method","params","validJSONRPC","isNumeric","ajax","beforeSend","jxhr","jqXHR","content_type","getResponseHeader","contentType","dataType","async","rpc","version_set","copyright","version_string","reg","name_ver","signatures","exit","maskChar","checkArity","exceptionHandler","pauseEvents","softPause","mousewheel","touchscroll","cancelableAjax","processArguments","execAnimation","execAnimationDelay","processRPCResponse","completionEscape","convertLinks","scrollObject","historyState","importHistory","echoCommand","scrollOnEcho","login","unixFormatting","escapeBrackets","ansiParser","ansiArt","onAjaxError","pasteImage","scrollBottomOffset","wordAutocomplete","caseSensitiveAutocomplete","describe","onRPCError","doubleTab","doubleTabEchoCommand","completion","onInit","onBlur","onFocus","onExit","onPush","onPop","renderHandler","onAfterRedraw","onEchoCommand","onFlush","onBeforeCommand","onAfterCommand","onBeforeEcho","onAfterEcho","onBeforeLogin","onAfterLogout","onBeforeLogout","comletionParameters","wrongPasswordTryAgain","wrongPassword","ajaxAbortError","wrongArity","commandNotFound","oneRPCWithIgnore","oneInterpreterFunction","loginFunctionMissing","noTokenError","serverResponse","wrongGreetings","notWhileLogin","loginIsNotAFunction","canExitError","invalidCompletion","invalidSelector","invalidTerminalId","password","recursiveLoop","notAString","invalidStrings","defunctTerminal","save_state","hash_commands","fire_hash_change","first_instance","init_interpreter","StorageHelper","get_processed_command","preprocess_value","Animation","is_node","unmount","prepare_render","replaceWith","get_node","Element","display_object","print_line","url_spec","file","display_json_rpc_error","at","make_basic_json_rpc","auth","display_exception","ajax_error","make_object_interpreter","arity","fallback","user_command","onCommandNotFound","xhr","responseText","make_json_rpc_object","jrpc_success","jrpc_request","jrpc_response","procs","field","interpreter_object","proc","args_len","help","found","make_interpreter","user_intrp","fn_interpreter","rpc_count","recur","interpreters","new_obj","make_json_rpc_login","user","passwd","links","linkify","should_wrap","line_cache","process_extended_commands","line_settings","clear_exec","prev_exec_cmd","process_line","stringify_value","buffer","raw_string","keepWords","scroll","command_line","detached_output","detach","rows","fire_event","limit_lines","$lines","for_remove","show_greetings","signature","echo_command","get_command","have_scrollbar","fill","restore_state","command_idx","import_view","export_view","make_label_error","maybe_update_hash","location","hash","first_command","resume_callbacks","init_state","execHash","before_async_exec","saved_change_hash","after_exec","is_animation_promise","invoke","force_awake","paused","ghost","level","logout","in_login","get_token","set_token","global_logout","clear_loging_storage","global_login_fn","prefix_name","maybe_append_name","interpreter_name","prepare_top_interpreter","login_name","context_callback_proxy","terminal_init_keymap","fun","init_queue","onStart","skip_local","scroll_to_view","scroll_to","it","make_cursor_visible","replace_hash","replaceState","new_hash","hashchange","decodeURIComponent","onPause","was_paused","echo_delay","user_key_down","get_position","set_command","orignal","caseSensitive","before_cursor","complete","word","scroll_to_bottom","key_down","readyState","abort","tab_count","key_press","typed","finish_typing_fn","formattted","get_prompt","char_i","new_prompt","is_bottom","delay","typed_prompt","typed_message","typing","typed_enter","helper","with_typing","else_fn","finalize_fn","when_ready","locals","queue","body_terminal","selector","public_api","terminal_id","scrollTop","user_export","view","ignore_hash","exec_settings","cmd_ready","delayed_commands","autologin","infinite","logins","popUserPass","login_callback","set_mask","pass","cmd_strings","double_quotes","single_quote","prev_string","sensitive","matched_strings","slash","pre","post","to_insert","set_position","reverse","common","set_interpreter","overwrite_interpreter","numChars","numRows","num_rows","geometry","padding","old_width","old_height","history_state","setImmediate","clear_history_state","x","animate","freeze","frozen","enter","get_output","new_num_rows","appending_to_partial","children","last_row","cmd_prompt","cmd_outer","last_row_rect","partial_width","prompt_margin","cmd_cursor","self_offset","e1","e2","remove_line","arg_defined","ansi","$images","Image","echo_promise","last_newline","finish","trace","amount","local","local_name","intrp","read","infiniteLogin","push_settings","object_or_name","font_resizer","blur_terminal","focus_terminal","visibility_observer","scroll_marker","is_bottom_observer","mutation_observer","disconnect","$body","removeAttr","defunct","elem","scrollHeight","is_bottom_detected","scroll_height","scroll_top","offsetHeight","copy","get_output_buffer","clear_buffer","command_queue","need_char_size_recalculate","old_enabled","ignoreSystemDescribe","base_interpreter","parseObject","is_type","echo_image","image","data_uri","webkitURL","ignoreEvents","clipboardData","getAsFile","getAsString","getData","elementFromPoint","clientY","onResize","was_ctx_event","$win","move","SENSITIVITY","HOLD_TIME","touch_event","point","y","diff_x","diff_y","ignore_elements","mousedown","mouseup","dblclick","event_name","is_context_event","buttons","cmd_offset","cmd_rect","top_limit","pageY","pageX","content_width","diff_h","diff_w","ceil","calculate_char_size","create_resizers","bottom_detect","intersections","intersectionRatio","create_bottom_detect","observe_visibility","was_enabled","visibility_checker","in_dom","MutationObsrv","MutationObserver","WebKitMutationObserver","exec_spec","childList","delta","stopPropagation","onmousewheel","wheelDelta","deltaY","detail","loadLocaleMessages","locales","messages","locale","I18n","$v","fallbackLocale"],"mappings":"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","file":"js/app.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-2e9fb724\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"Customizing/global/plugins/Modules/TestQuestionPool/Questions/assCodeQuestion/codeblocks/0.2.14/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=style&index=0&lang=css&\"","import Vue from 'vue'\nimport '../styles/blockly.styl' \n\nimport {\n    IBlocklyToolbox,\n    IBlocklyToolboxItem,\n    IBlocklyToolboxCategory,\n    BlockPrimaryColors,\n    KnownBlocklyTypes,\n    BlockArgumentTypes,\n    IBlockDefinition,\n    IBlockLine,\n    IBlockArgument,\n    BlockSecondaryColors,\n    BlockTertiaryColors,\n} from '@/lib/IBlocklyHelper'\nimport { IListItemData } from './ICompilerRegistry'\n\nexport const ColorThemeSelection: IListItemData[] = [\n    { label: 'Colors', value: '{!PrimaryColors.Colour}' },\n    { label: 'Arrays', value: '{!PrimaryColors.List}' },\n    { label: 'Logic', value: '{!PrimaryColors.Logic}' },\n    { label: 'Loops', value: '{!PrimaryColors.Loop}' },\n    { label: 'Math', value: '{!PrimaryColors.Math}' },\n    { label: 'Procedures', value: '{!PrimaryColors.Procedure}' },\n    { label: 'String', value: '{!PrimaryColors.Text}' },\n    { label: 'Variables', value: '{!PrimaryColors.Variable}' },\n    { label: 'Variables (dynamic)', value: '{!PrimaryColors.Variable_dynamic}' },\n]\n\nexport const ColorHues: IListItemData[] = [\n    { label: '0', value: '0' },\n    { label: '15', value: '15' },\n    { label: '30', value: '30' },\n    { label: '45', value: '45' },\n    { label: '60', value: '60' },\n    { label: '75', value: '75' },\n    { label: '90', value: '90' },\n    { label: '105', value: '105' },\n    { label: '120', value: '120' },\n    { label: '135', value: '135' },\n    { label: '150', value: '150' },\n    { label: '165', value: '165' },\n    { label: '180', value: '180' },\n    { label: '195', value: '195' },\n    { label: '210', value: '210' },\n    { label: '225', value: '225' },\n    { label: '240', value: '240' },\n    { label: '255', value: '255' },\n    { label: '270', value: '270' },\n    { label: '285', value: '285' },\n    { label: '300', value: '300' },\n    { label: '315', value: '315' },\n    { label: '330', value: '330' },\n    { label: '345', value: '345' },\n]\n\nexport const PredefinedBlockTypes: IListItemData[] = Object.keys(KnownBlocklyTypes).map((key) => {\n    const ret: IListItemData = {\n        label: Vue.$l(`Blockly.BlockTypeNames.${key}`),\n        value: KnownBlocklyTypes[key],\n    }\n    return ret\n})\n\nexport const ColorSelection: IListItemData[] = [...ColorThemeSelection, ...ColorHues]\n\nexport const ColorSelectionWithNone: IListItemData[] = [\n    { label: 'None', value: '' },\n    ...ColorSelection,\n]\n\nexport const PredefinedArgumentTypes: IListItemData[] = Object.keys(BlockArgumentTypes).map(\n    (key) => {\n        const ret: IListItemData = {\n            label: Vue.$l(`Blockly.ArgumentTypeNames.${key}`),\n            value: key,\n        }\n        return ret\n    }\n)\n\nexport const blockStyles = {\n    colour_blocks: {\n        colourPrimary: BlockPrimaryColors.Colour,\n        colourSecondary: BlockSecondaryColors.Colour,\n        colourTertiary: BlockTertiaryColors.Colour,\n        hat:'cap',\n    },\n    list_blocks: {\n        colourPrimary: BlockPrimaryColors.List,\n        colourSecondary: BlockSecondaryColors.List,\n        colourTertiary: BlockTertiaryColors.List,\n        hat:'cap',\n    },\n    logic_blocks: {\n        colourPrimary: BlockPrimaryColors.Logic,\n        colourSecondary: BlockSecondaryColors.Logic,\n        colourTertiary: BlockTertiaryColors.Logic,\n        hat:'cap',\n    },\n    loop_blocks: {\n        colourPrimary: BlockPrimaryColors.Loop,\n        colourSecondary: BlockSecondaryColors.Loop,\n        colourTertiary: BlockTertiaryColors.Loop,\n        hat:'cap',\n    },\n    math_blocks: {\n        colourPrimary: BlockPrimaryColors.Math,\n        colourSecondary: BlockSecondaryColors.Math,\n        colourTertiary: BlockTertiaryColors.Math,\n        hat:'cap',\n    },\n    procedure_blocks: {\n        colourPrimary: BlockPrimaryColors.Procedure,\n        colourSecondary: BlockSecondaryColors.Procedure,\n        colourTertiary: BlockTertiaryColors.Procedure,\n        hat:'cap',\n    },\n    text_blocks: {\n        colourPrimary: BlockPrimaryColors.Text,\n        colourSecondary: BlockSecondaryColors.Text,\n        colourTertiary: BlockTertiaryColors.Text,\n        hat:'cap',\n    },\n    variable_blocks: {\n        colourPrimary: BlockPrimaryColors.Variable,\n        colourSecondary: BlockSecondaryColors.Variable,\n        colourTertiary: BlockTertiaryColors.Variable,\n        hat:'cap',\n    },\n    variable_dynamic_blocks: {\n        colourPrimary: BlockPrimaryColors.Variable_dynamic,\n        colourSecondary: BlockSecondaryColors.Variable_dynamic,\n        colourTertiary: BlockTertiaryColors.Variable_dynamic,\n        hat:'cap',\n    },\n    hat_blocks: {\n        colourPrimary: '330',\n        colourSecondary: '330',\n        colourTertiary: '330',\n        hat: 'cap',\n    },\n}\n\nexport const categoryStyles = {\n    colour_category: { colour: blockStyles.colour_blocks.colourPrimary },\n    list_category: { colour: blockStyles.list_blocks.colourPrimary },\n    logic_category: { colour: blockStyles.logic_blocks.colourPrimary },\n    loop_category: { colour: blockStyles.loop_blocks.colourPrimary },\n    math_category: { colour: blockStyles.math_blocks.colourPrimary },\n    procedure_category: { colour: blockStyles.procedure_blocks.colourPrimary },\n    text_category: { colour: blockStyles.text_blocks.colourPrimary },\n    variable_category: { colour: blockStyles.variable_blocks.colourPrimary },\n    variable_dynamic_category: {\n        colour: blockStyles.variable_dynamic_blocks.colourPrimary,\n    },\n}\n\n//export const theme = new Blockly.Theme('CodeBlocks', blockStyles as any, categoryStyles)\n\nexport class BlocklyHelper {\n    \n    public toArgumentDescription(a: BlockArgumentTypes) {\n        const n = Vue.$l(`Blockly.ArgumentTypeNames.${a}`)\n        return n ? `${n} (${a})` : a\n    }\n    private serializeToolboxItem(i: IBlocklyToolboxItem): string {\n        return `<block type=\"${i.type}\"></block>`\n    }\n    private serializeToolboxItems(items: IBlocklyToolboxItem[]): string {\n        return items.map((item) => this.serializeToolboxItem(item)).join('\\n')\n    }\n    private serializeToolboxCategory(i: IBlocklyToolboxCategory): string {\n        let res = `<category name=\"${i.name}\"`\n        if (i.color && i.color != '') {\n            res += ` colour=\"${i.color}\"`\n        }\n        if (i.custom && i.custom != '') {\n            res += ` custom=\"${i.custom}\"`\n        }\n        res += `>${this.serializeToolboxItems(i.items)}</category>`\n        return res\n    }\n    private serializeToolboxCategories(items: IBlocklyToolboxCategory[]): string {\n        return items.map((item) => this.serializeToolboxCategory(item)).join('\\n')\n    }\n\n    public serializeToolbox(toolbox: IBlocklyToolbox): string {\n        const catCount = toolbox.categories.length\n        if (toolbox.categories && catCount > 1) {\n            return `${this.serializeToolboxCategories(toolbox.categories)}`\n        } else if (catCount === 1) {\n            const cat = toolbox.categories[0]\n            if (cat.color === undefined || cat.color == '' || cat.name == '') {\n                return '' + this.serializeToolboxItems(cat.items)\n            } else {\n                return '' + this.serializeToolboxCategories(toolbox.categories)\n            }\n        } else {\n            return ''\n        }\n    }\n\n    public getBlockDescription(bl: IBlockDefinition): object {\n        const cp = { ...bl.JSON }\n        cp.colour = this.toHTMLColor(cp.colour)\n        return cp\n    }\n\n    public serializeCustomBlock(bl: IBlockDefinition): string {\n        return JSON.stringify(this.getBlockDescription(bl))\n    }\n\n    public serializeCustomBlocks(bls: IBlockDefinition[]): string {\n        return JSON.stringify(bls.map((bl) => this.getBlockDescription(bl)))\n    }\n\n    get codeUndefines(): string {\n        return 'const window = undefined; const Window = undefined; const document = undefined;const $ = undefined;const _ = undefined;'\n    }\n\n    public removeSelfClosingTags(xml: string): string {\n        //console.log(xml, '\\n', xml.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>'))\n        return xml.replace(/<(\\w+)([^<]*)\\/>/g, '<$1$2></$1>')\n    }\n\n    public prepareCode(cc: string): string {\n        return `\"use strict\"; ${this.codeUndefines} return function(){ return {o: ${cc}}.o}.call({})`\n    }\n\n    public prepareBlocklyCode(cc: string): string {\n        return `var Blockly = B;${this.codeUndefines}return { o:function(block) { ${cc} }}.o`\n    }\n\n    public compile(bl: IBlockDefinition, Blockly: any): any | undefined {\n        const cc = this.prepareBlocklyCode(bl.codeString)\n        bl._code = undefined\n        try {\n            //console.log(cc, Blockly)\n            const code = new Function('B', cc)\n            bl._code = code(Blockly)\n        } catch (e) {\n            bl._code = undefined\n            console.error('Error Compiling', cc, e)\n            return e + ''\n        }\n        return undefined\n    }\n\n    public itemForValue(items: IListItemData[], value: string): IListItemData {\n        return Vue.$CodeBlock.itemForValue(items, value)\n    }\n\n    public toColorCode(color: string): string | undefined {\n        if (color === '') {\n            return undefined\n        }\n        return color\n    }\n\n    public toColor(color: string | undefined): string {\n        if (color === undefined) {\n            return ''\n        }\n        Object.keys(BlockPrimaryColors).forEach((key) => {\n            if (color == `{!PrimaryColors.${key}}`) {\n                color = BlockPrimaryColors[key]\n            }\n        })\n        return color\n    }\n\n    public toHTMLColor(color: string | undefined): string {\n        const cl = this.toColor(color)\n        if (cl.length > 0 && cl[0] != '#' && cl[0] != 'h' && cl[0] != 'r') {\n            return `hsl(${cl}, 100%, 50%)`\n        }\n        return cl\n    }\n\n    mounted() {}\n}\n\nexport const blocklyHelper = new BlocklyHelper()\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBlock.vue?vue&type=style&index=0&id=f05c42ac&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=style&index=0&id=0bd2a5d9&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=style&index=0&lang=sass&\"","var map = {\n\t\"./de.json\": \"6ce2\",\n\t\"./en.json\": \"edd4\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"49f8\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=style&index=0&id=8b99c0d6&lang=stylus&scoped=true&\"","// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n    if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n      mod(require(\"codemirror\"));\n    else if (typeof define == \"function\" && define.amd) // AMD\n      define([\"codemirror\"], mod);\n    else // Plain browser env\n      mod(CodeMirror);\n  })(function(CodeMirror) {\n  \"use strict\";\n  \n  CodeMirror.defineMode(\"clike\", function(config, parserConfig) {\n    var indentUnit = config.indentUnit,\n        statementIndentUnit = parserConfig.statementIndentUnit || indentUnit,\n        dontAlignCalls = parserConfig.dontAlignCalls,\n        keywords = parserConfig.keywords || {},\n        builtin = parserConfig.builtin || {},\n        blockKeywords = parserConfig.blockKeywords || {},\n        atoms = parserConfig.atoms || {},\n        hooks = parserConfig.hooks || {},\n        multiLineStrings = parserConfig.multiLineStrings,\n        indentStatements = parserConfig.indentStatements !== false;\n    var isOperatorChar = /[+\\-*&%=<>!?|\\/]/;\n  \n    var curPunc;\n  \n    function tokenBase(stream, state) {\n      var ch = stream.next();\n      if (hooks[ch]) {\n        var result = hooks[ch](stream, state);\n        if (result !== false) return result;\n      }\n      if (ch == '\"' || ch == \"'\") {\n        state.tokenize = tokenString(ch);\n        return state.tokenize(stream, state);\n      }\n      if (/[\\[\\]{}\\(\\),;\\:\\.]/.test(ch)) {\n        curPunc = ch;\n        return null;\n      }\n      if (/\\d/.test(ch)) {\n        stream.eatWhile(/[\\w\\.]/);\n        return \"number\";\n      }\n      if (ch == \"/\") {\n        if (stream.eat(\"*\")) {\n          state.tokenize = tokenComment;\n          return tokenComment(stream, state);\n        }\n        if (stream.eat(\"/\")) {\n          stream.skipToEnd();\n          return \"comment\";\n        }\n      }\n      if (isOperatorChar.test(ch)) {\n        stream.eatWhile(isOperatorChar);\n        return \"operator\";\n      }\n      stream.eatWhile(/[\\w\\$_\\xa1-\\uffff]/);\n      var cur = stream.current();\n      if (keywords.propertyIsEnumerable(cur)) {\n        if (blockKeywords.propertyIsEnumerable(cur)) curPunc = \"newstatement\";\n        return \"keyword\";\n      }\n      if (builtin.propertyIsEnumerable(cur)) {\n        if (blockKeywords.propertyIsEnumerable(cur)) curPunc = \"newstatement\";\n        return \"builtin\";\n      }\n      if (atoms.propertyIsEnumerable(cur)) return \"atom\";\n      return \"variable\";\n    }\n  \n    function tokenString(quote) {\n      return function(stream, state) {\n        var escaped = false, next, end = false;\n        while ((next = stream.next()) != null) {\n          if (next == quote && !escaped) {end = true; break;}\n          escaped = !escaped && next == \"\\\\\";\n        }\n        if (end || !(escaped || multiLineStrings))\n          state.tokenize = null;\n        return \"string\";\n      };\n    }\n  \n    function tokenComment(stream, state) {\n      var maybeEnd = false, ch;\n      while (ch = stream.next()) {\n        if (ch == \"/\" && maybeEnd) {\n          state.tokenize = null;\n          break;\n        }\n        maybeEnd = (ch == \"*\");\n      }\n      return \"comment\";\n    }\n  \n    function Context(indented, column, type, align, prev) {\n      this.indented = indented;\n      this.column = column;\n      this.type = type;\n      this.align = align;\n      this.prev = prev;\n    }\n    function pushContext(state, col, type) {\n      var indent = state.indented;\n      if (state.context && state.context.type == \"statement\")\n        indent = state.context.indented;\n      return state.context = new Context(indent, col, type, null, state.context);\n    }\n    function popContext(state) {\n      var t = state.context.type;\n      if (t == \")\" || t == \"]\" || t == \"}\")\n        state.indented = state.context.indented;\n      return state.context = state.context.prev;\n    }\n  \n    // Interface\n  \n    return {\n      startState: function(basecolumn) {\n        return {\n          tokenize: null,\n          context: new Context((basecolumn || 0) - indentUnit, 0, \"top\", false),\n          indented: 0,\n          startOfLine: true\n        };\n      },\n  \n      token: function(stream, state) {\n        var ctx = state.context;\n        if (stream.sol()) {\n          if (ctx.align == null) ctx.align = false;\n          state.indented = stream.indentation();\n          state.startOfLine = true;\n        }\n        if (stream.eatSpace()) return null;\n        curPunc = null;\n        var style = (state.tokenize || tokenBase)(stream, state);\n        if (style == \"comment\" || style == \"meta\") return style;\n        if (ctx.align == null) ctx.align = true;\n  \n        if ((curPunc == \";\" || curPunc == \":\" || curPunc == \",\") && ctx.type == \"statement\") popContext(state);\n        else if (curPunc == \"{\") pushContext(state, stream.column(), \"}\");\n        else if (curPunc == \"[\") pushContext(state, stream.column(), \"]\");\n        else if (curPunc == \"(\") pushContext(state, stream.column(), \")\");\n        else if (curPunc == \"}\") {\n          while (ctx.type == \"statement\") ctx = popContext(state);\n          if (ctx.type == \"}\") ctx = popContext(state);\n          while (ctx.type == \"statement\") ctx = popContext(state);\n        }\n        else if (curPunc == ctx.type) popContext(state);\n        else if (indentStatements &&\n                 (((ctx.type == \"}\" || ctx.type == \"top\") && curPunc != ';') ||\n                  (ctx.type == \"statement\" && curPunc == \"newstatement\")))\n          pushContext(state, stream.column(), \"statement\");\n        state.startOfLine = false;\n        return style;\n      },\n  \n      indent: function(state, textAfter) {\n        if (state.tokenize != tokenBase && state.tokenize != null) return CodeMirror.Pass;\n        var ctx = state.context, firstChar = textAfter && textAfter.charAt(0);\n        if (ctx.type == \"statement\" && firstChar == \"}\") ctx = ctx.prev;\n        var closing = firstChar == ctx.type;\n        if (ctx.type == \"statement\") return ctx.indented + (firstChar == \"{\" ? 0 : statementIndentUnit);\n        else if (ctx.align && (!dontAlignCalls || ctx.type != \")\")) return ctx.column + (closing ? 0 : 1);\n        else if (ctx.type == \")\" && !closing) return ctx.indented + statementIndentUnit;\n        else return ctx.indented + (closing ? 0 : indentUnit);\n      },\n  \n      electricChars: \"{}\",\n      blockCommentStart: \"/*\",\n      blockCommentEnd: \"*/\",\n      lineComment: \"//\",\n      fold: \"brace\"\n    };\n  });\n  \n    function words(str) {\n      var obj = {}, words = str.split(\" \");\n      for (var i = 0; i < words.length; ++i) obj[words[i]] = true;\n      return obj;\n    }\n    var cKeywords = \"auto if break int case long char register continue return default short do sizeof \" +\n      \"double static else struct entry switch extern typedef float union for unsigned \" +\n      \"goto while enum void const signed volatile\";\n  \n    function cppHook(stream, state) {\n      if (!state.startOfLine) return false;\n      for (;;) {\n        if (stream.skipTo(\"\\\\\")) {\n          stream.next();\n          if (stream.eol()) {\n            state.tokenize = cppHook;\n            break;\n          }\n        } else {\n          stream.skipToEnd();\n          state.tokenize = null;\n          break;\n        }\n      }\n      return \"meta\";\n    }\n  \n    function cpp11StringHook(stream, state) {\n      stream.backUp(1);\n      // Raw strings.\n      if (stream.match(/(R|u8R|uR|UR|LR)/)) {\n        var match = stream.match(/\"([^\\s\\\\()]{0,16})\\(/);\n        if (!match) {\n          return false;\n        }\n        state.cpp11RawStringDelim = match[1];\n        state.tokenize = tokenRawString;\n        return tokenRawString(stream, state);\n      }\n      // Unicode strings/chars.\n      if (stream.match(/(u8|u|U|L)/)) {\n        if (stream.match(/[\"']/, /* eat */ false)) {\n          return \"string\";\n        }\n        return false;\n      }\n      // Ignore this hook.\n      stream.next();\n      return false;\n    }\n  \n    // C#-style strings where \"\" escapes a quote.\n    function tokenAtString(stream, state) {\n      var next;\n      while ((next = stream.next()) != null) {\n        if (next == '\"' && !stream.eat('\"')) {\n          state.tokenize = null;\n          break;\n        }\n      }\n      return \"string\";\n    }\n  \n    // C++11 raw string literal is <prefix>\"<delim>( anything )<delim>\", where\n    // <delim> can be a string up to 16 characters long.\n    function tokenRawString(stream, state) {\n      // Escape characters that have special regex meanings.\n      var delim = state.cpp11RawStringDelim.replace(/[^\\w\\s]/g, '\\\\$&');\n      var match = stream.match(new RegExp(\".*?\\\\)\" + delim + '\"'));\n      if (match)\n        state.tokenize = null;\n      else\n        stream.skipToEnd();\n      return \"string\";\n    }\n  \n    function def(mimes, mode) {\n      if (typeof mimes == \"string\") mimes = [mimes];\n      var words = [];\n      function add(obj) {\n        if (obj) for (var prop in obj) if (obj.hasOwnProperty(prop))\n          words.push(prop);\n      }\n      add(mode.keywords);\n      add(mode.builtin);\n      add(mode.atoms);\n      if (words.length) {\n        mode.helperType = mimes[0];\n        CodeMirror.registerHelper(\"hintWords\", mimes[0], words);\n      }\n  \n      for (var i = 0; i < mimes.length; ++i)\n        CodeMirror.defineMIME(mimes[i], mode);\n    }\n  \n    def([\"x-shader/x-vertex\", \"x-shader/x-fragment\", \"text/x-glsl\"], {\n      name: \"clike\",\n      keywords: words(\"float int bool void \" +\n                      \"vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 \" +\n                      \"mat2 mat3 mat4 \" +\n                      \"sampler2D sampler3D samplerCube \" +\n                      \"const attribute uniform varying \" +\n                      \"break continue discard return \" +\n                      \"for while do if else struct \" +\n                      \"in out inout\"),\n      blockKeywords: words(\"for while do if else struct\"),\n      builtin: words(\"radians degrees sin cos tan asin acos atan \" +\n                      \"pow exp log exp2 sqrt inversesqrt \" +\n                      \"abs sign floor ceil fract mod min max clamp mix step smoothstep \" +\n                      \"length distance dot cross normalize faceforward \" +\n                      \"reflect refract matrixCompMult \" +\n                      \"lessThan lessThanEqual greaterThan greaterThanEqual \" +\n                      \"equal notEqual any all not \" +\n                      \"texture2D texture2DLod texture2DProjLod \" +\n                      \"textureCube textureCubeLod \"),\n      atoms: words(\"true false \" +\n                  \"gl_FragColor \" +\n                  \"gl_PointCoord \" +\n                  \"gl_Position gl_PointSize \" +\n                  \"gl_FragCoord gl_FrontFacing \" +\n                  \"gl_FragData \" +\n                  \"gl_DepthRangeParameters \" +\n                  \"gl_MaxVertexAttribs gl_MaxVaryingVectors gl_MaxVertexUniformVectors\" +\n                  \"gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits \" +\n                  \"gl_MaxFragmentUniformVectors \" +\n                  \"gl_MaxDrawBuffers\"),\n      hooks: {\"#\": cppHook},\n      modeProps: {fold: [\"brace\", \"include\"]}\n    });\n  \n  });","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=style&index=0&id=644cb51f&lang=sass&scoped=true&\"","export type finishedCallbackSignatur = (\n    success: boolean,\n    overrideOutput?: any,\n    returnState?: any\n) => void\n\nexport interface IListItemData {\n    readonly label: string\n    readonly value: string\n}\n\nexport enum ErrorSeverity {\n    Error = 2,\n    Warning = 1,\n}\nexport interface IErrorPosition {\n    line: number\n    column: number\n}\nexport interface ICompilerErrorDescription {\n    start: IErrorPosition\n    end: IErrorPosition\n    message: string\n    severity: ErrorSeverity\n}\n\nexport interface IDomLibraray {\n    key: string\n    uri: string[]\n    name: string\n    version: string\n    displayName: string\n    didLoad: boolean\n    utility: boolean\n    order: number\n    onBuildSandboxEnv: (sandbox: any) => void\n}\n\nexport interface ICompilerHashMap {\n    [lang: string]: ICompilerInfo\n}\n\nexport interface IUpdateMappingMap {\n    [old: string]: string\n}\n\nexport interface ICompilerState {\n    hideGlobalState(): void\n    setAllRunButtons(what: boolean): void\n    displayGlobalState(message: string | null): void\n\n    readonly globalStateHidden: boolean\n    readonly globalStateMessage: string\n    readonly runButtonForceHide: boolean\n}\n\nexport interface ICompilerRegistry {\n    readonly languages: IListItemData[]\n    readonly domLibraries: IListItemData[]\n\n    register(compilers: ICompilerInfo[] | ICompilerInfo): void\n\n    registerSingle(c: ICompilerInfo): void\n    getCompiler(compilerInfo: ICompilerIDQuery): ICompilerInstance | undefined\n\n    versionsForLanguage(languageType: string): string[] | ['none']\n\n    registerDOMLib(\n        uri: string[],\n        name: string,\n        version: string,\n        displayName: string,\n        utility?: boolean,\n        order?: number\n    ): void\n\n    getLibObjects(domLibs: string[]): IDomLibraray[]\n    urisForDOMLibs(domLibs: string[]): string[]\n    loadLibraries(domLibraries: string[], whenLoaded: () => void): void\n}\n\nexport interface ICompileAndRunArguments {\n    max_ms: number\n    log_callback: (txt: string) => void\n    info_callback: (txt: string) => void\n    err_callback: (txt: string) => void\n    compileFailedCallback: (info: ICompilerErrorDescription) => void\n    finishedExecutionCB: finishedCallbackSignatur\n    args: object\n    didReceiveMessage: (cmd: string, data: any) => void\n    postMessageFunction: null | ((cmd: string, data: any) => void)\n    dequeuePostponedMessages: () => void\n    beforeStartHandler: () => void\n    whenFinishedHandler(args: string[] | object): void\n    allowMessagePassing: boolean\n    keepAlive: boolean\n    withREPL: boolean\n    resultData: Object | any[] | undefined\n}\n\nexport interface IReplInstance {\n    interpreter(\n        command: string,\n        onStateChange: (incomplete) => void,\n        onLog: (msg) => void,\n        onError: (msg) => void\n    ): Promise<object>\n}\nexport interface ICompilerInstance {\n    readonly version: string\n    readonly language: string\n    readonly canRun: boolean\n    readonly canStop: boolean\n    readonly allowsMessagePassing: boolean\n    readonly allowsREPL: boolean\n    readonly allowsContinousCompilation: boolean\n    readonly allowsPersistentArguments: boolean\n    readonly acceptsJSONArgument: boolean\n    readonly experimental: boolean\n    readonly deprecated: boolean\n    isReady: boolean\n    isRunning: boolean\n    readonly libraries?: ICompilerLibraryInfo[]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void\n    preload(): void\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate?: boolean\n    ): void\n    stop?(): void\n}\n\nexport interface ICompilerLibraryInfo {\n    readonly key: string\n    readonly name: string\n    readonly version: string\n    readonly displayName: string\n}\n\nexport interface ICompilerInfo {\n    readonly type: string\n    readonly displayName: string\n    readonly versions: ICompilerInstance[]\n    readonly default: ICompilerInstance\n}\n\nexport interface ICompilerID {\n    languageType: string\n    version: string\n}\n\nexport interface ICompilerIDQuery {\n    languageType: string\n    version?: string\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=style&index=0&lang=sass&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblock block-\" + _vm.typeName)},[_c('CodeBlockButton',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showBookmarkButton),expression:\"showBookmarkButton\"}],attrs:{\"block\":_vm.block,\"isBookmarkPanel\":_vm.isBookmarkPanel}}),_c('codemirror',{ref:\"codeBox\",class:(\"accqstXmlInput noRTEditor codebox \" + _vm.boxClass),attrs:{\"value\":_vm.code,\"options\":_vm.options,\"name\":(_vm.namePrefix + \"block[\" + (_vm.block.parentID) + \"][\" + (_vm.block.id) + \"]\"),\"id\":(\"teQ\" + (_vm.block.parentID) + \"B\" + (_vm.block.id)),\"data-question\":_vm.block.parentID,\"events\":['keyup']},on:{\"ready\":_vm.onCodeReady,\"focus\":_vm.onCodeFocus,\"input\":_vm.onCodeChangeDefered,\"input-read\":_vm.onCodeKeyHandle,\"keyup\":_vm.onCodeKeyHandle}}),(_vm.editMode)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasAlternativeContent),expression:\"hasAlternativeContent\"}]},[_c('div',{staticClass:\"q-mt-lg text-subtitle2 q-pb-xs\"},[_vm._v(_vm._s(_vm.$t('CodeBlock.Initial_Content')))]),_c('codemirror',{ref:\"altBox\",class:(\"accqstXmlInput noRTEditor \" + _vm.boxClass),attrs:{\"value\":_vm.altCode,\"options\":_vm.altOptions,\"name\":(_vm.namePrefix + \"alt_block[\" + (_vm.block.parentID) + \"][\" + (_vm.block.id) + \"]\")},on:{\"ready\":_vm.onAltCodeReady,\"focus\":_vm.onAltCodeFocus,\"input\":_vm.onAltCodeChangeDefered}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-icon',{class:(\"mdi \" + _vm.severityClass + \" mainTipIcon\"),attrs:{\"name\":_vm.severityIcon}},[_c('q-tooltip',[_c('div',[_c('ul',{staticClass:\"tiplist\"},_vm._l((_vm.errors),function(error){return _c('li',{key:error.message},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-1\"},[_c('q-icon',{attrs:{\"name\":_vm.iconForSeverity(error.severity)}})],1),_c('div',{staticClass:\"col-11 q-pr-md\"},[_c('div',{staticClass:\"q-my-none tipper\"},[_vm._v(_vm._s(error.message))])])])])}),0)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { ErrorSeverity, ICompilerErrorDescription } from '@/lib/ICompilerRegistry'\n\n@Component\nexport default class ErrorTip extends Vue {\n    @Prop() errors!: ICompilerErrorDescription\n    @Prop() severity!: ErrorSeverity\n\n    get severityClass(): string {\n        return this.classForSeverity(this.severity)\n    }\n    get severityIcon(): string {\n        return this.iconForSeverity(this.severity)\n    }\n\n    classForSeverity(s: ErrorSeverity): string {\n        if (s == ErrorSeverity.Error) {\n            return 'gutter-error'\n        }\n        return 'gutter-warning'\n    }\n    iconForSeverity(s: ErrorSeverity): string {\n        if (s == ErrorSeverity.Error) {\n            return 'report'\n        }\n        return 'warning'\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ErrorTip.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ErrorTip.vue?vue&type=template&id=67eb593e&\"\nimport script from \"./ErrorTip.vue?vue&type=script&lang=ts&\"\nexport * from \"./ErrorTip.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ErrorTip.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QIcon,QTooltip});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"floatingButton\"},[_c('q-btn',{attrs:{\"color\":_vm.color,\"text-color\":\"black\",\"icon\":_vm.iconName,\"round\":\"\",\"size\":\"xs\"},on:{\"click\":_vm.onClick}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Emit } from 'vue-property-decorator'\nimport { BlockData, IBlockBookmarkPayload } from '@/lib/codeBlocksManager'\n\n@Component\nexport default class CodeBlockButton extends Vue {\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ default: false }) isBookmarkPanel!: boolean\n\n    get color(): string {\n        return this.isBookmarkPanel ? 'red-4' : 'amber'\n    }\n\n    get iconName(): string {\n        if (this.isBookmarkPanel) {\n            return 'close'\n        }\n        return this.bookmarked ? 'bookmark' : 'bookmark_border'\n    }\n\n    bookmarked: boolean = false\n    bookmarkMe() {\n        const data: IBlockBookmarkPayload = {\n            uuid: this.block.appSettings.uuid,\n            block: this.isBookmarkPanel ? null : this.block\n        }\n        Vue.$GlobalEventHub.$emit('bookmark-block', data)\n    }\n    onClick() {\n        this.bookmarkMe()\n    }\n\n    onBookmark(data: IBlockBookmarkPayload) {\n        this.bookmarked =\n            data.block === null || this.block === null ? false : this.block.uuid === data.block.uuid\n    }\n\n    mounted() {\n        Vue.$GlobalEventHub.$on('bookmark-block', this.onBookmark)\n    }\n\n    beforeDestroy() {\n        Vue.$GlobalEventHub.$off('bookmark-block')\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlockButton.vue?vue&type=template&id=0bd2a5d9&scoped=true&\"\nimport script from \"./CodeBlockButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlockButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlockButton.vue?vue&type=style&index=0&id=0bd2a5d9&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0bd2a5d9\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport ErrorTip from './ErrorTip.vue'\nimport BaseBlock from './BaseBlock.vue'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { ICompilerErrorDescription } from '@/lib/ICompilerRegistry'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { ITagReplaceAction } from '@/plugins/tagger'\n\nimport codemirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\n//themes\nimport 'codemirror/theme/solarized.css'\nimport 'codemirror/theme/base16-dark.css'\nimport 'codemirror/theme/base16-light.css'\nimport 'codemirror/theme/duotone-dark.css'\nimport 'codemirror/theme/duotone-light.css'\nimport 'codemirror/theme/xq-dark.css'\nimport 'codemirror/theme/xq-light.css'\nimport 'codemirror/theme/blackboard.css'\nimport 'codemirror/theme/midnight.css'\nimport 'codemirror/theme/neo.css'\nimport 'codemirror/theme/mbo.css'\nimport 'codemirror/theme/mdn-like.css'\n\n//languages\nimport 'codemirror/mode/clike/clike.js'\nimport 'codemirror/mode/fortran/fortran.js'\nimport 'codemirror/mode/javascript/javascript.js'\nimport 'codemirror/mode/perl/perl.js'\nimport 'codemirror/mode/python/python.js'\nimport 'codemirror/mode/r/r.js'\nimport 'codemirror/mode/ruby/ruby.js'\nimport '@/lib/glsl/glsl'\n\n//plugins\nimport 'codemirror/addon/edit/closebrackets.js'\n\n//helper to create tooltips at runtime\nimport CodeBlockButton from '@/components/CodeBlockButton.vue'\nconst ErrorTipCtor = Vue.extend(ErrorTip)\n\n@Component({ components: { CodeBlockButton } })\nexport default class CodeBlock extends BaseBlock {\n    @Prop({ default: '' }) namePrefix!: string\n    @Prop({ default: false }) emitWhenTypingInViewMode!: boolean\n    @Prop({ default: true }) canBookmark!: boolean\n    @Prop({ default: false }) isBookmarkPanel!: boolean\n    @Prop({ default: false }) readonly!: boolean\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: number | 'auto'\n    @Prop({ default: 'base16-dark' }) theme!: string\n    @Prop({ default: 'text/javascript' }) mode!: string\n    @Prop({ default: undefined }) tagSet!: IRandomizerSet\n    @Prop({\n        required: true,\n        validator: function (b) {\n            if (b === null || b.content === undefined) {\n                return false\n            }\n            if (b.firstLine === undefined) {\n                return false\n            }\n            return true\n        },\n    })\n    block!: BlockData\n\n    get showBookmarkButton(): boolean {\n        return this.canBookmark && this.editMode\n    }\n\n    clearTagMarkers() {\n        if (this.codemirror === undefined) {\n            return\n        }\n\n        let allMarks = this.codemirror.getDoc().getAllMarks()\n        allMarks.forEach((e) => {\n            if (\n                e.className == Vue.$tagger.className.rnd ||\n                e.className == Vue.$tagger.className.templ\n            ) {\n                e.clear()\n            }\n        })\n\n        if (this.altcodemirror) {\n            allMarks = this.altcodemirror.getDoc().getAllMarks()\n            allMarks.forEach((e) => {\n                if (\n                    e.className == Vue.$tagger.className.rnd ||\n                    e.className == Vue.$tagger.className.templ\n                ) {\n                    e.clear()\n                }\n            })\n        }\n    }\n    clearErrorDisplay() {\n        if (this.codemirror === undefined) {\n            return\n        }\n        let allMarks = this.codemirror.getDoc().getAllMarks()\n        //console.log(\"marks\", this.block.type, allMarks)\n        allMarks.forEach((e) => {\n            if (e.className == 'red-wave') {\n                e.clear()\n            }\n        })\n\n        this.codemirror.getDoc().clearGutter('diagnostics')\n    }\n    onCodeReady(editor) {\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        if (\n            this.codemirror &&\n            this.codemirror.display &&\n            this.codemirror.display.input &&\n            this.codemirror.display.input.textarea\n        ) {\n            this.codemirror.display.input.textarea.className = 'noRTEditor'\n        }\n        this.codeBox!.$el.querySelectorAll('textarea[name]').forEach((el) => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n            el.id = this.codeBox!.$el.id\n\n            $(el).text(this.block.content)\n            el.setAttribute('data-question', `${this.block.parentID}`)\n            el.setAttribute('data-blocktype', `${this.iliasTypeNr}`)\n            if (this.editMode) {\n                el.setAttribute('is-editmode', `${this.editMode}`)\n            }\n        })\n        this.updateDiagnosticDisplay()\n        this.onCodeChange(this.block.content)\n\n        this.whenBlockIsReady()\n    }\n    onAltCodeReady(editor) {\n        console.d('READY')\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        if (\n            this.altcodemirror &&\n            this.altcodemirror.display &&\n            this.altcodemirror.display.input &&\n            this.altcodemirror.display.input.textarea\n        ) {\n            this.altcodemirror.display.input.textarea.className = 'noRTEditor'\n        }\n        this.altBox!.$el.querySelectorAll('textarea[name]').forEach((el) => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n        })\n        this.$nextTick(() => {\n            this.onAltCodeChange(this.block.alternativeContent)\n            this.updateTagDisplay()\n            this.updateHeight()\n        })\n    }\n    onCodeFocus(editor) {}\n    onAltCodeFocus(editor) {}\n\n    codeUpdateTimer: number | null = null\n    codeUpdateStartTime: number = 0\n    onCodeChangeDefered(newCode) {\n        if (!this.editMode) {\n            this.onCodeChange(newCode)\n            return\n        }\n\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.codeUpdateTimer !== null) {\n            clearTimeout(this.codeUpdateTimer)\n            this.codeUpdateTimer = null\n        } else {\n            this.codeUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.codeUpdateTimer = null\n            this.onCodeChange(newCode)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.codeUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.codeUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n\n    continuousCodeUpdateTimer: number | null = null\n    onCodeChange(newCode) {\n        //update line numbers manually (changing in options takes too long)\n        this.block.lineCountHint = this.codemirror.doc.size\n        this.codemirror.options.firstLineNumber = this.block.firstLine\n\n        //copy the content to the actual textbox processed by StudON\n        const tb = this.codeBox.$el.querySelector('textarea[name]') as HTMLTextAreaElement\n        tb.value = newCode\n\n        //copy code to the block structure\n        this.block.content = newCode\n\n        //find all tags\n        this.updateTagDisplay()\n\n        //send out the event for processing\n        if (this.editMode) {\n            this.$emit('code-changed-in-edit-mode', undefined)\n        } else if (this.emitWhenTypingInViewMode) {\n            if (this.continuousCodeUpdateTimer !== null) {\n                clearTimeout(this.continuousCodeUpdateTimer)\n                this.continuousCodeUpdateTimer = null\n            }\n            this.continuousCodeUpdateTimer = setTimeout(() => {\n                this.$emit('code-changed-in-view-mode', undefined)\n            }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n        }\n    }\n\n    codeNeedsTagUpdate: boolean = true\n    didAddText(t: string): void {\n        //console.log('    ', t)\n        if (\n            t.indexOf('!') >= 0 ||\n            t.indexOf('+') >= 0 ||\n            t.indexOf('{') >= 0 ||\n            t.indexOf('{') >= 0 ||\n            t.indexOf('\\n') >= 0\n        ) {\n            this.codeNeedsTagUpdate = true\n        }\n    }\n    onCodeKeyHandle(e) {\n        //console.log('IR', e, arguments)\n        if (arguments.length > 1 && arguments[1] !== undefined) {\n            if (arguments[1].text !== undefined) {\n                arguments[1].text.forEach((t) => {\n                    this.didAddText(t)\n                })\n            } else if (arguments[1].key !== undefined) {\n                if (arguments[1].keyCode == 13) {\n                    this.didAddText('\\n')\n                } else {\n                    this.didAddText(arguments[1].key)\n                }\n            }\n        }\n    }\n\n    altCodeUpdateTimer: number | null = null\n    altCodeUpdateStartTime: number = 0\n    onAltCodeChangeDefered(newCode) {\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.altCodeUpdateTimer !== null) {\n            clearTimeout(this.altCodeUpdateTimer)\n            this.altCodeUpdateTimer = null\n        } else {\n            this.altCodeUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.altCodeUpdateTimer = null\n            this.onAltCodeChange(newCode)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.altCodeUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.altCodeUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n    onAltCodeChange(newCode) {\n        if (this.altBox !== undefined) {\n            const tb = this.altBox.$el.querySelector('textarea[name]') as HTMLTextAreaElement\n            tb.value = newCode\n        }\n\n        this.block.alternativeContent = newCode\n        this.updateTagDisplay()\n    }\n    updateHeight() {\n        if (this.visibleLines === 'auto' || this.block.static) {\n            if (this.codemirror) {\n                this.codemirror.setSize('height', 'auto')\n            }\n            if (this.altcodemirror) {\n                this.altcodemirror.setSize('height', 'auto')\n            }\n        } else {\n            if (this.codemirror) {\n                this.codemirror.setSize(null, Math.round(20 * Math.max(1, this.visibleLines)) + 9)\n            }\n            if (this.altcodemirror) {\n                this.altcodemirror.setSize(\n                    null,\n                    Math.round(20 * Math.max(1, this.visibleLines)) + 9\n                )\n            }\n        }\n    }\n    replaceTemplateTags(o: ITagReplaceAction) {\n        if (!this.editMode) {\n            return\n        }\n        if (o.scopeUUID != this.block.scopeUUID) {\n            return\n        }\n        this.block.content = Vue.$tagger.replaceTemplateTagInString(\n            this.block.content,\n            o.name,\n            o.newValue\n        )\n    }\n    updateTagDisplay() {\n        if (\n            !this.editMode ||\n            this.block === undefined ||\n            this.block.appSettings === undefined ||\n            this.block.appSettings.randomizer === undefined ||\n            !this.block.appSettings.randomizer.active ||\n            !this.codeNeedsTagUpdate\n        ) {\n            return\n        }\n\n        this.codeNeedsTagUpdate = false\n        //console.log('Updating Tags')\n        this.clearTagMarkers()\n        Vue.$tagger.getMarkers(this.block.content).forEach((m) => {\n            this.codemirror.getDoc().markText(m.start, m.end, {\n                className: Vue.$tagger.className[m.type],\n                inclusiveLeft: true,\n                inclusiveRight: true,\n                title: m.name,\n                startStyle: 'tag-mark-start',\n                endStyle: 'tag-mark-end',\n            })\n        })\n        this.$nextTick(() => {\n            Vue.$tagger.hookClick(this.codeBox.$el, this.block.scopeUUID)\n        })\n\n        if (this.altcodemirror) {\n            Vue.$tagger.getMarkers(this.block.alternativeContent).forEach((m) => {\n                this.altcodemirror.getDoc().markText(m.start, m.end, {\n                    className: Vue.$tagger.className[m.type],\n                    inclusiveLeft: true,\n                    inclusiveRight: true,\n                    title: m.name,\n                    startStyle: 'tag-mark-start',\n                    endStyle: 'tag-mark-end',\n                })\n            })\n\n            this.$nextTick(() => {\n                if (this.altBox !== undefined) {\n                    Vue.$tagger.hookClick(this.altBox.$el, this.block.scopeUUID)\n                }\n            })\n        }\n    }\n    updateDiagnosticDisplay() {\n        const val = this.errors\n        if (val !== undefined) {\n            this.clearErrorDisplay()\n\n            const first = this.block.firstLine\n            val.forEach((error) => {\n                if (error.start.column >= 0) {\n                    //console.log(\"squiggle\", this.block.type);\n                    //put a squigly line as code marker\n                    this.codemirror.getDoc().markText(\n                        { line: error.start.line - first, ch: error.start.column },\n                        { line: error.end.line - first, ch: error.end.column },\n                        {\n                            className: 'red-wave',\n                            inclusiveLeft: true,\n                            inclusiveRight: true,\n                            title: error.message,\n                        }\n                    )\n                }\n\n                //read existing gutter marker or create a new one\n                let info = this.codemirror.getDoc().lineInfo(error.start.line - first)\n                let element =\n                    info && info.gutterMarkers ? info.gutterMarkers['diagnostics'].$component : null\n                if (element == null) {\n                    //console.log(\"Gutter\", this.block.type, error.start.line, error.message, first);\n                    element = document.createElement('span')\n\n                    //place the updated element\n                    this.codemirror\n                        .getDoc()\n                        .setGutterMarker(error.start.line - first, 'diagnostics', element)\n\n                    element.$component = new ErrorTipCtor({\n                        propsData: {\n                            errors: [],\n                            severity: error.severity,\n                        },\n                    }).$mount(element)\n\n                    element = element.$component\n                }\n\n                //make sure we use the proper class for the given severity.\n                //We allways choose the maximum severity for each marking\n                element.severity = Math.max(error.severity, element.severity)\n\n                //Build the hint text\n                if (element.errors.indexOf(error) == -1) {\n                    element.errors.push(error)\n                }\n            })\n        } else {\n            this.clearErrorDisplay()\n        }\n    }\n\n    get codeBox(): Vue {\n        return this.$refs.codeBox as Vue\n    }\n\n    get altBox(): Vue | undefined {\n        return this.$refs.altBox as Vue\n    }\n\n    get hasAlternativeContent() {\n        return this.block.hasAlternativeContent && this.typeName == 'block'\n    }\n    get errors(): ICompilerErrorDescription[] {\n        return this.block.errors\n    }\n    get randomizerActive() {\n        return this.tagSet !== undefined\n    }\n    get boxClass() {\n        let cl = ''\n        if (this.block.hidden && !this.editMode) {\n            cl += 'hiddenBox '\n        }\n        if (this.block.readonly || this.readonly) {\n            cl += 'readonlyBox '\n        }\n        if (this.block.static) {\n            cl += 'staticBox '\n        }\n        return cl\n    }\n    get iliasTypeNr() {\n        const t = this.typeName\n        if (t == 'text') {\n            return 0\n        }\n        if (t == 'block-static') {\n            return 1\n        }\n        if (t == 'block') {\n            return 2\n        }\n        if (t == 'block-hidden') {\n            return 3\n        }\n        if (t == 'playground') {\n            return 4\n        }\n        if (t == 'blockly') {\n            return 5\n        }\n        if (t == 'repl') {\n            return 6\n        }\n        if (t == 'data') {\n            return 7\n        }\n        return -1\n    }\n    get typeName() {\n        let s = this.block.type.toLowerCase()\n        if (this.block.hidden) {\n            s += '-hidden'\n        }\n        if (this.block.static) {\n            s += '-static'\n        }\n        return s\n    }\n    get altCode() {\n        if (this.block.alternativeContent === null) {\n            return ''\n        }\n        return this.block.alternativeContent\n    }\n    get code() {\n        if (!this.editMode) {\n            return this.block.actualContent()\n        }\n        return this.block.content\n    }\n    get options() {\n        return {\n            // codemirror options\n            mode: this.mode,\n            theme: this.theme,\n            lineNumbers: true,\n            line: true,\n            tabSize: 4,\n            indentUnit: 4,\n            autoCloseBrackets: true,\n            readOnly:\n                !this.editMode &&\n                (this.block.readonly || this.block.static || this.block.hidden || this.readonly),\n            //firstLineNumber: this.block.firstLine, //make sure to change altOptions as well when activating this\n            gutters: ['diagnostics', 'CodeMirror-linenumbers'],\n        }\n    }\n    get altOptions() {\n        return this.options\n        // let o = { ...this.options }\n        // o.firstLineNumber = 1\n        // return o\n    }\n    get codemirror(): any | undefined {\n        return (this.codeBox as any).codemirror\n    }\n    get altcodemirror(): any | undefined {\n        if (this.altBox === undefined) {\n            return undefined\n        }\n        return (this.altBox as any).codemirror\n    }\n    get readyWhenMounted() {\n        return false\n    }\n    @Watch('block.firstLine')\n    onFirstLineChanged(val) {\n        if (this.codemirror) {\n            if (this.codemirror.options.firstLineNumber != this.block.firstLine) {\n                this.codemirror.options.firstLineNumber = this.block.firstLine\n                this.codemirror.refresh()\n            }\n        }\n    }\n    @Watch('visibleLines')\n    onVisibleLinesChanged(val) {\n        this.updateHeight()\n    }\n    @Watch('errors')\n    onErrorsChanged(val) {\n        this.updateDiagnosticDisplay()\n    }\n\n    created() {\n        console.d('ReadyWhenMounted in CodeBlock', this.readyWhenMounted)\n        //this.$options.readyWhenMounted = false;\n    }\n    mounted() {\n        this.updateHeight()\n\n        if (this.editMode && this.codemirror) {\n            console.d('Attach')\n            const buildIt = () => {\n                console.log('EMIT')\n                this.$emit('build')\n            }\n\n            this.codemirror.addKeyMap({\n                'Cmd-B': function (cMirror) {\n                    buildIt()\n                },\n                'Ctrl-B': function (cMirror) {\n                    buildIt()\n                },\n            })\n\n            this.codemirror.addKeyMap({\n                Tab: function (cMirror) {\n                    cMirror.execCommand('insertSoftTab')\n                },\n            })\n        }\n\n        Vue.$tagger.$on('replace-template-tag', this.replaceTemplateTags)\n        this.codeNeedsTagUpdate = true\n        this.updateTagDisplay()\n    }\n    beforeDestroy() {\n        Vue.$tagger.$off('replace-template-tag', this.replaceTemplateTags)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlock.vue?vue&type=template&id=2ff15259&scoped=true&\"\nimport script from \"./CodeBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlock.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlock.vue?vue&type=style&index=0&id=2ff15259&scoped=true&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ff15259\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=style&index=0&id=f34c54ee&lang=sass&scoped=true&\"","\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport { BlockData } from '@/lib/codeBlocksManager'\n@Component\nexport default class BaseBlock extends Vue {\n    @Prop({ default: false }) muteReadyState!: boolean\n    @Prop({ required: true }) block!: BlockData\n\n    whenBlockIsReady() {\n        if (this.muteReadyState) {\n            return\n        }\n        this.block.readyCount++\n        this.$emit('ready', this.block)\n    }\n\n    whenBlockIsDestroyed() {\n        if (this.muteReadyState) {\n            return\n        }\n        this.block.readyCount--\n    }\n\n    get readyWhenMounted() {\n        return true\n    }\n\n    mounted() {\n        if (this.readyWhenMounted) {\n            this.whenBlockIsReady()\n        }\n    }\n\n    beforeDestroy() {\n        this.whenBlockIsDestroyed()\n    }\n}\n","var render, staticRenderFns\nimport script from \"./BaseBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./BaseBlock.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseBlock.vue?vue&type=script&lang=ts&\"","import { ICompilerID, IListItemData } from './ICompilerRegistry'\nimport { IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport { IBlockDefinition, IBlocklyToolbox } from './IBlocklyHelper'\n\nexport enum KnownBlockTypes {\n    PLAYGROUND = 'PLAYGROUND',\n    TEXT = 'TEXT',\n    BLOCKHIDDEN = 'BLOCK-hidden',\n    BLOCKSTATIC = 'BLOCK-static',\n    BLOCK = 'BLOCK',\n    BLOCKLY = 'BLOCKLY',\n    REPL = 'REPL',\n    DATA = 'DATA',\n}\n\nexport enum CodeOutputTypes {\n    AUTO = 'auto',\n    TEXT = 'text',\n    JSON = 'json',\n    DATA = 'data',\n    MAGIC = 'magic',\n}\n\nexport enum CodeExpansionType {\n    LARGE = 2,\n    AUTO = 1,\n    TINY = 0,\n}\n\nexport interface IBlockloadManager {\n    readonly blockTag: string\n    loadFromDatablock: (\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ) => void\n}\n\nexport interface IRandomizerSet {\n    uuid: string\n    values: IRandomizerSetTag[]\n}\n\nexport interface IRandomizerSetTag {\n    tag: string\n    value: string\n}\nexport interface IRandomizerSettings {\n    active: boolean\n    previewIndex: number\n    knownTags: string[]\n    sets: IRandomizerSet[]\n}\n\nexport interface IBlockDataPlayground {\n    width: string\n    height: string\n    align: string\n}\n\nexport interface IBlockDataData {\n    name: string\n}\n\nexport interface IBlockError {\n    error: string\n    uuid: string\n}\n\nexport interface IBlockElementData {\n    readonly?: string\n    static?: string\n    hidden?: string\n    visibleLines?: string\n    shouldAutoreset?: string\n    shouldReloadResources?: string\n    generateTemplate?: string\n    expanded?: string\n    codeExpanded?: string\n    noContent?: string\n    alternativeContent?: string\n    width?: string\n    height?: string\n    align?: string\n    version?: string\n    scopeUUID?: string\n    scopeSelector?: string\n    showControls?: boolean\n    as?: string\n    name?: string\n}\n\nexport interface IBlockDataBlockly {\n    toolbox: IBlocklyToolbox\n    blocks: IBlockDefinition[]\n    _blockErrors: IBlockError[]\n    useOverride: boolean\n    toolboxOverride: string\n    showControls: boolean\n}\n\nexport interface ICodeBlockDataState {\n    readonly: boolean\n    static: boolean\n    hidden: boolean\n}\nexport interface IBlockDataBase extends IBlockDataPlayground, ICodeBlockDataState, IBlockDataData {\n    hasCode: boolean\n    type: KnownBlockTypes\n    content: string\n    alternativeContent: string | null\n    noContent: boolean\n    id: number\n    uuid: string\n    parentID: number\n    expanded: boolean\n    codeExpanded: CodeExpansionType\n    obj: object | null\n    version: string\n    readyCount: number\n    errors: any[]\n    scopeUUID?: string\n    scopeSelector?: string\n    visibleLines: number | 'auto'\n    hasAlternativeContent: boolean\n    shouldAutoreset: boolean\n    shouldReloadResources: boolean\n    generateTemplate: boolean\n    blockly: IBlockDataBlockly\n    lineCountHint: number\n    as?: KnownBlockTypes\n}\n\nexport interface IBlockData extends IBlockDataBase {\n    getThemeForBlock(bl: ICodeBlockDataState): string\n    readonly themeForCodeBlock: string\n}\n\nexport interface IGlobalSettings {\n    baseurl: string\n}\nexport interface IGlobalState extends IGlobalSettings {\n    format_info(text: string): string\n    format_error(text: string): string\n\n    /**\n     * Seperates an outputObject (like the one you will get in the update-method of a playground handler) into a string and a json object seperated by a magic String. Returns an object that contains\n     *  <code>type</code> = <code>'dual'</code> parsed a magic string, <code>'json'</code> parsed as json, <code>'text'</code> plain text\n     *  <code>json</code> = the JSON object that was sent after the magicString\n     *  <code>text</code> = the String that was sent before the magicString\n     * @param {*} outputObject  The outputObject generated by the student code\n     * @param {*} type  'auto' = (default, try to determin what kind of output was generated), 'text', 'json' = (force json parsing), 'magic' = (force use of magic string seperator)\n     * @param {*} magicString The seperating String. By default it is '\\n\\n<JSON>\\n'\n     */\n    processMixedOutput(\n        outputObject: string[] | string,\n        type: CodeOutputTypes,\n        magicString?: string,\n        resultData?: object | any[]\n    ): IProcessedScriptOutput\n    mimeType(language: string): string\n    knownLanguages(): IListItemData[]\n\n    refreshAllCodeMirrors(): void\n    refreshAllCodeMirrorsSync(): void\n\n    itemForValue(items: IListItemData[], value: string): IListItemData\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=style&index=0&lang=sass&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=style&index=0&id=d7a0c6aa&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=style&index=0&id=5a368702&lang=stylus&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=style&index=0&lang=sass&\"","export enum BlockPrimaryColors {\n    Colour = '#cf63cf',\n    List = '#5cb1d6',\n    Logic = '#ffab19',\n    Loop = '#ffbf00',\n    Math = '#4c97ff',\n    Procedure = '#ff6680',\n    Text = '#bbbbca',\n    Variable = '#59c059',\n    Variable_dynamic = '#0fbd8c'\n}\n\nexport enum BlockSecondaryColors {\n    Colour = '#c55ec5',\n    List = '#57a8cb',\n    Logic = '#f2a218',\n    Loop = '#f2b500',\n    Math = '#488ff2',\n    Procedure = '#f2617a',\n    Text = '#b2b2c0',\n    Variable = '#55b655',\n    Variable_dynamic = '#0eb485'\n}\nexport enum BlockTertiaryColors {\n    Colour = '#ba59ba',\n    List = '#539fc1',\n    Logic = '#e69a17',\n    Loop = '#e6ac00',\n    Math = '#4488e6',\n    Procedure = '#e65c73',\n    Text = '#a8a8b6',\n    Variable = '#50ad50',\n    Variable_dynamic = '#0eaa7e'\n}\n\nexport enum BlockOutputTypes {\n    Number = 'Number',\n    Boolean = 'Boolean',\n    String = 'String',\n    Array = 'Array',\n    Color = 'Colour',\n    Any = ''\n}\n\nexport enum BlockSequenceTypes {\n    Action = 'Action'\n}\n\nexport enum BlockArgumentTypes {\n    field_input = 'field_input',\n    field_dropdown = 'field_dropdown',\n    field_checkbox = 'field_checkbox',\n    field_colour = 'field_colour',\n    field_number = 'field_number',\n    field_angle = 'field_angle',\n    field_variable = 'field_variable',\n    field_date = 'field_date',\n    field_label = 'field_label',\n    field_image = 'field_image',\n    input_value = 'input_value',\n    input_statement = 'input_statement',\n    input_dummy = 'input_dummy'\n}\n\nexport interface IBlocklyToolboxItem extends IBlockUIExtension {\n    uuid: string\n    type: string\n}\nexport interface IBlocklyToolboxCategory {\n    uuid: string\n    items: IBlocklyToolboxItem[]\n    color?: string\n    custom?: string\n    name: string\n}\nexport interface IBlocklyToolbox {\n    categories: IBlocklyToolboxCategory[]\n}\n\nexport interface IBlockArgument extends IBlockUIExtension {\n    uuid: string\n    type: BlockArgumentTypes\n    name: string\n    check?: BlockOutputTypes\n    variable?: string\n    variableTypes?: string[]\n}\n\nexport interface IBlockLine extends IBlockUIExtension {\n    uuid: string\n    message: string\n    args: IBlockArgument[]\n}\n\nexport interface IBlockDefinitionJSON {\n    type: string\n    message0: string\n    args0: IBlockArgument[]\n    message1?: string\n    args1?: IBlockArgument[]\n    message2?: string\n    args2?: IBlockArgument[]\n    message3?: string\n    args3?: IBlockArgument[]\n    message4?: string\n    args4?: IBlockArgument[]\n\n    output?: BlockOutputTypes\n    previousStatement: BlockSequenceTypes | null\n    nextStatement: BlockSequenceTypes | null\n    colour: string\n    tooltip?: string\n    helpUrl?: string\n}\n\nexport interface IBlockDefinition extends IBlockUIExtension {\n    uuid: string\n    _code?: Function\n    JSON: IBlockDefinitionJSON\n    XML?: string\n    codeStub?: string\n    codeString: string\n}\n\nexport enum KnownBlocklyTypes {\n    controls_if = 'controls_if',\n    logic_compare = 'logic_compare',\n    logic_operation = 'logic_operation',\n    logic_negate = 'logic_negate',\n    logic_boolean = 'logic_boolean',\n    logic_null = 'logic_null',\n    logic_ternary = 'logic_ternary',\n    controls_repeat_ext = 'controls_repeat_ext',\n    controls_whileUntil = 'controls_whileUntil',\n    controls_for = 'controls_for',\n    controls_forEach = 'controls_forEach',\n    controls_flow_statements = 'controls_flow_statements',\n    math_number = 'math_number',\n    math_arithmetic = 'math_arithmetic',\n    math_single = 'math_single',\n    math_trig = 'math_trig',\n    math_constant = 'math_constant',\n    math_number_property = 'math_number_property',\n    math_round = 'math_round',\n    math_on_list = 'math_on_list',\n    math_modulo = 'math_modulo',\n    math_constrain = 'math_constrain',\n    math_random_int = 'math_random_int',\n    math_random_float = 'math_random_float',\n    text = 'text',\n    text_join = 'text_join',\n    text_append = 'text_append',\n    text_length = 'text_length',\n    text_isEmpty = 'text_isEmpty',\n    text_indexOf = 'text_indexOf',\n    variables_get = 'variables_get',\n    text_charAt = 'text_charAt',\n    text_getSubstring = 'text_getSubstring',\n    text_changeCase = 'text_changeCase',\n    text_trim = 'text_trim',\n    text_print = 'text_print',\n    text_prompt_ext = 'text_prompt_ext',\n    lists_create_with = 'lists_create_with',\n    lists_repeat = 'lists_repeat',\n    lists_length = 'lists_length',\n    lists_isEmpty = 'lists_isEmpty',\n    lists_indexOf = 'lists_indexOf',\n    lists_getIndex = 'lists_getIndex',\n    lists_setIndex = 'lists_setIndex',\n    lists_getSublist = 'lists_getSublist',\n    lists_split = 'lists_split',\n    lists_sort = 'lists_sort',\n    colour_picker = 'colour_picker',\n    colour_random = 'colour_random',\n    colour_rgb = 'colour_rgb',\n    colour_blend = 'colour_blend'\n}\n\nexport interface IBlockUIExtension {\n    _expanded: boolean\n}\n","import Vue from 'vue'\nimport UUID from 'vue-uuid'\n\nVue.use(UUID as any)\n","import Vue from 'vue'\n\nimport '../styles/quasar.styl'\nimport '@quasar/extras/material-icons/material-icons.css'\n\nimport '@quasar/extras/animate/fadeInUp.css'\nimport '@quasar/extras/animate/fadeInDown.css'\nimport '@quasar/extras/animate/fadeOutUp.css'\nimport '@quasar/extras/animate/fadeOutDown.css'\n\nimport '@quasar/extras/animate/fadeIn.css'\nimport '@quasar/extras/animate/fadeOut.css'\n\nimport '@quasar/extras/animate/zoomInDown.css'\nimport '@quasar/extras/animate/zoomInUp.css'\n\nimport Dialog from 'quasar/src/plugins/Dialog.js';import Quasar from 'quasar/src/vue-plugin.js';\n\nconst lang = document.getElementsByTagName('html')[0].getAttribute('lang')\nimport langDe from 'quasar/dist/lang/de.umd.min.js'\nimport langEn from 'quasar/dist/lang/en-gb.umd.min.js'\n\nVue.use(Quasar, {\n    config: {},\n    components: {\n        /* not needed if importStrategy is not 'manual' */\n    },\n    directives: {\n        /* not needed if importStrategy is not 'manual' */\n    },\n    plugins: {\n        Dialog,\n    },\n    animations: ['fadeIn', 'fadeOut'],\n    lang: lang == 'de' ? langDe : langEn,\n})\nQuasar.lang.set(lang == 'de' ? langDe : langEn)\n\nimport 'reflect-metadata'\n","import Vue from 'vue'\nimport { install } from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\ninstall(Vue)\n//Vue.use(VueCodeMirror, {})\n","import Vue from 'vue'\nimport { CodeOutputTypes, IGlobalSettings, IGlobalState } from '@/lib/ICodeBlocks'\nimport { IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport { IListItemData } from '@/lib/ICompilerRegistry'\n\n/**\n * This object defines the programming languages supported for code highlighting\n * using CodeMirror\n * @namespace cmMode The programminglanguages supported\n */\nconst mimeTypesForLanguage = {\n    c: { mime: 'text/x-csrc', displayName: 'C' }, // (C),\n    'c++': { mime: 'text/x-c++src', displayName: 'C++' }, // (C++),\n    'c#': { mime: 'text/x-csharp', displayName: 'C#' }, // (C#),\n    css: { mime: 'text/css', displayName: 'CSS' }, // (CSS)\n    fortran: { mime: 'text/x-fortran', displayName: 'Fortran' }, // (Fortran)\n    glsl: { mime: 'text/x-glsl', displayName: 'GLSL' }, // (GLSL)\n    html: { mime: 'text/html', displayName: 'HTML' }, // (HTML)\n    java: { mime: 'text/x-java', displayName: 'Java' }, // (Java),\n    javascript: { mime: 'text/javascript', displayName: 'JavaScript' }, // (JavaScript)\n    perl: { mime: 'text/x-perl', displayName: 'Perl' }, // (Perl)\n    php: { mime: 'application/x-httpd-php', displayName: 'PHP' }, // (PHP)\n    python: { mime: 'text/x-python', displayName: 'Python' }, // (Python)\n    r: { mime: 'text/x-rsrc', displayName: 'R' }, //(R)\n}\n\nfunction loadSettings(scope: HTMLElement | Document): IGlobalSettings {\n    const options = {\n        baseurl: '',\n    }\n    const settings = scope.querySelectorAll('meta[name^=codeblocks]')\n    settings.forEach((opt) => {\n        const name = opt.getAttribute('name')\n        const value = opt.getAttribute('content')\n\n        if (name == 'codeblocks-baseurl' && value) {\n            options.baseurl = value\n        }\n    })\n    return options\n}\n\nexport class GlobalState implements IGlobalState {\n    public readonly baseurl: string\n\n    constructor() {\n        const options = loadSettings(document)\n        this.baseurl = options.baseurl\n    }\n    format_info(text: string): string {\n        return '<span style=\"color:green\">' + text + '</span>'\n    }\n    format_error(text: string): string {\n        return '<span style=\"color:red\">' + text + '</span>'\n    }\n\n    /**\n     * Seperates an outputObject (like the one you will get in the update-method of a playground handler) into a string and a json object seperated by a magic String. Returns an object that contains\n     *  <code>type</code> = <code>'dual'</code> parsed a magic string, <code>'json'</code> parsed as json, <code>'text'</code> plain text\n     *  <code>json</code> = the JSON object that was sent after the magicString\n     *  <code>text</code> = the String that was sent before the magicString\n     * @param {*} outputObject  The outputObject generated by the student code\n     * @param {*} type  'auto' = (default, try to determin what kind of output was generated), 'text', 'json' = (force json parsing), 'magic' = (force use of magic string seperator)\n     * @param {*} magicString The seperating String. By default it is '\\n\\n<JSON>\\n'\n     */\n    processMixedOutput(\n        outputObject: string[] | string,\n        type: CodeOutputTypes,\n        magicString?: string,\n        resultData?: object | any[]\n    ): IProcessedScriptOutput {\n        if (outputObject !== undefined && Array.isArray(outputObject)) {\n            return {\n                type: 'json',\n                json: outputObject,\n                text: '',\n            }\n        }\n\n        if (magicString === undefined) {\n            magicString = '\\n\\n<JSON>\\n'\n        }\n        const idx = outputObject.indexOf(magicString)\n\n        if (\n            type === CodeOutputTypes.DATA ||\n            (type === CodeOutputTypes.AUTO && resultData != undefined)\n        ) {\n            return {\n                type: 'dual',\n                json: resultData,\n                text: outputObject,\n            }\n        } else if ((type === CodeOutputTypes.AUTO && idx >= 0) || type === CodeOutputTypes.MAGIC) {\n            const str = outputObject.substr(0, idx)\n            let json = undefined\n            const pString = outputObject.substr(idx + magicString.length)\n            try {\n                json = JSON.parse(pString)\n            } catch (ee) {\n                const e: any = ee\n                e.parsedString = pString\n                console.log('catch')\n                throw e\n            }\n\n            return {\n                type: 'dual',\n                json: json,\n                text: str,\n            }\n        } else {\n            if (type === CodeOutputTypes.JSON && resultData !== undefined) {\n                return {\n                    type: CodeOutputTypes.JSON,\n                    json: resultData,\n                    text: '',\n                }\n            }\n            const too = outputObject.trim()\n            if (\n                (type === CodeOutputTypes.AUTO &&\n                    (too.indexOf('[') == 0 || too.indexOf('{') == 0)) ||\n                type === CodeOutputTypes.JSON\n            ) {\n                return {\n                    type: CodeOutputTypes.JSON,\n                    json: JSON.parse(outputObject),\n                    text: '',\n                }\n            }\n        }\n\n        return {\n            type: 'text',\n            json: resultData,\n            text: outputObject,\n        }\n    }\n    mimeType(language: string): string {\n        const o = mimeTypesForLanguage[language]\n        if (o === undefined) {\n            return 'text/javascript'\n        }\n        return o.mime\n    }\n    knownLanguages(): IListItemData[] {\n        return Object.keys(mimeTypesForLanguage)\n            .map((k) => {\n                return { label: mimeTypesForLanguage[k].displayName, value: k }\n            })\n            .sort((a, b) => (a.value < b.value ? -1 : 1))\n    }\n    refreshAllCodeMirrorsSync(): void {\n        document.querySelectorAll('.CodeMirror').forEach((e: any) => e.CodeMirror.refresh())\n    }\n    refreshAllCodeMirrors(): void {\n        setTimeout(() => {\n            this.refreshAllCodeMirrorsSync()\n        }, 100)\n        setTimeout(() => {\n            this.refreshAllCodeMirrorsSync()\n        }, 500)\n    }\n    public itemForValue(items: IListItemData[], value: string): IListItemData {\n        const ret = items.find((i) => i.value == value)\n        if (ret === undefined) {\n            return {\n                label: '???',\n                value: '???',\n            }\n        }\n        return ret\n    }\n}\nexport const globalState = new GlobalState()\nVue.prototype.$CodeBlock = globalState\nVue.$CodeBlock = globalState\n\nVue.$GlobalEventHub = new Vue()\n","import Vue from 'vue'\nimport { ErrorSeverity } from '@/lib/ICompilerRegistry'\n\nVue.prototype.SEVERITY_ERROR = ErrorSeverity.Error\nVue.prototype.SEVERITY_WARNING = ErrorSeverity.Warning\nVue.$SEVERITY_ERROR = ErrorSeverity.Error\nVue.$SEVERITY_WARNING = ErrorSeverity.Warning\n\nVue.prototype.$compilerState = new Vue({\n    data: function() {\n        return {\n            globalStateHidden: true,\n            globalStateMessage: '',\n            runButtonForceHide: false\n        }\n    },\n    methods: {\n        hideGlobalState() {\n            this.displayGlobalState(null)\n        },\n        setAllRunButtons(what: boolean) {\n            this.runButtonForceHide = !what\n        },\n        displayGlobalState(message: string | null) {\n            this.globalStateHidden = message === null || message === undefined || message === ''\n            this.globalStateMessage = message ? message : ''\n        }\n    }\n})\n","import Vue from 'vue'\nimport hljs from 'highlight.js/lib/core'\n//import 'highlight.js/styles/ocean.css'\nimport 'highlight.js/styles/tomorrow.css'\nimport '../styles/highlight.styl'\nimport { DirectiveBinding } from 'vue/types/options'\n\nhljs.configure({ useBR: false })\n\nhljs.registerLanguage('c', require('highlight.js/lib/languages/cpp'))\nhljs.registerLanguage('c++', require('highlight.js/lib/languages/cpp'))\nhljs.registerLanguage('c#', require('highlight.js/lib/languages/csharp'))\nhljs.registerLanguage('css', require('highlight.js/lib/languages/css'))\nhljs.registerLanguage('fortran', require('highlight.js/lib/languages/fortran'))\nhljs.registerLanguage('glsl', require('highlight.js/lib/languages/glsl'))\nhljs.registerLanguage('java', require('highlight.js/lib/languages/java'))\nhljs.registerLanguage('javascript', require('highlight.js/lib/languages/javascript'))\nhljs.registerLanguage('perl', require('highlight.js/lib/languages/perl'))\nhljs.registerLanguage('php', require('highlight.js/lib/languages/php'))\nhljs.registerLanguage('python', require('highlight.js/lib/languages/python'))\nhljs.registerLanguage('r', require('highlight.js/lib/languages/r'))\n\nconst reg_hl = /(\\[hl\\]|\\[hl\\s+language=\"?(.*?)\"?\\])(.*?)(\\[\\/hl\\])/gm\nconst reg_code = /(\\[code\\]|\\[code\\s+language=\"?(.*?)\"?\\])([\\s\\S]*?)(\\[\\/code\\])/gm\n\nhljs.$vue = {\n    processElements: function (\n        scope: Document | HTMLElement | undefined,\n        inLang: string | undefined\n    ) {\n        if (scope === undefined) {\n            scope = document\n        }\n        const elements = scope.querySelectorAll('[highlight]')\n        elements.forEach((el) => {\n            if (inLang === undefined && el.hasAttribute('highlight')) {\n                const lang = el.getAttribute('highlight')\n                inLang = lang === null ? undefined : lang\n            }\n            this.processElement(el, inLang)\n        })\n    },\n    /////The Folowing Code will not replace tags on a string level as this will\n    /////destroy attached objects in the DOM but aims to replace the strings in\n    /////TextNodes only. Changes ar recorded in the q and applied once all nodes\n    /////Were visited. This is probably a lot slower than the pure string version\n    // processTextElement: function(el, inLang, q){\n    //     let txt = el.textContent.replace(reg_hl, function(m1, m2, m3, m4, m5){\n    //         const lang = m3===undefined?inLang:m3;\n    //         //console.log(\"m1\", m1, \"m2\", m2, \"m3\", m3, \"m4\", m4, \"m5\", m5, \"in\", inLang, \"res\", lang)\n    //         if (lang) return '<span is-code>'+hljs.highlight(lang, m4).value + '</span>';\n    //         else return '<span is-code>'+hljs.highlightAuto(m4).value + '</span>';\n    //     });\n\n    //     txt = txt.replace(reg_code, function(m1, m2, m3, m4, m5){\n    //         const lang = m3===undefined?inLang:m3;\n    //         m4 = m4.replace(/<br( +\\/)?>/g, \"\\n\").replace(/&nbsp;/g, \" \");\n    //         if (lang) return '<pre is-code>'+hljs.highlight(lang, m4).value + '</pre>';\n    //         else return '<pre is-code>'+hljs.highlightAuto(m4).value + '</pre>';\n    //     });\n    //     if (txt != el.textContent) {\n    //       q.push(()=>{\n    //          let nel = document.createElement('span');\n    //          nel.innerHTML = txt;\n    //          el.parentNode.replaceChild(nel, el);\n    //       })\n    //     }\n    // },\n    // processElementRec: function(el, inLang, updateList){\n    //     let q = updateList;\n    //     if (q === undefined) q = [];\n\n    //     if (inLang === undefined && el.hasAttribute('highlight')){\n    //         inLang = el.getAttribute('highlight');\n    //     }\n    //     el.innerHTML = el.innerHTML;\n\n    //     el.childNodes.forEach(c => {\n    //        if (c.nodeType==Node.TEXT_NODE) {\n    //            this.processTextElement(c, inLang, q);\n    //        } else {\n    //            this.processElement(c, inLang, q);\n    //        }\n    //     })\n\n    //     if (updateList === undefined){\n    //         q.forEach(f => f());\n    //     }\n    // },\n    processElementSimple(el: HTMLElement, inLang: string | undefined) {\n        if (inLang === undefined && el.hasAttribute('highlight')) {\n            const lang = el.getAttribute('highlight')\n            inLang = lang === null ? 'javascript' : lang\n        }\n\n        let txt = el.innerHTML.replace(reg_hl, function (m1, m2, m3, m4, m5) {\n            const lang = m3 === undefined ? inLang : m3\n            //console.log(\"m1\", m1, \"m2\", m2, \"m3\", m3, \"m4\", m4, \"m5\", m5, \"in\", inLang, \"res\", lang)\n            if (lang) {\n                return '<span is-code>' + hljs.highlight(lang, m4).value + '</span>'\n            } else {\n                return '<span is-code>' + hljs.highlightAuto(m4).value + '</span>'\n            }\n        })\n\n        txt = txt.replace(reg_code, function (m1, m2, m3, m4, m5) {\n            const lang = m3 === undefined ? inLang : m3\n            m4 = m4\n                .replace(/<br( +\\/)?>/g, '\\n')\n                .replace(/&nbsp;/g, ' ')\n                .replace(/&lt;/g, '<')\n                .replace(/&gt;/g, '>')\n                .replace(/&amp;/g, '&')\n\n            if (lang) {\n                return '<pre is-code>' + hljs.highlight(lang, m4).value + '</pre>'\n            } else {\n                return '<pre is-code>' + hljs.highlightAuto(m4).value + '</pre>'\n            }\n        })\n\n        el.innerHTML = txt\n    },\n    processElement(el: HTMLElement, inLang: string | undefined) {\n        if (window.MathJax === undefined) {\n            this.processElementSimple(el, inLang)\n        } else {\n            MathJax.Hub.Register.StartupHook('End', () => {\n                this.processElementSimple(el, inLang)\n            })\n        }\n    },\n}\n\nwindow.highlightAll = function () {\n    hljs.$vue.processElements()\n}\nwindow.highlightElement = function (el: HTMLElement) {\n    hljs.$vue.processElement(el, el.getAttribute('highlight'))\n}\nwindow.hljs = hljs\nVue.$hljs = hljs\n\nVue.directive('highlight', {\n    //deep: true,\n    bind: function (el: HTMLElement, binding: DirectiveBinding) {\n        console.log('DIRECTIVE - bind', el, binding)\n        hljs.$vue.processElement(el, binding.value)\n    },\n    componentUpdated: function (el: HTMLElement, binding: DirectiveBinding) {\n        console.log('DIRECTIVE - update', el, binding)\n        hljs.$vue.processElement(el, binding.value)\n    },\n})\n","import 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport i18n from './i18n'\n//!!! make sure to also change the expression in ilias-builder.js !!!\nconst randomAndTemplateTag = /\\{(:|!)([\\w]*)}/g\n\nimport '../styles/tagger.styl'\nimport { DirectiveBinding } from 'vue/types/options'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\n\nexport interface ITagReplaceAction {\n    name: string\n    newValue: string\n    scopeUUID: string\n}\n\nexport interface ITagMarkers {\n    start: { line: number; ch: number }\n    end: { line: number; ch: number }\n    type: 'rnd' | 'templ'\n    name: string\n}\n@Component\nexport default class Tagger extends Vue {\n    private className = {\n        rnd: 'random-tag-placeholder',\n        templ: 'template-tag-placeholder'\n    }\n\n    getMarkers(s: string): ITagMarkers[] {\n        if (s === undefined || s === null) {\n            return []\n        }\n        let lines = s.split('\\n')\n        let markers: ITagMarkers[] = []\n        let m: RegExpExecArray | null\n        for (let i = 0; i < lines.length; i++) {\n            let regex = new RegExp(randomAndTemplateTag)\n\n            while ((m = regex.exec(lines[i])) !== null) {\n                if (m.index === regex.lastIndex) {\n                    regex.lastIndex++\n                }\n\n                const marker: ITagMarkers = {\n                    start: { line: i, ch: m.index },\n                    end: { line: i, ch: regex.lastIndex },\n                    type: m[1] == ':' ? 'rnd' : 'templ',\n                    name: m[2]\n                }\n                markers.push(marker)\n            }\n        }\n        return markers\n    }\n    processElements(scope: Document | HTMLElement | undefined): void {\n        let uuid: string = ''\n        if (scope === undefined) {\n            scope = document\n        } else {\n            const h = scope as HTMLElement\n            if (!h.hasAttribute('uuid')) {\n                uuid = this.$uuid.v4()\n                h.setAttribute('uuid', uuid)\n            } else {\n                uuid = h.getAttribute('uuid')!\n            }\n        }\n\n        const elements = scope.querySelectorAll('[tagged]')\n        const calle = () => {\n            elements.forEach(el => {\n                this.processElement(el as HTMLElement, uuid)\n            })\n        }\n        if (window.MathJax === undefined) {\n            calle()\n        } else {\n            MathJax.Hub.Register.StartupHook('End', calle)\n        }\n    }\n\n    processElement(el: HTMLElement, scopeUUID: string): void {\n        el.innerHTML = this.processString(el.innerHTML, scopeUUID)\n        this.hookClick(el, scopeUUID)\n    }\n\n    processString(str: string, scopeUUID: string): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            const className = m1 === ':' ? this.className.rnd : this.className.templ\n            return (\n                `<span class=\"q-mb-xs  tag-mark-start tag-mark-end ${className}\" >` + m0 + '</span>'\n            )\n        })\n    }\n    hookClick(el: HTMLElement, scopeUUID: string): void {\n        let tags = el.querySelectorAll('.' + this.className.templ)\n        tags.forEach(inTag => {\n            const tag = inTag as HTMLElement\n            let name = tag.innerText.replace(randomAndTemplateTag, (m0, m1, m2) => {\n                return m2\n            })\n            tag.onclick = () => {\n                this.clickFunction(name, tag, scopeUUID)\n            }\n        })\n    }\n    replaceTemplateTag(\n        scope: HTMLElement | Document | undefined,\n        name: string,\n        newValue: string\n    ): void {\n        if (scope === undefined) {\n            scope = document\n        }\n        let tags = scope.querySelectorAll('.' + this.className.templ)\n        tags.forEach(tag => {\n            tag.innerHTML = this.replaceTemplateTagInString(tag.innerHTML, name, newValue)\n        })\n    }\n    replaceTemplateTagInString(str: string, name: string, newValue: string): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            if (m1 == '!' && m2 == name) {\n                return newValue\n            }\n            return m0\n        })\n    }\n    replaceRandomTagsInString(str: string, tagSet: IRandomizerSet): string {\n        return str.replace(randomAndTemplateTag, (m0, m1, m2) => {\n            if (m1 == ':') {\n                const tag = tagSet.values.find(t => t.tag == m2)\n                if (tag !== undefined) {\n                    return tag.value\n                }\n                return m0\n            }\n            return m0\n        })\n    }\n    clickFunction(name: string, tagEl: HTMLElement, scopeUUID: string): void {\n        //console.log(i18n)\n        Vue.prototype.$q\n            .dialog({\n                title: i18n.t('Tagger.ConfirmRepl'),\n                message: i18n.t('Tagger.ConfirmReplMsg', {\n                    name: '<span class=\"template-tag-placeholder-noclick\">' + name + '</span>'\n                }),\n                html: true,\n                persistent: true,\n                prompt: {\n                    model: '{!' + name + '}',\n                    type: 'text' // optional\n                },\n                ok: {\n                    push: true,\n                    color: 'negative',\n                    icon: 'warning'\n                },\n                cancel: {\n                    push: true,\n                    color: 'positive'\n                }\n            })\n            .onOk((data: string) => {\n                //this.replaceTemplateTag($(tagEl).parents(\".codeblocks\").get(0), name, data)\n                this.replaceTemplateTag($(`[uuid=${scopeUUID}]`).get(0), name, data)\n                console.log(scopeUUID)\n                this.$emit('replace-template-tag', {\n                    name: name,\n                    newValue: data,\n                    scopeUUID: scopeUUID\n                })\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                const me = self as any\n                me.highlighted = false\n            })\n    }\n}\n\nVue.directive('tagged', {\n    //deep: true,\n    bind: function(el: HTMLElement, binding: DirectiveBinding) {\n        Vue.$tagger.processElement(el, binding.value)\n    },\n    componentUpdated: function(el: HTMLElement, binding: DirectiveBinding) {\n        //console.log(\"DIRECTIVE - update\", el, binding)\n        Vue.$tagger.processElement(el, binding.value)\n    }\n})\n\nVue.$tagger = new Tagger()\n","import Vue from 'vue'\n\n/**\n * The overhead time we need to spin up the execution environment. The value is added to the execution time defined for this question\n * @type {int} javaRunOverhead execution overhead in ms\n */\nvar javaRunOverhead = 4000\n\nfunction runJavaWorker(\n    questionID,\n    code,\n    callingCodeBlocks,\n    max_ms,\n    log_callback,\n    info_callback,\n    err_callback,\n    compileFailedCallback,\n    finishedExecutionCB,\n    forceReload = false\n) {\n    let exp = new RegExp('public[ \\n]*class[ \\n]*([a-zA-Z_$0-9]*)[ \\n]*({|implements|extends)')\n    let match = exp.exec(code)\n    if (match == null) {\n        console.error('Unable to determine class Name!', match, code)\n        return\n    }\n\n    let className = match[1]\n\n    let worker = new Worker(Vue.$CodeBlock.baseurl + 'js/doppio/v001/javaWorker.js')\n    let timer = null\n\n    worker.addEventListener(\n        'message',\n        function (e) {\n            const data = e.data\n            //console.log(data)\n            switch (data.event) {\n                case 'finished':\n                    if (timer) {\n                        clearTimeout(timer)\n                        timer = null\n                    }\n\n                    /*if (data.stderr && data.stderr != '') err_callback(data.stderr + \"\\n\") ;\n        if (data.stdout && data.stdout != '') log_callback(data.stdout);*/\n\n                    console.log('Done', data.stdout, data.stderr, finishedExecutionCB)\n                    finishedExecutionCB()\n                    break\n\n                case 'startTimer':\n                    timer = setTimeout(function (e) {\n                        console.log('Sending kill command')\n                        worker.postMessage({ cmd: 'kill' })\n                        timer = setTimeout(function () {\n                            console.log('Terminating Worker')\n                            worker.terminate()\n                        }, 5000)\n                        err_callback(\n                            'Terminated long running Process (>' +\n                                Math.round((max_ms + javaRunOverhead) / 1000) +\n                                's).'\n                        )\n                        JavaExec.setRunButton(true, 'run')\n                        JavaExec.setRunButton(true)\n                        JavaExec.showMessage(null)\n                    }, max_ms + javaRunOverhead) //we need about 4000ms to spin up the execution unit\n                    break\n\n                case 'showMessage':\n                    //console.log(\"showMessage\", data)\n                    JavaExec.showMessage(data.msg)\n                    break\n                case 'output':\n                    if (data.type == 'err') {\n                        err_callback(data.msg)\n                    } else if (data.type == 'nfo') {\n                        info_callback(data.msg)\n                    } else {\n                        log_callback(data.msg)\n                    }\n                    break\n\n                case 'setRunButton':\n                    //console.log(\"setRunButton\", data)\n                    JavaExec.setRunButton(data.enabled, data.info)\n                    break\n\n                case 'cleanCache':\n                    //log_callback('')\n                    if (!forceReload) {\n                        worker.postMessage({ cmd: 'kill' })\n                        console.log('Restarting...')\n                        setTimeout(function () {\n                            runJavaWorker(\n                                questionID,\n                                code,\n                                callingCodeBlocks,\n                                max_ms,\n                                log_callback,\n                                info_callback,\n                                err_callback,\n                                compileFailedCallback,\n                                finishedExecutionCB,\n                                true\n                            )\n                        }, 500)\n                    } else {\n                        JavaExec.setRunButton(false)\n                        JavaExec.showMessage('Failed to initialize JVM.')\n                    }\n                    break\n            }\n        },\n        false\n    )\n\n    worker.postMessage({\n        cmd: 'run',\n        code: code,\n        className: className,\n        max_ms: max_ms + 1000,\n        questionID: questionID,\n        forceReload: forceReload,\n    })\n}\n\nconst singleton = new Vue({\n    data: function () {\n        return {\n            loadedlibs: 0,\n            version: '001',\n            language: 'java',\n            canRun: true,\n            canStop: true,\n            allowsContinousCompilation: false,\n            allowsPersistentArguments: false,\n            allowsMessagePassing: false,\n            acceptsJSONArgument: false,\n            allowsREPL: false,\n            didPreload: false,\n            requestedPreload: false,\n            isReady: false,\n            isRunning: false,\n        }\n    },\n    methods: {\n        preload() {\n            if (this.loadedlibs < 3) {\n                if (this.requestedPreload == false) {\n                    this.requestedPreload = true\n                    this.triggerResourceLoad()\n                }\n\n                return\n            }\n            if (this.didPreload) {\n                return\n            }\n            this.didPreload = true\n            console.log('[Preloading Doppio]')\n            try {\n                JavaExec.showMessage = function (msg) {\n                    this.$compilerState.displayGlobalState(msg)\n                }.bind(this)\n\n                const lock = []\n                JavaExec.setRunButton = function (enabled, info = undefined) {\n                    if (info && !enabled && lock.indexOf(info) == -1) {\n                        lock.push(info)\n                    }\n                    if (info && enabled && lock.indexOf(info) > -1) {\n                        lock.splice(lock.indexOf(info), 1)\n                    }\n\n                    if (!enabled || lock.length == 0) {\n                        this.$compilerState.setAllRunButtons(enabled)\n                    }\n                }.bind(this)\n\n                const self = this\n                JavaExec.initialize(function () {\n                    console.log('Initializing Filesystem')\n                    JavaExec.initFileSystems(\n                        Vue.$CodeBlock.baseurl + 'js/doppio/v001/',\n                        false,\n                        function () {\n                            //JavaExec.printDirContent('sys/vendor');\n\n                            JavaExec.reroutStdStreams()\n                            JavaExec.ready = true\n                            self.isReady = true\n                        }\n                    )\n                })\n            } catch (e) {\n                console.error(e)\n            }\n        },\n        compileAndRun(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n            runCreate = false\n        ) {\n            if (!this.isReady) {\n                return\n            }\n\n            return runJavaWorker(\n                questionID,\n                code,\n                callingCodeBlocks,\n                max_ms,\n                log_callback,\n                info_callback,\n                err_callback,\n                compileFailedCallback,\n                finishedExecutionCB,\n                runCreate\n            )\n        },\n        triggerResourceLoad() {\n            console.log('[Preparing Dependencies for Doppio]')\n            let script = document.createElement('script')\n            script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/browserfs/browserfs.min.js'\n            script.onload = function () {\n                this.loadedlibs++\n                console.log('[BrowserFS loaded]')\n\n                let script = document.createElement('script')\n                script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/doppio/doppio.js'\n                script.onload = function () {\n                    this.loadedlibs++\n                    console.log('[Doppio loaded]')\n\n                    let script = document.createElement('script')\n                    script.src = Vue.$CodeBlock.baseurl + 'js/doppio/v001/JavaExec.js'\n                    script.onload = function () {\n                        this.loadedlibs++\n                        console.log('[JavaExec loaded]')\n                        if (this.requestedPreload) {\n                            this.preload()\n                        }\n                    }.bind(this)\n                    document.head.appendChild(script)\n                }.bind(this)\n                document.head.appendChild(script)\n            }.bind(this)\n            document.head.appendChild(script)\n        },\n    },\n    created() {},\n})\nexport default singleton\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string, terminate?: boolean): void\n    }\n}\n\nconst teaVMRunOverhead = 30000\n\n//ICompilerInstance\n@Component\nexport class JavaV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'java'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    didPreload: boolean = false\n    teaworker: Worker | undefined = undefined\n    isReady = false\n    isRunning = false\n\n    preload() {\n        if (this.didPreload) {\n            return\n        }\n        this.didPreload = true\n        this.$compilerState.setAllRunButtons(false)\n\n        console.log(`[Preloading TeaVM ${this.version} for Java]`)\n        this.isRunning = true\n        this.createTeaWorker(() => {\n            this.isRunning = false\n            this.$compilerState.hideGlobalState()\n            this.$compilerState.setAllRunButtons(true)\n            //console.log('setAllRun', true)\n        })\n    }\n\n    private createTeaWorker(whenReady: () => void): boolean {\n        if (this.teaworker === undefined) {\n            this.$compilerState.setAllRunButtons(false)\n            this.$compilerState.displayGlobalState('Initializing Runtime')\n            try {\n                this.teaworker = new Worker(\n                    `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/worker.js`\n                )\n            } catch (e) {\n                //this should throw in the offline environment, thus we look for the worker at a different\n                this.teaworker = new Worker('../assCodeQuestion/js/teavm/worker.js')\n            }\n\n            this.teaworker.addEventListener('message', (e: any) => {\n                //console.log('teastuff', e.data)\n                if (e.data.command == 'ok' && e.data.id == 'didload-classlib') {\n                    if (this.teaworker) {\n                        this.teaworker.postMessage({\n                            command: 'compile',\n                            id: 'prep',\n                            text: 'public class Bootstrap { public static void main(String[] args){}}',\n                            mainClass: 'Bootstrap',\n                        })\n                    }\n                    this.isReady = true\n                    if (whenReady) {\n                        //console.log(\"loopback to initial caller\");\n                        whenReady()\n                    } else {\n                        this.$compilerState.setAllRunButtons(true)\n                        this.$compilerState.hideGlobalState()\n                    }\n                } else if (e.data.id == 'prep' && e.data.command == 'compilation-complete') {\n                    /* We could finish initialization here if there appear to be races when compiling multiple sources at once */\n                }\n            })\n\n            //bootstrap environment\n            this.teaworker.postMessage({\n                command: 'load-classlib',\n                id: 'didload-classlib',\n                url: 'classlib.txt',\n            })\n\n            return true\n        }\n\n        return false\n    }\n\n    sessionCompileListener: ((e: any) => void) | undefined = undefined\n    sessionID: string = '-1'\n    sessionWorker: any = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate: boolean = true\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        const start = Date.now()\n        let executionFinished = false\n        let booted = false\n\n        if (this.isRunning) {\n            err_callback('System is busy. Please wait until compilation finishes or call a tutor.')\n            return\n        }\n        this.isRunning = true\n        if (runCreate) {\n            if (\n                this.createTeaWorker(() => {\n                    this.isRunning = false\n                    this.compileAndRun(questionID, code, callingCodeBlocks, options, false)\n                })\n            ) {\n                return\n            }\n        }\n\n        if (!this.isReady) {\n            err_callback(\n                'System is not yet ready. Please wait until Initialization finishes or call a tutor.'\n            )\n            return\n        }\n\n        const compilerTimeout = setTimeout(() => {\n            if (!booted) {\n                const time = Date.now() - start\n\n                if (this.teaworker) {\n                    this.teaworker.end(\n                        'TimeoutError:  Compilation took too long (>' +\n                            time +\n                            'ms) and was terminated. Trying to reset the System. Please re-run your code and call a Tutor if this Problem persists.'\n                    )\n                }\n\n                this.teaworker = undefined\n            }\n        }, teaVMRunOverhead)\n\n        let text = code\n            .replace(/\"(?:[^\"\\\\]|\\\\.)*\"|\\/\\*[\\s\\S]*?\\*\\//gm, '')\n            .replace(/(^.*)\\/\\/.*$/gm, '$1') //replace strings and comments\n        //let text = code.replace(/\"(?:[^\"\\\\]+?|(?!\")\"|\\\\{2}|\\\\[\\s\\S])*?\"|^.*(\\/\\/.*$)|\\/\\*[\\s\\S]*?\\*\\//gm, ''); //replace strings and comments\n\n        text = text.replaceRec(/(\\{[^{}]*\\})/gm, '[]') //replace parentheses\n\n        const getMainClass = (_code: string) => {\n            let ret = 'Unknown'\n            //above replaces all {} with [], so look for public class <name> []\n            const regexpMainClass =\n                /public\\s+?class\\s+?([a-zA-Z_$0-9]+?)\\s*?(\\[|\\simplements|\\sextends)/gm\n            let match: RegExpExecArray | null\n            while ((match = regexpMainClass.exec(_code)) !== null) {\n                if (match[1]) {\n                    ret = match[1]\n                    break\n                }\n            }\n            return ret\n        }\n        let mainClass = getMainClass(text)\n        //fallback if the above regExps mangled the student code and we can not find the main class\n        if (mainClass == 'Unknown') {\n            mainClass = getMainClass(code.replace('{', '['))\n        }\n\n        //console.log(mainClass, code);\n        const myListener = (e: any) => {\n            //console.log('this.teaworker', questionID, e.data);\n            if (e.data.id == '' + questionID) {\n                if (e.data.command == 'phase') {\n                    if (e.data.phase == 'DEPENDENCY_ANALYSIS') {\n                        this.$compilerState.displayGlobalState(\n                            'Compiling & Analyzing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'LINKING') {\n                        this.$compilerState.displayGlobalState(\n                            'Linking <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'OPTIMIZATION') {\n                        this.$compilerState.displayGlobalState(\n                            'Optimizing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'RENDERING') {\n                        this.$compilerState.displayGlobalState(\n                            'Creating <b>' + mainClass + '.class</b>'\n                        )\n                    }\n                } else if (e.data.command == 'diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.text,\n                            start: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            end: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            severity:\n                                e.data.severity == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.text + '\\n'\n                    if (e.data.severity == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'compiler-diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.message,\n                            start: {\n                                line: e.data.startLineNumber,\n                                column: e.data.startColumn,\n                            },\n                            end: {\n                                line: e.data.endLineNumber,\n                                column: e.data.endColumn,\n                            },\n                            severity:\n                                e.data.kind == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.humanReadable + '\\n'\n                    if (e.data.kind == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'error') {\n                    if (this.teaworker) {\n                        this.teaworker.end('Error:  An internal compiler Error occured')\n                    }\n                    this.teaworker = undefined\n                } else if (e.data.command == 'compilation-complete') {\n                    booted = true\n                    let runTimeout: number | undefined = undefined\n                    if (this.teaworker) {\n                        this.teaworker.removeEventListener('message', myListener)\n                        this.sessionCompileListener = undefined\n                    }\n                    try {\n                        clearTimeout(compilerTimeout)\n                    } catch (e) {\n                        /* nothing to report */\n                    }\n\n                    if (e.data.status == 'errors') {\n                        finishedExecutionCB(false)\n                        this.isRunning = false\n                    } else {\n                        const runListener = (ee: any) => {\n                            //console.log('JAVA-WORKER-MSG', ee.data)\n                            //console.log('tearunner', questionID, ee.data);\n                            if (ee.data.command == 'run-finished-setup') {\n                                //Nothing to do here\n                            } else if (ee.data.command == 'run-completed') {\n                                finishedExecutionCB(true)\n\n                                console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n                                // info_callback(\n                                //     'Info: Execution finished in ' + (Date.now() - start) + ' ms\\n'\n                                // )\n                                executionFinished = true\n                                this.isRunning = false\n                                workerrun.end()\n                            } else if (ee.data.command == 'stdout') {\n                                log_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command == 'stderr') {\n                                err_callback(ee.data.line + '\\n')\n                            }\n                        }\n                        this.$compilerState.displayGlobalState('Executing <b>' + mainClass + '</b>')\n                        const workerrun = new Worker(\n                            `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/workerrun.js?&v=001`\n                        )\n                        this.sessionWorker = workerrun\n                        workerrun.addEventListener('message', runListener.bind(this))\n\n                        workerrun.postMessage({\n                            command: 'run',\n                            id: '' + questionID,\n                            code: e.data.script,\n                            args: args,\n                        })\n\n                        workerrun.end = (msg: string) => {\n                            this.sessionWorker = undefined\n                            //when we end it IS over, no matter how often we tried :)\n                            try {\n                                workerrun.terminate()\n                                if (runTimeout) {\n                                    clearTimeout(runTimeout)\n                                }\n                            } catch (e) {\n                                /* nothing to report */\n                            }\n\n                            if (executionFinished) {\n                                return\n                            }\n                            executionFinished = true\n                            finishedExecutionCB(false)\n                            this.isRunning = false\n                            if (msg) {\n                                err_callback(msg + '\\n')\n                            }\n                        }\n\n                        const runStart = Date.now()\n                        runTimeout = setTimeout(function () {\n                            const time = Date.now() - runStart\n                            workerrun.end(\n                                'TimeoutError:  Execution took too long (>' +\n                                    time +\n                                    'ms) and was terminated. There might be an endless loop in your code.'\n                            )\n                        }, max_ms)\n                    }\n                }\n            }\n        }\n\n        if (this.teaworker) {\n            this.sessionID = questionID\n            this.sessionCompileListener = myListener\n            this.teaworker.addEventListener('message', myListener)\n        }\n        //console.log(code);\n        this.$compilerState.setAllRunButtons(false)\n        this.$compilerState.displayGlobalState(\n            'Starting Compiler for <b>' + mainClass + '.java</b>'\n        )\n\n        if (this.teaworker) {\n            this.teaworker.postMessage({\n                command: 'compile',\n                id: '' + questionID,\n                text: code,\n                mainClass: mainClass,\n            })\n        }\n\n        if (this.teaworker) {\n            this.teaworker.end = (msg: string, terminate: boolean = true) => {\n                try {\n                    clearTimeout(compilerTimeout)\n                } catch (e) {\n                    //nothing to see here\n                }\n\n                if (booted) {\n                    return\n                }\n                if (this.teaworker && terminate) {\n                    console.log('TERMINATING')\n                    this.teaworker.terminate()\n                }\n                finishedExecutionCB(false)\n                this.isRunning = false\n                this.isReady = true\n                if (msg) {\n                    err_callback(msg + '\\n')\n                }\n            }\n        }\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.sessionWorker) {\n            this.sessionWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        } else if (this.teaworker) {\n            if (this.sessionCompileListener) {\n                // this.sessionCompileListener({\n                //     data: {\n                //         id: '' + this.sessionID,\n                //         command: 'compilation-complete',\n                //         status: 'errors',\n                //         errors: [Vue.$l('CodeBlocks.UserCanceled')]\n                //     }\n                // })\n                this.teaworker.removeEventListener('message', this.sessionCompileListener)\n                this.sessionCompileListener = undefined\n            }\n            this.teaworker.end(Vue.$l('CodeBlocks.UserCanceled'), false)\n        }\n    }\n}\n\nexport const javaCompiler_V100 = new JavaV100Compiler()\nexport default javaCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string, terminate?: boolean): void\n    }\n}\n\nconst teaVMRunOverhead = 30000\n\n//ICompilerInstance\n@Component\nexport class JavaV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'java'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = true\n    readonly deprecated = false\n    didPreload: boolean = false\n    teaworker: Worker | undefined = undefined\n    isReady = false\n    isRunning = false\n\n    preload() {\n        if (this.didPreload) {\n            return\n        }\n        this.didPreload = true\n        this.$compilerState.setAllRunButtons(false)\n\n        console.log(`[Preloading TeaVM ${this.version} for Java]`)\n        this.isRunning = true\n        this.createTeaWorker(() => {\n            this.isRunning = false\n            this.$compilerState.hideGlobalState()\n            this.$compilerState.setAllRunButtons(true)\n            //console.log('setAllRun', true)\n        })\n    }\n\n    private createTeaWorker(whenReady: () => void): boolean {\n        if (this.teaworker === undefined) {\n            this.$compilerState.setAllRunButtons(false)\n            this.$compilerState.displayGlobalState('Initializing Runtime')\n            try {\n                this.teaworker = new Worker(\n                    `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/worker.js`\n                )\n            } catch (e) {\n                //this should throw in the offline environment, thus we look for the worker at a different\n                this.teaworker = new Worker('../assCodeQuestion/js/teavm/worker.js')\n            }\n\n            this.teaworker.addEventListener('message', (e: any) => {\n                //console.log('teastuff', e.data)\n                if (e.data.command == 'ok' && e.data.id == 'didload-classlib') {\n                    if (this.teaworker) {\n                        this.teaworker.postMessage({\n                            command: 'compile',\n                            id: 'prep',\n                            text: 'public class Bootstrap { public static void main(String[] args){}}',\n                            mainClass: 'Bootstrap',\n                        })\n                    }\n                    this.isReady = true\n                    if (whenReady) {\n                        //console.log(\"loopback to initial caller\");\n                        whenReady()\n                    } else {\n                        this.$compilerState.setAllRunButtons(true)\n                        this.$compilerState.hideGlobalState()\n                    }\n                } else if (e.data.id == 'prep' && e.data.command == 'compilation-complete') {\n                    /* We could finish initialization here if there appear to be races when compiling multiple sources at once */\n                }\n            })\n\n            //bootstrap environment\n            this.teaworker.postMessage({\n                command: 'load-classlib',\n                id: 'didload-classlib',\n                url: 'classlib.txt',\n            })\n\n            return true\n        }\n\n        return false\n    }\n\n    sessionCompileListener: ((e: any) => void) | undefined = undefined\n    sessionID: string = '-1'\n    sessionWorker: any = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments,\n        runCreate: boolean = true\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n            keepAlive,\n        } = options\n        console.log(`[Starting TeaVM${options.keepAlive ? ' keepAlive' : ''}]`, args)\n        const start = Date.now()\n        let executionFinished = false\n        let booted = false\n\n        if (this.isRunning) {\n            err_callback('System is busy. Please wait until compilation finishes or call a tutor.')\n            return\n        }\n        this.isRunning = true\n        if (runCreate) {\n            if (\n                this.createTeaWorker(() => {\n                    this.isRunning = false\n                    this.compileAndRun(questionID, code, callingCodeBlocks, options, false)\n                })\n            ) {\n                return\n            }\n        }\n\n        if (!this.isReady) {\n            err_callback(\n                'System is not yet ready. Please wait until Initialization finishes or call a tutor.'\n            )\n            return\n        }\n\n        const compilerTimeout = setTimeout(() => {\n            if (!booted) {\n                const time = Date.now() - start\n\n                if (this.teaworker) {\n                    this.teaworker.end(\n                        'TimeoutError:  Compilation took too long (>' +\n                            time +\n                            'ms) and was terminated. Trying to reset the System. Please re-run your code and call a Tutor if this Problem persists.'\n                    )\n                }\n\n                this.teaworker = undefined\n            }\n        }, teaVMRunOverhead)\n\n        let text = code\n            .replace(/\"(?:[^\"\\\\]|\\\\.)*\"|\\/\\*[\\s\\S]*?\\*\\//gm, '')\n            .replace(/(^.*)\\/\\/.*$/gm, '$1') //replace strings and comments\n        //let text = code.replace(/\"(?:[^\"\\\\]+?|(?!\")\"|\\\\{2}|\\\\[\\s\\S])*?\"|^.*(\\/\\/.*$)|\\/\\*[\\s\\S]*?\\*\\//gm, ''); //replace strings and comments\n\n        text = text.replaceRec(/(\\{[^{}]*\\})/gm, '[]') //replace parentheses\n\n        const getMainClass = (_code: string) => {\n            let ret = 'Unknown'\n            //above replaces all {} with [], so look for public class <name> []\n            const regexpMainClass =\n                /public\\s+?class\\s+?([a-zA-Z_$0-9]+?)\\s*?(\\[|\\simplements|\\sextends)/gm\n            let match: RegExpExecArray | null\n            while ((match = regexpMainClass.exec(_code)) !== null) {\n                if (match[1]) {\n                    ret = match[1]\n                    break\n                }\n            }\n            return ret\n        }\n        let mainClass = getMainClass(text)\n        //fallback if the above regExps mangled the student code and we can not find the main class\n        if (mainClass == 'Unknown') {\n            mainClass = getMainClass(code.replace('{', '['))\n        }\n\n        //console.log(mainClass, code);\n        const myListener = (e: any) => {\n            //console.log('this.teaworker', questionID, e.data);\n            if (e.data.id == '' + questionID) {\n                if (e.data.command == 'phase') {\n                    if (e.data.phase == 'DEPENDENCY_ANALYSIS') {\n                        this.$compilerState.displayGlobalState(\n                            'Compiling & Analyzing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'LINKING') {\n                        this.$compilerState.displayGlobalState(\n                            'Linking <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'OPTIMIZATION') {\n                        this.$compilerState.displayGlobalState(\n                            'Optimizing <b>' + mainClass + '.java</b>'\n                        )\n                    } else if (e.data.phase == 'RENDERING') {\n                        this.$compilerState.displayGlobalState(\n                            'Creating <b>' + mainClass + '.class</b>'\n                        )\n                    }\n                } else if (e.data.command == 'diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.text,\n                            start: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            end: {\n                                line: e.data.lineNumber,\n                                column: 0,\n                            },\n                            severity:\n                                e.data.severity == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.text + '\\n'\n                    if (e.data.severity == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'compiler-diagnostic') {\n                    if (compileFailedCallback) {\n                        compileFailedCallback({\n                            message: e.data.message,\n                            start: {\n                                line: e.data.startLineNumber,\n                                column: e.data.startColumn,\n                            },\n                            end: {\n                                line: e.data.endLineNumber,\n                                column: e.data.endColumn,\n                            },\n                            severity:\n                                e.data.kind == 'ERROR'\n                                    ? ErrorSeverity.Error\n                                    : ErrorSeverity.Warning,\n                        })\n                    }\n\n                    const msg = e.data.humanReadable + '\\n'\n                    if (e.data.kind == 'ERROR') {\n                        err_callback(msg + '\\n')\n                    } else {\n                        info_callback(msg + '\\n')\n                    }\n                } else if (e.data.command == 'error') {\n                    if (this.teaworker) {\n                        this.teaworker.end('Error:  An internal compiler Error occured')\n                    }\n                    this.teaworker = undefined\n                } else if (e.data.command == 'compilation-complete') {\n                    booted = true\n                    let runTimeout: number | undefined = undefined\n                    if (this.teaworker) {\n                        this.teaworker.removeEventListener('message', myListener)\n                        this.sessionCompileListener = undefined\n                    }\n                    try {\n                        clearTimeout(compilerTimeout)\n                    } catch (e) {\n                        /* nothing to report */\n                    }\n\n                    if (e.data.status == 'errors') {\n                        finishedExecutionCB(false, undefined, options.args)\n                        this.isRunning = false\n                    } else {\n                        this.$compilerState.displayGlobalState('Executing <b>' + mainClass + '</b>')\n                        const workerrun = new Worker(\n                            `${this.$CodeBlock.baseurl}js/teavm/v${this.version}/workerrun.js?&v=001`\n                        )\n                        this.sessionWorker = workerrun\n\n                        const runListener = (ee: any) => {\n                            //console.log('JAVA-WORKER-MSG', ee.data)\n                            console.d('tearunner message', questionID, ee.data, ee.data.command)\n                            if (ee.data.command == 'run-finished-setup') {\n                                //Nothing to do here\n                            } else if (\n                                ee.data.command == 'w-exit-keepalive' ||\n                                ee.data.command == 'exit-keepalive'\n                            ) {\n                                //Make sure a keep-alive session can do proper cleanup\n                                if (options.keepAlive) {\n                                    workerrun.postMessage({\n                                        command: 'session-ended',\n                                        id: '' + questionID,\n                                    })\n                                }\n                            } else if (ee.data.command == 'run-completed') {\n                                if (ee.data.args) {\n                                    options.args['return'] = ee.data.args\n                                }\n                                finishedExecutionCB(true, undefined, options.args['return'])\n\n                                console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n                                // info_callback(\n                                //     'Info: Execution finished in ' + (Date.now() - start) + ' ms\\n'\n                                // )\n                                executionFinished = true\n                                this.isRunning = false\n                                workerrun.end()\n                            } else if (ee.data.command == 'stdout') {\n                                log_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command == 'stderr') {\n                                err_callback(ee.data.line + '\\n')\n                            } else if (ee.data.command.indexOf('w-') === 0) {\n                                //Message sent from the workter to the playground\n                                const cmd = ee.data.command.substr(2)\n                                ee.data.command = cmd\n                                options.didReceiveMessage(cmd, ee.data)\n                            } else if (ee.data.command == 'main-finished') {\n                                console.d('MESSAGE - Main Finished')\n                                //set up the real message handler\n                                options.postMessageFunction = (cmd, data) => {\n                                    data = { ...data }\n                                    console.d('MESSAGE - TeaVM Post ', cmd, data)\n                                    data.command = cmd\n                                    data.id = questionID\n                                    wr.postMessage(data)\n                                }\n\n                                options.postMessageFunction('main-finished', {})\n\n                                //make sure to send all queued messages now\n                                options.dequeuePostponedMessages()\n\n                                options.whenFinishedHandler(ee.data.args)\n                            } else if (ee.data.command == 'main-will-start') {\n                                options.beforeStartHandler()\n                            } else if (ee.data.command == 'f-FINAL') {\n                                options.resultData = JSON.parse(ee.data.value)\n                            } else {\n                                console.log('Unknown Message', ee.data)\n                            }\n                        }\n\n                        workerrun.addEventListener('message', runListener.bind(this))\n\n                        workerrun.postMessage({\n                            command: 'run',\n                            id: '' + questionID,\n                            code: e.data.script,\n                            args: args,\n                            messagePosting: options.allowMessagePassing,\n                            keepAlive: options.keepAlive,\n                        })\n                        const wr = workerrun\n\n                        workerrun.end = (msg: string) => {\n                            this.sessionWorker = undefined\n                            //when we end it IS over, no matter how often we tried :)\n                            try {\n                                workerrun.terminate()\n                                if (runTimeout) {\n                                    clearTimeout(runTimeout)\n                                }\n                            } catch (e) {\n                                /* nothing to report */\n                            }\n\n                            if (executionFinished) {\n                                return\n                            }\n                            executionFinished = true\n                            finishedExecutionCB(false, undefined, options.args)\n                            this.isRunning = false\n                            if (msg) {\n                                err_callback(msg + '\\n')\n                            }\n                        }\n\n                        const runStart = Date.now()\n                        if (!keepAlive) {\n                            runTimeout = setTimeout(function () {\n                                const time = Date.now() - runStart\n                                workerrun.end(\n                                    'TimeoutError:  Execution took too long (>' +\n                                        time +\n                                        'ms) and was terminated. There might be an endless loop in your code.'\n                                )\n                            }, max_ms)\n                        }\n                    }\n                }\n            }\n        }\n\n        if (this.teaworker) {\n            this.sessionID = questionID\n            this.sessionCompileListener = myListener\n            this.teaworker.addEventListener('message', myListener)\n        }\n        //console.log(code);\n        this.$compilerState.setAllRunButtons(false)\n        this.$compilerState.displayGlobalState(\n            'Starting Compiler for <b>' + mainClass + '.java</b>'\n        )\n\n        if (this.teaworker) {\n            this.teaworker.postMessage({\n                command: 'compile',\n                id: '' + questionID,\n                text: code,\n                mainClass: mainClass,\n            })\n        }\n\n        if (this.teaworker) {\n            this.teaworker.end = (msg: string, terminate: boolean = true) => {\n                try {\n                    clearTimeout(compilerTimeout)\n                } catch (e) {\n                    //nothing to see here\n                }\n\n                if (booted) {\n                    return\n                }\n                if (this.teaworker && terminate) {\n                    console.log('TERMINATING')\n                    this.teaworker.terminate()\n                }\n                finishedExecutionCB(false, undefined, options.args)\n                this.isRunning = false\n                this.isReady = true\n                if (msg) {\n                    err_callback(msg + '\\n')\n                }\n            }\n        }\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.sessionWorker) {\n            this.sessionWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        } else if (this.teaworker) {\n            if (this.sessionCompileListener) {\n                // this.sessionCompileListener({\n                //     data: {\n                //         id: '' + this.sessionID,\n                //         command: 'compilation-complete',\n                //         status: 'errors',\n                //         errors: [Vue.$l('CodeBlocks.UserCanceled')]\n                //     }\n                // })\n                this.teaworker.removeEventListener('message', this.sessionCompileListener)\n                this.sessionCompileListener = undefined\n            }\n            this.teaworker.end(Vue.$l('CodeBlocks.UserCanceled'), false)\n        }\n    }\n}\n\nexport const javaCompiler_V101 = new JavaV101Compiler()\nexport default javaCompiler_V101\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v001 from './doppio.v001'\nimport v100 from './teavm.v100'\nimport v101 from './teavm.v101'\n\n@Component\nexport class JavaCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'java'\n    displayName = 'Java'\n\n    //attach all version\n    versions = [v001, v100, v101]\n\n    //declare the default one\n    default = v100\n}\n\nexport const JavaCompilers: ICompilerInfo[] | ICompilerInfo = new JavaCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\n//function runJavaScriptWorker( code, log_callback, max_ms, questionID){\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    max_ms: number,\n    log_callback: (txt: string) => void,\n    info_callback: (txt: string) => void,\n    err_callback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishedExecutionCB: finishedCallbackSignatur\n) {\n    log_callback('')\n\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const not_allowed_keywords = ['postMessage', 'close', 'onmessage', 'debugger'] // blacklist (can be evaded, ... see below)\n    for (const key in not_allowed_keywords) {\n        if (code.indexOf(not_allowed_keywords[key]) != -1) {\n            // the user is not allowed to use the functionallity of the WebWorker\n            err_callback(\n                \"PermissionError: The usage of '\" +\n                    not_allowed_keywords[key] +\n                    \"' is not allowed (reserved keyword)!\"\n            )\n            return\n        }\n    }\n    const lines = code.split('\\n').length\n\n    // The user-code is sourrounded by webworker start and finish code (one line each)\n    // additionally, the console.log fnc is replaced, because the original log fnc is consuming much cpu ressources,\n    //      and continues logging, even after the worker was terminated.\n\n    const prefixCode = [\n        'for(var c in console) console[c]=null;', //delete all console functionality\n        \"for(var t in this) if(t!='close' && t!='postMessage' && t!='console') this[t]=null;\", //delete all worker functionality\n        'this.console = {};',\n        'console.log = function(s){', // only allow .log , .warn\n        \"   postMessage(['log',''+s]);\",\n        '};',\n        'console.error = function(s){', // only allow .error\n        \"   postMessage(['err',''+s]);\",\n        '};',\n        'console.warn = console.log;',\n        'onmessage = function(input){',\n        \"   postMessage(['finished',\",\n        \"   ''+(function(input){\",\n        \"           'use strict';\",\n        '\\n',\n    ]\n    const postfixCode = ['\\n', '})(input.data[1])]);', '   close();', '};']\n    code = prefixCode.join('') + code + postfixCode.join('')\n\n    //TODO:: creating a WebWorker from an URL is throwing a SecurityError in  IE 11  ...\n    //          is there any workaround?\n    const worker = new Worker(URL.createObjectURL(new Blob([code], { type: 'text/javascript' })))\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishedExecutionCB(false)\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n    }\n\n    const start = Date.now()\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                time +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > max_ms) {\n            testTimeout\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n\n        testTimeoutIntern()\n        if (e.data[0] == 'finished') {\n            finishedExecutionCB(true)\n            info_callback('Info: Execution finished in ' + (Date.now() - start) + ' ms\\n')\n            worker.end()\n        } else if (e.data[0] == 'log') {\n            log_callback(e.data[1] + '\\n')\n        } else if (e.data[0] == 'err') {\n            err_callback(e.data[1] + '\\n')\n        } else {\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n    worker.onerror = function (e) {\n        if (e.lineno == 1) {\n            compileFailedCallback({\n                start: { line: -1, column: -1 },\n                end: { line: -1, column: -1 },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('Error: ' + e.message)\n        } else if (e.lineno >= lines + 2) {\n            compileFailedCallback({\n                start: { line: lines + 2, column: 0 },\n                end: { line: lines + 2, column: 0 },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('EndOfFile: ' + e.message)\n        } else {\n            compileFailedCallback({\n                start: { line: e.lineno - 2, column: e.colno - 1 },\n                end: { line: e.lineno - 2, column: e.colno },\n                message: e.message,\n                severity: ErrorSeverity.Error,\n            })\n            worker.end('Line ' + (e.lineno - 2) + ': ' + e.message)\n        }\n    }\n    worker.postMessage(['start', [10, 200]]) //start worker execution\n\n    setTimeout(testTimeout, max_ms)\n}\n\n//ICompilerInstance\n@Component\nexport class JavascriptV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = true\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runJavaScriptWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const javascriptCompiler_V100 = new JavascriptV100Compiler()\nexport default javascriptCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string): void\n    }\n}\n\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    max_ms: number,\n    log_callback: (txt: string) => void,\n    info_callback: (txt: string) => void,\n    err_callback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishedExecutionCB: finishedCallbackSignatur,\n    args: object\n): Worker | undefined {\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/javascript/v101/jsWorker.js')\n\n    worker.onmessage = function (msg) {\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms) {\n            triggerTimeout()\n        }\n\n        switch (msg.data[0]) {\n            case 'finished':\n                if (msg && msg.data && msg.data.length >= 3) {\n                    args['return'] = msg.data[2]\n                } else {\n                    args['return'] = {}\n                }\n                console.d('returned msg:', msg, ', args:', args)\n                executionFinished = true\n                finishedExecutionCB(true, undefined, args['return'])\n                console.i('Execution finished in ' + time + ' ms\\n')\n                //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n                worker.end()\n                break\n            case 'log':\n                log_callback(msg.data[1] + '\\n')\n                break\n            case 'err':\n                err_callback(msg.data[1] + '\\n')\n                break\n            default:\n                worker.end(\n                    'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n                )\n                break\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                (performance.now() - startTime) +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const startExecution = function (args: object) {\n        //start worker execution\n        worker.postMessage(['start', { code: code, args: args }])\n\n        //stop Worker execution when the time limit is exceeded;\n        setTimeout(triggerTimeout, max_ms)\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage(['importD3'])\n                    startExecution(args)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage(['importBrain'])\n                startExecution(args)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args)\n    }\n\n    return worker\n}\n@Component\nexport class JavascriptV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly isReady = true\n    isRunning = false\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    libraries = [\n        {\n            key: 'd3-101',\n            name: 'd3',\n            version: '5.14.3',\n            displayName: 'D3 - Proxy',\n        },\n        {\n            key: 'brain-2.0.0',\n            name: 'Brain.js',\n            version: '2.0.0-alpha',\n            displayName: 'Brain.js',\n        },\n    ]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void {\n        compilerRegistry.registerDOMLib(\n            [Vue.$CodeBlock.baseurl + 'js/javascript/v101/d3DomProxyToHTML.js'],\n            'd3proxy',\n            '101',\n            'D3 - Proxy',\n            true //makes it a utility lib => not selectable by users\n        )\n    }\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runJavaScriptWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const javascriptCompiler_V101 = new JavascriptV101Compiler()\nexport default javascriptCompiler_V101\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\ndeclare global {\n    interface Worker {\n        end(msg?: string): void\n    }\n}\n\nfunction runJavaScriptWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    options: ICompileAndRunArguments\n): Worker | undefined {\n    const {\n        max_ms,\n        log_callback,\n        info_callback,\n        err_callback,\n        compileFailedCallback,\n        finishedExecutionCB,\n        args,\n        keepAlive,\n    } = options\n\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/javascript/v102/jsWorker.js')\n\n    worker.onmessage = function (msg: any) {\n        console.d('jsrunner message', questionID, executionFinished, msg.data, msg.data.command)\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms && !keepAlive) {\n            triggerTimeout()\n        }\n\n        if (msg.data.command == 'finished') {\n            if (options.allowMessagePassing) {\n                options.whenFinishedHandler(msg.data.args)\n            }\n            if (msg && msg.data && msg.data.args) {\n                args['return'] = msg.data.args\n            } else {\n                args['return'] = {}\n            }\n            console.d('returned msg:', msg, ', args:', args)\n            executionFinished = true\n            finishedExecutionCB(true, undefined, args['return'])\n            console.i('Execution finished in ' + time + ' ms\\n')\n            //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n            worker.end()\n        } else if (msg.data.command == 'log') {\n            log_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'err') {\n            err_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'main-will-start') {\n            options.beforeStartHandler()\n        } else if (msg.data.command == 'main-finished') {\n            console.d('MESSAGE - Main Finished')\n            //set up the real message handler\n            options.postMessageFunction = (cmd, data) => {\n                data = { ...data }\n                console.d('MESSAGE - JS Post ', cmd, data)\n                data.command = cmd\n                data.id = questionID\n                worker.postMessage(data)\n            }\n\n            options.postMessageFunction('main-finished', {})\n\n            //make sure to send all queued messages now\n            options.dequeuePostponedMessages()\n\n            options.whenFinishedHandler(msg.data.args)\n        } else if (msg.data.command == 'w-exit-keepalive' || msg.data.command == 'exit-keepalive') {\n            //Make sure a keep-alive session can do proper cleanup\n            if (options.keepAlive) {\n                worker.postMessage({\n                    command: 'session-ended',\n                    id: '' + questionID,\n                })\n            }\n        } else if (msg.data.command.indexOf('w-') == 0) {\n            msg.data.command = msg.data.command.substr(2)\n        } else if (msg.data.command == 'f-FINAL') {\n            options.resultData = msg.data.value\n        } else {\n            console.i('MESSAGE - ', msg.data)\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        worker.end(\n            'TimeoutError:  Execution took too long (>' +\n                (performance.now() - startTime) +\n                'ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const startExecution = function (args: object, options: ICompileAndRunArguments) {\n        //start worker execution\n        worker.postMessage({\n            command: 'start',\n            code: code,\n            args: args,\n            messagePosting: options.allowMessagePassing,\n            keepAlive: options.keepAlive,\n        })\n\n        if (!keepAlive) {\n            //stop Worker execution when the time limit is exceeded;\n            setTimeout(triggerTimeout, max_ms)\n        }\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage({ command: 'importD3' })\n                    startExecution(args, options)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importBrain' })\n                startExecution(args, options)\n            })\n        } else if (l === 'tf-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importTF' })\n                startExecution(args, options)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args, options)\n    }\n\n    return worker\n}\n@Component\nexport class JavascriptV102Compiler extends Vue implements ICompilerInstance {\n    readonly version = '102'\n    readonly language = 'javascript'\n    readonly canRun = true\n    readonly isReady = true\n    isRunning = false\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = false\n    readonly experimental = true\n    readonly deprecated = false\n    libraries = [\n        {\n            key: 'd3-101',\n            name: 'd3',\n            version: '5.14.3',\n            displayName: 'D3 - Proxy',\n        },\n        {\n            key: 'brain-2.0.0',\n            name: 'Brain.js',\n            version: '2.0.0-alpha',\n            displayName: 'Brain.js',\n        },\n        {\n            key: 'tf-2.0.0',\n            name: 'tf',\n            version: '2.0.0',\n            displayName: 'TensorFlow.js',\n        },\n    ]\n\n    registerLibs?(compilerRegistry: ICompilerRegistry): void {\n        compilerRegistry.registerDOMLib(\n            [Vue.$CodeBlock.baseurl + 'js/javascript/v101/d3DomProxyToHTML.js'],\n            'd3proxy',\n            '101',\n            'D3 - Proxy',\n            true //makes it a utility lib => not selectable by users\n        )\n    }\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        this.worker = runJavaScriptWorker(questionID, code, callingCodeBlocks, options)\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const javascriptCompiler_V102 = new JavascriptV102Compiler()\nexport default javascriptCompiler_V102\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v100 from './javascript.v100'\nimport v101 from './javascript.v101'\nimport v102 from './javascript.v102'\n\n@Component\nexport class JavascriptCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'javascript'\n    displayName = 'JavaScript'\n\n    //attach all version\n    versions = [v100, v101, v102]\n\n    //declare the default one\n    default = v101\n}\n\nexport const JavascriptCompilers: ICompilerInfo[] | ICompilerInfo = new JavascriptCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runPythonWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur\n) {\n    // the Python program\n    prog = prog.replaceAllPoly('\\t', '    ')\n\n    if (!window.Worker) {\n        errCallback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v100/pyWorker.js')\n\n    // construct message for worker\n    const pyInp = [] // not used jet\n\n    const messageData = { pyProg: prog, pyInp: pyInp, maxMS: maxRuntime }\n    worker.postMessage(['b8e493ca02970aeb0ef734555526bf9b', messageData])\n    const start = Date.now()\n\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (> ' +\n                time +\n                ' ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > maxRuntime) {\n            testTimeout()\n            return true\n        }\n        return false\n    }\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishCallback(false)\n        if (msg) {\n            errCallback(msg)\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n        if (testTimeoutIntern() === true) {\n            return\n        }\n        if (e.data[0] == 'finished') {\n            logCallback(e.data[1].stdOut)\n            finishCallback(true)\n            infoCallback('Info: Execution finished in : ' + (Date.now() - start) + ' ms')\n            worker.end()\n        } else if (e.data[0] === 'err') {\n            const err = JSON.parse(e.data[2])\n            if (err && err.lineno !== undefined && err.colno !== undefined) {\n                compileFailedCallback({\n                    start: { line: err.lineno - 1, column: err.colno },\n                    end: { line: err.lineno - 1, column: err.colno + 1 },\n                    message: err.message,\n                    severity: ErrorSeverity.Error,\n                })\n            } else {\n                if (err && err.lineno !== undefined) {\n                    compileFailedCallback({\n                        start: { line: err.lineno - 1, column: 0 },\n                        end: { line: err.lineno - 1, column: 0 },\n                        message: err.message,\n                        severity: ErrorSeverity.Error,\n                    })\n                }\n            }\n            worker.end('ERROR: ' + e.data[1])\n        } else {\n            worker.end('Unknown error: ' + e.data[1])\n        }\n    }\n    // in any case use the window timeout to terminate the worker\n    setTimeout(testTimeout, maxRuntime)\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = true\n    isReady = true\n    isRunning = false\n\n    preload() {}\n\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const pythonCompiler_V100 = new PythonV100Compiler()\nexport default pythonCompiler_V100\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runPythonWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur,\n    legacy: boolean\n): Worker | undefined {\n    console.log('Python Version:', legacy ? '2.7' : '3')\n\n    // the Python program\n    prog = prog.replaceAllPoly('\\t', '    ')\n\n    if (!window.Worker) {\n        errCallback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers!! (please consult a Tutor).'\n        )\n        return\n    }\n\n    const worker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v101/pyWorker.js')\n\n    // construct message for worker\n    const pyInp = [] // not used jet\n\n    const messageData = {\n        pyProg: prog,\n        pyInp: pyInp,\n        maxMS: maxRuntime,\n        legacy: legacy,\n    }\n    worker.postMessage(['b8e493ca02970aeb0ef734556526bf9b', messageData])\n    const start = Date.now()\n\n    const testTimeout = function () {\n        const time = Date.now() - start\n        worker.end(\n            'TimeoutError:  Execution took too long (> ' +\n                time +\n                ' ms) and was terminated. There might be an endless loop in your code.'\n        )\n    }\n\n    const testTimeoutIntern = function () {\n        const time = Date.now() - start\n        if (time > maxRuntime) {\n            testTimeout()\n            return true\n        }\n        return false\n    }\n    let executionFinished = false\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        finishCallback(false)\n        if (msg) {\n            errCallback(msg)\n        }\n    }\n\n    worker.onmessage = function (e) {\n        if (executionFinished) {\n            return\n        }\n        //only accept messages, when worker not terminated (workers do not immetiately terminate)\n        if (testTimeoutIntern() === true) {\n            return\n        }\n        if (e.data[0] == 'finished') {\n            logCallback(e.data[1].stdOut)\n            finishCallback(true)\n            console.i('Execution finished in ' + (Date.now() - start) + ' ms\\n')\n            //infoCallback('Info: Execution finished in : ' + (Date.now() - start) + ' ms')\n            worker.end()\n        } else if (e.data[0] === 'err') {\n            const err = JSON.parse(e.data[2])\n            if (err && err.lineno !== undefined && err.colno !== undefined) {\n                compileFailedCallback({\n                    start: {\n                        line: err.lineno - 1,\n                        column: err.colno,\n                    },\n                    end: {\n                        line: err.lineno - 1,\n                        column: err.colno + 1,\n                    },\n                    message: err.message,\n                    severity: ErrorSeverity.Error,\n                })\n            } else {\n                if (err && err.lineno !== undefined) {\n                    compileFailedCallback({\n                        start: {\n                            line: err.lineno - 1,\n                            column: 0,\n                        },\n                        end: {\n                            line: err.lineno - 1,\n                            column: 0,\n                        },\n                        message: err.message,\n                        severity: ErrorSeverity.Error,\n                    })\n                }\n            }\n            worker.end('ERROR: ' + e.data[1])\n        } else {\n            worker.end('Unknown error: ' + e.data[1])\n        }\n    }\n    // in any case use the window timeout to terminate the worker\n    setTimeout(testTimeout, maxRuntime)\n\n    return worker\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV101LegacyCompiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            true\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV101Compiler extends Vue implements ICompilerInstance {\n    readonly version = '101'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = false\n    readonly allowsMessagePassing = false\n    readonly acceptsJSONArgument = false\n    readonly allowsREPL = false\n    readonly experimental = false\n    readonly deprecated = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n\n    private worker: Worker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            false\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n}\n\nexport const pythonCompiler_V101 = new PythonV101Compiler()\nexport const pythonLegacyCompiler_V101 = new PythonV101LegacyCompiler()\n\nexport default {\n    legacyPython: pythonLegacyCompiler_V101,\n    python3: pythonCompiler_V101,\n}\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ErrorSeverity,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n    IReplInstance,\n} from '@/lib/ICompilerRegistry'\n\ninterface REPLWorker extends Worker {\n    interpreter: any\n}\n\nlet spareWorker: REPLWorker | undefined\nlet runningWorker: REPLWorker | undefined\n\nfunction getWorker(setReady: (boolean) => void) {\n    if (!window.Worker) {\n        return undefined\n    }\n\n    setReady(false)\n    if (runningWorker !== undefined) {\n        console.d('FORCE STOPPING ON RERUN')\n        runningWorker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        runningWorker = undefined\n    }\n\n    runningWorker = spareWorker\n    console.i('Starting Spare Pyodide Server')\n    spareWorker = new Worker(Vue.$CodeBlock.baseurl + 'js/python/v102/pyWorker.js') as REPLWorker\n    spareWorker.onmessage = function (msg: any) {\n        if (msg.data.command == 'finished-init') {\n            setReady(true)\n        }\n    }\n    spareWorker.interpreter = () => {}\n    spareWorker.postMessage({\n        command: 'initialize',\n        id: '0',\n    })\n    return runningWorker\n}\n\nfunction runPythonWorker(\n    questionID: string,\n    code: string,\n    callingCodeBlocks: any,\n    options: ICompileAndRunArguments,\n    setReady: (boolean) => void\n): REPLWorker | undefined {\n    const {\n        max_ms,\n        log_callback,\n        info_callback,\n        err_callback,\n        compileFailedCallback,\n        finishedExecutionCB,\n        args,\n        keepAlive,\n    } = options\n\n    //WebWorkers need to be supported\n    if (!window.Worker) {\n        err_callback(\n            'CRITICAL-ERROR: your browser does not support WebWorkers! (please consult a Tutor).'\n        )\n        return\n    }\n\n    //const lines = code.split('\\n').length;\n    const startTime = performance.now()\n    let executionFinished = false\n    const worker = getWorker(setReady)\n    if (worker === undefined) {\n        err_callback('CRITICAL-ERROR: Unable to get background worker.')\n        return\n    }\n\n    worker.onmessage = function (msg: any) {\n        console.d('pyrunner message', questionID, executionFinished, msg.data, msg.data.command)\n        //only accept messages, as long as the worker is not terminated\n        if (executionFinished) {\n            return\n        }\n\n        const time = performance.now() - startTime\n        if (time > max_ms && !keepAlive) {\n            triggerTimeout()\n        }\n\n        if (msg.data.command == 'finished') {\n            if (options.allowMessagePassing) {\n                options.whenFinishedHandler(msg.data.args)\n            }\n            if (msg && msg.data && msg.data.args) {\n                args['return'] = msg.data.args\n            } else {\n                args['return'] = {}\n            }\n            console.d('returned msg:', msg, ', args:', args)\n            executionFinished = true\n            finishedExecutionCB(true, undefined, args['return'])\n            console.i('Execution finished in ' + time + ' ms\\n')\n            //info_callback('Info: Execution finished in ' + time + ' ms\\n')\n            worker.end()\n        } else if (msg.data.command == 'exception') {\n            if (compileFailedCallback) {\n                compileFailedCallback({\n                    message: msg.data.text,\n                    start: {\n                        line: msg.data.lineNumber,\n                        column: 0,\n                    },\n                    end: {\n                        line: msg.data.lineNumber,\n                        column: 0,\n                    },\n                    severity:\n                        msg.data.severity == 'ERROR' ? ErrorSeverity.Error : ErrorSeverity.Warning,\n                })\n            }\n        } else if (msg.data.command == 'log') {\n            log_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'err') {\n            err_callback(msg.data.s + '\\n')\n        } else if (msg.data.command == 'loaded-imports') {\n            if (spareWorker !== undefined) {\n                spareWorker.postMessage({\n                    command: 'preload-imports',\n                    names: msg.data.names,\n                })\n            }\n        } else if (msg.data.command == 'main-will-start') {\n            options.beforeStartHandler()\n        } else if (msg.data.command == 'main-finished') {\n            console.d('MESSAGE - Main Finished')\n            //set up the real message handler\n            options.postMessageFunction = (cmd, data) => {\n                data = { ...data }\n                console.d('MESSAGE - JS Post ', cmd, data)\n                data.command = cmd\n                data.id = questionID\n                worker.postMessage(data)\n            }\n\n            options.postMessageFunction('main-finished', {})\n\n            //make sure to send all queued messages now\n            options.dequeuePostponedMessages()\n\n            options.whenFinishedHandler(msg.data.args)\n        } else if (msg.data.command == 'interpreter') {\n            worker.interpreter(msg.data)\n        } else if (msg.data.command == 'w-exit-keepalive' || msg.data.command == 'exit-keepalive') {\n            //Make sure a keep-alive session can do proper cleanup\n            if (options.keepAlive) {\n                worker.postMessage({\n                    command: 'session-ended',\n                    id: '' + questionID,\n                })\n            }\n        } else if (msg.data.command.indexOf('w-') == 0) {\n            msg.data.command = msg.data.command.substr(2)\n        } else {\n            console.i('MESSAGE - ', msg.data)\n            worker.end(\n                'HackerError: Great! You invaded our System. Sadly this will lead you nowhere. Please focus on the Test.'\n            )\n        }\n    }\n\n    worker.onerror = function (e) {\n        compileFailedCallback({\n            start: { line: e.lineno - 3, column: e.colno - 1 },\n            end: { line: e.lineno - 3, column: e.colno },\n            message: e.message,\n            severity: ErrorSeverity.Error,\n        })\n        worker.end('Line ' + (e.lineno - 3) + ': ' + e.message)\n    }\n\n    worker.end = function (msg) {\n        if (executionFinished) {\n            return\n        }\n        worker.terminate()\n        executionFinished = true\n        //when aborting, the result is 'undefined'\n        if (msg) {\n            err_callback(msg + '\\n')\n        }\n        finishedExecutionCB(false)\n    }\n\n    function triggerTimeout() {\n        if (worker !== undefined) {\n            worker.end(\n                'TimeoutError:  Execution took too long (>' +\n                    (performance.now() - startTime) +\n                    'ms) and was terminated. There might be an endless loop in your code.'\n            )\n        }\n    }\n\n    const startExecution = function (args: object, options: ICompileAndRunArguments) {\n        //start worker execution\n        worker.postMessage({\n            command: 'start',\n            code: code,\n            args: args,\n            messagePosting: options.allowMessagePassing,\n            keepAlive: options.keepAlive,\n            withREPL: options.withREPL,\n        })\n\n        //stop Worker execution when the time limit is exceeded;\n        if (!keepAlive) {\n            setTimeout(triggerTimeout, max_ms)\n        }\n    }\n\n    let willStartExecution = false\n    callingCodeBlocks.workerLibraries.forEach((l) => {\n        if (l === 'd3-101') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries(\n                ['d3-5.13.4', 'd3proxy-101'],\n                function () {\n                    worker.postMessage({ command: 'importD3' })\n                    startExecution(args, options)\n                }\n            )\n        } else if (l === 'brain-2.0.0') {\n            willStartExecution = true\n            callingCodeBlocks.$compilerRegistry.loadLibraries([], function () {\n                worker.postMessage({ command: 'importBrain' })\n                startExecution(args, options)\n            })\n        }\n    })\n\n    if (!willStartExecution) {\n        startExecution(args, options)\n    }\n\n    return worker\n}\n\n//ICompilerInstance\n@Component\nexport class PythonV102Compiler extends Vue implements ICompilerInstance, IReplInstance {\n    readonly version = '102'\n    readonly language = 'python'\n    readonly canRun = true\n    readonly canStop = true\n    readonly allowsContinousCompilation = true\n    readonly allowsPersistentArguments = true\n    readonly allowsMessagePassing = true\n    readonly acceptsJSONArgument = true\n    readonly allowsREPL = true\n    readonly experimental = true\n    readonly deprecated = false\n    isReady = false\n    isRunning = false\n\n    preload() {\n        getWorker(this.setReady.bind(this)) //this will initialize our first worker\n    }\n\n    private setReady(val: boolean) {\n        console.i('Changing READY-State to ' + val)\n        this.isReady = val\n    }\n\n    private worker: REPLWorker | undefined = undefined\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        this.worker = runPythonWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            options,\n            this.setReady.bind(this)\n        )\n    }\n\n    stop() {\n        console.d('FORCE STOPPING')\n        if (this.worker) {\n            this.worker.end(Vue.$l('CodeBlocks.UserCanceled'))\n        }\n    }\n\n    async interpreter(command, onStateChange, onLog, onError) {\n        const self = this\n        return new Promise<object>((resolve, reject) => {\n            if (self.worker === undefined) {\n                reject('Interpreter not Running')\n                return\n            }\n\n            self.worker.interpreter = (msg) => {\n                console.log('Message: ' + msg)\n                switch (msg.sub) {\n                    case 'did-push':\n                        onStateChange(msg.incomplete)\n                        break\n                    case 'out':\n                        onLog(msg.value)\n                        break\n                    case 'err':\n                        onError(msg.value)\n                        break\n                    case 'exception':\n                        if (msg.fatal) {\n                            reject(msg.value)\n                        } else {\n                            onError(msg.value)\n                        }\n                        break\n                    case 'finished':\n                        resolve({})\n                        break\n                    default:\n                        console.log('Unknown Message: ' + msg.sub)\n                }\n            }\n\n            self.worker.postMessage({\n                command: 'interpreter',\n                code: command,\n            })\n        })\n    }\n}\n\nexport const pythonCompiler_V102 = new PythonV102Compiler()\n\nexport default {\n    python3: pythonCompiler_V102,\n}\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport v100 from './python.v100'\nimport v101 from './python.v101'\nimport v102 from './python.v102'\n\n@Component\nexport class PythonCompilerInfo extends Vue implements ICompilerInfo {\n    type = 'python'\n    displayName = 'Python 2.7'\n\n    //attach all version\n    versions = [v100, v101.legacyPython]\n\n    //declare the default one\n    default = v101.legacyPython\n}\n\n@Component\nexport class Python3CompilerInfo extends Vue implements ICompilerInfo {\n    type = 'python3'\n    displayName = 'Python 3'\n\n    //attach all version\n    versions = [v101.python3, v102.python3]\n\n    //declare the default one\n    default = v101.python3\n}\n\nexport const PythonCompilers: ICompilerInfo[] | ICompilerInfo = [\n    new PythonCompilerInfo(),\n    new Python3CompilerInfo(),\n]\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    ICompilerInstance,\n    ICompilerErrorDescription,\n    ICompilerRegistry,\n    finishedCallbackSignatur,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\n\nfunction runGLSLWorker(\n    questionID: string,\n    prog: string,\n    callingCodeBlocks: any,\n    maxRuntime: number,\n    logCallback: (txt: string) => void,\n    infoCallback: (txt: string) => void,\n    errCallback: (txt: string) => void,\n    compileFailedCallback: (info: ICompilerErrorDescription) => void,\n    finishCallback: finishedCallbackSignatur\n) {\n    const outputData: string[] = []\n    callingCodeBlocks.blocks\n        .filter((b) => b.hasCode)\n        .forEach((block) => outputData.push(block.content))\n    /*$(\"[data-contains-code][data-question=\"+questionID+\"]\").each(function(i, block) {\n        if (block.getAttribute('data-ignore')) return;\n        if (!blockHasProgramCode(block)) return;\n        const editor = editors[block.id];\n        if (editor) {\n            outputData.push(block.value);\n        } else {\n            outputData.push(block.innerHTML);\n        }\n    });*/\n    finishCallback(true, outputData)\n}\n\n@Component\nexport class GLSLV100Compiler extends Vue implements ICompilerInstance {\n    readonly version = '100'\n    readonly language = 'glsl'\n    readonly canRun = true\n    readonly canStop = false\n    readonly allowsContinousCompilation = false\n    readonly allowsPersistentArguments = false\n    readonly acceptsJSONArgument = false\n    readonly allowsMessagePassing = false\n    readonly allowsREPL = false\n    readonly deprecated = false\n    readonly experimental = false\n    isReady = true\n    isRunning = false\n\n    preload() {}\n    compileAndRun(\n        questionID: string,\n        code: string,\n        callingCodeBlocks: any,\n        options: ICompileAndRunArguments\n    ): void {\n        const {\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB,\n            args,\n        } = options\n        return runGLSLWorker(\n            questionID,\n            code,\n            callingCodeBlocks,\n            max_ms,\n            log_callback,\n            info_callback,\n            err_callback,\n            compileFailedCallback,\n            finishedExecutionCB\n        )\n    }\n}\nexport const v100 = new GLSLV100Compiler()\n","import 'reflect-metadata'\nimport { Vue, Component } from 'vue-property-decorator'\nimport { ICompilerInfo } from '@/lib/ICompilerRegistry'\n\n//load all versions\nimport { v100 } from './glsl.v100'\n\n@Component\nexport class GLSLCompilerInfo extends Vue implements ICompilerInfo {\n    readonly type = 'glsl'\n    readonly displayName = 'GLSL Shader'\n\n    //attach all version\n    readonly versions = [v100]\n\n    //declare the default one\n    readonly default = v100\n}\n\nexport const GLSLCompilers: ICompilerInfo[] | ICompilerInfo = new GLSLCompilerInfo()\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    ICompilerHashMap,\n    IDomLibraray,\n    ICompilerID,\n    ICompilerInfo,\n    IListItemData,\n    ICompilerInstance,\n    ICompilerRegistry,\n    ICompilerIDQuery,\n    IUpdateMappingMap,\n} from './ICompilerRegistry'\n\n//prepare Compiler Registry\n@Component\nexport class CompilerRegistry extends Vue implements ICompilerRegistry {\n    compilers: ICompilerHashMap = {}\n    libraries: IDomLibraray[] = []\n    loadedURIs: string[] = []\n    public updateMappings: IUpdateMappingMap = {}\n    afterLoadFinished: (() => void)[] = []\n    isLoadingLibs = false\n\n    get languages(): IListItemData[] {\n        const langs = Object.keys(this.compilers)\n            .map((k) => this.compilers[k])\n            .map((c) => {\n                return { label: c.displayName, value: c.type }\n            })\n            .sort((a, b) => (a.label < b.label ? -1 : 1))\n        return langs\n    }\n\n    get domLibraries(): IListItemData[] {\n        const libs: IDomLibraray[] = this.libraries.filter((l) => !l.utility)\n        return libs.map((l) => {\n            return { label: l.displayName + ' (' + l.version + ')', value: l.key }\n        })\n    }\n\n    register(compilers: ICompilerInfo[] | ICompilerInfo): void {\n        if (Array.isArray(compilers)) {\n            compilers.forEach((c) => this.registerSingle(c))\n        } else {\n            this.registerSingle(compilers)\n        }\n    }\n\n    registerSingle(c: ICompilerInfo): void {\n        this.compilers[c.type] = c\n        c.versions.forEach((v) => {\n            if (v.registerLibs) {\n                v.registerLibs(this)\n            }\n        })\n    }\n\n    getCompiler(compilerInfo: ICompilerIDQuery): ICompilerInstance | undefined {\n        const cmps = this.compilers[compilerInfo.languageType]\n        if (!cmps) {\n            return undefined\n        }\n        if (compilerInfo.version === undefined) {\n            return cmps.default\n        }\n        let res = cmps.versions.find((e) => e.version == compilerInfo.version)\n        if (res === undefined) {\n            res = cmps.default\n        }\n        return res\n    }\n\n    versionsForLanguage(languageType: string): string[] | ['none'] {\n        const c = this.compilers[languageType]\n        if (c === undefined) {\n            return ['none']\n        }\n        return c.versions.map((v) => v.version)\n    }\n\n    addUpdateMapping(name: string, oldVersion: string, newVersion: string) {\n        const oldName = `${name}-${oldVersion}`\n        const newName = `${name}-${newVersion}`\n        this.updateMappings[oldName] = newName\n    }\n\n    mapLibrary(loadedName: string): string {\n        const name = this.updateMappings[loadedName]\n        return name === undefined ? loadedName : name\n    }\n\n    registerDOMLib(\n        uri: string[],\n        name: string,\n        version: string,\n        displayName: string,\n        utility: boolean = false,\n        order: number = 0,\n        onBuildSandboxEnv: (sandbox: any) => void = () => {}\n    ): void {\n        this.libraries.push({\n            key: name + '-' + version,\n            uri: uri,\n            name: name,\n            version: version,\n            displayName: displayName,\n            didLoad: false,\n            utility: utility,\n            order: order,\n            onBuildSandboxEnv: onBuildSandboxEnv,\n        })\n    }\n\n    addLoadedToSandbox(sandbox: any) {\n        this.libraries.filter((l) => l.didLoad).forEach((l) => l.onBuildSandboxEnv(sandbox))\n    }\n\n    getLibObjects(domLibs: string[]): IDomLibraray[] {\n        return this.libraries.filter((l) => domLibs.indexOf(l.key) >= 0)\n    }\n\n    urisForDOMLibs(domLibs: string[]): string[] {\n        const libs = this.getLibObjects(domLibs)\n        const uris = libs\n            .filter((l) => !l.didLoad)\n            .sort((a, b) => (a.order < b.order ? 1 : -1))\n            .map((l) => l.uri)\n            .reduce((p, c) => c.concat(p), [])\n\n        return uris\n    }\n    loadLibraries(domLibraries: string[], whenLoaded: () => void): void {\n        const libs = this.urisForDOMLibs(domLibraries)\n        const dlibs = this.getLibObjects(domLibraries)\n        this.loadURIs(\n            libs,\n            function () {\n                dlibs.forEach((l) => (l.didLoad = true))\n\n                if (window.MathJax === undefined) {\n                    whenLoaded()\n                } else {\n                    MathJax.Hub.Register.StartupHook('End', () => {\n                        whenLoaded()\n                    })\n                }\n            }.bind(this)\n        )\n    }\n    private loadURIsIter(libs: string[], whenLoaded: () => void): void {\n        console.log(libs)\n        let loadCount = 0\n        const didLoad = (u: string) => {\n            loadCount++\n            if (loadCount == libs.length) {\n                whenLoaded()\n            }\n        }\n        libs.forEach((uri: string) => {\n            if (this.loadedURIs.indexOf(uri) >= 0) {\n                didLoad(uri)\n                return\n            }\n            this.loadedURIs.push(uri)\n\n            const script = document.createElement('script')\n            script.src = uri\n            console.log('[Loading Library from ' + uri + ']')\n            script.onload = function () {\n                console.log('[Loaded ' + uri + ']')\n                didLoad(uri)\n            }\n            document.head.appendChild(script)\n        })\n    }\n\n    private loadURIs(libs: string[], whenLoaded: () => void): void {\n        //make sure we serialize all loads !!!\n        if (this.isLoadingLibs) {\n            //queue the load\n            this.afterLoadFinished.push(() => {\n                this.loadURIs(libs, whenLoaded)\n            })\n            return\n        }\n        this.isLoadingLibs = true\n\n        const self = this\n\n        const loadLib = function (uris, idx) {\n            if (idx >= uris.length) {\n                whenLoaded()\n\n                //something tried to queue another load\n                // => dequeu it and run it now\n                self.isLoadingLibs = false\n                if (self.afterLoadFinished.length > 0) {\n                    const next = self.afterLoadFinished.shift()\n                    if (next) {\n                        next()\n                    }\n                }\n                return\n            }\n\n            const uri = uris[idx]\n\n            //already loaded\n            if (self.loadedURIs.indexOf(uri) >= 0) {\n                loadLib(uris, idx + 1)\n                return\n            }\n            self.loadedURIs.push(uri)\n\n            const script = document.createElement('script')\n            script.src = uri\n            console.log('[Loading Library from ' + uri + ']')\n            script.onload = function () {\n                loadLib(uris, idx + 1)\n            }\n            document.head.appendChild(script)\n        }\n\n        loadLib(libs, 0)\n    }\n}\n\nexport const compilerRegistry = new CompilerRegistry()\n\n//load all available compilers\nimport { JavaCompilers } from '../compiler/java'\ncompilerRegistry.register(JavaCompilers)\n\nimport { JavascriptCompilers } from '../compiler/javascript'\ncompilerRegistry.register(JavascriptCompilers)\n\nimport { PythonCompilers } from '../compiler/python'\ncompilerRegistry.register(PythonCompilers)\n\nimport { GLSLCompilers } from '../compiler/glsl'\ncompilerRegistry.register(GLSLCompilers)\n\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/chart.js/3.6.0/chart.min.js'],\n    'chart',\n    '3.6.0',\n    'Chart.JS',\n    false,\n    1000,\n    (sandbox) => {\n        sandbox.Chart = (window as any).Chart\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/three.min.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/controls/OrbitControls.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/controls/TrackballControls.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r0/Detector.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/helper.r0.js',\n    ],\n    '3js',\n    'r0',\n    'Three.JS',\n    false,\n    2000,\n    (sandbox) => {\n        sandbox.THREE = (window as any).THREE\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/three.js/r140/three.min.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r140/js/controls/OrbitControls.js',\n        Vue.$CodeBlock.baseurl + 'js/three.js/r140/js/controls/TrackballControls.js',\n    ],\n    '3js',\n    'r140',\n    'Three.JS',\n    false,\n    2000,\n    (sandbox) => {\n        sandbox.THREE = (window as any).THREE\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/lil-gui/0.16/lil-gui.min.js'],\n    'lil-gui',\n    '0.16',\n    'lil GUI',\n    false,\n    2000,\n    (sandbox) => {\n        sandbox.lil = (window as any).lil\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/phaser/3.54.0/phaser.min.js',\n        Vue.$CodeBlock.baseurl + 'js/phaser/3.54.0/support.js',\n    ],\n    'phaser',\n    '3.54',\n    'Phaser',\n    false,\n    3000,\n    (sandbox: any) => {\n        sandbox.Phaser = (window as any).Phaser\n        sandbox.IsometricMapGame = (window as any).IsometricMapGame\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/5.16.0/d3.v5.min.js',\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/helper.js',\n    ],\n    'd3',\n    '5.16.0',\n    'D3',\n    false,\n    4210,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/d3.v5.min.js',\n        Vue.$CodeBlock.baseurl + 'js/d3/5.3.8/helper.js',\n    ],\n    'd3',\n    '5.3.8',\n    'D3',\n    false,\n    4200,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/d3/6.7.0/d3.v6.min.js',\n        //Vue.$CodeBlock.baseurl + 'js/d3/6.2.0/helper.v6.js'\n    ],\n    'd3',\n    '6.7.0',\n    'D3',\n    false,\n    4010,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/d3/7.1.1/d3.v7.min.js'],\n    'd3',\n    '7.1.1',\n    'D3',\n    false,\n    4100,\n    (sandbox) => {\n        sandbox.d3 = (window as any).d3\n    }\n)\n\ncompilerRegistry.addUpdateMapping('d3', '5.13.4', '5.16.0')\ncompilerRegistry.addUpdateMapping('d3', '6.2.0', '6.7.0')\n\ncompilerRegistry.registerDOMLib(\n    [Vue.$CodeBlock.baseurl + 'js/brain.js/2.0.0-alpha/brain-browser.min.js'],\n    'brain',\n    '2.0.0',\n    'Brain.JS',\n    false,\n    5000,\n    (sandbox) => {\n        sandbox.brain = (window as any).brain\n    }\n)\n\ncompilerRegistry.registerDOMLib(\n    [\n        Vue.$CodeBlock.baseurl + 'js/tensorflow.js/2.0.0/tf.min.js',\n        //Vue.$CodeBlock.baseurl + 'js/tensorflow.js/2.0.0/tfjs-vis.umd.min.js',\n    ],\n    'tf',\n    '2.0.0',\n    'TensorFlow.JS',\n    false,\n    6000,\n    (sandbox) => {\n        sandbox.tf = (window as any).tf\n        //sandbox.tfvis = (window as any).tfvis\n    }\n)\n\nexport default compilerRegistry\n","import 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport {\n    IParsedError,\n    ILegacyPlaygroundObject,\n    IPlaygroundObject,\n    IProcessedScriptOutput,\n    IScriptOutputObject,\n    IScriptBlock,\n} from '@/lib/IScriptBlock'\nimport { ICompileAndRunArguments } from './ICompilerRegistry'\nimport compilerRegistry from './CompilerRegistry'\nimport { IBlockData } from './ICodeBlocks'\ninterface ICodeTemplate {\n    prefix: string\n    postfix: string\n}\n\nconst legacyCodeTemplate: ICodeTemplate = {\n    prefix: 'let editors=[]; $(\".CodeMirror\").toArray().forEach(cm =>  {if (!cm.CodeMirror.getTextArea().hasAttribute(\"is-editmode\")) editors[cm.CodeMirror.getTextArea().id] = cm.CodeMirror}); return function(){ return {o:',\n    postfix: '}.o}.call({})',\n}\nconst v101CodeTemplate: ICodeTemplate = {\n    prefix: '\"use strict\"; return function(){ return {o:',\n    postfix: '}.o}.call({})',\n}\nconst v102CodeTemplate: ICodeTemplate = {\n    prefix: 'with(sandbox) { return function(){ return {o:',\n    postfix: '}.o}.call({})}',\n}\n\nconst jsErrorParser = function (e: any, templ?: ICodeTemplate): IParsedError {\n    console.error(e)\n    let line: number | undefined = undefined\n    let column: number | undefined = undefined\n    if (e.line) {\n        line = e.line\n    } else if (e.lineNumber) {\n        line = e.lineNumber\n    }\n\n    if (e.column) {\n        column = e.column\n    } else if (e.columnNumber) {\n        column = e.columnNumber\n    }\n\n    if (line === undefined) {\n        const lines = e.stack.split('\\n')\n        if (lines.length > 1) {\n            const regex = /<anonymous>:(\\d+):(\\d+)/gm\n            let m: RegExpExecArray | null = null\n            if ((m = regex.exec(lines[1])) !== null) {\n                line = Number(m[1]) - 1\n                column = Number(m[2]) - 1\n            }\n        }\n    }\n\n    if (line !== undefined) {\n        line--\n        if (line == 1) {\n            if (column === undefined) {\n                column = 0\n            }\n            if (templ !== undefined) {\n                column -= templ.prefix.length\n            }\n        }\n    }\n    return { line: line!, column: column!, msg: e.message }\n}\nVue.prototype.$jsErrorParser = jsErrorParser\n\nconst sandboxProxies = new WeakMap()\n\nfunction compileCode(src: string) {\n    const code = new Function('sandbox', src)\n\n    return function (sandbox: any) {\n        compilerRegistry.addLoadedToSandbox(sandbox)\n        sandbox.$ = (input: any) => {\n            if (typeof input === 'string') {\n                console.error(\n                    `You can not use JQuerry globally from this context. Please try scope.find('${input}') instead.`\n                )\n            } else {\n                if (input.getAttribute === undefined) {\n                    console.error('You may only wrap DOMElements using $')\n                    return\n                }\n                return $(input)\n            }\n        }\n\n        //const oldFetch = fetch\n        const oldRequestAnimationFrame = requestAnimationFrame\n        // sandbox.fetch = (uri, options) => {\n        //     console.i('Fetching', uri, 'from Sandbox')\n        //     return oldFetch(uri, options)\n        // }\n        sandbox.requestAnimationFrame = (callback) => {\n            oldRequestAnimationFrame(callback)\n        }\n        sandbox.jQuery = sandbox.$\n        sandbox.console = console\n        sandbox.Promise = Promise\n        sandbox.Number = Number\n        sandbox.Map = Map\n        sandbox.String = String\n        sandbox.Array = Array\n        sandbox.RegExp = RegExp\n        sandbox.Math = Math\n        sandbox.document = {\n            create$: (what: any) => $(document.createElement(what)),\n            createElement: (what: any) => document.createElement(what),\n            createTextNode: (what: any) => document.createTextNode(what),\n            getElementById: (id: String) =>\n                console.error(\n                    `document.getElementById is not supported. Please use scope.find('#${id}') instead`\n                ),\n            getElementsByTagName: (tag: String) =>\n                console.error(\n                    `document.getElementsByTagName is not supported. Please use scope.find('${tag}') instead`\n                ),\n            getElementsByClassName: (cl: String) =>\n                console.error(\n                    `document.getElementsByClassName is not supported. Please use scope.find('.${cl}') instead`\n                ),\n        }\n        sandbox.window = {\n            devicePixelRatio: window.devicePixelRatio,\n        }\n\n        if (!sandboxProxies.has(sandbox)) {\n            const sandboxProxy = new Proxy(sandbox, { has, get })\n            sandboxProxies.set(sandbox, sandboxProxy)\n        }\n        return code(sandboxProxies.get(sandbox))\n    }\n}\n\nfunction has(target: any, key: any) {\n    return true\n}\n\nfunction get(target: any, key: any) {\n    if (key === Symbol.unscopables) {\n        return undefined\n    }\n    return target[key]\n}\n\nexport class ScriptBlock implements IScriptBlock {\n    public err: IParsedError[] = []\n\n    private src: string | undefined = undefined\n    private fkt: Function | undefined = undefined\n    private obj: IPlaygroundObject | ILegacyPlaygroundObject | undefined = undefined\n    private didInit: boolean = false\n    constructor(script: string, public version: string) {\n        //this.rebuild(script)\n        this.didInit = false\n        this.src = script\n        this.obj = {\n            init: () => {\n                console.error('FAILED INIT ATTEMPT')\n            },\n            update: () => {\n                console.error('FAILED UPDATE ATTEMPT')\n                return undefined\n            },\n        }\n    }\n\n    requestsOriginalVersion() {\n        return this.version == '100' || this.version == '' || this.version === undefined\n    }\n\n    invalidate() {\n        this.obj = undefined\n    }\n\n    rebuild(code?: string) {\n        if (code !== undefined) {\n            try {\n                this.err = []\n                console.i('!!! REBUILDING !!!')\n                this.src = code\n\n                //wrap the users code in a helper object, otherwise\n                //evaluating would fail if the code does not start in the first line\n\n                //we also return a function to make and call (.call({})) it with a clean object\n                //to ensure that 'this' is will allways be in a defined state inside the users code\n                if (this.requestsOriginalVersion()) {\n                    this.fkt = new Function(\n                        legacyCodeTemplate.prefix + code + legacyCodeTemplate.postfix\n                    )\n                } else if (this.version === '101') {\n                    this.fkt = new Function(\n                        v101CodeTemplate.prefix + code + v101CodeTemplate.postfix\n                    )\n                } else {\n                    this.fkt = compileCode(\n                        v102CodeTemplate.prefix + code + v102CodeTemplate.postfix\n                    )\n                }\n\n                this.obj = this.fkt({})\n                this.dequeueIncoming()\n            } catch (e) {\n                this.pushError(e)\n            }\n        } else if (this.fkt !== undefined) {\n            this.obj = this.fkt({})\n            this.dequeueIncoming()\n        }\n    }\n\n    pushError(e: any) {\n        this.err.push(jsErrorParser(e))\n    }\n\n    private lazyInit() {\n        if (!this.didInit) {\n            this.obj = undefined\n            this.rebuild(this.src)\n            this.didInit = true\n        }\n    }\n\n    addArgumentsTo(args: object | string[]) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.addArgumentsTo) {\n                try {\n                    o.addArgumentsTo(args)\n                } catch (e) {\n                    this.pushError(e)\n                }\n            }\n        }\n    }\n\n    _runConfig: null | ICompileAndRunArguments = null\n    get runConfig(): null | ICompileAndRunArguments {\n        return this._runConfig\n    }\n    set runConfig(cfg: null | ICompileAndRunArguments) {\n        if (this._runConfig) {\n            this._runConfig.dequeuePostponedMessages = function () {}\n        }\n        this._runConfig = cfg\n        if (this._runConfig) {\n            const self = this\n            this._runConfig.dequeuePostponedMessages = function () {\n                const msg = [...self.queuedMessages]\n                self.queuedMessages = []\n                msg.forEach((args) => self.doPostMessageToWorker(args.c, args.d))\n            }\n            if (this._runConfig.postMessageFunction !== null) {\n                this._runConfig.dequeuePostponedMessages()\n            }\n        }\n    }\n    queuedMessages: any[] = []\n    doPostMessageToWorker(cmd: string, data: any) {\n        if (data === undefined) {\n            data = {}\n        }\n        if (\n            this._runConfig !== undefined &&\n            this._runConfig !== null &&\n            this._runConfig.postMessageFunction !== null\n        ) {\n            cmd = `d-${cmd}`\n            data.command = cmd\n            console.i('MESSAGE - Posted to Worker', cmd, data)\n            this._runConfig.postMessageFunction(cmd, data)\n        } else {\n            console.i('MESSAGE - Posted to Queue', cmd)\n            this.queuedMessages.push({ c: cmd, d: data })\n        }\n    }\n    queuedIncomingMessages: any[] = []\n    didReceiveMessage(cmd: string, data: any) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.onMessage === undefined) {\n                console.i('MESSAGE - Received to Queue', cmd)\n                this.queuedIncomingMessages.push({ c: cmd, d: data })\n            } else {\n                console.i('MESSAGE - Received from Worker', cmd, data)\n                o.onMessage(cmd, data)\n            }\n        } else {\n            console.i('MESSAGE - Received to Queue', cmd)\n            this.queuedIncomingMessages.push({ c: cmd, d: data })\n        }\n    }\n    dequeueIncoming() {\n        console.i('MESSAGE - Dequeue Incoming')\n        const msg = [...this.queuedIncomingMessages]\n        this.queuedIncomingMessages = []\n        msg.forEach((args) => this.didReceiveMessage(args.c, args.d))\n    }\n\n    beforeStart() {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.beforeStart) {\n                console.i('MESSAGE - beforeStart')\n                o.beforeStart()\n            }\n        }\n    }\n\n    whenFinished(args: string[] | object, resultData?: object | any[]) {\n        this.lazyInit()\n        if (this.obj && !this.requestsOriginalVersion()) {\n            const o = this.obj as IPlaygroundObject\n            if (o.whenFinished) {\n                console.i('MESSAGE - whenFinished')\n                o.whenFinished(args, resultData)\n            }\n        }\n    }\n\n    DATA: any[] = []\n    resetBlockData(blocks: IBlockData[] | undefined) {\n        this.DATA = []\n        if (blocks !== undefined) {\n            this.addBlockDataFromBlocks(blocks)\n        }\n    }\n\n    addBlockDataFromBlocks(blocks: IBlockData[]): void {\n        blocks.filter((b) => b.type == 'DATA').forEach((b) => this.addBlockDataFromBlock(b))\n    }\n    addBlockDataFromBlock(block: IBlockData): void {\n        this.addBlockData(block.name, block.content)\n    }\n\n    addBlockData(name: string, content: string): void {\n        try {\n            this.DATA[name] = JSON.parse(content)\n        } catch (e) {\n            this.DATA[name] = undefined\n            console.error(`Unable to parse JSON from '${name}'`, e)\n        }\n    }\n    RESOURCES: any[] | undefined = undefined\n    resetResources() {\n        this.RESOURCES = undefined\n    }\n    init(canvasElement: JQuery<HTMLElement>, scope: JQuery<HTMLElement>, runner: () => void): void {\n        const self = this\n        this.queuedMessages = []\n        this.queuedIncomingMessages = []\n        this.lazyInit()\n        console.i('MESSAGE - Reset Queue from Init')\n        if (this.obj === undefined) {\n            return\n        }\n        try {\n            if (this.requestsOriginalVersion()) {\n                console.i('!!! INIT CANVAS (original) !!!')\n                const o = this.obj as ILegacyPlaygroundObject\n                o.init(canvasElement)\n            } else {\n                const o = this.obj as IPlaygroundObject\n                o.DATA = this.DATA\n                if (o.resources) {\n                    if (self.RESOURCES === undefined) {\n                        console.i('!!! FETCHING RESOURCES !!!')\n                        self.RESOURCES = []\n                        const requests = o.resources().map((res, idx, array) => {\n                            return fetch(res.uri)\n                                .then((response) => {\n                                    if (!response.ok) {\n                                        throw new Error('Unable to retrive ' + res.uri)\n                                    }\n                                    if (res.type === 'json') {\n                                        return response.json()\n                                    } else if (res.type === 'text') {\n                                        return response.text()\n                                    } else if (res.type === 'image') {\n                                        return response.blob()\n                                    } else if (res.type === 'buffer') {\n                                        return response.arrayBuffer()\n                                    }\n                                    return response.blob()\n                                })\n                                .then((data) => {\n                                    if (res.type === 'image') {\n                                        data = URL.createObjectURL(data)\n                                    }\n                                    if (self.RESOURCES === undefined) {\n                                        self.RESOURCES = []\n                                    }\n                                    self.RESOURCES[idx] = data\n\n                                    if (res.name) {\n                                        self.RESOURCES[res.name] = data\n                                        const a = o as any\n                                        a[res.name] = data\n                                    }\n                                    return data\n                                })\n                        })\n\n                        Promise.all(requests)\n                            .then((values) => {\n                                if (self.RESOURCES === undefined) {\n                                    self.RESOURCES = []\n                                }\n                                o.RESOURCES = self.RESOURCES\n                                self._runInit(canvasElement, scope, runner)\n                            })\n                            .catch((e) => console.error(e))\n                    } else {\n                        console.i('!!! READING CACHED RESOURCES !!!')\n                        o.RESOURCES = self.RESOURCES\n                        o.resources().forEach((res) => {\n                            if (res.name) {\n                                const a = o as any\n                                if (self.RESOURCES !== undefined) {\n                                    a[res.name] = self.RESOURCES[res.name]\n                                }\n                            }\n                        })\n                        self._runInit(canvasElement, scope, runner)\n                    }\n                } else {\n                    o.RESOURCES = []\n                    this._runInit(canvasElement, scope, runner)\n                }\n            }\n        } catch (e) {\n            this.pushError(e)\n        }\n    }\n\n    _runInit(\n        canvasElement: JQuery<HTMLElement>,\n        scope: JQuery<HTMLElement>,\n        runner: () => void\n    ): void {\n        console.i('!!! INIT CANVAS !!!')\n\n        const arunner: any = runner\n        arunner.run = runner\n        arunner.postMessage = this.doPostMessageToWorker.bind(this)\n\n        let outputElement: JQuery<HTMLElement> | undefined = undefined\n        if (scope === undefined || scope.length === 0) {\n            scope = canvasElement.parents('.codeblocks')\n        }\n        if (scope !== undefined) {\n            outputElement = scope.find('div.runner pre.output')\n        }\n        if (outputElement === undefined) {\n            console.error('[Internal Error] No Output Element found!')\n            this.pushError('[Internal Error] No Output Element found!')\n        } else {\n            const o = this.obj as IPlaygroundObject\n            o.init(canvasElement, outputElement, scope, runner)\n        }\n    }\n\n    reset(canvasElement: JQuery<HTMLElement>): void {\n        this.queuedMessages = []\n        this.queuedIncomingMessages = []\n        this.lazyInit()\n        console.i('MESSAGE - Reset Queue from Reset')\n        if (this.obj && this.obj.reset && !this.requestsOriginalVersion()) {\n            this.obj.reset(canvasElement)\n        }\n    }\n\n    update(\n        outputObject: IScriptOutputObject,\n        canvasElement: JQuery<HTMLElement>\n    ): string | undefined {\n        this.lazyInit()\n        if (this.obj === undefined) {\n            return outputObject.output\n        }\n        try {\n            if (this.obj.update) {\n                //console.log(this.obj.update.length, outputObject, this.obj);\n                //this is the old behaviour\n                if (this.obj.update.length == 2 || this.requestsOriginalVersion()) {\n                    const o = this.obj as ILegacyPlaygroundObject\n                    if (outputObject.processedOutput.type == 'json') {\n                        console.i('!!! UPDATE (org, json) !!!')\n                        return o.update(outputObject.processedOutput.json, canvasElement)\n                    } else {\n                        console.i('!!! UPDATE (org, text) !!!')\n                        return o.update(outputObject.output, canvasElement)\n                    }\n                } else {\n                    const o = this.obj as IPlaygroundObject\n                    console.i('!!! UPDATE (v' + this.version + ')!!!')\n                    return o.update(\n                        outputObject.processedOutput.text,\n                        outputObject.processedOutput.json,\n                        canvasElement,\n                        outputObject.outputElement\n                    )\n                }\n            }\n        } catch (e) {\n            this.pushError(e)\n        }\n        return outputObject.initialOutput\n    }\n\n    onParseError(initialOutput: string, parseError: string): boolean {\n        this.lazyInit()\n        if (this.obj === undefined) {\n            return false\n        }\n        try {\n            if (this.obj.onParseError) {\n                this.obj.onParseError(initialOutput, parseError)\n            } else {\n                console.error(parseError)\n                return false\n            }\n        } catch (e) {\n            this.pushError(e)\n            return false\n        }\n        return true\n    }\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{staticStyle:{\"min-height\":\"0\"},attrs:{\"view\":\"hHh lpR fFf\"}},[_c('q-page-container',[_c('CodeBlocks',{attrs:{\"blockInfo\":_vm.blocks}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblocks \" + _vm.addonClass + \"  \" + _vm.backgroundColorClass + \" q-mx-sm q-mb-md\"),attrs:{\"data-question\":_vm.blockInfo.id,\"uuid\":_vm.blockInfo.uuid}},[_c('CodePanel',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasBookmark && _vm.editMode),expression:\"hasBookmark && editMode\"}],attrs:{\"editMode\":_vm.editMode,\"visibleLines\":\"auto\",\"block\":_vm.panelBlock}}),(_vm.editMode)?_c('CodeBlocksSettings',{attrs:{\"options\":_vm.options},on:{\"compiler-change\":_vm.onCompilerChange,\"compiler-version-change\":_vm.onCompilerVersionChange,\"run-state-change\":_vm.onRunStateChange,\"continuous-compile-change\":_vm.onContinousCompileStateChange,\"message-passing-change\":_vm.onMessagePassingChange,\"keep-alive-change\":_vm.onKeepAliveChange,\"persistent-arguments-change\":_vm.onPersistentArgumentsChange,\"language-change\":_vm.onLanguageChange,\"character-limit-change\":_vm.onCharacterLimitChange,\"timeout-change\":_vm.onTimeoutChange,\"worker-libs-change\":_vm.onWorkerLibChange,\"dom-libs-change\":_vm.onDomLibChange,\"theme-change\":_vm.onThemeChange,\"output-parser-change\":_vm.onOutputParserChange}}):_vm._e(),_vm._l((_vm.blocks),function(block){return _c('CodeBlockContainer',{key:block.id,attrs:{\"block\":block,\"editMode\":_vm.editMode},on:{\"type-change\":_vm.onTypeChange,\"visible-lines-change\":_vm.onVisibleLinesChange,\"placement-change\":_vm.onPlacementChange,\"script-version-change\":_vm.onScriptVersionChange,\"move-up\":_vm.moveUp,\"move-down\":_vm.moveDown,\"remove-block\":_vm.removeBlock,\"auto-reset-change\":_vm.onSetAutoReset,\"reload-resources-change\":_vm.onReloadResources,\"generate-template-change\":_vm.onSetGenerateTemplate,\"change-order\":_vm.onChangeOrder}},[(block.hasCode && block.type != 'BLOCKLY')?_c('CodeBlock',{attrs:{\"block\":block,\"theme\":_vm.themeForBlock(block),\"mode\":_vm.mimeType,\"visibleLines\":block.visibleLines,\"editMode\":_vm.editMode,\"readonly\":_vm.readonly,\"tagSet\":_vm.activeTagSet,\"emitWhenTypingInViewMode\":_vm.continuousCompile},on:{\"ready\":_vm.blockBecameReady,\"build\":_vm.run,\"code-changed-in-view-mode\":_vm.onViewCodeChange}}):(block.type == 'PLAYGROUND')?_c('CodePlayground',{attrs:{\"block\":block,\"editMode\":_vm.editMode,\"finalOutputObject\":_vm.finalOutputObject,\"theme\":_vm.themeForBlock(block),\"tagSet\":_vm.activeTagSet,\"eventHub\":_vm.eventHub},on:{\"changeOutput\":_vm.onPlaygroundChangedOutput,\"ready\":_vm.blockBecameReady,\"run\":_vm.onRunFromPlayground}}):(block.type == 'TEXT')?_c('SimpleText',{attrs:{\"block\":block,\"previewValue\":block.actualContent(),\"editMode\":_vm.editMode,\"name\":(\"block[\" + (block.parentID) + \"][\" + (block.id) + \"]\"),\"scopeUUID\":block.scopeUUID,\"tagSet\":_vm.activeTagSet,\"language\":_vm.language},on:{\"ready\":_vm.blockBecameReady},model:{value:(block.content),callback:function ($$v) {_vm.$set(block, \"content\", $$v)},expression:\"block.content\"}}):(block.type == 'BLOCKLY')?_c('Blockly',{attrs:{\"block\":block,\"mode\":_vm.mimeType,\"theme\":_vm.themeForBlock(block),\"editMode\":_vm.editMode,\"readonly\":_vm.readonly,\"tagSet\":_vm.activeTagSet,\"emitWhenTypingInViewMode\":_vm.continuousCompile,\"blockInfo\":_vm.blockInfo},on:{\"code-changed-in-view-mode\":_vm.onViewCodeChange}}):_vm._e(),(block.type == 'REPL')?_c('CodeREPL',{attrs:{\"block\":block,\"eventHub\":_vm.eventHub,\"blockInfo\":_vm.blockInfo,\"isReady\":_vm.isReady,\"canStop\":_vm.canStop,\"showGlobalMessages\":_vm.showGlobalMessages,\"globalStateMessage\":_vm.$compilerState.globalStateMessage},on:{\"ready\":_vm.blockBecameReady,\"run\":_vm.run,\"stop\":_vm.stop}}):(block.type == 'DATA')?_c('DataBlock',{attrs:{\"block\":block,\"editMode\":_vm.editMode,\"finalOutputObject\":_vm.finalOutputObject,\"theme\":_vm.themeForBlock(block),\"tagSet\":_vm.activeTagSet,\"eventHub\":_vm.eventHub},on:{\"ready\":_vm.blockBecameReady}}):_vm._e()],1)}),(_vm.editMode)?_c('div',{staticClass:\"row justify-end\"},[_c('div',[_c('q-btn',{attrs:{\"push\":\"\",\"color\":\"green\"},on:{\"click\":_vm.addNewBlock}},[_vm._v(_vm._s(_vm.$t('CodeBlocks.AddBlock'))+\" \"),_c('q-icon',{staticClass:\"q-ml-sm\",attrs:{\"name\":\"library_add\"}})],1)],1)]):_vm._e(),(_vm.canRun)?_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.hasREPL),expression:\"!hasREPL\"}],class:(\"runner \" + (_vm.editMode ? 'q-pt-lg q-mx-lg' : '')),attrs:{\"id\":\"runContainer\",\"data-question\":_vm.blockInfo.id}},[_c('div',{staticClass:\"row runnerState\",attrs:{\"id\":\"stateBox\",\"data-question\":_vm.blockInfo.id}},[_c('q-btn',{staticClass:\"white--text\",staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"allow_run_button\",\"loading\":!_vm.isReady,\"disabled\":!_vm.isReady,\"color\":\"primary\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.run}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.run'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}}),(_vm.editMode)?_c('q-tooltip',{attrs:{\"delay\":200}},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$t('CodeBlocks.run_hint'))}})]):_vm._e()],1),_c('div',{staticClass:\"animated fadeIn\"}),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canStop),expression:\"canStop\"}],staticClass:\"q-pl-sm\"},[_c('q-btn',{staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"cancel_button\",\"color\":\"negative\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.stop}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.stop'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"stop\"}})],1)],1)]),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGlobalMessages),expression:\"showGlobalMessages\"}],staticClass:\"globalState col-grow\",staticStyle:{\"align-self\":\"center\"}},[_c('div',{attrs:{\"id\":\"message\"},domProps:{\"innerHTML\":_vm._s(_vm.$compilerState.globalStateMessage)}})])])],1),_c('q-slide-transition',[(_vm.hasOutput)?_c('pre',{ref:\"output\",staticClass:\"output\",attrs:{\"id\":((_vm.blockInfo.id) + \"Output\")}},[_c('div',{attrs:{\"id\":\"out\"},domProps:{\"innerHTML\":_vm._s(_vm.outputHTML)}})]):_vm._e()])],1):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"block-container\",attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id,\"uuid\":_vm.block.uuid}},[(_vm.editMode)?_c('q-card',{class:(\"q-mx-none q-my-xs q-pa-none editModeBlockContainer \" + _vm.colorClass + \" \" + _vm.bgClass)},[_c('q-card-section',{staticClass:\"q-mb-none q-pb-sm q-pt-sm\"},[_c('div',{staticClass:\"row q-my-none q-py-none\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-sm-4 col-md-4 q-my-none q-py-none\"},[_c('q-select',{staticStyle:{\"margin-top\":\"-5px !important\"},attrs:{\"options\":_vm.types,\"dense\":\"\"},scopedSlots:_vm._u([{key:\"after\",fn:function(){return [_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showTypeInfoDialog}})]},proxy:true}],null,false,3671508059),model:{value:(_vm.typeObj),callback:function ($$v) {_vm.typeObj=$$v},expression:\"typeObj\"}})],1),_c('div',{staticClass:\"col-grow\"}),_c('div',{staticClass:\"order-xs-first order-sm-last col-xs-12 col-sm-8 col-md-5 q-my-none q-py-none rightContentContainerHeader\"},[(_vm.hasExtendedSettings)?_c('q-btn',{attrs:{\"icon\":\"settings\",\"color\":\"blue-7\",\"push\":\"\",\"dense\":\"\"}},[_c('q-popup-proxy',[(_vm.canSetLineNumbers)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pt-none q-pb-md\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Display'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Lines'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\",domProps:{\"innerHTML\":_vm._s(_vm.$l('CodeBlockContainer.Lines_detail'))}})]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{staticStyle:{\"width\":\"132px\"},attrs:{\"rules\":[_vm.validNumber],\"maxlength\":\"4\"},model:{value:(_vm.visibleLines),callback:function ($$v) {_vm.visibleLines=$$v},expression:\"visibleLines\"}})],1)]),(_vm.canHaveAlternativeContent)?_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Prepopulate'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\",attrs:{\"lines\":\"2\"}},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Prepopulate_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.hasAltComntent),callback:function ($$v) {_vm.hasAltComntent=$$v},expression:\"hasAltComntent\"}})],1)]):_vm._e()]):_vm._e(),(_vm.isVersionedPlayground)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pt-none q-pb-md\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Behaviour'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ScriptV'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ScriptV_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-select',{attrs:{\"options\":_vm.scriptVersions},model:{value:(_vm.scriptVersionObj),callback:function ($$v) {_vm.scriptVersionObj=$$v},expression:\"scriptVersionObj\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.AutoReset'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.AutoReset_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.shouldAutoReset),callback:function ($$v) {_vm.shouldAutoReset=$$v},expression:\"shouldAutoReset\"}})],1)]),(_vm.canLoadResources)?_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ReloadResources'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.ReloadResources_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.shouldReloadResources),callback:function ($$v) {_vm.shouldReloadResources=$$v},expression:\"shouldReloadResources\"}})],1)]):_vm._e(),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.GenerateTemplate'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.GenerateTemplate_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-toggle',{model:{value:(_vm.shouldGenerateTemplate),callback:function ($$v) {_vm.shouldGenerateTemplate=$$v},expression:\"shouldGenerateTemplate\"}})],1)])]):_vm._e(),(_vm.canDefinePlacement && _vm.shouldGenerateTemplate)?_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pt-none q-pb-md\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Positioning'))+\" \")])]),_c('div',{staticClass:\"row no-wrap q-pl-md q-pb-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Width'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Width_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{attrs:{\"maxlength\":\"7\",\"dense\":\"\"},model:{value:(_vm.width),callback:function ($$v) {_vm.width=$$v},expression:\"width\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md q-pb-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Height'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Height_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-input',{attrs:{\"maxlength\":\"7\",\"dense\":\"\"},model:{value:(_vm.height),callback:function ($$v) {_vm.height=$$v},expression:\"height\"}})],1)]),_c('div',{staticClass:\"row no-wrap q-pl-md\"},[_c('div',{staticClass:\"col-7\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Alignment'))+\" \")]),_c('div',{staticClass:\"text-caption text-blue-grey-4\"},[_vm._v(\" \"+_vm._s(_vm.$l('CodeBlockContainer.Alignment_detail'))+\" \")])]),_c('div',{staticClass:\"col-5 q-pl-sm\"},[_c('q-select',{attrs:{\"options\":_vm.alignments,\"dense\":\"\"},model:{value:(_vm.align),callback:function ($$v) {_vm.align=$$v},expression:\"align\"}})],1)])]):_vm._e()])],1):_vm._e(),_c('q-btn',{staticClass:\"q-ml-md q-mr-xs\",attrs:{\"disable\":!_vm.canMoveUp,\"icon\":\"arrow_drop_up\",\"push\":\"\",\"dense\":\"\",\"color\":\"orange-6\",\"ripple\":{ center: true }},on:{\"click\":_vm.moveUp}}),_c('div',{staticClass:\"inlined-input q-pl-sm q-pr-md q-m-none\",staticStyle:{\"width\":\"80px\"}},[_c('q-select',{staticStyle:{\"margin-top\":\"-5px !important\"},attrs:{\"options\":_vm.positions,\"dense\":\"\"},model:{value:(_vm.order),callback:function ($$v) {_vm.order=$$v},expression:\"order\"}})],1),_c('q-btn',{staticClass:\"q-mr-md\",attrs:{\"disabled\":!_vm.canMoveDown,\"icon\":\"arrow_drop_down\",\"push\":\"\",\"dense\":\"\",\"color\":\"orange-6\",\"ripple\":{ center: true }},on:{\"click\":_vm.moveDown}}),_c('q-btn',{staticClass:\"gt-xs q-mr-sm-sm q-mr-md-lg q-pr-sm\",attrs:{\"label\":_vm.$l('CodeBlockContainer.Delete'),\"icon\":\"warning\",\"push\":\"\",\"dense\":\"\",\"color\":\"red-6\",\"right\":\"\",\"ripple\":{ center: true }},on:{\"click\":_vm.removeBlock}}),_c('q-btn',{staticClass:\"lt-sm q-mr-lg q-pr-none\",attrs:{\"icon\":\"warning\",\"push\":\"\",\"dense\":\"\",\"color\":\"red-6\",\"right\":\"\",\"ripple\":{ center: true }},on:{\"click\":_vm.removeBlock}}),_c('q-btn',{staticStyle:{\"margin-right\":\"-9px\"},attrs:{\"icon\":_vm.expanded ? 'expand_less' : 'expand_more',\"color\":\"primary\",\"small\":\"\",\"flat\":\"\",\"round\":\"\"},on:{\"click\":_vm.toggleExpanded}})],1)]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.serializedOptions),expression:\"serializedOptions\"}],staticClass:\"blockoptions\",attrs:{\"name\":(\"block_options[\" + (this.block.parentID) + \"][\" + (this.block.id) + \"]\")},domProps:{\"value\":(_vm.serializedOptions)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.serializedOptions=$event.target.value}}})]),_c('q-slide-transition',[(this.isExperimentalScriptVersion)?_c('q-card-section',[_c('q-banner',{staticClass:\"bg-orange text-white col-12 q-mt-xs q-mb-md\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"whatshot\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.ExperimentalScriptVersion'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.ExperimentalScriptVersionDesc'))+\" \")])],1)],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[(this.isDeprecatedScriptVersion)?_c('q-card-section',[_c('q-banner',{staticClass:\"bg-yellow-12 text-black col-12 q-mt-xs q-mb-md\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"hourglass_disabled\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.DeprecatedScriptVersion'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodePlayground.DeprecatedScriptVersionDesc'))+\" \")])],1)],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[_c('q-card-section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.expanded),expression:\"expanded\"}],staticClass:\"my-0 q-pt-1 q-pb-0\"},[_vm._t(\"default\")],2)],1)],1):_c('div',{staticClass:\"ma-0 pa-0\"},[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\n\nexport class PositioninLoadManager {\n    loadFromDatablock(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase): void {\n        block.width = bl.getAttribute('width')\n            ? bl.getAttribute('width')!\n            : inBlock.width\n            ? inBlock.width\n            : '100%'\n        block.height = bl.getAttribute('height')\n            ? bl.getAttribute('height')!\n            : inBlock.height\n            ? inBlock.height\n            : '300px'\n        block.align = bl.getAttribute('align')\n            ? bl.getAttribute('align')!\n            : inBlock.align\n            ? inBlock.align\n            : 'center'\n    }\n}\n\nexport const positioninLoadManager = new PositioninLoadManager()\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport {\n    IBlocklyToolbox,\n    BlockPrimaryColors,\n    BlockArgumentTypes,\n    IBlockDefinition\n} from '@/lib/IBlocklyHelper'\nimport { blocklyHelper } from '@/lib/BlocklyHelper'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\n\nexport class BlocklyLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'BLOCKLY'\n    }\n\n    private loadCustomBlocks(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const customBlocks = bl.querySelectorAll('script#customblocks') //bl.getElementsByTagName('CUSTOMBLOCKS')\n        if (customBlocks.length > 0) {\n            const str: string = customBlocks[0].innerHTML ? customBlocks[0].innerHTML : '{}'\n\n            try {\n                const arr: IBlockDefinition[] = new Function(blocklyHelper.prepareCode(str))()\n                arr.forEach(bl => {\n                    if (bl.JSON === undefined) {\n                        bl.JSON = {\n                            type: '',\n                            message0: '',\n                            args0: [],\n                            nextStatement: null,\n                            previousStatement: null,\n                            colour: ''\n                        }\n                    }\n                    if (bl.uuid === undefined || bl.uuid === '') {\n                        bl.uuid = uuid.v4()\n                    }\n\n                    if (bl.codeString === undefined && bl._code !== undefined) {\n                        bl.codeString = bl._code.toString()\n                    }\n                    bl._code = undefined\n                })\n                block.blockly.blocks = arr\n            } catch (e) {\n                console.error('Error parsing Blocks JSON', e)\n            }\n        }\n    }\n\n    private loadToolbox(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const toolboxInput = bl.getElementsByTagName('TOOLBOX')\n        if (toolboxInput.length > 0) {\n            const toolboxStr: string = toolboxInput[0].innerHTML ? toolboxInput[0].innerHTML : ''\n\n            if (toolboxStr === '') {\n                block.blockly.toolbox = this.defaultToolbox\n            } else {\n                try {\n                    const obj: IBlocklyToolbox = new Function(\n                        blocklyHelper.prepareCode(toolboxStr)\n                    )()\n                    obj.categories.forEach(c => {\n                        if (c.uuid === undefined || c.uuid === '') {\n                            c.uuid = uuid.v4()\n                        }\n                        if (c.color === undefined) {\n                            c.color = ''\n                        }\n                        c.items.forEach(i => {\n                            if (i.uuid === undefined || i.uuid === '') {\n                                i.uuid = uuid.v4()\n                            }\n                        })\n                    })\n                    block.blockly.toolbox = obj\n                } catch (e) {\n                    console.error('Error Parsing ToolboxJSON', e)\n                }\n            }\n        } else {\n            block.blockly.toolbox = this.defaultToolbox\n        }\n    }\n\n    private loadOverrideToolbox(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase\n    ) {\n        const toolboxOverride = bl.querySelectorAll('script#toolboxoverride') //bl.getElementsByTagName('TOOLBOXOVERRIDE')\n        if (toolboxOverride.length > 0) {\n            block.blockly.toolboxOverride = toolboxOverride[0].innerHTML\n                ? toolboxOverride[0].innerHTML\n                : ''\n\n            block.blockly.useOverride =\n                toolboxOverride[0].hasAttribute('use') &&\n                toolboxOverride[0].getAttribute('use') != 'false' &&\n                toolboxOverride[0].getAttribute('use') != '0'\n        }\n    }\n\n    private loadCode(bl: HTMLElement, inBlock: IBlockElementData, block: IBlockDataBase) {\n        const codes = bl.querySelectorAll('script#content') //bl.getElementsByTagName('SCRIPT')\n\n        if (codes.length > 0) {\n            block.content = codes[0].innerHTML ? codes[0].innerHTML : ''\n        } else {\n            block.content = '<xml xmlns=\"https://developers.google.com/blockly/xml\"></xml>'\n        }\n        block.hasCode = true\n    }\n\n    private isTrue(val: any): boolean {\n        return val !== undefined && val != 'false' && val != '0'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        block.obj = null\n        positioninLoadManager.loadFromDatablock(bl, inBlock, block)\n\n        block.blockly.showControls = this.isTrue(inBlock.showControls)\n\n        this.loadCustomBlocks(bl, inBlock, block)\n        this.loadToolbox(bl, inBlock, block)\n        this.loadOverrideToolbox(bl, inBlock, block)\n        this.loadCode(bl, inBlock, block)\n    }\n\n    get defaultToolbox(): IBlocklyToolbox {\n        const tb: IBlocklyToolbox = {\n            categories: [\n                {\n                    uuid: uuid.v4(),\n                    name: 'Logic',\n                    color: '{!PrimaryColors.Logic}',\n                    items: [\n                        { _expanded: false, type: 'controls_if', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_compare', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_operation', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_negate', uuid: uuid.v4() },\n                        { _expanded: false, type: 'logic_boolean', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_arithmetic', uuid: uuid.v4() },\n                        { _expanded: false, type: 'lists_create_empty', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Loops',\n                    color: '{!PrimaryColors.Loop}',\n                    items: [\n                        { _expanded: false, type: 'controls_repeat_ext', uuid: uuid.v4() },\n                        { _expanded: false, type: 'controls_whileUntil', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Math',\n                    color: '{!PrimaryColors.Math}',\n                    items: [\n                        { _expanded: false, type: 'math_number', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_arithmetic', uuid: uuid.v4() },\n                        { _expanded: false, type: 'math_single', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Text',\n                    color: '{!PrimaryColors.Text}',\n                    items: [\n                        { _expanded: false, type: 'text', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_length', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_print', uuid: uuid.v4() },\n                        { _expanded: false, type: 'text_join', uuid: uuid.v4() },\n                        { _expanded: false, type: 'colour_rgb', uuid: uuid.v4() }\n                    ]\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Variables',\n                    custom: 'VARIABLE',\n                    color: '{!PrimaryColors.Variable}',\n                    items: []\n                },\n                {\n                    uuid: uuid.v4(),\n                    name: 'Procedures',\n                    custom: 'PROCEDURE',\n                    color: '{!PrimaryColors.Procedure}',\n                    items: []\n                }\n            ]\n        }\n        return tb\n    }\n}\n\nexport const blocklyLoader = new BlocklyLoadManager()\n\nexport default function(loaders: { [index: string]: IBlockloadManager }) {\n    loaders[blocklyLoader.blockTag] = blocklyLoader\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport { IListItemData } from '@/lib/ICompilerRegistry'\nimport { KnownBlockTypes } from '@/lib/ICodeBlocks'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { blocklyLoader } from '@/lib/BlockloadManagers/BlocklyManager'\nimport { IOnChangeOrder, IOnReloadResourcesInfo } from './CodeBlocks.vue'\n\n@Component\nexport default class CodeBlocksContainer extends Vue {\n    frank = 'hello'\n    settingsMenu: boolean = false\n    highlighted: boolean = false\n\n    get types(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.Canvas'),\n                value: KnownBlockTypes.PLAYGROUND,\n            },\n            {\n                label: this.$l('CodeBlockContainer.DataBlock'),\n                value: KnownBlockTypes.DATA,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Text'),\n                value: KnownBlockTypes.TEXT,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Hidden'),\n                value: KnownBlockTypes.BLOCKHIDDEN,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Static'),\n                value: KnownBlockTypes.BLOCKSTATIC,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Block'),\n                value: KnownBlockTypes.BLOCK,\n            },\n            {\n                label: this.$l('CodeBlockContainer.Blockly'),\n                value: KnownBlockTypes.BLOCKLY,\n            },\n            {\n                label: this.$l('CodeBlockContainer.REPL'),\n                value: KnownBlockTypes.REPL,\n            },\n        ]\n    }\n    get alignments(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.Start'),\n                value: 'left',\n            },\n            {\n                label: this.$l('CodeBlockContainer.Center'),\n                value: 'center',\n            },\n            {\n                label: this.$l('CodeBlockContainer.End'),\n                value: 'right',\n            },\n        ]\n    }\n    get scriptVersions(): IListItemData[] {\n        return [\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_1'),\n                value: '100',\n            },\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_2'),\n                value: '101',\n            },\n            {\n                label: this.$l('CodeBlockContainer.ScriptVersion_3'),\n                value: '102',\n            },\n        ]\n    }\n\n    get positions(): IListItemData[] {\n        return this.block.appSettings.blocks.map((bl) => {\n            return {\n                label: `${bl.id + 1}`,\n                value: `${bl.id}`,\n            }\n        })\n    }\n\n    get isDeprecatedScriptVersion(): boolean {\n        return this.scriptVersion === '100'\n    }\n\n    get isExperimentalScriptVersion(): boolean {\n        return this.scriptVersion === '102'\n    }\n\n    // mounted() {\n    //     console.log('Mounted', this)\n    // }\n\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ default: false }) editMode!: boolean\n\n    validNumber(v: 'auto' | number): boolean | string {\n        //console.log(v, isNaN(v), v!='auto');\n        if (v != 'auto' && isNaN(v)) {\n            return \"Must be a valid Number or 'auto'.\"\n        }\n        return true\n    }\n    toggleExpanded(): void {\n        this.$CodeBlock.refreshAllCodeMirrors()\n        this.expanded = !this.expanded\n    }\n    moveUp(): void {\n        this.$emit('move-up', this.block.id)\n    }\n    moveDown(): void {\n        this.$emit('move-down', this.block.id)\n    }\n\n    get order(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.positions, this.block.id)\n    }\n\n    set order(val: IListItemData) {\n        const data: IOnChangeOrder = { id: this.block.id, newID: +val.value }\n        this.$emit('change-order', data)\n    }\n\n    showTypeInfoDialog(): void {\n        this.$q\n            .dialog({\n                title: this.$l('CodeBlockContainer.TypesCaption'),\n                message: this.$l('CodeBlockContainer.Types'),\n                html: true,\n                style: 'width:75%',\n            })\n            .onOk(() => {\n                // console.log('OK')\n            })\n            .onCancel(() => {\n                // console.log('Cancel')\n            })\n            .onDismiss(() => {\n                // console.log('I am triggered on both OK and Cancel')\n            })\n    }\n    removeBlock(): void {\n        const self = this\n        self.highlighted = true\n        this.$q\n            .dialog({\n                title: this.$l('CodeBlockContainer.Confirm'),\n                message: this.$l('CodeBlockContainer.DeleteQuestion'),\n                html: true,\n                ok: {\n                    push: true,\n                    color: 'negative',\n                    icon: 'warning',\n                },\n                cancel: {\n                    push: true,\n                    color: 'positive',\n                },\n                persistent: true,\n            })\n            .onOk(() => {\n                this.$emit('remove-block', this.block.id)\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                self.highlighted = false\n            })\n    }\n\n    get expanded(): boolean {\n        return this.block.expanded\n    }\n    set expanded(v: boolean) {\n        this.block.expanded = v\n    }\n\n    get canMoveUp(): boolean {\n        return this.block.id > 0\n    }\n    get canMoveDown(): boolean {\n        return !this.block.isLast\n    }\n\n    filteredCopy(objIn: object, extended: boolean = true, path: string = 'this'): object {\n        let obj = {}\n        Object.keys(objIn)\n            .filter(\n                (k) =>\n                    k.indexOf('appSettings') != 0 &&\n                    k.indexOf('$') != 0 &&\n                    k.indexOf('_') != 0 &&\n                    (!extended ||\n                        (k != 'obj' &&\n                            k != 'errors' &&\n                            k != 'content' &&\n                            k != 'firstLine' &&\n                            k != 'nextLine' &&\n                            k != 'lineCount' &&\n                            k != 'hasCode' &&\n                            k != 'isLast' &&\n                            k != 'readyCount' &&\n                            k != 'noContent' &&\n                            (this.block.type === KnownBlockTypes.BLOCKLY || k != 'blockly'))) &&\n                    k != 'uuid' &&\n                    k != 'scopeUUID' &&\n                    k != 'scopeSelector'\n            )\n            .forEach((k) => {\n                let v = objIn[k]\n                if (v !== undefined && v !== null && typeof v === 'object') {\n                    if (Array.isArray(v)) {\n                        v = v.map((item, nr) =>\n                            this.filteredCopy(item, false, path + '.' + k + `[${nr}]`)\n                        )\n                    } else {\n                        v = this.filteredCopy(v, false, path + '.' + k)\n                    }\n                }\n                obj[k] = v\n            })\n\n        return obj\n    }\n    get serializedOptions(): string {\n        return JSON.stringify(this.filteredCopy(this.block))\n    }\n    set serializedOptions(v: string) {}\n\n    get hasExtendedSettings(): boolean {\n        return (\n            this.type == KnownBlockTypes.PLAYGROUND ||\n            this.type == KnownBlockTypes.BLOCK ||\n            this.type == KnownBlockTypes.BLOCKLY\n        )\n    }\n    get isVersionedPlayground(): boolean {\n        return this.type == KnownBlockTypes.PLAYGROUND\n    }\n    get canSetLineNumbers() {\n        return this.type == KnownBlockTypes.BLOCK\n    }\n    get canHaveAlternativeContent() {\n        return this.type == KnownBlockTypes.BLOCK\n    }\n    get canDefinePlacement() {\n        return this.type == KnownBlockTypes.PLAYGROUND || this.type == KnownBlockTypes.BLOCKLY\n    }\n    get shouldAutoReset(): boolean {\n        return this.block.shouldAutoreset\n    }\n    set shouldAutoReset(v: boolean) {\n        this.$emit('auto-reset-change', {\n            shouldAutoreset: v,\n            id: this.block.id,\n        })\n    }\n    get shouldReloadResources(): boolean {\n        return this.block.shouldReloadResources\n    }\n    set shouldReloadResources(v: boolean) {\n        const data: IOnReloadResourcesInfo = {\n            shouldReloadResources: v,\n            id: this.block.id,\n        }\n        this.$emit('reload-resources-change', data)\n    }\n    get shouldGenerateTemplate(): boolean {\n        return this.block.generateTemplate\n    }\n    set shouldGenerateTemplate(v: boolean) {\n        this.$emit('generate-template-change', {\n            generateTemplate: v,\n            id: this.block.id,\n        })\n    }\n\n    get scriptVersion(): string {\n        if (\n            this.block === undefined ||\n            this.block.version === undefined ||\n            this.block.version == ''\n        ) {\n            return '100'\n        }\n        return this.block.version\n    }\n    get scriptVersionObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.scriptVersions, this.scriptVersion)\n    }\n    set scriptVersionObj(v: IListItemData) {\n        this.$emit('script-version-change', {\n            version: v.value,\n            id: this.block.id,\n        })\n    }\n\n    get canLoadResources(): boolean {\n        return +this.scriptVersion > 100\n    }\n\n    get hasAltComntent(): boolean {\n        return this.block.hasAlternativeContent\n    }\n    set hasAltComntent(v: boolean) {\n        if (v != this.block.hasAlternativeContent && v) {\n            this.$nextTick(() => {\n                setTimeout(function () {\n                    $('.CodeMirror')\n                        .toArray()\n                        .forEach((cm) => {\n                            const element = cm as any\n                            element.CodeMirror.refresh()\n                        })\n                }, 200)\n            })\n        }\n        this.block.hasAlternativeContent = v\n    }\n\n    get colorClass(): string {\n        const t = this.type\n        if (t == KnownBlockTypes.TEXT) {\n            return 'text-border'\n        } else if (t == KnownBlockTypes.PLAYGROUND) {\n            return 'playground-border'\n        } else if (t == KnownBlockTypes.DATA) {\n            return 'data-border'\n        } else if (t == KnownBlockTypes.BLOCK) {\n            return 'block-border'\n        } else if (t == KnownBlockTypes.BLOCKHIDDEN) {\n            return 'block-hidden-border'\n        } else if (t == KnownBlockTypes.BLOCKSTATIC) {\n            return 'block-static-border'\n        } else if (t == KnownBlockTypes.REPL) {\n            return 'repl-border'\n        }\n        return 'default-border'\n    }\n    get bgClass(): string {\n        if (this.highlighted) {\n            return 'highlightedCard'\n        }\n        return ''\n    }\n    get type(): KnownBlockTypes {\n        if (this.block.type == KnownBlockTypes.BLOCK) {\n            if (this.block.hidden) {\n                return KnownBlockTypes.BLOCKHIDDEN\n            }\n            if (this.block.static) {\n                return KnownBlockTypes.BLOCKSTATIC\n            }\n        }\n        return this.block.type\n    }\n    get typeObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.types, this.type)\n    }\n    set typeObj(val: IListItemData) {\n        const v = val.value\n        let ret = {\n            type: v.match(/([^-]*)/)![0],\n            hidden: v == KnownBlockTypes.BLOCKHIDDEN,\n            static: v == KnownBlockTypes.BLOCKSTATIC,\n            id: this.block.id,\n            hasCode: false,\n        }\n        ret.hasCode = ret.type == KnownBlockTypes.BLOCK\n\n        if (ret.type == KnownBlockTypes.PLAYGROUND && this.block.content === '' && this.editMode) {\n            if (this.block.scriptVersion == '100') {\n                this.block.content =\n                    '{\\n    init: function(canvasElement) {\\n\\n    },\\n    update: function(output, canvasElement) {\\n\\n    }\\n}'\n            } else {\n                this.block.content =\n                    '{\\n    init: function(canvasElement, outputElement, scope, runner) {\\n\\n    },\\n    addArgumentsTo(args) {},\\n    reset(canvasElement) {},\\n    update: function(txt, json, canvasElement, outputElement) {\\n\\n    }\\n}'\n            }\n        } else if (\n            ret.type == KnownBlockTypes.BLOCKLY &&\n            this.block.blockly.toolbox.categories.length === 0 &&\n            this.editMode\n        ) {\n            this.block.blockly.toolbox = blocklyLoader.defaultToolbox\n        }\n\n        this.$emit('type-change', ret)\n    }\n    get visibleLines(): number | 'auto' {\n        const v = this.block.visibleLines\n        if (v == 'auto' || isNaN(v)) {\n            return 'auto'\n        }\n        return v\n    }\n    set visibleLines(v: number | 'auto') {\n        if (v == 'auto' || isNaN(v)) {\n            v = 'auto'\n        }\n        console.log('set', v)\n\n        this.$emit('visible-lines-change', {\n            visibleLines: v,\n            id: this.block.id,\n        })\n    }\n\n    get width(): string {\n        return this.block.width\n    }\n    set width(v: string) {\n        this.$emit('placement-change', {\n            width: v,\n            height: this.block.height,\n            align: this.block.align,\n            id: this.block.id,\n        })\n    }\n    get height(): string {\n        return this.block.height\n    }\n    set height(v: string) {\n        this.$emit('placement-change', {\n            width: this.block.width,\n            height: v,\n            align: this.block.align,\n            id: this.block.id,\n        })\n    }\n    get align(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.alignments, this.block.align)\n    }\n    set align(v: IListItemData) {\n        this.$emit('placement-change', {\n            width: this.block.width,\n            height: this.block.height,\n            align: v.value,\n            id: this.block.id,\n        })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlockContainer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlockContainer.vue?vue&type=template&id=6bc47167&\"\nimport script from \"./CodeBlockContainer.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlockContainer.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlockContainer.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QPopupProxy from 'quasar/src/components/popup-proxy/QPopupProxy.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QSelect,QBtn,QPopupProxy,QInput,QToggle,QSlideTransition,QBanner,QItem,QItemSection,QIcon,QItemLabel});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row q-pa-none q-mb-md\"},[_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-card',{staticClass:\"q-mb-sm q-mr-sm-none q-mr-md-sm\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Language')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.languageHasCompiler,\"label\":_vm.$t('CodeBlocksSettings.AllowExec')},model:{value:(_vm.runCode),callback:function ($$v) {_vm.runCode=$$v},expression:\"runCode\"}})],1),_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.canContinousCompile,\"label\":_vm.$t('CodeBlocksSettings.ContinousCompile')},model:{value:(_vm.continuousCompile),callback:function ($$v) {_vm.continuousCompile=$$v},expression:\"continuousCompile\"}})],1),_c('div',{class:(\"col-xs-12 col-sm-\" + (_vm.runCode ? 6 : 12) + \" col-md-\" + (_vm.runCode ? 8 : 12) + \" \" + (_vm.runCode ? 'q-pr-md-sm' : ''))},[_c('q-select',{attrs:{\"options\":_vm.compiledLanguages,\"label\":_vm.$t('CodeBlocksSettings.Language')},model:{value:(_vm.compilerLanguageObj),callback:function ($$v) {_vm.compilerLanguageObj=$$v},expression:\"compilerLanguageObj\"}})],1),(_vm.runCode)?_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.compilerVersions,\"stack-label\":\"\",\"label\":_vm.$t('CodeBlocksSettings.CVersion')},scopedSlots:_vm._u([{key:\"selected\",fn:function(){return [_vm._v(\" \"+_vm._s(_vm.compilerVersion)+\" \"),(_vm.isDeprecated)?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"yellow\",\"text-color\":\"brown-10\",\"icon\":\"hourglass_disabled\"}}):_vm._e(),(_vm.isExperimental)?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"orange\",\"text-color\":\"white\",\"icon\":\"whatshot\"}}):_vm._e()]},proxy:true},{key:\"option\",fn:function(scope){return [_c('q-item',_vm._g(_vm._b({},'q-item',scope.itemProps,false),scope.itemEvents),[_c('q-item-section',[_c('q-item-label',[_vm._v(\" \"+_vm._s(scope.opt)+\" \"),(\n                                                    _vm.isDeprecatedVersion(\n                                                        _vm.compilerLanguage,\n                                                        scope.opt\n                                                    )\n                                                )?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"yellow\",\"text-color\":\"brown-10\",\"icon\":\"hourglass_disabled\"}}):_vm._e(),(\n                                                    _vm.isExperimentalVersion(\n                                                        _vm.compilerLanguage,\n                                                        scope.opt\n                                                    )\n                                                )?_c('q-avatar',{staticClass:\"q-ml-xs\",attrs:{\"rounded\":\"\",\"size\":\"xs\",\"color\":\"orange\",\"text-color\":\"white\",\"icon\":\"whatshot\"}}):_vm._e()],1)],1)],1)]}}],null,false,541447989),model:{value:(_vm.compilerVersion),callback:function ($$v) {_vm.compilerVersion=$$v},expression:\"compilerVersion\"}})],1):_vm._e(),_c('q-slide-transition',[(_vm.isExperimental)?_c('q-banner',{staticClass:\"bg-orange text-white col-12 q-mt-xs q-mb-md\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"whatshot\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.ExperimentalCompiler'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.ExperimentalCompilerDesc'))+\" \")])],1)],1)],1):_vm._e()],1),_c('q-slide-transition',[(_vm.isDeprecated)?_c('q-banner',{staticClass:\"bg-yellow-12 text-black col-12 q-mt-xs q-mb-md\",attrs:{\"rounded\":\"\",\"dense\":\"\"}},[_c('q-item',[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-icon',{staticStyle:{\"font-size\":\"3em\"},attrs:{\"name\":\"hourglass_disabled\"}})],1),_c('q-item-section',[_c('q-item-label',{attrs:{\"overline\":\"\"}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.DeprecatedCompiler'))+\" \")]),_c('q-item-label',[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.DeprecatedCompilerDesc'))+\" \")])],1)],1)],1):_vm._e()],1),(_vm.showMaxRuntime)?_c('div',{staticClass:\"col-12\"},[_c('q-input',{attrs:{\"rules\":[_vm.validNumber],\"label\":_vm.$t('CodeBlocksSettings.RunTime'),\"maxlength\":\"6\"},model:{value:(_vm.maxRuntime),callback:function ($$v) {_vm.maxRuntime=$$v},expression:\"maxRuntime\"}})],1):_vm._e(),(_vm.runCode && (_vm.accepstArguments || _vm.allowsMessagePassing))?_c('div',{staticClass:\"col-12 text-body2\"},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocksSettings.AllowArguments'))+\" \"),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showArgsInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.accepstArguments)?_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.canPersistentArguments,\"label\":_vm.$t('CodeBlocksSettings.PersistentArguments')},model:{value:(_vm.persistentArguments),callback:function ($$v) {_vm.persistentArguments=$$v},expression:\"persistentArguments\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showPersistentArgsInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.allowsMessagePassing)?_c('div',{staticClass:\"col-12\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.allowsMessagePassing,\"label\":_vm.$t('CodeBlocksSettings.MessagePassing')},model:{value:(_vm.messagePassing),callback:function ($$v) {_vm.messagePassing=$$v},expression:\"messagePassing\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showMessagesInfoDialog}})],1):_vm._e(),(_vm.runCode && _vm.allowsMessagePassing)?_c('div',{staticClass:\"col-12 q-pl-lg\"},[_c('q-toggle',{attrs:{\"disabled\":!_vm.allowsMessagePassing || !_vm.messagePassing,\"label\":_vm.$t('CodeBlocksSettings.KeepAlive')},model:{value:(_vm.keepAlive),callback:function ($$v) {_vm.keepAlive=$$v},expression:\"keepAlive\"}}),_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showAliveInfoDialog}})],1):_vm._e()],1)])],1)],1),_c('div',{staticClass:\"col-xs-12 col-sm-12 col-md-6\"},[_c('q-slide-transition',[(_vm.runCode)?_c('q-card',{staticClass:\"q-mb-sm q-mr-none\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Output')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-xs-12 col-md-6 col-12 q-pr-md-sm\"},[_c('q-input',{attrs:{\"rules\":[_vm.validNumber],\"label\":_vm.$t('CodeBlocksSettings.MaxCharacters'),\"maxlength\":\"6\"},model:{value:(_vm.maxCharacters),callback:function ($$v) {_vm.maxCharacters=$$v},expression:\"maxCharacters\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.outputParsers,\"label\":_vm.$t('CodeBlocksSettings.Parser')},model:{value:(_vm.outputParser),callback:function ($$v) {_vm.outputParser=$$v},expression:\"outputParser\"}})],1)])])],1):_vm._e()],1),_c('q-card',{staticClass:\"q-mr-none\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Themes')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-md-6 q-pr-md-sm\"},[_c('q-select',{attrs:{\"options\":_vm.themes,\"label\":_vm.$t('CodeBlocksSettings.TGeneral')},model:{value:(_vm.codeTheme),callback:function ($$v) {_vm.codeTheme=$$v},expression:\"codeTheme\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6\"},[_c('q-select',{attrs:{\"options\":_vm.themes,\"label\":_vm.$t('CodeBlocksSettings.TSolution')},model:{value:(_vm.solutionTheme),callback:function ($$v) {_vm.solutionTheme=$$v},expression:\"solutionTheme\"}})],1)])])],1),_c('q-slide-transition',[_c('q-card',{staticClass:\"q-mr-sm-none q-mt-sm\"},[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('CodeBlocksSettings.Libraries')))]),_c('q-card-section',{staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"row q-my-none q-py-none\",attrs:{\"dense\":\"\"}},[_c('div',{staticClass:\"col-xs-12 col-sm-12 q-my-none q-py-none\"},[_c('q-select',{attrs:{\"options\":_vm.domLibraries,\"multiple\":\"\",\"use-chips\":\"\",\"stack-label\":\"\",\"deletable-chips\":\"\",\"label\":_vm.$t('CodeBlocksSettings.DomLibs')},model:{value:(_vm.domLibrary),callback:function ($$v) {_vm.domLibrary=$$v},expression:\"domLibrary\"}})],1),(_vm.runCode && _vm.workerLibraries.length > 0)?_c('div',{staticClass:\"col-xs-12 col-sm-12 q-my-none q-py-none\"},[_c('q-select',{attrs:{\"options\":_vm.workerLibraries,\"multiple\":\"\",\"use-chips\":\"\",\"stack-label\":\"\",\"deletable-chips\":\"\",\"label\":_vm.$t('CodeBlocksSettings.WorkLibs')},model:{value:(_vm.workerLibrary),callback:function ($$v) {_vm.workerLibrary=$$v},expression:\"workerLibrary\"}})],1):_vm._e()])])],1)],1)],1),_c('div',{class:(\"col-xs-\" + (_vm.options.randomizer.active ? '12' : '12') + \" q-mt-sm\")},[_c('RandomizerSettings',{attrs:{\"options\":_vm.options}})],1),_c('div',{staticClass:\"col-xs-12\"},[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.serializedOptions),expression:\"serializedOptions\"}],staticClass:\"blocksettings\",attrs:{\"name\":(\"block_settings[\" + (this.options.id) + \"]\")},domProps:{\"value\":(_vm.serializedOptions)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.serializedOptions=$event.target.value}}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('q-card',[_c('q-card-section',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('RandomizerSettings.Caption'))+\" \"),_c('q-toggle',{model:{value:(_vm.options.randomizer.active),callback:function ($$v) {_vm.$set(_vm.options.randomizer, \"active\", $$v)},expression:\"options.randomizer.active\"}})],1),_c('q-slide-transition',[_c('q-card-section',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.options.randomizer.active),expression:\"options.randomizer.active\"}],staticClass:\"q-ml-md\"},[_c('div',{staticClass:\"tagList\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$t('RandomizerSettings.Available'))+\" \"),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"color\":\"primary\",\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"add\"},on:{\"click\":_vm.addTag}})],1),_c('div',{staticClass:\"row q-mb-sm\"},_vm._l((_vm.options.randomizer.knownTags),function(tag,i){return _c('div',{key:tag,class:(\"tagItem q-ml-sm \" + _vm.tagClass)},[_c('div',{staticClass:\"row no-wrap\"},[_c('div',{staticClass:\"tagInfo col-shrink\"},[_c('div',{staticClass:\"tagName\"},[_vm._v(_vm._s(tag))]),_c('div',{staticClass:\"tagString\"},[_vm._v(\"{:\"+_vm._s(tag)+\"}\")])]),_c('div',{staticClass:\"tagAction col-4 q-pl-sm text-right\"},[_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.removeTag(i)}}})],1)])])}),0)]),_c('div',{staticClass:\"tagList q-mt-lg\"},[_c('div',{staticClass:\"text-subtitle2\"},[_vm._v(\" \"+_vm._s(_vm.$t('RandomizerSettings.Sets'))+\" \"),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"color\":\"primary\",\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"add\"},on:{\"click\":_vm.addSet}})],1),_c('q-list',{staticClass:\"setList\"},_vm._l((_vm.options.randomizer.sets),function(s,i){return _c('q-item',{key:s.uuid},[_c('q-item-section',{attrs:{\"avatar\":\"\"}},[_c('q-avatar',{attrs:{\"color\":\"primary\",\"text-color\":\"white\",\"disabled\":!_vm.isVisible(i)}},[_vm._v(\" \"+_vm._s(i)+\" \")])],1),_c('q-item-section',[_c('q-item-label',[_vm._v(_vm._s(s.title))]),_c('q-item-label',{attrs:{\"caption\":\"\",\"lines\":\"2\"}},[_c('div',{staticClass:\"row q-mb-sm\"},_vm._l((s.values),function(tag){return _c('div',{key:tag.name,class:(\"tagItem q-ml-sm \" + _vm.tagClass)},[_c('div',{staticClass:\"row no-wrap\"},[_c('div',{staticClass:\"tagInfo col-shrink\"},[_c('div',{staticClass:\"tagName\"},[_vm._v(_vm._s(tag.tag))]),_c('div',{staticClass:\"tagString\"},[_vm._v(_vm._s(tag.value))])])])])}),0)])],1),_c('q-item-section',{attrs:{\"side\":\"\",\"top\":\"\"}},[_c('div',{staticClass:\"text-grey-8 q-gutter-xs\"},[_c('q-icon',{staticClass:\"q-mr-lg\",attrs:{\"name\":_vm.isCompleteSet(s) ? 'check' : 'warning',\"color\":_vm.isCompleteSet(s) ? 'positive' : 'negative',\"size\":\"24px\"}}),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":_vm.isVisible(i) ? 'visibility' : 'visibility_off'},on:{\"click\":function($event){return _vm.setVisible(i)}}},[_c('q-tooltip',{attrs:{\"delay\":200,\"offset\":[0, 10]}},[_vm._v(\" Use this set when running code in preview or editMode. \")])],1),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"edit\"}},[_c('RandomizerSetEditor',{attrs:{\"options\":_vm.options,\"tagSet\":_vm.getFullSet(s),\"nr\":i}})],1),_c('q-btn',{staticClass:\"gt-xs\",attrs:{\"size\":\"12px\",\"flat\":\"\",\"dense\":\"\",\"round\":\"\",\"icon\":\"delete\"},on:{\"click\":function($event){return _vm.removeSet(i)}}})],1)])],1)}),1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-popup-proxy',{attrs:{\"transition-show\":\"flip-up\",\"transition-hide\":\"flip-down\"},on:{\"before-show\":_vm.onShow}},[_c('div',{staticClass:\"q-pa-md\"},[_c('div',{staticClass:\"row no-wrap q-pt-none q-pb-md\"},[_c('div',{staticClass:\"text-overline\"},[_vm._v(_vm._s(_vm.$t('RandomizerSetEditor.Caption', { nr: _vm.nr })))])]),_vm._l((_vm.tagSet.values),function(tag){return _c('div',{key:tag.tag,staticClass:\"q-pl-md\"},[_c('q-input',{attrs:{\"label\":tag.tag},model:{value:(tag.value),callback:function ($$v) {_vm.$set(tag, \"value\", $$v)},expression:\"tag.value\"}})],1)})],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\n\n@Component\nexport default class RandomizerSetEditor extends Vue {\n    @Prop({ required: true }) options!: any\n    @Prop({ required: true }) tagSet!: IRandomizerSet\n    @Prop({ required: true }) nr!: number\n\n    get tags(): string[] {\n        return this.tagSet.values.map((v) => v.tag)\n    }\n\n    onShow(o) {\n        this.tagSet.values = this.tagSet.values.filter(\n            (v) => this.options.randomizer.knownTags.indexOf(v.tag) >= 0\n        )\n        this.options.randomizer.knownTags.forEach((t) => {\n            if (this.tagSet.values.find((v) => v.tag == t) === undefined) {\n                this.tagSet.values.push({\n                    tag: t,\n                    value: '',\n                })\n            }\n        })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RandomizerSetEditor.vue?vue&type=template&id=7b045cf1&\"\nimport script from \"./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./RandomizerSetEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QPopupProxy from 'quasar/src/components/popup-proxy/QPopupProxy.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QPopupProxy,QInput});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport RandomizerSetEditor from '@/components/RandomizerSetEditor.vue'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { ICodeBlockSettingsOptions } from '@/components/CodeBlocksSettings.vue'\n\n@Component({ components: { RandomizerSetEditor } })\nexport default class RandomizerSettings extends Vue {\n    _newTagName: string = ''\n\n    @Prop({ required: true }) options!: ICodeBlockSettingsOptions\n\n    get tagClass(): string {\n        return Vue.$tagger.className.rnd + ' tag-mark-start tag-mark-end tag-mark-shadow'\n    }\n\n    isVisible(nr: number): boolean {\n        return nr == this.options.randomizer.previewIndex\n    }\n    setVisible(nr: number): void {\n        this.options.randomizer.previewIndex = nr\n    }\n    isValidTag(tag: string): boolean {\n        return this.options.randomizer.knownTags.find(t => t == tag) !== undefined\n    }\n    isCompleteSet(s: IRandomizerSet): boolean {\n        if (s.values.filter(v => this.options.randomizer.knownTags.indexOf(v.tag) < 0).length > 0) {\n            return false\n        }\n        if (\n            this.options.randomizer.knownTags.filter(\n                t => s.values.find(v => v.tag == t) === undefined\n            ).length > 0\n        ) {\n            return false\n        }\n        return true\n    }\n    getFullSet(s: IRandomizerSet): IRandomizerSet {\n        return s\n    }\n    removeSet(nr: number): void {\n        this.options.randomizer.sets.splice(nr, 1)\n    }\n    addSet(): void {\n        this.options.randomizer.sets.push({ uuid: this.$uuid.v4(), values: [] })\n    }\n    removeTag(nr: number): void {\n        this.options.randomizer.knownTags.splice(nr, 1)\n    }\n    addTag(): void {\n        this.$q\n            .dialog({\n                title: 'Create Tag',\n                message: 'This will generate a new randomizer-Tag with the below name.',\n                html: true,\n                persistent: true,\n                prompt: {\n                    model: 'tag_name',\n                    type: 'text'\n                },\n                ok: {\n                    push: true\n                },\n                cancel: {\n                    flat: true,\n                    color: 'gray'\n                }\n            })\n            .onOk(data => {\n                data = data.replace(/\\W/g, '_')\n                //have this name\n                if (this.options.randomizer.knownTags.filter(t => t == data).length > 0) {\n                    let ct = 1\n                    const odata = data\n                    do {\n                        data = odata + '_' + ct\n                        ct++\n                    } while (this.options.randomizer.knownTags.filter(t => t == data).length > 0)\n                }\n                this.options.randomizer.knownTags.push(data)\n            })\n            .onCancel(() => {})\n            .onDismiss(() => {\n                //self.highlighted = false;\n            })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RandomizerSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RandomizerSettings.vue?vue&type=template&id=8b99c0d6&scoped=true&\"\nimport script from \"./RandomizerSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./RandomizerSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./RandomizerSettings.vue?vue&type=style&index=0&id=8b99c0d6&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8b99c0d6\",\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QList from 'quasar/src/components/item/QList.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QToggle,QSlideTransition,QBtn,QList,QItem,QItemSection,QAvatar,QItemLabel,QIcon,QTooltip});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport RandomizerSettings from '@/components/RandomizerSettings.vue'\nimport { IListItemData, ICompilerID } from '@/lib/ICompilerRegistry'\nimport { CodeOutputTypes, IRandomizerSettings } from '@/lib/ICodeBlocks'\n\nexport interface ICodeBlockSettingsOptions {\n    language: string\n    compiler: ICompilerID\n    executionTimeout: number\n    maxCharacters: number\n    runCode: boolean\n    domLibs: string[]\n    workerLibs: string[]\n    id: number\n    codeTheme: string\n    solutionTheme: string\n    outputParser: CodeOutputTypes\n    randomizer: IRandomizerSettings\n    continuousCompilation: boolean\n    persistentArguments: boolean\n    messagePassing: boolean\n    keepAlive: boolean\n}\n\n@Component({ components: { RandomizerSettings } })\nexport default class CodeBlocksSettings extends Vue {\n    get themes(): IListItemData[] {\n        return [\n            { label: 'Solarized', value: 'solarized light' },\n            { label: 'Solarized (dark)', value: 'solarized dark' },\n            { label: 'Base16 (dark)', value: 'base16-dark' },\n            { label: 'Base16 (light)', value: 'base16-light' },\n            { label: 'Duotone (dark)', value: 'duotone-dark' },\n            { label: 'Duotone (light)', value: 'duotone-light' },\n            { label: 'XQ (dark)', value: 'xq-dark' },\n            { label: 'XQ (light)', value: 'xq-light' },\n            { label: 'Blackboard', value: 'blackboard' },\n            { label: 'neo', value: 'neo' },\n            { label: 'mbo', value: 'mbo' },\n            { label: 'mdn like', value: 'mdn-like' },\n        ]\n    }\n\n    get outputParsers(): IListItemData[] {\n        return [\n            { label: this.$l('CodeBlocksSettings.PAutomatic'), value: CodeOutputTypes.AUTO },\n            { label: this.$l('CodeBlocksSettings.PText'), value: CodeOutputTypes.TEXT },\n            { label: this.$l('CodeBlocksSettings.PJSON'), value: CodeOutputTypes.JSON },\n            { label: this.$l('CodeBlocksSettings.PData'), value: CodeOutputTypes.DATA },\n            { label: this.$l('CodeBlocksSettings.PMagic'), value: CodeOutputTypes.MAGIC },\n        ]\n    }\n    @Prop({ required: true }) options!: ICodeBlockSettingsOptions\n\n    validNumber(v: any): boolean | string {\n        if (isNaN(v)) {\n            return 'Must be a valid Number.'\n        }\n        return true\n    }\n\n    get serializedOptions(): string {\n        const o: any = {\n            ...this.options,\n        }\n        o.randomizer = {\n            ...this.options.randomizer,\n        }\n        o.randomizer.sets = this.options.randomizer.sets.map((s) => {\n            let values = {}\n            s.values.forEach((v) => (values[v.tag] = v.value))\n            return values\n        })\n        return JSON.stringify(o)\n    }\n    set serializedOptions(v: string) {}\n\n    get domLibraries(): IListItemData[] {\n        return this.$compilerRegistry.domLibraries\n    }\n    get compiledLanguages(): IListItemData[] {\n        if (this.options.runCode === false) {\n            return this.languages\n        }\n        return this.$compilerRegistry.languages\n    }\n    get workerLibraries(): IListItemData[] {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: this.compilerLanguage,\n            version: this.compilerVersion,\n        })\n        if (c === undefined || c.libraries === undefined) {\n            return []\n        }\n        return c.libraries.map((l) => {\n            return { label: l.displayName, value: l.key }\n        })\n    }\n    get languages(): IListItemData[] {\n        return this.$CodeBlock.knownLanguages()\n    }\n    get compilerVersions(): string[] {\n        return this.$compilerRegistry.versionsForLanguage(this.compilerLanguage)\n    }\n\n    isExperimentalVersion(language: string, version: string): boolean {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: language,\n            version: version,\n        })\n        if (c === undefined) {\n            return false\n        }\n        return c.experimental\n    }\n\n    isDeprecatedVersion(language: string, version: string): boolean {\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: language,\n            version: version,\n        })\n        if (c === undefined) {\n            return false\n        }\n        return c.deprecated\n    }\n\n    get isExperimental(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.experimental\n        }\n        return false\n    }\n\n    get isDeprecated(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.deprecated\n        }\n        return false\n    }\n\n    get languageHasCompiler(): boolean {\n        if (this.runCode) {\n            return true\n        }\n        const c = this.$compilerRegistry.getCompiler({ languageType: this.compilerLanguage })\n        return c !== undefined\n    }\n    get compilerLanguage(): string {\n        if (this.options.runCode === false) {\n            return this.options.language\n        }\n        return this.options.compiler.languageType\n    }\n    get compilerLanguageObj(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.compiledLanguages, this.compilerLanguage)\n    }\n    set compilerLanguageObj(v: IListItemData) {\n        if (this.options.runCode === false) {\n            this.$emit('language-change', v.value)\n        }\n        this.$emit('compiler-change', v.value)\n    }\n\n    get compilerVersion(): string {\n        return this.options.compiler.version\n    }\n    set compilerVersion(v: string) {\n        this.$emit('compiler-version-change', v)\n    }\n\n    get runCode(): boolean {\n        return this.options.runCode\n    }\n    set runCode(v: boolean) {\n        this.$emit('run-state-change', v)\n    }\n\n    get maxRuntime(): number {\n        return this.options.executionTimeout\n    }\n    set maxRuntime(v: number) {\n        this.$emit('timeout-change', v)\n    }\n\n    get maxCharacters(): number {\n        return this.options.maxCharacters\n    }\n    set maxCharacters(v: number) {\n        this.$emit('character-limit-change', v)\n    }\n\n    get domLibrary(): IListItemData[] {\n        return this.options.domLibs\n            .map((d) => this.domLibraries.find((k) => k.value == d))\n            .filter((v) => v !== undefined) as IListItemData[]\n    }\n    set domLibrary(v: IListItemData[]) {\n        this.$emit(\n            'dom-libs-change',\n            v.map((vv) => vv.value)\n        )\n    }\n\n    get workerLibrary(): IListItemData[] {\n        return this.options.workerLibs\n            .map((d) => this.workerLibraries.find((k) => k.value == d))\n            .filter((v) => v !== undefined) as IListItemData[]\n    }\n    set workerLibrary(v: IListItemData[]) {\n        this.$emit(\n            'worker-libs-change',\n            v.map((vv) => vv.value)\n        )\n    }\n\n    get solutionTheme(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.themes, this.options.solutionTheme)\n    }\n    set solutionTheme(v: IListItemData) {\n        this.$emit('theme-change', {\n            solution: v.value,\n            code: this.options.codeTheme,\n        })\n    }\n\n    get codeTheme(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.themes, this.options.codeTheme)\n    }\n    set codeTheme(v: IListItemData) {\n        this.$emit('theme-change', {\n            solution: this.options.solutionTheme,\n            code: v.value,\n        })\n    }\n\n    get outputParser(): IListItemData {\n        return Vue.$CodeBlock.itemForValue(this.outputParsers, this.options.outputParser)\n    }\n    set outputParser(v: IListItemData) {\n        this.$emit('output-parser-change', v.value)\n    }\n\n    get continuousCompile(): boolean {\n        return this.options.continuousCompilation\n    }\n    set continuousCompile(v: boolean) {\n        this.$emit('continuous-compile-change', v)\n    }\n    get compiler(): ICompilerID {\n        return this.options.compiler\n    }\n    get canContinousCompile(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        console.d(\n            'Continuous Compile - ',\n            'can',\n            cmp,\n            cmp ? cmp.allowsContinousCompilation : false,\n            cmp ? cmp.canRun : false\n        )\n        if (cmp) {\n            console.d('Continuous Compile - ', 'can', cmp.allowsContinousCompilation && cmp.canRun)\n            return cmp.allowsContinousCompilation && cmp.canRun\n        }\n        return false\n    }\n\n    get allowsMessagePassing(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d('Message Passing - ', 'can', cmp.allowsContinousCompilation && cmp.canRun)\n            return cmp.allowsMessagePassing && cmp.canRun\n        }\n        return false\n    }\n\n    get messagePassing(): boolean {\n        return this.options.messagePassing\n    }\n    set messagePassing(v: boolean) {\n        this.$emit('message-passing-change', v)\n    }\n\n    get keepAlive(): boolean {\n        return this.options.keepAlive\n    }\n    set keepAlive(v: boolean) {\n        this.$emit('keep-alive-change', v)\n    }\n\n    get showMaxRuntime(): boolean {\n        return this.runCode && !(this.keepAlive && this.messagePassing)\n    }\n\n    get allowsREPL(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d('REPL - ', 'can', cmp.allowsREPL && cmp.allowsMessagePassing && cmp.canRun)\n            return cmp.allowsREPL && cmp.allowsMessagePassing && cmp.canRun\n        }\n        return false\n    }\n\n    get persistentArguments(): boolean {\n        return this.options.persistentArguments\n    }\n    set persistentArguments(v: boolean) {\n        this.$emit('persistent-arguments-change', v)\n    }\n    get canPersistentArguments(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            console.d(\n                'Persistent Arguments - ',\n                'can',\n                cmp.acceptsJSONArgument && cmp.allowsPersistentArguments && cmp.canRun\n            )\n            return cmp.acceptsJSONArgument && cmp.allowsPersistentArguments && cmp.canRun\n        }\n        return false\n    }\n\n    get accepstArguments(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.acceptsJSONArgument\n        }\n        return false\n    }\n    showArgsInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.AllowArgumentsCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.AllowArgumentsHintJava'\n                : 'CodeBlocksSettings.AllowArgumentsHint'\n        )\n    }\n    showPersistentArgsInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.UsePersistentArgumentsCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.UsePersistentArgumentsHintJava'\n                : 'CodeBlocksSettings.UsePersistentArgumentsHint'\n        )\n    }\n    showMessagesInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.AllowMessagePassingCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.AllowMessagePassingHintJava'\n                : 'CodeBlocksSettings.AllowMessagePassingHint'\n        )\n    }\n    showAliveInfoDialog(): void {\n        this.showInfoDialog(\n            'CodeBlocksSettings.KeepAliveCaption',\n            this.compiler.languageType == 'java'\n                ? 'CodeBlocksSettings.KeepAliveHintJava'\n                : 'CodeBlocksSettings.KeepAliveHint'\n        )\n    }\n\n    showInfoDialog(title, message): void {\n        this.$q\n            .dialog({\n                title: this.$l(title),\n                message: this.$l(message),\n                html: true,\n                style: 'width:75%',\n            })\n            .onOk(() => {\n                // console.log('OK')\n            })\n            .onCancel(() => {\n                // console.log('Cancel')\n            })\n            .onDismiss(() => {\n                // console.log('I am triggered on both OK and Cancel')\n            })\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlocksSettings.vue?vue&type=template&id=644cb51f&scoped=true&\"\nimport script from \"./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocksSettings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlocksSettings.vue?vue&type=style&index=0&id=644cb51f&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"644cb51f\",\n  null\n  \n)\n\nexport default component.exports\nimport QCard from 'quasar/src/components/card/QCard.js';\nimport QCardSection from 'quasar/src/components/card/QCardSection.js';\nimport QToggle from 'quasar/src/components/toggle/QToggle.js';\nimport QSelect from 'quasar/src/components/select/QSelect.js';\nimport QAvatar from 'quasar/src/components/avatar/QAvatar.js';\nimport QItem from 'quasar/src/components/item/QItem.js';\nimport QItemSection from 'quasar/src/components/item/QItemSection.js';\nimport QItemLabel from 'quasar/src/components/item/QItemLabel.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QCard,QCardSection,QToggle,QSelect,QAvatar,QItem,QItemSection,QItemLabel,QSlideTransition,QBanner,QIcon,QInput,QBtn});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editMode),expression:\"editMode\"}],staticClass:\"blocksEditorPanelContainer\",style:((\"width:\" + _vm.width + \"px\"))},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.block !== null),expression:\"block !== null\"}],staticClass:\"blocksEditorPanelLeft\"},[_c('q-btn',{staticClass:\"expander\",attrs:{\"icon\":_vm.expanded ? 'chevron_right' : 'chevron_left',\"size\":\"sm\",\"unelevated\":\"\",\"align\":\"center\",\"color\":\"blue-grey-4\"},on:{\"click\":_vm.onExpandClick}}),_c('CodeBlock',{attrs:{\"block\":_vm.saveBlock,\"theme\":_vm.themeForBlock(_vm.block),\"mode\":\"\",\"visibleLines\":_vm.visibleLinesNow,\"editMode\":true,\"muteReadyState\":true,\"isBookmarkPanel\":true,\"namePrefix\":\"panel_\"},on:{\"code-changed-in-edit-mode\":_vm.onCodeChange}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport { BlockData } from '../lib/codeBlocksManager'\nimport {\n    IBlockData,\n    KnownBlockTypes,\n    ICodeBlockDataState,\n    CodeExpansionType,\n} from '../lib/ICodeBlocks'\n\ninterface IBlockDataExtended extends IBlockData {\n    firstLine: number\n    actualContent: string\n    actualAltContent: string\n}\n@Component({ components: { CodeBlock } })\nexport default class CodePanel extends Vue {\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: number | 'auto'\n    @Prop({ required: true }) block!: BlockData | null\n    @Prop({ default: 400 }) panelWidth!: number\n\n    get saveBlock(): IBlockData {\n        if (\n            this.block !== null &&\n            this.block !== undefined &&\n            this.block.content !== null &&\n            this.block.content !== undefined\n        ) {\n            return this.block\n        }\n        const ret: IBlockDataExtended = {\n            hasCode: false,\n            type: KnownBlockTypes.BLOCKSTATIC,\n            content: '',\n            alternativeContent: '',\n            noContent: true,\n            id: -1,\n            uuid: '',\n            parentID: -2,\n            expanded: true,\n            codeExpanded: CodeExpansionType.AUTO,\n            obj: null,\n            version: '',\n            readyCount: 0,\n            errors: [],\n            visibleLines: 'auto',\n            hasAlternativeContent: false,\n            shouldAutoreset: false,\n            shouldReloadResources: false,\n            generateTemplate: true,\n            firstLine: 1,\n            actualContent: '',\n            actualAltContent: '',\n            width: '100%',\n            height: '200px',\n            align: 'center',\n            readonly: true,\n            static: true,\n            hidden: false,\n            themeForCodeBlock: '',\n            lineCountHint: -0,\n            name: '',\n            getThemeForBlock: (bl: ICodeBlockDataState) => {\n                return ''\n            },\n            blockly: {\n                _blockErrors: [],\n                useOverride: false,\n                toolbox: {\n                    categories: [],\n                },\n                showControls: false,\n                toolboxOverride: '',\n                blocks: [],\n            },\n        }\n        return ret\n    }\n\n    get visibleLinesNow() {\n        if (this.visibleLines === 'auto') {\n            return 'auto'\n        }\n        if (this.visibleLines <= 2) {\n            return 2\n        }\n        return this.visibleLines\n    }\n    onCodeChange() {}\n\n    get width() {\n        if (this.expanded) {\n            return 2 * this.panelWidth\n        }\n        return this.panelWidth\n    }\n\n    expanded: boolean = false\n    onExpandClick() {\n        this.expanded = !this.expanded\n    }\n\n    themeForBlock(bl: BlockData | null): string {\n        if (bl === null || bl === undefined) {\n            return ''\n        }\n        return bl.themeForCodeBlock\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePanel.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodePanel.vue?vue&type=template&id=f34c54ee&scoped=true&\"\nimport script from \"./CodePanel.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodePanel.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodePanel.vue?vue&type=style&index=0&id=f34c54ee&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f34c54ee\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('PlaygroundCanvas',{key:_vm.runCount,ref:\"playgroundContainer\",attrs:{\"output\":_vm.finalOutputObject.initialOutput,\"obj\":_vm.block.obj,\"block\":_vm.block,\"eventHub\":_vm.eventHub,\"tagSet\":_vm.tagSet,\"data-question\":_vm.block.parentID,\"runner\":_vm.emitRun},on:{\"canvas-change\":_vm.onCanvasChange,\"did-init\":_vm.onDidInit}}),_c('div',{staticClass:\"row justify-end\"},[(_vm.editMode)?_c('q-btn-group',{staticClass:\"q-mb-sm\",attrs:{\"rounded\":\"\"}},[_c('q-btn',{attrs:{\"color\":_vm.isExpandedAuto ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Auto\",\"icon\":\"video_label\"},on:{\"click\":_vm.setExpandedAuto}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedLarge ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Large\",\"icon\":\"call_to_action\"},on:{\"click\":_vm.setExpandedLarge}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedTiny ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Small\",\"icon\":\"visibility_off\"},on:{\"click\":_vm.setExpandedTiny}})],1):_vm._e()],1),_c('q-slide-transition',[(_vm.editMode)?_c('CodeBlock',{attrs:{\"block\":_vm.block,\"theme\":_vm.options.theme,\"mode\":_vm.options.mode,\"visibleLines\":_vm.visibleLinesNow,\"editMode\":this.editMode,\"muteReadyState\":true},on:{\"code-changed-in-edit-mode\":_vm.onCodeChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row ma-0 pa-0 block-playground\",attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id}},[(_vm.block.generateTemplate)?_c('div',{class:(\"col-12 text-\" + (_vm.block.align))},[_c('div',{ref:\"innerPlaygroundContainer\",staticClass:\"playground\",style:((\"width:\" + (_vm.block.width) + \";height:\" + (_vm.block.height))),attrs:{\"data-question\":_vm.block.parentID,\"data-nr\":_vm.block.id}},[_vm._v(\" \"+_vm._s(_vm.output)+\" \")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { IRandomizerSet } from '@/lib/ICodeBlocks'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { IScriptBlock } from '@/lib/IScriptBlock'\n\n@Component\nexport default class PlaygroundCanvas extends Vue {\n    @Prop() output: string = ''\n    @Prop({ required: true }) obj!: IScriptBlock\n    @Prop({ required: true }) block!: BlockData\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop({ default: () => {} }) runner!: () => void\n    @Prop() tagSet?: IRandomizerSet\n\n    get canvas(): HTMLElement {\n        return this.$refs.innerPlaygroundContainer as HTMLElement\n    }\n\n    whenMounted(): void {\n        if (this.obj) {\n            console.d('Will Init', this.canvas, $(this.canvas).css('background-color'))\n\n            this.$compilerRegistry.loadLibraries(this.block.domLibs, () => {\n                this.$nextTick(() => {\n                    this.$nextTick(() => {\n                        this.obj.resetResources()\n                        this.obj.resetBlockData(this.block.appSettings.blocks)\n                        this.obj.rebuild() //we need to rebuild the script to make sure its context is the current state of the DOM\n                        this.obj.init($(this.canvas), this.block.scope, this.runner)\n                        this.$emit('did-init', this.canvas)\n                    })\n                })\n            })\n        }\n    }\n\n    mounted() {\n        if (this.eventHub) {\n            this.eventHub.$on('all-mounted', this.whenMounted)\n        } else {\n            this.whenMounted()\n        }\n\n        this.$emit('canvas-change', this.canvas)\n    }\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('all-mounted')\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./PlaygroundCanvas.vue?vue&type=template&id=d7a0c6aa&scoped=true&\"\nimport script from \"./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"\nexport * from \"./PlaygroundCanvas.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./PlaygroundCanvas.vue?vue&type=style&index=0&id=d7a0c6aa&lang=sass&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d7a0c6aa\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport codemirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\n//helper to reset the canvas area if needed\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport PlaygroundCanvas from '@/components/PlaygroundCanvas.vue'\nimport BaseBlock from '@/components/BaseBlock.vue'\nconst PlaygroundCanvasCtor = Vue.extend(PlaygroundCanvas)\n\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { IRandomizerSet, CodeExpansionType } from '@/lib/ICodeBlocks'\nimport { IScriptOutputObject } from '@/lib/IScriptBlock'\n\nexport interface ICodePlaygroundOptions {\n    mode: string\n    theme: string\n    lineNumbers: boolean\n    line: boolean\n    tabSize: number\n    indentUnit: number\n    autoCloseBrackets: boolean\n    readOnly: boolean\n    firstLineNumber: number\n    gutters: string[]\n}\n\n@Component({\n    components: { PlaygroundCanvas, CodeBlock },\n})\nexport default class CodePlayground extends BaseBlock {\n    @Prop({ required: true }) finalOutputObject!: IScriptOutputObject\n    @Prop({\n        required: true,\n        validator: function (b) {\n            if (!b.obj) {\n                return false\n            }\n            return true\n        },\n    })\n    block!: BlockData\n\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: 'auto' | string\n    @Prop({ default: 'base16-dark' }) theme!: string\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop() tagSet?: IRandomizerSet\n\n    get originalMode(): boolean {\n        if (this.block.obj === null) {\n            return false\n        }\n        return this.block.obj.requestsOriginalVersion()\n    }\n\n    get options(): ICodePlaygroundOptions {\n        return {\n            // codemirror options\n            mode: this.$CodeBlock.mimeType('javascript'),\n            theme: this.theme,\n            lineNumbers: true,\n            line: true,\n            tabSize: 4,\n            indentUnit: 4,\n            autoCloseBrackets: true,\n            readOnly: !this.editMode,\n            firstLineNumber: 1,\n            gutters: ['diagnostics', 'CodeMirror-linenumbers'],\n        }\n    }\n    get visibleLinesNow(): 'auto' | string {\n        if (this.block.codeExpanded == CodeExpansionType.TINY) {\n            return '2.4'\n        } else if (this.block.codeExpanded == CodeExpansionType.LARGE) {\n            return '33.4'\n        }\n        return 'auto'\n    }\n    created() {\n        this.eventHub.$on('before-run', this.resetBeforeRun)\n        this.eventHub.$on('render-diagnostics', this.updateErrors)\n    }\n    mounted() {\n        const hasErrors = this.block && this.block.obj && this.block.obj.err.length > 0\n        if (hasErrors) {\n            this.updateErrors()\n        }\n        this.eventHub.$on('output-updated', this.onFinalOutputObject)\n    }\n    beforeDestroy() {\n        this.eventHub.$off('before-run', this.resetBeforeRun)\n        this.eventHub.$off('render-diagnostics', this.updateErrors)\n        this.eventHub.$off('output-updated', this.onFinalOutputObject)\n    }\n    isPreparingRun: boolean = false\n    lastRun: Date = new Date()\n    runCount: number = 0\n    canvas: HTMLElement | undefined = undefined\n    needsCodeRebuild: boolean = false\n    initAndRebuildErrors: any[] = []\n\n    get isExpandedLarge(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.LARGE\n    }\n    get isExpandedTiny(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.TINY\n    }\n    get isExpandedAuto(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.AUTO\n    }\n    setExpandedLarge(): void {\n        this.setExpanded(CodeExpansionType.LARGE)\n    }\n    setExpandedTiny(): void {\n        this.setExpanded(CodeExpansionType.TINY)\n    }\n    setExpandedAuto(): void {\n        this.setExpanded(CodeExpansionType.AUTO)\n    }\n    setExpanded(val: CodeExpansionType): void {\n        this.block.codeExpanded = val\n\n        if (this.block.codeExpanded != CodeExpansionType.TINY) {\n            this.$CodeBlock.refreshAllCodeMirrors()\n        }\n    }\n    updateErrors(): boolean {\n        this.block.errors = []\n        if (this.block.obj === null) {\n            return false\n        }\n\n        this.block.obj.err = this.block.obj.err.concat(this.initAndRebuildErrors)\n        this.block.obj.err.forEach((e) => {\n            let err = {\n                start: { line: e.line, column: e.column },\n                end: { line: e.line, column: e.column + 1 },\n                message: e.msg,\n                severity: Vue.$SEVERITY_ERROR,\n            }\n            if (e.line === undefined) {\n                err.start = { line: 1, column: -1 }\n                err.end = { line: 1, column: -1 }\n            } else if (e.column === undefined) {\n                err.start = { line: e.line, column: -1 }\n                err.end = { line: e.line, column: -1 }\n            }\n            this.block.errors.push(err)\n        })\n\n        if (this.block.obj.err.length > 0 && this.editMode) {\n            this.needsCodeRebuild = true\n            return true\n        } else {\n            return false\n        }\n    }\n    resetBeforeRun(): void {\n        const rebuildCode = this.editMode && (this.needsCodeRebuild || this.tagSet !== undefined)\n        let reInitCode = rebuildCode\n        let onNextTick = false\n        if (this.block && this.block.obj) {\n            if (this.block.shouldAutoreset || rebuildCode) {\n                if (this.canvas !== undefined) {\n                    console.log(\n                        'Will Re-Initialize',\n                        this.canvas,\n                        $(this.canvas).css('background-color')\n                    )\n                } else {\n                    console.log('Will Re-Initialize', 'Without Canvas')\n                }\n                this.lastRun = new Date()\n                this.runCount++\n                reInitCode = true\n                onNextTick = true\n            } else {\n                const self = this\n                this.$nextTick(() => {\n                    //console.log(\"Will Reset\", this.canvas, $(this.canvas).css('background-color'));\n                    if (self.block.obj !== null && self.canvas !== undefined) {\n                        self.block.obj.reset($(self.canvas))\n                    }\n                    self.updateErrors()\n                })\n            }\n        }\n\n        if (rebuildCode) {\n            this.initAndRebuildErrors = []\n\n            if (this.block.obj != null) {\n                this.block.obj.rebuild(this.block.actualContent())\n                if (this.updateErrors()) {\n                    this.initAndRebuildErrors = this.block.obj.err\n                    this.block.obj.invalidate()\n                    return\n                }\n            }\n\n            reInitCode = true\n        }\n\n        if (reInitCode) {\n            this.initAndRebuildErrors = []\n            let doInit = () => {\n                console.i('!!! DO INIT !!!')\n                if (this.block.obj !== null) {\n                    const canvas: any = $(this.canvas as HTMLElement)\n                    const scope: any = this.block.scope\n                    if (this.block.shouldReloadResources) {\n                        this.block.obj.resetResources()\n                    }\n                    this.block.obj.resetBlockData(this.block.appSettings.blocks)\n                    this.block.obj.init(\n                        canvas as JQuery<HTMLElement>,\n                        scope as JQuery<HTMLElement>,\n                        this.emitRun\n                    )\n                    if (this.updateErrors()) {\n                        this.initAndRebuildErrors = this.block.obj.err\n                        this.block.obj.invalidate()\n                        return false\n                    }\n                    return true\n                } else {\n                    return false\n                }\n            }\n            if (onNextTick) {\n                this.$nextTick(doInit)\n            } else {\n                if (!doInit()) {\n                    return\n                }\n            }\n        }\n    }\n    emitRun() {\n        this.$emit('run', this.block)\n    }\n    onCanvasChange(can) {\n        this.canvas = can\n        if (this.editMode) {\n            this.updateErrors()\n        }\n        //console.log(\"Changed Canvas\", can, $(can).css('background-color'));\n    }\n    onCodeChange(newCode: string): void {\n        if (this.editMode) {\n            this.needsCodeRebuild = true\n        }\n    }\n    onDidInit(): void {\n        this.updateErrors()\n    }\n\n    //we emit an event to the global event hub\n    //@Watch('finalOutputObject')\n    onFinalOutputObject(val) {\n        const initialOutput = val.output\n\n        console.d('onFinalOutputObject', val, this.block.obj)\n        if (this.block.obj !== null) {\n            this.block.obj.err = []\n            try {\n                if (val.parseError != null) {\n                    if (\n                        !this.block.obj.onParseError(initialOutput, val.parseError) &&\n                        this.editMode\n                    ) {\n                        let jStr = initialOutput\n                        if (val.parseError.parsedString !== undefined) {\n                            jStr = val.parseError.parsedString\n                        }\n                        jStr = jStr.replace(/</g, '&lt;')\n\n                        this.$q\n                            .dialog({\n                                title: this.$l('CodePlayground.InvalidJson'),\n                                message:\n                                    '<span class=\"text-caption jsonErrTitle\">' +\n                                    this.$t('CodePlayground.Output') +\n                                    '</span><div class=\"jsonErrObj\">' +\n                                    jStr +\n                                    '</div>\\n<span class=\"text-caption jsonErrTitle\">' +\n                                    this.$t('CodePlayground.Message') +\n                                    '</span><div class=\"jsonErr\">' +\n                                    val.parseError +\n                                    '</div>',\n                                html: true,\n                            })\n                            .onOk(() => {\n                                // console.log('OK')\n                            })\n                            .onCancel(() => {\n                                // console.log('Cancel')\n                            })\n                            .onDismiss(() => {\n                                // console.log('I am triggered on both OK and Cancel')\n                            })\n                    }\n                    if (this.updateErrors()) {\n                        return\n                    }\n                }\n\n                const self = this\n                this.$nextTick(() => {\n                    console.d('Ticked', self.block.obj, self.canvas)\n                    if (self.block.obj !== null && self.canvas !== undefined) {\n                        let result = self.block.obj.update(val, $(self.canvas))\n                        if (self.updateErrors()) {\n                            return\n                        }\n\n                        //construct a split output object\n                        if (result === undefined && val.processedOutput.type != 'text') {\n                            if (!self.originalMode) {\n                                result = val.processedOutput.text\n                            }\n                        }\n\n                        if (self.originalMode) {\n                            if (typeof result !== 'string') {\n                                result = ''\n                            }\n                        }\n\n                        if (result !== undefined) {\n                            self.$emit('changeOutput', result)\n                        }\n                    }\n                })\n            } catch (e) {\n                console.error(e)\n            }\n            if (this.block.obj.err.length > 0) {\n                if (this.editMode) {\n                    this.updateErrors()\n                } else {\n                    console.error(this.block.obj.err)\n                }\n            }\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodePlayground.vue?vue&type=template&id=770efbd8&scoped=true&\"\nimport script from \"./CodePlayground.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodePlayground.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodePlayground.vue?vue&type=style&index=0&id=770efbd8&lang=sass&scoped=true&\"\nimport style1 from \"./CodePlayground.vue?vue&type=style&index=1&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"770efbd8\",\n  null\n  \n)\n\nexport default component.exports\nimport QBtnGroup from 'quasar/src/components/btn-group/QBtnGroup.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtnGroup,QBtn,QSlideTransition});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:(\"codeblock block-\" + _vm.typeName)},[(_vm.allowsREPL && _vm.canStartREPL)?_c('div',{staticClass:\"row runnerState\",attrs:{\"id\":\"stateBox\",\"data-question\":_vm.blockInfo.id}},[_c('q-btn',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isRunning),expression:\"!isRunning\"}],staticClass:\"white--text q-pr-sm\",staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"allow_run_button\",\"loading\":!_vm.isReady,\"disabled\":!_vm.isReady,\"color\":\"primary\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.emitRun}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.start'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}})],1),_c('div',{staticClass:\"animated fadeIn\"}),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.canStop),expression:\"canStop\"}],staticClass:\"q-pl-0\"},[_c('q-btn',{staticStyle:{\"border-radius\":\"0px\"},attrs:{\"id\":\"cancel_button\",\"color\":\"negative\",\"ripple\":{ center: true },\"data-question\":_vm.blockInfo.id},on:{\"click\":_vm.emitStop}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.stop'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"stop\"}})],1)],1)]),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showGlobalMessages),expression:\"showGlobalMessages\"}],staticClass:\"globalState col-grow\",staticStyle:{\"align-self\":\"center\"}},[_c('div',{attrs:{\"id\":\"message\"},domProps:{\"innerHTML\":_vm._s(_vm.globalStateMessage)}})])])],1):_vm._e(),_c('transition',{attrs:{\"appear\":\"\",\"enter-active-class\":\"animated fadeInup\",\"leave-active-class\":\"animated fadeOutDown\"}},[(!_vm.isRunning)?_c('div',{staticClass:\"q-mt-md\"},[_c('q-banner',{staticClass:\"bg-warning\",attrs:{\"inline-actions\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [(_vm.isReady && !_vm.canStop)?_c('q-btn',{attrs:{\"flat\":\"\",\"color\":\"white\"},on:{\"click\":_vm.emitRun}},[_vm._v(\" \"+_vm._s(_vm.$t('CodeBlocks.start'))+\" \"),_c('q-icon',{attrs:{\"right\":\"\",\"dark\":\"\",\"name\":\"play_arrow\"}})],1):_vm._e()]},proxy:true}],null,false,3640785926)},[_vm._v(\" Interpreter is not yet Ready. You may need to start it first. \")])],1):_vm._e()]),_c('Terminal',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.allowsREPL && _vm.canStartREPL),expression:\"allowsREPL && canStartREPL\"}],attrs:{\"console-sign\":\"$\",\"allow-arbitrary\":\"\",\"height\":\"500px\",\"blockInfo\":_vm.blockInfo,\"eventHub\":_vm.eventHub},on:{\"run\":_vm.emitRun,\"stop\":_vm.emitStop}}),(!_vm.allowsREPL)?_c('div',{staticClass:\"q-mt-md\"},[_vm._v(\" The current language does not support a REPL-Element \")]):_vm._e(),(!_vm.canStartREPL)?_c('div',{staticClass:\"q-mt-md\"},[_vm._v(\" Unable to start REPL-Environment. (Code execution, message passing and keep-alive need to be enabled) \")]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vue-terminal-wrapper\"},[_c('div',{staticClass:\"basicterm\",attrs:{\"id\":\"terminal\"}})])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport '@/lib/jquery.terminal.js'\nimport $ from 'jquery'\nimport { PythonV102Compiler } from '@/compiler/python.v102'\nimport { ICompilerID } from '@/lib/ICompilerRegistry'\nimport { IMainBlock } from '@/lib/codeBlocksManager'\n\nfunction sleep(s) {\n    return new Promise((resolve) => setTimeout(resolve, s))\n}\n\n@Component\nexport default class Terminal extends Vue {\n    @Prop({ default: '250px' }) height!: string\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    @Prop({ required: true }) eventHub!: Vue\n\n    private term: any\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n\n    get welcomeMessage(): string {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        let language = ''\n        if (cmp !== undefined) {\n            language = cmp.language\n        }\n        return `{*_*} Interactive ${language} Shell\\n------------------------------`\n    }\n\n    emitRun() {\n        if (this.term !== undefined) {\n            this.clear()\n        }\n        this.$emit('run')\n    }\n\n    emitStop() {\n        this.$emit('stop')\n    }\n\n    clear() {\n        if (this.term !== undefined) {\n            this.term.clear()\n            this.term.echo(this.welcomeMessage)\n        }\n    }\n\n    mounted() {\n        const self = this\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler) as PythonV102Compiler\n        let ps1 = cmp.language === 'python' ? 'py> ' : '>>> ',\n            ps2 = '... '\n\n        async function lock() {\n            let resolve\n            let ready = self.term.ready\n            self.term.ready = new Promise((res) => (resolve = res))\n            await ready\n            return resolve\n        }\n\n        async function interpreter(command) {\n            let unlock = await lock()\n            try {\n                self.term.pause()\n\n                for (const c of command.split('\\n')) {\n                    try {\n                        if (c === '.stop') {\n                            self.emitStop()\n                            return\n                        }\n                        if (c === '.restart') {\n                            self.emitStop()\n                            self.clear()\n                            await sleep(1000)\n                            self.emitRun()\n                            return\n                        }\n                        if (c === '.clear') {\n                            self.term.clear()\n                            return\n                        }\n                        self.term.set_prompt(ps2)\n                        await cmp.interpreter(\n                            c,\n                            (incomplete) => {\n                                self.term.set_prompt(incomplete ? ps2 : ps1)\n                            },\n                            (msg) => {\n                                self.term.echo(msg, { newline: false })\n                            },\n                            (err) => {\n                                self.term.error(err)\n                            }\n                        )\n                    } catch (e) {\n                        self.term.error(e)\n                    }\n                }\n            } finally {\n                self.term.resume()\n                await sleep(10)\n                unlock()\n            }\n        }\n\n        const el: any = $('#terminal', '.vue-terminal-wrapper')\n        self.term = el.terminal(interpreter, {\n            greetings: self.welcomeMessage,\n            name: 'codeblocks_repl',\n            height: this.height,\n            prompt: ps1,\n        })\n\n        self.term.ready = Promise.resolve()\n\n        if (this.eventHub) {\n            this.eventHub.$on('console-log', (msg) => self.term.echo(msg))\n            this.eventHub.$on('console-err', (msg) => self.term.error(msg))\n            this.eventHub.$on('clicked-run', () => self.clear())\n        }\n    }\n\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('console-log')\n            this.eventHub.$off('console-err')\n            this.eventHub.$off('clicked-run')\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Terminal.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Terminal.vue?vue&type=template&id=2ec5dfe0&\"\nimport script from \"./Terminal.vue?vue&type=script&lang=ts&\"\nexport * from \"./Terminal.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Terminal.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\n\n//helper to reset the canvas area if needed\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport BaseBlock from '@/components/BaseBlock.vue'\nimport { BlockData, IMainBlock } from '@/lib/codeBlocksManager'\nimport { ICompilerID, ICompilerInstance } from '@/lib/ICompilerRegistry'\nimport Terminal from '@/components/Terminal.vue'\n\n@Component({ components: { Terminal } })\nexport default class CodeREPL extends BaseBlock {\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    @Prop({ required: true }) isReady!: boolean\n    @Prop({ required: true }) canStop!: boolean\n    @Prop({ required: true }) showGlobalMessages!: boolean\n    @Prop({ required: true }) globalStateMessage!: string\n\n    get hasContent(): boolean {\n        return false\n    }\n\n    get isRunning(): boolean {\n        return this.canStop\n    }\n\n    get canStartREPL(): boolean {\n        return this.blockInfo.runCode && this.blockInfo.messagePassing && this.blockInfo.keepAlive\n    }\n\n    get allowsREPL(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined) {\n            return false\n        }\n        return cmp.allowsREPL\n    }\n\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n\n    get typeName() {\n        let s = this.block.type.toLowerCase()\n        if (this.block.hidden) {\n            s += '-hidden'\n        }\n        if (this.block.static) {\n            s += '-static'\n        }\n        return s\n    }\n\n    get readyWhenMounted() {\n        return false\n    }\n\n    get terminal(): Vue {\n        return this.$refs.terminal as Vue\n    }\n\n    emitRun() {\n        this.$emit('run', this.block)\n    }\n\n    emitStop() {\n        this.$emit('stop', this.block)\n    }\n\n    mounted() {\n        if (this.eventHub) {\n            this.eventHub.$on('all-mounted', this.whenMounted)\n        } else {\n            this.whenMounted()\n        }\n\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        this.waitReady(cmp)\n    }\n\n    beforeDestroy() {\n        if (this.eventHub) {\n            this.eventHub.$off('all-mounted')\n        }\n        this.whenBlockIsDestroyed()\n    }\n\n    waitReady(cmp: ICompilerInstance | undefined) {\n        if (cmp === undefined || cmp.isReady) {\n            this.whenBlockIsReady()\n        } else {\n            setTimeout(this.waitReady.bind(this, cmp), 500)\n        }\n    }\n\n    whenMounted(): void {\n        this.emitRun()\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeREPL.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeREPL.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeREPL.vue?vue&type=template&id=a208ad54&\"\nimport script from \"./CodeREPL.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeREPL.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn,QIcon,QBanner});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(!_vm.editMode)?_c('div',{directives:[{name:\"highlight\",rawName:\"v-highlight\",value:(_vm.language),expression:\"language\"}],domProps:{\"innerHTML\":_vm._s(_vm.previewValue)}}):_c('TipTap',{staticClass:\"editor q-my-3\",attrs:{\"value\":_vm.value,\"name\":_vm.name,\"language\":_vm.language,\"scopUUID\":_vm.scopeUUID,\"editMode\":_vm.editMode},on:{\"input\":_vm.updatedContentDefered}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row q-ma-0 q-pa-0\"},[_c('div',{staticClass:\"col-xs-12 col-md-6 q-px-sm\"},[_c('q-input',{ref:\"editBox\",staticClass:\"plain accqstXmlInput noRTEditor\",attrs:{\"type\":\"textarea\",\"autogrow\":\"\",\"filled\":\"\",\"name\":_vm.name,\"label\":\"HTML Source\",\"background-color\":\"blue-grey darken-3\"},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}})],1),_c('div',{staticClass:\"col-xs-12 col-md-6 q-px-sm\"},[_c('div',{staticClass:\"q-field__label no-pointer-events ellipsis text-caption wysiwyg\"},[_vm._v(\" Preview \")]),_c('div',{directives:[{name:\"highlight\",rawName:\"v-highlight\",value:(_vm.language),expression:\"language\"},{name:\"tagged\",rawName:\"v-tagged\",value:(_vm.scopeUUID),expression:\"scopeUUID\"}],domProps:{\"innerHTML\":_vm._s(_vm.text)}})])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport { ITagReplaceAction } from '../plugins/tagger'\n@Component\nexport default class TipTap extends Vue {\n    @Prop({ default: '' }) value!: string\n    @Prop({ default: '' }) name!: string\n    @Prop({ default: '' }) scopeUUID!: string\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'javascript' }) language!: string\n\n    get text(): string {\n        return this.value\n    }\n    set text(v: string) {\n        this.updatedContent(v)\n    }\n\n    updatedContent(v: string): void {\n        this.$emit('input', v)\n    }\n    replaceTemplateTags(o: ITagReplaceAction) {\n        if (!this.editMode) {\n            return\n        }\n        if (o.scopeUUID != this.scopeUUID) {\n            return\n        }\n        this.updatedContent(Vue.$tagger.replaceTemplateTagInString(this.text, o.name, o.newValue))\n    }\n\n    mounted() {\n        const eb: any = this.$refs.editBox\n        //we need this for StudON to make sure tinyMCE is not taking over :D\n        eb.$el.querySelectorAll('textarea[name]').forEach(el => {\n            el.className = (el.className + ' accqstXmlInput noRTEditor').trim()\n        })\n        Vue.$tagger.$on('replace-template-tag', this.replaceTemplateTags)\n    }\n\n    beforeDestroy() {\n        Vue.$tagger.$off('replace-template-tag', this.replaceTemplateTags)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TipTap.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./TipTap.vue?vue&type=template&id=5a368702&scoped=true&\"\nimport script from \"./TipTap.vue?vue&type=script&lang=ts&\"\nexport * from \"./TipTap.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./TipTap.vue?vue&type=style&index=0&id=5a368702&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5a368702\",\n  null\n  \n)\n\nexport default component.exports\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QField from 'quasar/src/components/field/QField.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QInput,QField});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport TipTap from './TipTap.vue'\nimport BaseBlock from './BaseBlock.vue'\n@Component({ components: { TipTap } })\nexport default class SimpleText extends BaseBlock {\n    @Prop() language!: string\n    @Prop({ default: '' }) value!: string\n    @Prop({ default: '' }) name!: string\n    @Prop({ default: '' }) scopeUUID!: string\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: '' }) previewValue!: string\n\n    textUpdateTimer: number | null = null\n    textUpdateStartTime: number = 0\n    updatedContentDefered(newVal: string) {\n        if (!this.editMode) {\n            this.updatedContent(newVal)\n            return\n        }\n\n        const now = new Date().getTime()\n\n        //clear an existing update timeout\n        if (this.textUpdateTimer !== null) {\n            clearTimeout(this.textUpdateTimer)\n            this.textUpdateTimer = null\n        } else {\n            this.textUpdateStartTime = now\n        }\n\n        const doIt = () => {\n            this.textUpdateTimer = null\n            this.updatedContent(newVal)\n        }\n\n        //did we wait for a maximum time? run\n        if (now - this.textUpdateStartTime > process.env.VUE_APP_CODE_BLOCK_MAX_TIMEOUT) {\n            doIt()\n            return\n        }\n        this.textUpdateTimer = setTimeout(() => {\n            doIt()\n        }, process.env.VUE_APP_CODE_BLOCK_TIMEOUT)\n    }\n\n    updatedContent(v: string) {\n        //console.log('Updating')\n        //this.value = v\n        this.$emit('input', v)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleText.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SimpleText.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SimpleText.vue?vue&type=template&id=fead5814&scoped=true&\"\nimport script from \"./SimpleText.vue?vue&type=script&lang=ts&\"\nexport * from \"./SimpleText.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"fead5814\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('transition',{attrs:{\"enter-active-class\":\"animated fadeIn\",\"leave-active-class\":\"animated fadeOut\"}},[(_vm.hasError)?_c('q-banner',{staticClass:\"text-white bg-red q-mb-md\",attrs:{\"inline-actions\":\"\"},scopedSlots:_vm._u([{key:\"action\",fn:function(){return [_c('q-btn',{attrs:{\"flat\":\"\",\"color\":\"white\",\"label\":\"OK\"},on:{\"click\":function($event){_vm.error = ''}}})]},proxy:true}],null,false,1144489300)},[_vm._v(\" \"+_vm._s(_vm.error)+\" \")]):_vm._e()],1),_c('div',{staticClass:\"row justify-between controlContainer\"},[_c('div',{staticClass:\"multiDiv\"},[_c('div',{staticClass:\"inlined-input q-mr-sm\"},[_c('q-btn',{attrs:{\"flat\":\"\",\"round\":\"\",\"color\":\"primary\",\"icon\":\"info\",\"size\":\"xs\"},on:{\"click\":_vm.showInfoDialog}})],1),_c('div',{staticClass:\"q-mr-lg inlined-input noMoreBottomMargin\"},[_c('q-input',{staticClass:\"noMoreBottomMargin\",attrs:{\"label\":\"Name\",\"rounded\":\"\",\"filled\":\"\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_c('div',{staticClass:\"inlined-input\"},[_c('input',{ref:\"fileUploader\",staticClass:\"fileUploader\",attrs:{\"type\":\"file\"},on:{\"change\":function($event){return _vm.onUpload($event)}}}),_c('q-btn',{attrs:{\"color\":\"teal\",\"filled\":\"\",\"label\":\"Add Image Data\",\"icon\":\"cloud_upload\"},on:{\"click\":_vm.openImage}})],1)]),_c('div',{staticClass:\"col-grow\"}),_c('div',[(_vm.editMode)?_c('q-btn-group',{staticClass:\"q-mb-sm\",attrs:{\"rounded\":\"\"}},[_c('q-btn',{attrs:{\"color\":_vm.isExpandedAuto ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Auto\",\"icon\":\"video_label\"},on:{\"click\":_vm.setExpandedAuto}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedLarge ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Large\",\"icon\":\"call_to_action\"},on:{\"click\":_vm.setExpandedLarge}}),_c('q-btn',{attrs:{\"color\":_vm.isExpandedTiny ? 'primary' : 'blue-grey-4',\"small\":\"\",\"label\":\"Small\",\"icon\":\"visibility_off\"},on:{\"click\":_vm.setExpandedTiny}})],1):_vm._e()],1)]),_c('q-slide-transition',[(_vm.editMode)?_c('CodeBlock',{attrs:{\"block\":_vm.block,\"theme\":_vm.options.theme,\"mode\":_vm.options.mode,\"visibleLines\":_vm.visibleLinesNow,\"editMode\":this.editMode,\"muteReadyState\":true},on:{\"code-changed-in-edit-mode\":_vm.onCodeChange}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport codemirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\n//helper to reset the canvas area if needed\nimport { Vue, Component, Prop, Watch } from 'vue-property-decorator'\nimport BaseBlock from '@/components/BaseBlock.vue'\n\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport { BlockData } from '@/lib/codeBlocksManager'\nimport { IRandomizerSet, CodeExpansionType } from '@/lib/ICodeBlocks'\nimport { IScriptOutputObject } from '@/lib/IScriptBlock'\nimport { ICodePlaygroundOptions } from './CodePlayground.vue'\n\n@Component({\n    components: { CodeBlock },\n})\nexport default class DataBlock extends BaseBlock {\n    @Prop({ required: true }) finalOutputObject!: IScriptOutputObject\n    @Prop({ required: true })\n    block!: BlockData\n\n    @Prop({ default: false }) editMode!: boolean\n    @Prop({ default: 'auto' }) visibleLines!: 'auto' | string\n    @Prop({ default: 'base16-dark' }) theme!: string\n    @Prop({ required: true }) eventHub!: Vue\n    @Prop() tagSet?: IRandomizerSet\n\n    get originalMode(): boolean {\n        if (this.block.obj === null) {\n            return false\n        }\n        return this.block.obj.requestsOriginalVersion()\n    }\n\n    get options(): ICodePlaygroundOptions {\n        return {\n            // codemirror options\n            mode: this.$CodeBlock.mimeType('javascript'),\n            theme: this.theme,\n            lineNumbers: true,\n            line: true,\n            tabSize: 4,\n            indentUnit: 4,\n            autoCloseBrackets: true,\n            readOnly: !this.editMode,\n            firstLineNumber: 1,\n            gutters: ['diagnostics', 'CodeMirror-linenumbers'],\n        }\n    }\n\n    get name(): string {\n        return this.block.name\n    }\n    set name(newName: string) {\n        this.block.name = newName\n    }\n\n    get visibleLinesNow(): 'auto' | string {\n        if (this.block.codeExpanded == CodeExpansionType.TINY) {\n            return '2.4'\n        } else if (this.block.codeExpanded == CodeExpansionType.LARGE) {\n            return '33.4'\n        }\n        return 'auto'\n    }\n    created() {\n        this.eventHub.$on('before-run', this.resetBeforeRun)\n        this.eventHub.$on('render-diagnostics', this.updateErrors)\n    }\n    mounted() {\n        const hasErrors = this.block && this.block.obj && this.block.obj.err.length > 0\n        if (hasErrors) {\n            this.updateErrors()\n        }\n    }\n    beforeDestroy() {\n        this.eventHub.$off('before-run', this.resetBeforeRun)\n        this.eventHub.$off('render-diagnostics', this.updateErrors)\n    }\n    isPreparingRun: boolean = false\n    lastRun: Date = new Date()\n    runCount: number = 0\n    canvas: HTMLElement | undefined = undefined\n    needsCodeRebuild: boolean = false\n    initAndRebuildErrors: any[] = []\n\n    get isExpandedLarge(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.LARGE\n    }\n    get isExpandedTiny(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.TINY\n    }\n    get isExpandedAuto(): boolean {\n        return this.block.codeExpanded == CodeExpansionType.AUTO\n    }\n    setExpandedLarge(): void {\n        this.setExpanded(CodeExpansionType.LARGE)\n    }\n    setExpandedTiny(): void {\n        this.setExpanded(CodeExpansionType.TINY)\n    }\n    setExpandedAuto(): void {\n        this.setExpanded(CodeExpansionType.AUTO)\n    }\n    setExpanded(val: CodeExpansionType): void {\n        this.block.codeExpanded = val\n\n        if (this.block.codeExpanded != CodeExpansionType.TINY) {\n            this.$CodeBlock.refreshAllCodeMirrors()\n        }\n    }\n    updateErrors(): boolean {\n        return false\n    }\n    resetBeforeRun(): void {}\n\n    onCodeChange(newCode: string): void {\n        if (this.editMode) {\n            this.needsCodeRebuild = true\n        }\n    }\n    onDidInit(): void {\n        this.updateErrors()\n    }\n\n    showInfoDialog(): void {\n        this.$q\n            .dialog({\n                title: this.$l('DataBlock.InfoCaption'),\n                message: this.$l('DataBlock.Info').replace('{NAME}', this.name),\n                html: true,\n                style: 'width:75%',\n            })\n            .onOk(() => {\n                // console.log('OK')\n            })\n            .onCancel(() => {\n                // console.log('Cancel')\n            })\n            .onDismiss(() => {\n                // console.log('I am triggered on both OK and Cancel')\n            })\n    }\n\n    openImage(): void {\n        const uploader: any = this.$refs['fileUploader']\n        uploader.click()\n    }\n    error: string = ''\n    get hasError(): boolean {\n        return this.error !== ''\n    }\n\n    onUpload(event): void {\n        const uploader: any = this.$refs['fileUploader']\n        console.log('Selected Files: ', uploader.files.length)\n        if (uploader.files === undefined || uploader.files.length < 1) {\n            return\n        }\n\n        const files = uploader.files\n        for (let i = 0; i < files.length; i++) {\n            const fl = files[i]\n            //console.log(fl)\n            if (!fl.type.startsWith('image/')) {\n                this.error = `Uploads of type '${fl.type}' are not allowed.`\n                console.error(this.error)\n                break\n            }\n\n            if (fl.size > 500 * 1025) {\n                this.error = `Maximum allowed upload size are 500kB.`\n                console.error(this.error)\n                break\n            }\n            const fr = new FileReader()\n            fr.onload = () => {\n                this.addImageURL(fl.name, fr.result)\n            }\n            fr.onerror = (e) => {\n                console.error(fr.error)\n                this.error = fr.error === undefined || fr.error === null ? '' : fr.error.message\n            }\n            fr.readAsDataURL(fl)\n        }\n        uploader.value = ''\n    }\n\n    addImageURL(fileName, img) {\n        let json = {}\n        try {\n            json = JSON.parse(this.block.content)\n        } catch (e) {\n            console.error(e)\n        }\n        let i = -1\n        let name\n        do {\n            i++\n            if (i == 0) {\n                name = fileName\n            } else {\n                name = `${fileName}_${i}`\n            }\n        } while (json[name] !== undefined)\n        json[name] = img\n        this.block.content = JSON.stringify(json, undefined, 4)\n    }\n    get images(): any {\n        return []\n    }\n\n    set images(val: any) {\n        console.log('IMAGES:' + val)\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBlock.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBlock.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DataBlock.vue?vue&type=template&id=f05c42ac&scoped=true&\"\nimport script from \"./DataBlock.vue?vue&type=script&lang=ts&\"\nexport * from \"./DataBlock.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DataBlock.vue?vue&type=style&index=0&id=f05c42ac&lang=sass&scoped=true&\"\nimport style1 from \"./DataBlock.vue?vue&type=style&index=1&lang=stylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f05c42ac\",\n  null\n  \n)\n\nexport default component.exports\nimport QBanner from 'quasar/src/components/banner/QBanner.js';\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QInput from 'quasar/src/components/input/QInput.js';\nimport QBtnGroup from 'quasar/src/components/btn-group/QBtnGroup.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBanner,QBtn,QInput,QBtnGroup,QSlideTransition});\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlockContainer from '@/components/CodeBlockContainer.vue'\nimport CodeBlocksSettings, { ICodeBlockSettingsOptions } from '@/components/CodeBlocksSettings.vue'\nimport CodeBlock from '@/components/CodeBlock.vue'\nimport CodePanel from '@/components/CodePanel.vue'\n//import Blockly from '@/components/Blockly/Blockly.vue'\nimport CodePlayground from '@/components/CodePlayground.vue'\nimport CodeREPL from '@/components/CodeREPL.vue'\nimport SimpleText from '@/components/SimpleText.vue'\nimport DataBlock from '@/components/DataBlock.vue'\nimport { BlockData, IMainBlock, IBlockBookmarkPayload } from '@/lib/codeBlocksManager'\nimport { IScriptOutputObject, IProcessedScriptOutput } from '@/lib/IScriptBlock'\nimport {\n    ICompilerID,\n    ICompilerErrorDescription,\n    ICompileAndRunArguments,\n} from '@/lib/ICompilerRegistry'\nimport {\n    CodeOutputTypes,\n    IRandomizerSet,\n    KnownBlockTypes,\n    IBlockDataPlayground,\n} from '@/lib/ICodeBlocks'\n\nfunction formatOutput(result) {\n    const regex =\n        /^@(bold|italic|em)?(red|green|blue|cyan|magenta|yellow|orange|gray|#[\\da-f]{6}|#[\\da-f]{8}):(.*)/gim\n\n    return result\n        .split('\\n')\n        .map((line, nr) => {\n            let m\n\n            if ((m = regex.exec(result)) !== null) {\n                let style = ''\n                if (m[2] === 'gray') {\n                    style = 'style=\"color:silver\"'\n                } else if (m[2] !== undefined) {\n                    style = `style=\"color:${m[2]}\"`\n                }\n\n                if (m[1] === 'bold') {\n                    line = `<b ${style}>${m[3]}</b>`\n                } else if (m[1] === 'italic' || m[1] === 'em') {\n                    line = `<em ${style}>${m[3]}</em>`\n                } else {\n                    line = `<span ${style}>${m[3]}</span>`\n                }\n            }\n\n            return line\n        })\n        .join('\\n')\n}\n\nconst Blockly = () => import('@/components/Blockly/Blockly.vue')\nexport interface IOnTypeChangeInfo {\n    type: KnownBlockTypes\n    hidden: boolean\n    static: boolean\n    id: number\n    hasCode: boolean\n}\n\nexport interface IOnVisibleLinesChangeInfo {\n    visibleLines: 'auto' | number\n    id: number\n}\n\nexport interface IOnPlacementChangeInfo extends IBlockDataPlayground {\n    id: number\n}\n\nexport interface IOnScriptVersionChangeInfo {\n    version: string\n    id: number\n}\n\nexport interface IOnSetAutoResetInfo {\n    shouldAutoreset: boolean\n    id: number\n}\n\nexport interface IOnReloadResourcesInfo {\n    shouldReloadResources: boolean\n    id: number\n}\n\nexport interface IOnGenerateTemplateInfo {\n    generateTemplate: boolean\n    id: number\n}\n\nexport interface IOnThemeChangeInfo {\n    solution: string\n    code: string\n}\n\nexport interface IOnChangeOrder {\n    id: number\n    newID: number\n}\n\n@Component({\n    components: {\n        CodeBlockContainer,\n        CodeBlocksSettings,\n        CodeBlock,\n        CodePlayground,\n        SimpleText,\n        Blockly,\n        CodePanel,\n        CodeREPL,\n        DataBlock,\n    },\n})\nexport default class CodeBlocks extends Vue {\n    didInitialize: boolean = false\n    outputHTML: string = ''\n    output: string = ''\n    sansoutput: string = ''\n    didClip: boolean = false\n    _finalOutputObject: IScriptOutputObject | null = null\n    eventHub: Vue = new Vue()\n\n    get continuousCompile(): boolean {\n        if (this.editMode) {\n            return false\n        }\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            return cmp.allowsContinousCompilation\n        }\n        return false\n    }\n\n    get finalOutputObject(): IScriptOutputObject {\n        if (this._finalOutputObject === null || this._finalOutputObject === undefined) {\n            return {\n                initialOutput: '',\n                output: '',\n                processedOutput: {\n                    type: 'text',\n                    text: '',\n                    json: undefined,\n                },\n                sansoutput: '',\n                outputElement: $(this.outputElement) as any,\n            }\n        }\n        return this._finalOutputObject\n    }\n    @Prop({ required: true }) blockInfo!: IMainBlock\n    get options(): ICodeBlockSettingsOptions {\n        return {\n            language: this.language,\n            compiler: this.compiler,\n            executionTimeout: this.executionTimeout,\n            maxCharacters: this.maxCharacters,\n            runCode: this.runCode,\n            domLibs: this.domLibraries,\n            workerLibs: this.workerLibraries,\n            id: this.blockInfo.id,\n            codeTheme: this.codeTheme,\n            solutionTheme: this.solutionTheme,\n            outputParser: this.outputParser,\n            randomizer: this.blockInfo.randomizer,\n            continuousCompilation: this.blockInfo.continuousCompilation,\n            persistentArguments: this.blockInfo.persistentArguments,\n            messagePassing: this.blockInfo.messagePassing,\n            keepAlive: this.blockInfo.keepAlive,\n        }\n    }\n    get blocks(): BlockData[] {\n        return this.blockInfo.blocks\n    }\n    get language(): string {\n        return this.blockInfo.language\n    }\n    get blockid(): number {\n        return this.blockInfo.id\n    }\n    get executionTimeout(): number {\n        return this.blockInfo.executionTimeout\n    }\n    get maxCharacters(): number {\n        return this.blockInfo.maxCharacters\n    }\n    get compiler(): ICompilerID {\n        return this.blockInfo.compiler\n    }\n    get runCode(): boolean {\n        return this.blockInfo.runCode\n    }\n    get domLibraries(): string[] {\n        return this.blockInfo.domLibs\n    }\n    get workerLibraries(): string[] {\n        return this.blockInfo.workerLibs\n    }\n    get solutionTheme(): string {\n        return this.blockInfo.solutionTheme\n    }\n    get codeTheme(): string {\n        return this.blockInfo.codeTheme\n    }\n    get readonly(): boolean {\n        return this.blockInfo.readonly\n    }\n    get outputParser(): CodeOutputTypes {\n        return this.blockInfo.outputParser\n    }\n\n    get editMode(): boolean {\n        return false\n    }\n    get hasOutput(): boolean {\n        return this.outputHTML !== undefined && this.outputHTML != ''\n    }\n    get mimeType(): string {\n        return this.$CodeBlock.mimeType(this.language)\n    }\n    get isReady(): boolean {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (!cmp) {\n            return false\n        }\n\n        return (\n            this.didInitialize &&\n            cmp.isReady &&\n            !cmp.isRunning &&\n            !this.$compilerState.runButtonForceHide\n        )\n    }\n    get canRun(): boolean {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (!cmp) {\n            return false\n        }\n        return cmp.canRun && this.runCode\n    }\n    get randomizerActive(): boolean {\n        return this.blockInfo.randomizer.active\n    }\n    get activeTagSet(): IRandomizerSet | undefined {\n        if (!this.randomizerActive) {\n            return undefined\n        }\n        return this.tagSet(this.blockInfo.randomizer.previewIndex)\n    }\n    get completeSource(): string {\n        return this.blocks\n            .filter((b) => b.hasCode)\n            .map((b) => b.actualContent())\n            .reduce((p, c) => {\n                return p + '\\n' + c\n            }, '')\n    }\n    get showGlobalMessages(): boolean {\n        return !this.$compilerState.globalStateHidden\n    }\n    get playgrounds(): BlockData[] {\n        return this.blocks.filter((b) => b.type == 'PLAYGROUND')\n    }\n    get dataBlocks(): BlockData[] {\n        return this.blocks.filter((b) => b.type == 'DATA')\n    }\n    get outputElement(): HTMLElement {\n        return this.$refs.output as HTMLElement\n    }\n    get addonClass(): string {\n        let cl = ''\n        if (this.editMode) {\n            cl += 'editmode '\n        }\n        if (this.readonly) {\n            cl += 'block-readonly '\n        }\n        return cl\n    }\n    get backgroundColorClass(): string {\n        return this.editMode ? 'blue-grey darken-4' : ''\n    }\n\n    blockBecameReady(): void {\n        let readyCount = this.blockInfo.blocks.map((b) => b.readyCount).reduce((p, c) => p + c, 0)\n        if (readyCount == this.blockInfo.blocks.length) {\n            this.$nextTick(() => {\n                this.eventHub.$emit('all-mounted', {})\n            })\n        }\n        console.d('Ready', readyCount, this.blockInfo.blocks.length)\n    }\n\n    tagSet(nr: number): IRandomizerSet {\n        return this.blockInfo.randomizer.sets[nr]\n    }\n\n    themeForBlock(bl: BlockData): string {\n        return bl.themeForCodeBlock\n    }\n    public blockById(id: number): BlockData | undefined {\n        return this.blocks.find((block) => block.id == id)\n    }\n    onTypeChange(nfo: IOnTypeChangeInfo): void {}\n    onVisibleLinesChange(nfo: IOnVisibleLinesChangeInfo): void {}\n    onPlacementChange(nfo: IOnPlacementChangeInfo): void {}\n    onScriptVersionChange(nfo: IOnScriptVersionChangeInfo): void {}\n    onSetAutoReset(nfo: IOnSetAutoResetInfo): void {}\n    onReloadResources(nfo: IOnReloadResourcesInfo): void {}\n    onSetGenerateTemplate(nfo: IOnGenerateTemplateInfo): void {}\n    onCompilerChange(v: string): void {}\n    onCompilerVersionChange(v: string): void {}\n    onRunStateChange(v: boolean): void {}\n    onContinousCompileStateChange(v: boolean): void {}\n    onMessagePassingChange(v: boolean): void {}\n    onKeepAliveChange(v: boolean): void {}\n    onPersistentArgumentsChange(v: boolean): void {}\n    onLanguageChange(v: string): void {}\n    onCharacterLimitChange(v: number): void {}\n    onTimeoutChange(v: number): void {}\n    onWorkerLibChange(v: string[]): void {}\n    onDomLibChange(v: string[]): void {}\n    onThemeChange(nfo: IOnThemeChangeInfo): void {}\n    onOutputParserChange(v: CodeOutputTypes): void {}\n    moveUp(idx: number): void {}\n    moveDown(idx: number): void {}\n    onChangeOrder(nfo: IOnChangeOrder): void {}\n    removeBlock(idx: number): void {}\n    addNewBlock(): void {}\n    onPlaygroundChangedOutput(newOutput: string | undefined): void {\n        if (newOutput === undefined) {\n            return\n        }\n        if (this.output != newOutput) {\n            this.output = newOutput.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n            if (this.maxCharacters > 0 && this.output.length > this.maxCharacters) {\n                this.outputHTML = formatOutput(this.output.substr(0, this.maxCharacters))\n                this.outputHTML += this.$CodeBlock.format_info(\n                    'Info: Output too long. Removed all following Characters. \\n<b>...</b>\\n\\n'\n                )\n            } else {\n                this.outputHTML = formatOutput(this.output)\n            }\n            this.outputHTML += this.sansoutput\n        }\n    }\n\n    resetOutput(): void {\n        this.output = ''\n        this.sansoutput = ''\n        this.didClip = false\n        this.outputHTML = ''\n    }\n\n    log(text: string): void {\n        //console.log(\"log\", text);\n        this.output += text\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        if (!this.didClip) {\n            let formatedText\n            if (this.maxCharacters > 0 && this.output.length > this.maxCharacters) {\n                formatedText = this.$CodeBlock.format_info(\n                    'Info: Output too long. Removed all following Characters. \\n<b>...</b>\\n\\n'\n                )\n                this.didClip = true\n            } else {\n                formatedText = formatOutput(text)\n            }\n\n            this.outputHTML += formatedText\n            this.eventHub.$emit('console-log', formatedText)\n        }\n    }\n\n    logError(text: string): void {\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        this.eventHub.$emit('console-err', text)\n        text = this.$CodeBlock.format_error(text)\n        //console.log(\"err\", text);\n        this.sansoutput += text\n        this.outputHTML += text\n    }\n\n    logInfo(text: string): void {\n        text = text.replaceAllPoly('<', '&lt;').replaceAllPoly('>', '&gt;')\n        this.eventHub.$emit('console-nfo', text)\n        text = this.$CodeBlock.format_info(text)\n        //console.log(\"nfo\", text);\n        this.sansoutput += text\n        this.outputHTML += text\n    }\n\n    processDiagnostics(error: ICompilerErrorDescription) {\n        const line = error.start.line\n        this.blocks.forEach((block) => {\n            if (!block.hasCode) {\n                return\n            }\n\n            const first = block.firstLine\n            const last = block.nextLine - 1\n\n            if (error.start.line >= first && error.start.line <= last) {\n                block.errors.push(error)\n            }\n        })\n    }\n\n    clearDiagnostics(): void {\n        this.blocks.forEach((block) => (block.errors = []))\n        this.eventHub.$emit('render-diagnostics', {})\n    }\n\n    loadLibraries(whenLoaded: () => void): void {\n        this.$compilerRegistry.loadLibraries(this.domLibraries, whenLoaded)\n    }\n\n    /**\n     * Call when the program finished executing and pass the output string. We will send the output to all embeded canvas elements\n     * @param {*} output\n     * @param {*} infoErrorOutput output generated by info or error messages\n     */\n    finishedExecution(output: string, infoErrorOutput: string, resultData?: object | any[]): void {\n        let parseError: any = undefined\n        let processed: IProcessedScriptOutput = { type: 'text', json: undefined, text: output }\n\n        if (output !== undefined && this.playgrounds.length > 0) {\n            try {\n                processed = this.$CodeBlock.processMixedOutput(\n                    output,\n                    this.outputParser,\n                    undefined,\n                    resultData\n                )\n            } catch (e) {\n                parseError = e\n            }\n        }\n\n        this._finalOutputObject = {\n            initialOutput: output,\n            output: output,\n            processedOutput: processed,\n            sansoutput: this.sansoutput,\n            parseError: parseError,\n            //outputElement: $(this.outputElement) as JQuery<HTMLElement> //This line soes not work here, looks like the update did not yet happen?\n            outputElement: $(this.$refs.output as any) as any,\n        }\n        this.eventHub.$emit('output-updated', this._finalOutputObject)\n\n        this.onRunFinished()\n    }\n\n    get hasREPL(): boolean {\n        return this.blocks.filter((bl) => bl.type === KnownBlockTypes.REPL).length > 0\n    }\n\n    get canStop(): boolean {\n        return !this.isReady && this.didRunOnce\n    }\n    stop(): void {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined || cmp.stop === undefined) {\n            return\n        }\n        cmp.stop()\n    }\n\n    didRunOnce: boolean = false\n    run(): boolean {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp === undefined) {\n            return false\n        }\n\n        this.$compilerState.setAllRunButtons(false)\n\n        this.resetOutput()\n        this.eventHub.$emit('clicked-run')\n        this.clearDiagnostics()\n        const self = this\n\n        this.loadLibraries(() => {\n            self.eventHub.$emit('before-run', {})\n            console.d('compileAndRun')\n            self.didRunOnce = true\n\n            self.$nextTick(() => {\n                self.$nextTick(() => {\n                    let _args: object | string[] = {}\n                    if (cmp.acceptsJSONArgument) {\n                        _args = this.blockInfo.initArgsForLanguage()\n                        this.blocks.forEach((bl) => {\n                            if (bl.obj) {\n                                console.i('!!! ADD ARGUMENTS TO !!!')\n                                bl.obj.addArgumentsTo(_args)\n                            }\n                        })\n                    }\n\n                    const runOptions: ICompileAndRunArguments = {\n                        max_ms: self.executionTimeout,\n                        log_callback: self.log.bind(this),\n                        info_callback: self.logInfo.bind(this),\n                        err_callback: self.logError.bind(this),\n                        compileFailedCallback: self.processDiagnostics.bind(this),\n                        finishedExecutionCB: (\n                            success = true,\n                            overrideOutput = undefined,\n                            returnState = undefined\n                        ) => {\n                            console.i('returnState:', returnState, _args)\n                            if (!success) {\n                                self.$compilerState.hideGlobalState()\n                                self.$compilerState.setAllRunButtons(true)\n                                return undefined\n                            }\n                            let res = self.finishedExecution(\n                                overrideOutput ? overrideOutput : self.output,\n                                self.sansoutput,\n                                runOptions.resultData\n                            )\n\n                            if (returnState !== undefined) {\n                                if (this.blockInfo.persistentArguments) {\n                                    console.i('Store Default State', returnState)\n                                    this.blockInfo.storeDefaultArgs(returnState)\n                                } else {\n                                    this.blockInfo.clearDefaultArgs()\n                                }\n                            }\n                            self.$compilerState.hideGlobalState()\n                            self.$compilerState.setAllRunButtons(true)\n                            return res\n                        },\n                        args: _args,\n                        didReceiveMessage: (cmd, data) => {\n                            console.i('MESSAGE - Received', cmd)\n                            this.blocks.forEach((bl) => {\n                                if (bl.obj) {\n                                    bl.obj.didReceiveMessage(cmd, data)\n                                }\n                            })\n                        },\n                        postMessageFunction: null,\n                        dequeuePostponedMessages: () => {},\n                        allowMessagePassing:\n                            cmp.allowsMessagePassing && self.options.messagePassing,\n                        keepAlive:\n                            cmp.allowsMessagePassing &&\n                            self.options.messagePassing &&\n                            self.options.keepAlive,\n                        withREPL:\n                            cmp.allowsMessagePassing &&\n                            self.options.messagePassing &&\n                            self.options.keepAlive &&\n                            this.hasREPL,\n                        beforeStartHandler: () => {\n                            this.blocks.forEach((bl) => {\n                                console.d('MESSAGE - Before Start')\n                                if (bl.obj) {\n                                    bl.obj.beforeStart()\n                                }\n                            })\n                        },\n                        whenFinishedHandler: (args: object | string[]) => {\n                            this.blocks.forEach((bl) => {\n                                console.d('MESSAGE - When Finished')\n                                if (bl.obj) {\n                                    bl.obj.whenFinished(args, runOptions.resultData)\n                                }\n                            })\n                        },\n                        resultData: undefined,\n                    }\n\n                    if (runOptions.keepAlive) {\n                        this.blocks.forEach((bl) => {\n                            if (bl.obj) {\n                                bl.obj.runConfig = runOptions\n                            }\n                        })\n                    }\n\n                    cmp.compileAndRun('' + self.blockid, self.completeSource, self, runOptions)\n                })\n            })\n        })\n\n        return true\n    }\n    onkey(event) {\n        if (\n            this.editMode &&\n            (event.ctrlKey || event.metaKey) &&\n            (event.key === 'w' || event.key === 'j')\n        ) {\n            this.run()\n            event.preventDefault()\n            return false\n        }\n    }\n\n    mounted() {\n        let cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (cmp) {\n            cmp.preload()\n        }\n        const self = this\n        this.loadLibraries(() => {\n            self.eventHub.$emit('initialized-libraries', {})\n        })\n        this.didInitialize = true\n\n        if (this.editMode) {\n            window.addEventListener('keydown', this.onkey, false)\n        }\n\n        Vue.$GlobalEventHub.$on('bookmark-block', this.onBookmarkBlock)\n    }\n    beforeDestroy() {\n        window.removeEventListener('keydown', this.onkey)\n        Vue.$GlobalEventHub.$off('bookmark-block')\n    }\n\n    bookmarkedBlock: BlockData | null = null\n\n    get hasBookmark(): boolean {\n        return this.bookmarkedBlock !== null && this.editMode\n    }\n\n    get panelBlock(): BlockData | null {\n        return this.bookmarkedBlock\n    }\n    onBookmarkBlock(data: IBlockBookmarkPayload) {\n        console.i('Bookmark', data)\n        if (this.blockInfo.uuid == data.uuid) {\n            this.bookmarkedBlock = data.block\n        }\n    }\n\n    triggerRecompileWhenFinished: boolean = false\n    onViewCodeChange(forceRun: boolean = false) {\n        if (!forceRun && !this.blockInfo.continuousCompilation) {\n            return\n        }\n\n        if (this.continuousCodeUpdateTimer !== null) {\n            clearTimeout(this.continuousCodeUpdateTimer)\n            this.continuousCodeUpdateTimer = null\n        }\n        this.continuousCodeUpdateTimer = setTimeout(() => {\n            const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n            console.d('Continuous Compile - ', cmp)\n            if (cmp && cmp.allowsContinousCompilation) {\n                if (!cmp.isRunning && cmp.isReady) {\n                    console.d('Continuous Compile - ', 'RUN')\n                    this.run()\n                } else {\n                    console.d('Continuous Compile - ', 'DEFER')\n                    this.triggerRecompileWhenFinished = true\n                }\n            }\n        }, process.env.VUE_APP_CONTINOUS_COMPILE_TIMEOUT)\n    }\n\n    onRunFinished() {\n        this.didRunOnce = false\n        if (this.triggerRecompileWhenFinished) {\n            console.d('Continuous Compile - ', 'RE-RUN')\n            this.triggerRecompileWhenFinished = false\n            this.onViewCodeChange()\n        }\n    }\n\n    continuousCodeUpdateTimer: number | null = null\n    onRunFromPlayground() {\n        const cmp = this.$compilerRegistry.getCompiler(this.compiler)\n        if (\n            cmp &&\n            cmp.canRun &&\n            !this.editMode &&\n            cmp.allowsContinousCompilation // &&\n            // this.blockInfo.continuousCompilation\n        ) {\n            this.onViewCodeChange(true)\n        }\n    }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocks.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./CodeBlocks.vue?vue&type=template&id=7e42fd95&\"\nimport script from \"./CodeBlocks.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocks.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./CodeBlocks.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QBtn from 'quasar/src/components/btn/QBtn.js';\nimport QIcon from 'quasar/src/components/icon/QIcon.js';\nimport QTooltip from 'quasar/src/components/tooltip/QTooltip.js';\nimport QSlideTransition from 'quasar/src/components/slide-transition/QSlideTransition.js';\nimport qInstall from \"../../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QBtn,QIcon,QTooltip,QSlideTransition});\n","<template>\n    <q-layout view=\"hHh lpR fFf\" style=\"min-height:0\">\n        <q-page-container>\n            <CodeBlocks :blockInfo=\"blocks\" />\n        </q-page-container>\n    </q-layout>\n</template>\n\n<script>\nimport CodeBlocks from './components/CodeBlocks'\nimport Vue from 'vue'\n\nexport default {\n    name: 'App',\n\n    props: ['blocks'],\n\n    components: {\n        CodeBlocks\n    },\n\n    data: () => ({}),\n    computed: {}\n}\n</script>\n\n<style lang=\"sass\">\n#app\n  margin-bottom: 16px\n  background-color: rgba(1,1,1,0)\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=eaf51832&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport qInstall from \"../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QLayout,QPageContainer});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('q-layout',{staticStyle:{\"min-height\":\"0\"},attrs:{\"view\":\"hHh lpR fFf\"}},[_c('q-page-container',[_c('CodeBlocksEditor',{attrs:{\"blockInfo\":_vm.blocks}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport 'reflect-metadata'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport CodeBlocks, {\n    IOnTypeChangeInfo,\n    IOnVisibleLinesChangeInfo,\n    IOnPlacementChangeInfo,\n    IOnScriptVersionChangeInfo,\n    IOnSetAutoResetInfo,\n    IOnThemeChangeInfo,\n    IOnGenerateTemplateInfo,\n    IOnChangeOrder,\n    IOnReloadResourcesInfo,\n} from '@/components/CodeBlocks.vue'\nimport { KnownBlockTypes, CodeOutputTypes } from '@/lib/ICodeBlocks'\n\nvar mixin = {\n    created: function () {\n        console.log(1)\n    },\n}\n@Component\nexport default class CodeBlocksEditor extends CodeBlocks {\n    get editMode(): boolean {\n        return true\n    }\n\n    onTypeChange(nfo: IOnTypeChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        bl.type = nfo.type\n        bl.hidden = nfo.hidden\n        bl.static = nfo.static\n        bl.hasCode = nfo.hasCode\n    }\n\n    onVisibleLinesChange(nfo: IOnVisibleLinesChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        if (nfo.visibleLines != 'auto' && isNaN(nfo.visibleLines)) {\n            bl.visibleLines = 'auto'\n        } else {\n            bl.visibleLines = nfo.visibleLines\n        }\n    }\n    onPlacementChange(nfo: IOnPlacementChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n\n        bl.width = nfo.width\n        bl.height = nfo.height\n        bl.align = nfo.align\n    }\n    onCompilerChange(v: string): void {\n        const c = this.$compilerRegistry.getCompiler({ languageType: v })\n        if (c !== undefined) {\n            console.log('Selected Compiler', c, v, this.blockInfo.compiler)\n            this.blockInfo.compiler.languageType = v\n            this.blockInfo.compiler.version = c.version\n            this.blockInfo.language = c.language\n\n            console.log('PRELOADING')\n            c.preload()\n        }\n    }\n    onCompilerVersionChange(v: string): void {\n        console.log('Selected Version', v, this.blockInfo.compiler.languageType)\n        const c = this.$compilerRegistry.getCompiler({\n            languageType: this.blockInfo.compiler.languageType,\n            version: v,\n        })\n        this.blockInfo.compiler.version = v\n\n        if (c !== undefined) {\n            this.blockInfo.language = c.language\n\n            console.log('PRELOADING')\n            c.preload()\n        }\n    }\n    onRunStateChange(v: boolean): void {\n        this.blockInfo.runCode = v\n    }\n    onContinousCompileStateChange(v: boolean): void {\n        this.blockInfo.continuousCompilation = v\n    }\n    onMessagePassingChange(v: boolean): void {\n        this.blockInfo.messagePassing = v\n    }\n    onKeepAliveChange(v: boolean): void {\n        this.blockInfo.keepAlive = v\n    }\n    onPersistentArgumentsChange(v: boolean): void {\n        if (v === false) {\n            this.blockInfo.clearDefaultArgs()\n        }\n        this.blockInfo.persistentArguments = v\n    }\n    onLanguageChange(v: string): void {\n        this.blockInfo.language = v\n    }\n    onCharacterLimitChange(v: number): void {\n        this.blockInfo.maxCharacters = v\n    }\n    onTimeoutChange(v: number): void {\n        this.blockInfo.executionTimeout = v\n    }\n    onWorkerLibChange(v: string[]): void {\n        this.blockInfo.workerLibs = v\n    }\n    onDomLibChange(v: string[]): void {\n        this.blockInfo.domLibs = v\n    }\n    onScriptVersionChange(nfo: IOnScriptVersionChangeInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.version = nfo.version\n        if (bl.obj) {\n            bl.obj.version = nfo.version\n        }\n    }\n    onSetAutoReset(nfo: IOnSetAutoResetInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.shouldAutoreset = nfo.shouldAutoreset\n    }\n\n    onReloadResources(nfo: IOnReloadResourcesInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.shouldReloadResources = nfo.shouldReloadResources\n    }\n\n    onSetGenerateTemplate(nfo: IOnGenerateTemplateInfo): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        bl.generateTemplate = nfo.generateTemplate\n    }\n\n    onThemeChange(nfo: IOnThemeChangeInfo): void {\n        this.blockInfo.solutionTheme = nfo.solution\n        this.blockInfo.codeTheme = nfo.code\n    }\n    moveUp(idx: number): void {\n        this.blockInfo.moveUp(idx)\n    }\n    moveDown(idx: number): void {\n        this.blockInfo.moveDown(idx)\n    }\n    onChangeOrder(nfo: IOnChangeOrder): void {\n        let bl = this.blockById(nfo.id)\n        if (bl === undefined) {\n            return\n        }\n        this.blockInfo.changeOrder(nfo.id, nfo.newID)\n    }\n    addNewBlock(): void {\n        this.blockInfo.addNewBlock()\n    }\n    removeBlock(idx: number): void {\n        this.blockInfo.removeBlock(idx)\n    }\n    onOutputParserChange(v: CodeOutputTypes): void {\n        this.blockInfo.outputParser = v\n    }\n}\n","var render, staticRenderFns\nimport script from \"./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"\nexport * from \"./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlocksEditor.vue?vue&type=script&lang=ts&\"","<template>\n    <q-layout view=\"hHh lpR fFf\" style=\"min-height:0\">\n        <q-page-container>\n            <CodeBlocksEditor :blockInfo=\"blocks\" />\n        </q-page-container>\n    </q-layout>\n</template>\n\n<script>\nimport CodeBlocksEditor from './components/CodeBlocksEditor'\nimport Vue from 'vue'\n\nexport default {\n    name: 'AppEditor',\n\n    props: ['blocks'],\n\n    components: {\n        CodeBlocksEditor\n    },\n\n    data: () => ({}),\n    computed: {}\n}\n</script>\n\n<style lang=\"sass\">\n#app\n  margin-bottom: 16px\n  background-color: rgba(1,1,1,0)\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/vue-cli-plugin-quasar/lib/loader.transform-quasar-imports.js!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./AppEditor.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AppEditor.vue?vue&type=template&id=0797aa13&\"\nimport script from \"./AppEditor.vue?vue&type=script&lang=js&\"\nexport * from \"./AppEditor.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AppEditor.vue?vue&type=style&index=0&lang=sass&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\nimport QLayout from 'quasar/src/components/layout/QLayout.js';\nimport QPageContainer from 'quasar/src/components/page/QPageContainer.js';\nimport qInstall from \"../node_modules/vue-cli-plugin-quasar/lib/runtime.auto-import.js\";\nqInstall(component, 'components', {QLayout,QPageContainer});\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\nexport class BlockLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'BLOCK'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        const alts = bl.getElementsByTagName('ALTERNATIVE')\n        const codes = bl.getElementsByTagName('CODE')\n        if (codes.length > 0) {\n            block.content = codes[0].textContent ? codes[0].textContent : ''\n        }\n\n        if (alts.length > 0) {\n            block.hasAlternativeContent = true\n            block.alternativeContent = alts[0].textContent\n            if (!editMode && block.noContent) {\n                block.content = block.alternativeContent ? block.alternativeContent : ''\n            }\n        }\n\n        block.hasCode = true\n    }\n}\n\nexport const blockLoader = new BlockLoadManager()\n\nexport default function(loaders: { [index: string]: IBlockloadManager }) {\n    loaders[blockLoader.blockTag] = blockLoader\n}\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nimport { positioninLoadManager } from '@/lib/BlockloadManagers/PositioningManager'\nimport { uuid } from 'vue-uuid'\nexport class PlaygroundLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'PLAYGROUND'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        block.obj = null\n        positioninLoadManager.loadFromDatablock(bl, inBlock, block)\n        block.version = bl.getAttribute('data-version')\n            ? bl.getAttribute('data-version')!\n            : block.version\n    }\n}\n\nexport const playgroundLoader = new PlaygroundLoadManager()\n\nexport default function (loaders: { [index: string]: IBlockloadManager }) {\n    loaders[playgroundLoader.blockTag] = playgroundLoader\n}\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\nexport class DataLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'DATA'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {\n        block.obj = null\n        block.version = bl.getAttribute('data-version')\n            ? bl.getAttribute('data-version')!\n            : block.version\n\n        block.name = inBlock.name !== undefined ? inBlock.name : `v${block.id}`\n    }\n}\n\nexport const dataLoader = new DataLoadManager()\n\nexport default function (loaders: { [index: string]: IBlockloadManager }) {\n    loaders[dataLoader.blockTag] = dataLoader\n}\n","import { IBlockloadManager, IBlockElementData, IBlockDataBase } from '@/lib/ICodeBlocks'\n\nexport class REPLLoadManager implements IBlockloadManager {\n    get blockTag(): string {\n        return 'REPL'\n    }\n\n    loadFromDatablock(\n        bl: HTMLElement,\n        inBlock: IBlockElementData,\n        block: IBlockDataBase,\n        editMode: boolean\n    ): void {}\n}\n\nexport const REPLLoader = new REPLLoadManager()\n\nexport default function (loaders: { [index: string]: IBlockloadManager }) {\n    loaders[REPLLoader.blockTag] = REPLLoader\n}\n","import { ScriptBlock } from './scriptBlock'\nimport { IScriptOutputObject, IPlaygroundObject, ILegacyPlaygroundObject } from './IScriptBlock'\nimport i18n from '../plugins/i18n'\nimport 'reflect-metadata'\nimport { Vue, Component, Watch } from 'vue-property-decorator'\n\nimport App from '../App.vue'\nimport AppEditor from '../AppEditor.vue'\nimport { uuid } from 'vue-uuid'\n\nimport compilerRegistry, { compilerRegistry as CompilerRegistry } from './CompilerRegistry'\nimport { ICompilerErrorDescription, ICompilerID } from './ICompilerRegistry'\nimport {\n    IRandomizerSettings,\n    CodeOutputTypes,\n    IBlockData,\n    KnownBlockTypes,\n    IRandomizerSet,\n    IRandomizerSetTag,\n    ICodeBlockDataState,\n    IBlockDataBase,\n    IBlockDataBlockly,\n    IBlockloadManager,\n    IBlockElementData,\n    CodeExpansionType,\n} from './ICodeBlocks'\n\n//get loaders\nimport blockInstaller from '@/lib/BlockloadManagers/BlockManager'\nimport blocklyInstaller from '@/lib/BlockloadManagers/BlocklyManager'\nimport playgroundInstaller from '@/lib/BlockloadManagers/PlaygroundManager'\nimport dataInstaller from '@/lib/BlockloadManagers/DataManager'\nimport REPLInstaller from '@/lib/BlockloadManagers/REPLManager'\nimport { trim } from 'jquery'\n\nconst loaders: { [index: string]: IBlockloadManager } = {}\nblockInstaller(loaders)\nblocklyInstaller(loaders)\nplaygroundInstaller(loaders)\nREPLInstaller(loaders)\ndataInstaller(loaders)\n\nVue.prototype.$compilerRegistry = CompilerRegistry\n\nexport interface IAppSettings {\n    id: number\n    uuid: string\n    editMode: boolean\n    readonly: boolean\n    randomizer: IRandomizerSettings\n    blocks: BlockData[]\n    compiler: ICompilerID\n    language: string\n    runCode: boolean\n    domLibs: string[]\n    workerLibs: string[]\n    outputParser: CodeOutputTypes\n    solutionTheme: string\n    codeTheme: string\n    executionTimeout: number\n    maxCharacters: number\n    scopeUUID?: string\n    scopeSelector?: string\n    continuousCompilation: boolean\n    messagePassing: boolean\n    keepAlive: boolean\n    persistentArguments: boolean\n    shadowRoot?: ShadowRoot\n}\n\ninterface IAppElementData {\n    randomizerActive?: string\n    randomizerPreviewIndex?: string\n    randomizerKnownTags?: string\n    randomizerSets?: string\n    question?: string\n    compiler?: string\n    compilerVersion?: string\n    domLibs?: string\n    workerLibs?: string\n    readonly?: string\n    runCode?: string\n    id?: string\n    executionTimeout?: string\n    maxCharacters?: string\n    scopeUUID?: string\n    scopeSelector?: string\n    continuousCompilation?: string\n    messagePassing?: string\n    keepAlive?: string\n    persistentArguments?: string\n    outputParser?: CodeOutputTypes\n    solutionTheme?: string\n    codeTheme?: string\n}\n\nexport interface IBlockBookmarkPayload {\n    uuid: string\n    block: BlockData | null\n}\n@Component\nexport class BlockData extends Vue implements IBlockData {\n    appSettings!: IAppSettings\n    hasCode!: boolean\n    type!: KnownBlockTypes\n    content!: string\n    alternativeContent!: string | null\n    noContent!: boolean\n    id!: number\n    uuid!: string\n    parentID!: number\n    expanded!: boolean\n    codeExpanded!: CodeExpansionType\n    obj!: ScriptBlock | null\n    dataObj!: any | null\n    readonly!: boolean\n    static!: boolean\n    hidden!: boolean\n    version!: string\n    readyCount!: number\n    errors!: ICompilerErrorDescription[]\n    scopeUUID?: string\n    scopeSelector!: string\n    visibleLines!: number | 'auto'\n    hasAlternativeContent!: boolean\n    shouldAutoreset!: boolean\n    shouldReloadResources!: boolean\n    generateTemplate!: boolean\n    width!: string\n    height!: string\n    align!: string\n    blockly!: IBlockDataBlockly\n    lineCountHint!: number\n    name!: string\n    _oac?: () => string //used by Blockly to re-place the actualContent-Method while keeping the old implementation around\n\n    actualContent() {\n        if (this.appSettings.randomizer.active) {\n            return Vue.$tagger.replaceRandomTagsInString(\n                this.content,\n                this.appSettings.randomizer.sets[this.appSettings.randomizer.previewIndex]\n            )\n        }\n\n        return this.content\n    }\n    recreateScriptObject() {\n        if (this.type === KnownBlockTypes.PLAYGROUND) {\n            console.i('recreateScriptObject - Playground')\n\n            const so = new ScriptBlock(this.actualContent(), this.version)\n            this.obj = so\n            console.i('Block Rebuild', this.obj, this.uuid)\n        } else if (this.type === KnownBlockTypes.DATA) {\n            console.i('recreateScriptObject - Data')\n\n            this.dataObj = {\n                name: '',\n                content: '',\n            }\n            console.i('Block Rebuild', this.obj, this.uuid)\n        }\n    }\n    created() {\n        this.recreateScriptObject()\n    }\n\n    getThemeForBlock(bl: ICodeBlockDataState): string {\n        if (bl.static || bl.readonly || bl.hidden) {\n            return this.appSettings.codeTheme\n        }\n\n        return this.appSettings.solutionTheme\n    }\n\n    get themeForCodeBlock(): string {\n        if (this.static || this.readonly || this.hidden) {\n            return this.appSettings.codeTheme\n        }\n\n        return this.appSettings.solutionTheme\n    }\n\n    get isLast(): boolean {\n        return this.id == this.appSettings.blocks.length - 1\n    }\n    get firstLine(): number {\n        if (this.id === 0) {\n            return 1\n        }\n        return this.appSettings.blocks[this.id - 1].nextLine\n    }\n\n    get lineCount(): number {\n        if (!this.hasCode) {\n            return 0\n        }\n        if (this.lineCountHint >= 0) {\n            return this.lineCountHint\n        }\n\n        let ct = 0\n        this.content.replace(/\\n/, (m) => {\n            ct++\n            return m\n        })\n        return ct\n    }\n\n    get nextLine(): number {\n        if (!this.hasCode) {\n            return this.firstLine\n        }\n        return this.firstLine + this.lineCount\n    }\n    get domLibs(): string[] {\n        return this.appSettings.domLibs\n    }\n\n    //is this right. Happend when converting from JS\n    get scriptVersion(): string {\n        return this.version\n    }\n\n    @Watch('type')\n    onTypeChanged(newType: KnownBlockTypes, oldType: KnownBlockTypes) {\n        if (newType != oldType) {\n            this.recreateScriptObject()\n        }\n    }\n\n    get scope(): JQuery<HTMLElement> {\n        return this.scopeSelector\n            ? $(this.scopeSelector)\n            : $(`.codeblocks[uuid=\"${this.appSettings.uuid}\"]`)\n    }\n}\n\nexport interface IMainBlock extends IAppSettings {\n    swap(id1: number, id2: number): void\n    moveUp(id: number): void\n    moveDown(id: number): void\n    changeOrder(id: number, newID: number): void\n    removeBlock(idx: number): void\n    addNewBlock(): void\n\n    initArgsForLanguage(): object | string[]\n    storeDefaultArgs(args: object | string[]): void\n    clearDefaultArgs(): void\n}\n\nfunction isTrue(val: any): boolean {\n    //return val !== undefined || val == 'true' || val == '1'\n    return val !== undefined && val != 'false' && val != '0'\n}\n\nconst useShadowDOM = false\n\n//this will handle the vue mounting on the dom\nclass InternalCodeBlocksManager {\n    constructBlock(data: IAppSettings, bl: IBlockDataBase): BlockData {\n        if (bl.type === KnownBlockTypes.PLAYGROUND || bl.type === KnownBlockTypes.DATA) {\n            if (bl.content == '' || bl.content === undefined || bl.content === null) {\n                bl.content = '{}'\n            }\n        }\n\n        return new BlockData({\n            data: () => {\n                return {\n                    ...bl,\n                    appSettings: data,\n                }\n            },\n        })\n    }\n\n    readonly element: HTMLElement\n    readonly data: IAppSettings\n    readonly shadowRoot: ShadowRoot | undefined = undefined\n    constructor(el: HTMLElement) {\n        if (useShadowDOM) {\n            const content = el.outerHTML\n\n            //replace original element with empty div that will store the shadowDOM\n            const parent = el.parentElement!\n            const rewrap = document.createElement('DIV')\n            parent.replaceChild(rewrap, el)\n\n            //add shadowDOM and clear content\n            const shadow = rewrap.attachShadow({ mode: 'open' })\n            this.shadowRoot = shadow\n            shadow.innerHTML = ''\n\n            //copy root-level styles into the shadowDOM\n            $('style').each((idx, style) => {\n                const st = document.createElement('STYLE')\n                st.innerHTML = style.innerHTML\n                shadow.appendChild(st)\n            })\n\n            $('link[shadow]').each((idx, link) => {\n                shadow.appendChild(link.cloneNode())\n            })\n\n            // //add new root and append original Element\n            // const root = document.createElement('DIV')\n            // root.id = 'root'\n            // //root.innerHTML = noContent\n            // root.appendChild(el)\n            // shadow.appendChild(root)\n            // console.log($('style').length)\n            // this.element = root\n\n            //append original element to shadowDOM\n            shadow.appendChild(el)\n            this.element = el\n        } else {\n            this.shadowRoot = undefined\n            this.element = el\n        }\n        //console.log(this.element)\n        const inData = el.dataset as IAppElementData\n        const data: IAppSettings = {\n            id: -1,\n            editMode: el.tagName == 'CODEBLOCKSEDITOR' || el.hasAttribute('codeblockseditor'),\n            runCode: false,\n            language: 'javascript',\n            compiler: {\n                languageType: 'javascript',\n                version: '101',\n            },\n            randomizer: {\n                active: false,\n                previewIndex: 0,\n                knownTags: [],\n                sets: [],\n            },\n            domLibs: [],\n            workerLibs: [],\n            blocks: [],\n            outputParser: CodeOutputTypes.AUTO,\n            readonly: false,\n            solutionTheme: 'solarized light',\n            codeTheme: 'xq-light',\n            uuid: 'is-set-below',\n            executionTimeout: 5000,\n            maxCharacters: 1000,\n            continuousCompilation: isTrue(inData.continuousCompilation),\n            messagePassing: isTrue(inData.messagePassing),\n            keepAlive: isTrue(inData.keepAlive),\n            persistentArguments: isTrue(inData.persistentArguments),\n            shadowRoot: this.shadowRoot,\n        }\n\n        if (inData.randomizerActive !== undefined) {\n            data.randomizer.active = isTrue(inData.randomizerActive)\n        }\n        if (inData.randomizerPreviewIndex !== undefined) {\n            data.randomizer.previewIndex = Number(inData.randomizerPreviewIndex)\n        }\n        if (inData.randomizerKnownTags !== undefined) {\n            data.randomizer.knownTags = JSON.parse(inData.randomizerKnownTags)\n        }\n        if (inData.randomizerSets !== undefined) {\n            data.randomizer.sets = JSON.parse(inData.randomizerSets).map((o: object, i: number) => {\n                const ret: IRandomizerSet = {\n                    uuid: uuid.v4(),\n                    values: [],\n                }\n                Object.keys(o).forEach((tag) => {\n                    const item: IRandomizerSetTag = {\n                        tag: tag,\n                        value: o[tag],\n                    }\n                    ret.values.push(item)\n                })\n\n                return ret\n            })\n        }\n\n        if (inData.question !== undefined) {\n            data.id = Number(inData.question)\n        }\n\n        if (inData.compiler !== undefined) {\n            const cInfo: ICompilerID = {\n                languageType: inData.compiler,\n                version: inData.compilerVersion!,\n            }\n            data.compiler = cInfo\n\n            const c = CompilerRegistry.getCompiler(data.compiler)\n            if (c === undefined) {\n                data.runCode = false\n                data.language = data.compiler.languageType\n            } else {\n                data.runCode = isTrue(inData.runCode)\n                data.language = c.language\n                data.compiler.version = c.version\n            }\n        }\n\n        if (inData.domLibs !== undefined) {\n            data.domLibs = JSON.parse(inData.domLibs).map((l: string) =>\n                compilerRegistry.mapLibrary(l)\n            )\n        }\n\n        if (inData.readonly !== undefined) {\n            if (data.editMode) {\n                data.readonly = false\n            } else {\n                data.readonly = isTrue(inData.readonly)\n            }\n        }\n\n        if (inData.workerLibs !== undefined) {\n            data.workerLibs = JSON.parse(inData.workerLibs)\n        }\n\n        if (el.hasAttribute('uuid')) {\n            data.uuid = el.getAttribute('uuid')!\n        } else {\n            data.uuid = uuid.v4()\n            el.setAttribute('uuid', data.uuid)\n        }\n\n        //data.id = Number(data.id)\n\n        if (inData.executionTimeout !== undefined) {\n            data.executionTimeout = Number(inData.executionTimeout)\n        }\n\n        if (inData.maxCharacters !== undefined) {\n            data.maxCharacters = Number(inData.maxCharacters)\n        }\n\n        if (inData.scopeUUID !== undefined) {\n            data.scopeUUID = inData.scopeUUID\n        }\n        if (inData.scopeSelector !== undefined) {\n            data.scopeSelector = inData.scopeSelector\n        }\n\n        if (inData.outputParser !== undefined) {\n            data.outputParser = inData.outputParser\n        }\n\n        if (inData.solutionTheme !== undefined) {\n            data.solutionTheme = inData.solutionTheme\n        }\n\n        if (inData.codeTheme !== undefined) {\n            data.codeTheme = inData.codeTheme\n        }\n\n        el.querySelectorAll('*').forEach((blIn) => {\n            const bl = blIn as HTMLElement\n            //only first level children\n            if (bl.parentElement != el) {\n                return\n            }\n            const inBlock = bl.dataset as IBlockElementData\n            const as = bl.getAttribute('as')\n            if (as !== null) {\n                inBlock.as = as.trim().toUpperCase()\n            }\n\n            const block: IBlockDataBase = {\n                as: inBlock.as ? KnownBlockTypes[inBlock.as] : undefined,\n                hasCode: false,\n                version: '101',\n                type: bl.tagName as KnownBlockTypes,\n                content: bl.textContent ? bl.textContent : '',\n                alternativeContent: null,\n                hasAlternativeContent: false,\n                id: data.blocks.length,\n                uuid: uuid.v4(),\n                parentID: data.id,\n                width: '100%',\n                height: '200px',\n                align: 'center',\n                readyCount: 0,\n                obj: null,\n                name: `v${data.blocks.length}`,\n                lineCountHint: -1,\n                blockly: {\n                    showControls: false,\n                    useOverride: false,\n                    toolbox: {\n                        categories: [],\n                    },\n                    toolboxOverride: '',\n                    blocks: [],\n                    _blockErrors: [],\n                },\n                errors: [],\n                readonly: isTrue(inBlock.readonly),\n                static: isTrue(inBlock.static),\n                hidden: isTrue(inBlock.hidden),\n                visibleLines:\n                    inBlock.visibleLines === undefined ||\n                    inBlock.visibleLines?.trim().toLowerCase() == 'auto'\n                        ? 'auto'\n                        : Number(inBlock.visibleLines),\n                shouldAutoreset: isTrue(inBlock.shouldAutoreset),\n                shouldReloadResources: isTrue(inBlock.shouldReloadResources),\n                generateTemplate:\n                    undefined ||\n                    (inBlock.generateTemplate != 'false' && inBlock.generateTemplate != '0'),\n\n                expanded:\n                    inBlock.expanded === undefined ||\n                    (inBlock.expanded != 'false' && inBlock.expanded != '0'),\n                codeExpanded: CodeExpansionType.AUTO,\n                noContent: isTrue(inBlock.noContent),\n                scopeUUID: inBlock.scopeUUID,\n                scopeSelector: inBlock.scopeSelector,\n            }\n\n            if (inBlock.codeExpanded !== undefined) {\n                if (\n                    inBlock.codeExpanded.toUpperCase() == 'TINY' ||\n                    inBlock.codeExpanded == 'false' ||\n                    inBlock.codeExpanded == '0'\n                ) {\n                    block.codeExpanded = CodeExpansionType.TINY\n                } else if (\n                    inBlock.codeExpanded.toUpperCase() == 'LARGE' ||\n                    inBlock.codeExpanded == '2'\n                ) {\n                    block.codeExpanded = CodeExpansionType.LARGE\n                }\n            }\n\n            if (!data.editMode && block.noContent) {\n                block.content = ''\n            }\n            if (inBlock.alternativeContent !== undefined && !block.static && !block.hidden) {\n                block.alternativeContent = inBlock.alternativeContent\n                block.hasAlternativeContent = true\n                if (!data.editMode && block.noContent) {\n                    block.content = block.alternativeContent\n                }\n            } else {\n                block.hasAlternativeContent = false\n            }\n\n            if (block.type != 'TEXT') {\n                console.log('BL', block.type, block.as)\n                if (block.as) {\n                    block.type = block.as\n                }\n                const loader = loaders[block.type]\n                console.d('LOADER', loader, loaders, block.type, block.as)\n                if (loader === undefined) {\n                    console.i('Skipping', block.type, block.as)\n                    return\n                } else {\n                    loader.loadFromDatablock(bl, inBlock, block, data.editMode)\n                }\n            }\n\n            data.blocks.push(this.constructBlock(data, block))\n        })\n        this.data = data\n\n        console.d('DATA', data)\n    }\n\n    instantiateVue() {\n        const data = this.data\n        const self = this\n        new Vue({\n            i18n,\n            render: function (h) {\n                @Component({\n                    data: function () {\n                        return data\n                    },\n                })\n                class MainBlock extends Vue implements IMainBlock {\n                    id!: number\n                    uuid!: string\n                    editMode!: boolean\n                    readonly!: boolean\n                    randomizer!: IRandomizerSettings\n                    blocks!: BlockData[]\n                    compiler!: ICompilerID\n                    language!: string\n                    runCode!: boolean\n                    domLibs!: string[]\n                    workerLibs!: string[]\n                    outputParser!: CodeOutputTypes\n                    solutionTheme!: string\n                    codeTheme!: string\n                    executionTimeout!: number\n                    maxCharacters!: number\n                    scopeUUID?: string\n                    scopeSelector?: string\n                    continuousCompilation!: boolean\n                    messagePassing!: boolean\n                    keepAlive!: boolean\n                    persistentArguments!: boolean\n\n                    initArgsForLanguage() {\n                        console.d('Constructing args for', this.language, this.defaultArgs)\n\n                        if (this.defaultArgs === undefined) {\n                            if (this.language === 'java') {\n                                return []\n                            } else {\n                                return {}\n                            }\n                        } else {\n                            return this.defaultArgs\n                        }\n                    }\n\n                    defaultArgs!: object | string[] | undefined\n                    storeDefaultArgs(args: object | string[]) {\n                        this.defaultArgs = args\n                    }\n                    clearDefaultArgs() {\n                        this.defaultArgs = undefined\n                    }\n\n                    swap(id1: number, id2: number) {\n                        const a = this.blocks[id1]\n                        this.blocks[id1] = this.blocks[id2]\n                        this.blocks[id2] = a\n\n                        this.blocks[id1].id = id1\n                        this.blocks[id2].id = id2\n                    }\n                    moveUp(id: number) {\n                        if (id <= 0) {\n                            return\n                        }\n                        this.swap(id - 1, id)\n                    }\n                    moveDown(id: number) {\n                        if (id >= this.blocks.length - 1) {\n                            return\n                        }\n                        this.swap(id, id + 1)\n                    }\n                    changeOrder(id: number, newID: number): void {\n                        this.swap(id, newID)\n                    }\n                    removeBlock(idx: number) {\n                        data.blocks.splice(idx, 1)\n                        for (let i = idx; i < data.blocks.length; i++) {\n                            data.blocks[i].id = i\n                        }\n                    }\n                    addNewBlock() {\n                        const block: IBlockDataBase = {\n                            noContent: false,\n                            alternativeContent: null,\n                            hasCode: true,\n                            type: KnownBlockTypes.BLOCK,\n                            content: '',\n                            id: data.blocks.length,\n                            uuid: uuid.v4(),\n                            name: `v${data.blocks.length}`,\n                            parentID: data.id,\n                            expanded: true,\n                            codeExpanded: CodeExpansionType.AUTO,\n                            width: '100%',\n                            height: '200px',\n                            align: 'center',\n                            obj: null,\n                            readonly: false,\n                            static: true,\n                            hidden: false,\n                            version: '101',\n                            readyCount: 0,\n                            errors: [],\n                            scopeUUID: data.scopeUUID,\n                            scopeSelector: data.scopeSelector,\n                            visibleLines: 10,\n                            hasAlternativeContent: false,\n                            shouldAutoreset: false,\n                            shouldReloadResources: false,\n                            generateTemplate: true,\n                            blockly: {\n                                showControls: false,\n                                useOverride: false,\n                                toolboxOverride: '',\n                                toolbox: {\n                                    categories: [],\n                                },\n                                blocks: [],\n                                _blockErrors: [],\n                            },\n                            lineCountHint: -1,\n                        }\n                        data.blocks.push(self.constructBlock(data, block))\n                    }\n                }\n                const context = {\n                    props: {\n                        language: data.language,\n                        id: data.id,\n                        blocks: new MainBlock(),\n                    },\n                }\n                return h(data.editMode ? AppEditor : App, context)\n            },\n        }).$mount(this.element)\n    }\n}\n\nexport class MountableArray extends Array<InternalCodeBlocksManager> {\n    mount() {\n        this.forEach((el) => el.instantiateVue())\n    }\n}\n\nexport const CodeBlocksManager = {\n    find(scope: HTMLElement | Document | undefined) {\n        if (scope === undefined) {\n            scope = document\n        }\n        const allCodeBlockParents = scope.querySelectorAll(\n            'codeblocks, codeblockseditor, div[codeblocks], div[codeblockseditor]'\n        )\n        const result = new MountableArray()\n        allCodeBlockParents.forEach((el) => {\n            const cbm = new InternalCodeBlocksManager(el as HTMLElement)\n            let scope = cbm.data.scopeSelector\n                ? document.querySelector(cbm.data.scopeSelector)\n                : undefined\n            if (scope === undefined || scope === null) {\n                scope = el\n            }\n\n            Vue.$hljs.$vue.processElements(scope)\n            if (cbm.data.editMode) {\n                Vue.$tagger.processElements(scope)\n                cbm.data.scopeSelector = `[uuid=${scope.getAttribute('uuid')}]`\n                cbm.data.scopeUUID = scope.getAttribute('uuid')\n                    ? scope.getAttribute('uuid')!\n                    : undefined\n                cbm.data.blocks.forEach((b) => {\n                    b.scopeUUID = cbm.data.scopeUUID\n                    b.scopeSelector = cbm.data.scopeSelector\n                        ? cbm.data.scopeSelector\n                        : `[uuid=${b.scopeUUID}]`\n                })\n            }\n\n            result.push(cbm)\n        })\n        return result\n    },\n}\n","String.prototype.replaceAllPoly = function(search: string, replacement: string): string {\n    var target = this\n    return target.replace(new RegExp(search, 'g'), replacement)\n}\nString.prototype.replaceRec = function(pattern: string | RegExp, replacement: string): string {\n    var newstr = this.replace(pattern, replacement)\n    if (newstr == this) {\n        return newstr\n    }\n    return newstr.replaceRec(pattern, replacement)\n}\n\nconsole.d = function(...lines) {\n    if (process.env.NODE_ENV == 'development') {\n        console.debug('[DEBUG]', ...lines)\n    }\n}\n\nconsole.i = function(...lines) {\n    if (process.env.NODE_ENV == 'development') {\n        console.log('[INFO]', ...lines)\n    }\n}\n\nimport Vue from 'vue'\nimport 'reflect-metadata'\nimport './plugins/uuid'\nimport './plugins/quasar'\nimport './plugins/codemirror'\nimport './plugins/codeBlocks'\nimport './plugins/compilerState'\nimport './plugins/codemirror'\nimport './plugins/highlight'\nimport './plugins/tagger'\n//import './plugins/blocklyEnv'\n//remove \"noImplicitAny\": false from tsconfig when this file goes ts\nimport { CodeBlocksManager } from './lib/codeBlocksManager'\n\nVue.config.productionTip = false\nCodeBlocksManager.find(document).mount()\n\nwindow.mountInElement = function(element: any): void {\n    Vue.$hljs.$vue.processElements(element)\n    Vue.$tagger.processElements(element)\n    CodeBlocksManager.find(element).mount()\n}\n\nwindow.mountCodeBlocks = function(scope: HTMLElement | Document | undefined) {\n    return CodeBlocksManager.find(scope).mount()\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodeBlock.vue?vue&type=style&index=0&id=2ff15259&scoped=true&lang=sass&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../node_modules/cache-loader/dist/cjs.js??ref--1-1!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=sass&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=style&index=1&lang=stylus&\"","/**@license\n *       __ _____                     ________                              __\n *      / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___  / /\n *  __ / // // // // // _  // _// // / / // _  // _//     // //  \\/ // _ \\/ /\n * /  / // // // // // ___// / / // / / // ___// / / / / // // /\\  // // / /__\n * \\___//____ \\\\___//____//_/ _\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\__\\_\\___/\n *           \\/              /____/                              version 2.31.1\n *\n * This file is part of jQuery Terminal. https://terminal.jcubic.pl\n *\n * Copyright (c) 2010-2021 Jakub T. Jankiewicz <https://jcubic.pl/me>\n * Released under the MIT license\n *\n * Contains:\n *\n * Storage plugin Distributed under the MIT License\n * modified to work from Data URIs that block storage and cookies in Chrome\n * Copyright (c) 2010 Dave Schindler\n *\n * jQuery Timers licenced with the WTFPL\n * <http://jquery.offput.ca/timers/>\n *\n * Cross-Browser Split 1.1.1\n * Copyright 2007-2012 Steven Levithan <stevenlevithan.com>\n * Available under the MIT License\n *\n * jQuery Caret\n * Copyright (c) 2009, Gideon Sireling\n * 3 clause BSD License\n *\n * sprintf.js\n * Copyright (c) 2007-2013 Alexandru Marasteanu <hello at alexei dot ro>\n * licensed under 3 clause BSD license\n *\n * debounce function from Lodash\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * The MIT License\n *\n * emoji regex v9.0.0 by Mathias Bynens\n * MIT license\n *\n * broken image by Sophia Bai from the Noun Project (CC-BY)\n *\n * Date: Thu, 30 Dec 2021 10:56:33 +0000\n */\n/* global define, Map */\n/* eslint-disable */\n/* istanbul ignore next */\n(function(ctx) {\n    var sprintf = function() {\n        if (!sprintf.cache.hasOwnProperty(arguments[0])) {\n            sprintf.cache[arguments[0]] = sprintf.parse(arguments[0]);\n        }\n        return sprintf.format.call(null, sprintf.cache[arguments[0]], arguments);\n    };\n    sprintf.format = function(parse_tree, argv) {\n        var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\n        for (i = 0; i < tree_length; i++) {\n            node_type = get_type(parse_tree[i]);\n            if (node_type === 'string') {\n                output.push(parse_tree[i]);\n            }\n            else if (node_type === 'array') {\n                match = parse_tree[i]; // convenience purposes only\n                if (match[2]) { // keyword argument\n                    arg = argv[cursor];\n                    for (k = 0; k < match[2].length; k++) {\n                        if (!arg.hasOwnProperty(match[2][k])) {\n                            throw(sprintf('[sprintf] property \"%s\" does not exist', match[2][k]));\n                        }\n                        arg = arg[match[2][k]];\n                    }\n                }\n                else if (match[1]) { // positional argument (explicit)\n                    arg = argv[match[1]];\n                }\n                else { // positional argument (implicit)\n                    arg = argv[cursor++];\n                }\n\n                if (/[^s]/.test(match[8]) && (get_type(arg) !== 'number')) {\n                    throw(sprintf('[sprintf] expecting number but found %s', get_type(arg)));\n                }\n                switch (match[8]) {\n                    case 'b': arg = arg.toString(2); break;\n                    case 'c': arg = String.fromCharCode(arg); break;\n                    case 'd': arg = parseInt(arg, 10); break;\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\n                    case 'o': arg = arg.toString(8); break;\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.slice(0, match[7]) : arg); break;\n                    case 'u': arg = arg >>> 0; break;\n                    case 'x': arg = arg.toString(16); break;\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\n                }\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? ' +' + arg : arg);\n                pad_character = match[4] ? match[4] === '0' ? '0' : match[4].charAt(1) : ' ';\n                pad_length = match[6] - String(arg).length;\n                pad = match[6] ? str_repeat(pad_character, pad_length) : '';\n                output.push(match[5] ? arg + pad : pad + arg);\n            }\n        }\n        return output.join('');\n    };\n\n    sprintf.cache = {};\n\n    sprintf.parse = function(fmt) {\n        var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\n        while (_fmt) {\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\n                parse_tree.push(match[0]);\n            }\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\n                parse_tree.push('%');\n            }\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\n                if (match[2]) {\n                    arg_names |= 1;\n                    var field_list = [], replacement_field = match[2], field_match = [];\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                        field_list.push(field_match[1]);\n                        while ((replacement_field = replacement_field.slice(field_match[0].length)) !== '') {\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\n                                field_list.push(field_match[1]);\n                            }\n                            else {\n                                throw('[sprintf] huh?');\n                            }\n                        }\n                    }\n                    else {\n                        throw('[sprintf] huh?');\n                    }\n                    match[2] = field_list;\n                }\n                else {\n                    arg_names |= 2;\n                }\n                if (arg_names === 3) {\n                    throw('[sprintf] mixing positional and named placeholders is not (yet) supported');\n                }\n                parse_tree.push(match);\n            }\n            else {\n                throw('[sprintf] huh?');\n            }\n            _fmt = _fmt.slice(match[0].length);\n        }\n        return parse_tree;\n    };\n\n    var vsprintf = function(fmt, argv, _argv) {\n        _argv = argv.slice(0);\n        _argv.splice(0, 0, fmt);\n        return sprintf.apply(null, _argv);\n    };\n\n    /**\n     * helpers\n     */\n    function get_type(variable) {\n        return Object.prototype.toString.call(variable).slice(8, -1).toLowerCase();\n    }\n\n    function str_repeat(input, multiplier) {\n        for (var output = []; multiplier > 0; output[--multiplier] = input) {/* do nothing */}\n        return output.join('');\n    }\n\n    /**\n     * export to either browser or node.js\n     */\n    ctx.sprintf = sprintf;\n    ctx.vsprintf = vsprintf;\n})(typeof global !== \"undefined\" ? global : self || window);\n// -----------------------------------------------------------------------\n/* eslint-enable */\n// UMD taken from https://github.com/umdjs/umd\n(function(factory, undefined) {\n    var root;\n    if (typeof window !== 'undefined') {\n        root = window;\n    } else if (typeof self !== 'undefined') {\n        root = self;\n    } else if (typeof global !== 'undefined') {\n        root = global;\n    } else {\n        throw new Error('Unknow context');\n    }\n    if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        // istanbul ignore next\n        define(['jquery', 'wcwidth'], function(jquery, wcwidth) {\n            factory(jquery, wcwidth, root);\n            return jquery;\n        });\n    } else if (typeof module === 'object' && module.exports) {\n        // Node/CommonJS\n        module.exports = function(root, jQuery, wcwidth) {\n            if (jQuery === undefined) {\n                // require('jQuery') returns a factory that requires window to\n                // build a jQuery instance, we normalize how we use modules\n                // that require this pattern but the window provided is a noop\n                // if it's defined (how jquery works)\n                if (typeof window !== 'undefined') {\n                    jQuery = require('jquery');\n                } else {\n                    jQuery = require('jquery')(root);\n                }\n            }\n            if (wcwidth === undefined) {\n                wcwidth = require('wcwidth');\n            }\n            factory(jQuery, wcwidth, root);\n            return jQuery;\n        };\n    } else {\n        // Browser\n        // istanbul ignore next\n        factory(root.jQuery, root.wcwidth, root);\n    }\n})(function($, wcwidth, root, undefined) {\n    'use strict';\n    // -----------------------------------------------------------------------\n    // :: debug functions\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    /* istanbul ignore next */\n    function debug(str) {\n        if (false) {\n            console.log(str);\n            //$.terminal.active().echo(str);\n        }\n    }\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: Replacemenet for jQuery 2 deferred objects\n    // -----------------------------------------------------------------------\n    function DelayQueue() {\n        var callbacks = $.Callbacks();\n        var resolved = false;\n        this.resolve = function() {\n            callbacks.fire();\n            resolved = true;\n        };\n        this.add = function(fn) {\n            if (resolved) {\n                fn();\n            } else {\n                callbacks.add(fn);\n            }\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: map object to object\n    // -----------------------------------------------------------------------\n    $.omap = function(o, fn) {\n        var result = {};\n        $.each(o, function(k, v) {\n            result[k] = fn.call(o, k, v);\n        });\n        return result;\n    };\n    $.fn.text_length = function() {\n        return this.map(function() {\n            return $(this).text().length;\n        }).get().reduce(function(a, b) {\n            return a + b;\n        }, 0);\n    };\n    // -----------------------------------------------------------------------\n    // :: Deep clone of objects and arrays\n    // -----------------------------------------------------------------------\n    var Clone = {\n        clone_object: function(object) {\n            var tmp = {};\n            if (typeof object === 'object') {\n                if ($.isArray(object)) {\n                    return this.clone_array(object);\n                } else if (object === null) {\n                    return object;\n                } else {\n                    for (var key in object) {\n                        if ($.isArray(object[key])) {\n                            tmp[key] = this.clone_array(object[key]);\n                        } else if (typeof object[key] === 'object') {\n                            tmp[key] = this.clone_object(object[key]);\n                        } else {\n                            tmp[key] = object[key];\n                        }\n                    }\n                }\n            }\n            return tmp;\n        },\n        clone_array: function(array) {\n            if (!is_function(Array.prototype.map)) {\n                throw new Error(\"Your browser don't support ES5 array map \" +\n                                'use es5-shim');\n            }\n            return array.slice(0).map(function(item) {\n                if (typeof item === 'object') {\n                    return this.clone_object(item);\n                } else {\n                    return item;\n                }\n            }.bind(this));\n        }\n    };\n    var clone = function(object) {\n        return Clone.clone_object(object);\n    };\n    // -----------------------------------------------------------------------\n    // IE11 polyfill\n    // -----------------------------------------------------------------------\n    /* eslint-disable */\n    if ('Map' in root && !('clear' in Map.prototype)) {\n        Map.prototype.clear = function() {\n            this.forEach(function(value, key, map) {\n                map.delete(key);\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Storage plugin\n    // -----------------------------------------------------------------------\n    var localStorage;\n    /* istanbul ignore next */\n    (function() {\n        var hasLS = function() {\n            try {\n                var testKey = 'test', storage = window.localStorage;\n                storage.setItem(testKey, '1');\n                storage.removeItem(testKey);\n                return true;\n            } catch (error) {\n                return false;\n            }\n        };\n        var hasCookies = function() {\n            try {\n                document.cookie.split(';');\n                return true;\n            } catch (e) {\n                return false;\n            }\n        };\n        // Private data\n        var isLS = hasLS();\n        // Private functions\n        function wls(n, v) {\n            var c;\n            if (typeof n === 'string' && typeof v === 'string') {\n                localStorage[n] = v;\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        localStorage[c] = n[c];\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function wc(n, v) {\n            var dt, e, c;\n            dt = new Date();\n            dt.setTime(dt.getTime() + 31536000000);\n            e = '; expires=' + dt.toGMTString();\n            if (typeof n === 'string' && typeof v === 'string') {\n                document.cookie = n + '=' + v + e + '; path=/';\n                return true;\n            } else if (typeof n === 'object' && typeof v === 'undefined') {\n                for (c in n) {\n                    if (n.hasOwnProperty(c)) {\n                        document.cookie = c + '=' + n[c] + e + '; path=/';\n                    }\n                }\n                return true;\n            }\n            return false;\n        }\n        function rls(n) {\n            return localStorage[n];\n        }\n        function rc(n) {\n            var nn, ca, i, c;\n            nn = n + '=';\n            ca = document.cookie.split(';');\n            for (i = 0; i < ca.length; i++) {\n                c = ca[i];\n                while (c.charAt(0) === ' ') {\n                    c = c.slice(1, c.length);\n                }\n                if (c.indexOf(nn) === 0) {\n                    return c.slice(nn.length, c.length);\n                }\n            }\n            return null;\n        }\n        function dls(n) {\n            return delete localStorage[n];\n        }\n        function dc(n) {\n            return wc(n, '', -1);\n        }\n        /**\n         * Public API\n         * $.Storage.set(\"name\", \"value\")\n         * $.Storage.set({\"name1\":\"value1\", \"name2\":\"value2\", etc})\n         * $.Storage.get(\"name\")\n         * $.Storage.remove(\"name\")\n         */\n        if (!hasCookies() && !isLS) {\n            localStorage = {};\n            $.extend({\n                Storage: {\n                    set: wls,\n                    get: rls,\n                    remove: dls\n                }\n            });\n        } else {\n            if (isLS) {\n                localStorage = window.localStorage;\n            }\n            $.extend({\n                Storage: {\n                    set: isLS ? wls : wc,\n                    get: isLS ? rls : rc,\n                    remove: isLS ? dls : dc\n                }\n            });\n        }\n    })();\n    // -----------------------------------------------------------------------\n    // :: Debounce from Lodash\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    var debounce = (function() {\n        var FUNC_ERROR_TEXT = 'Expected a function';\n        function isObject(value) {\n            var type = typeof value;\n            return value != null && (type == 'object' || type == 'function');\n        }\n        function now() {\n            return Date.now();\n        }\n        return function debounce(func, wait, options) {\n            var nativeMax = Math.max,\n                nativeMin = Math.min;\n\n            var lastArgs,\n                lastThis,\n                maxWait,\n                result,\n                timerId,\n                lastCallTime,\n                lastInvokeTime = 0,\n                leading = false,\n                maxing = false,\n                trailing = true;\n\n            if (typeof func != 'function') {\n                throw new TypeError(FUNC_ERROR_TEXT);\n            }\n            wait = wait || 0;\n            if (isObject(options)) {\n                leading = !!options.leading;\n                maxing = 'maxWait' in options;\n                maxWait = maxing ? nativeMax(options.maxWait || 0, wait) : maxWait;\n                trailing = 'trailing' in options ? !!options.trailing : trailing;\n            }\n\n            function invokeFunc(time) {\n                var args = lastArgs,\n                    thisArg = lastThis;\n\n                lastArgs = lastThis = undefined;\n                lastInvokeTime = time;\n                result = func.apply(thisArg, args);\n                return result;\n            }\n\n            function leadingEdge(time) {\n                // Reset any `maxWait` timer.\n                lastInvokeTime = time;\n                // Start the timer for the trailing edge.\n                timerId = setTimeout(timerExpired, wait);\n                // Invoke the leading edge.\n                return leading ? invokeFunc(time) : result;\n            }\n\n            function remainingWait(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime,\n                    timeWaiting = wait - timeSinceLastCall;\n\n                return maxing\n                    ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n                    : timeWaiting;\n            }\n\n            function shouldInvoke(time) {\n                var timeSinceLastCall = time - lastCallTime,\n                    timeSinceLastInvoke = time - lastInvokeTime;\n\n                // Either this is the first call, activity has stopped and we're at the\n                // trailing edge, the system time has gone backwards and we're treating\n                // it as the trailing edge, or we've hit the `maxWait` limit.\n                return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n                        (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n            }\n\n            function timerExpired() {\n                var time = now();\n                if (shouldInvoke(time)) {\n                    return trailingEdge(time);\n                }\n                // Restart the timer.\n                timerId = setTimeout(timerExpired, remainingWait(time));\n            }\n\n            function trailingEdge(time) {\n                timerId = undefined;\n\n                // Only invoke if we have `lastArgs` which means `func` has been\n                // debounced at least once.\n                if (trailing && lastArgs) {\n                    return invokeFunc(time);\n                }\n                lastArgs = lastThis = undefined;\n                return result;\n            }\n\n            function cancel() {\n                if (timerId !== undefined) {\n                    clearTimeout(timerId);\n                }\n                lastInvokeTime = 0;\n                lastArgs = lastCallTime = lastThis = timerId = undefined;\n            }\n\n            function flush() {\n                return timerId === undefined ? result : trailingEdge(now());\n            }\n\n            function debounced() {\n                var time = now(),\n                    isInvoking = shouldInvoke(time);\n\n                lastArgs = arguments;\n                lastThis = this;\n                lastCallTime = time;\n\n                if (isInvoking) {\n                    if (timerId === undefined) {\n                        return leadingEdge(lastCallTime);\n                    }\n                    if (maxing) {\n                        // Handle invocations in a tight loop.\n                        timerId = setTimeout(timerExpired, wait);\n                        return invokeFunc(lastCallTime);\n                    }\n                }\n                if (timerId === undefined) {\n                    timerId = setTimeout(timerExpired, wait);\n                }\n                return result;\n            }\n            debounced.cancel = cancel;\n            debounced.flush = flush;\n            return debounced;\n        };\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Timers\n    // -----------------------------------------------------------------------\n    var jQuery = $;\n    /* istanbul ignore next */\n    (function($) {\n        jQuery.fn.extend({\n            everyTime: function(interval, label, fn, times, belay) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, times, belay);\n                });\n            },\n            oneTime: function(interval, label, fn) {\n                return this.each(function() {\n                    jQuery.timer.add(this, interval, label, fn, 1);\n                });\n            },\n            stopTime: function(label, fn) {\n                return this.each(function() {\n                    jQuery.timer.remove(this, label, fn);\n                });\n            }\n        });\n\n        jQuery.extend({\n            timer: {\n                guid: 1,\n                global: {},\n                regex: /^([0-9]+)\\s*(.*s)?$/,\n                powers: {\n                    // Yeah this is major overkill...\n                    'ms': 1,\n                    'cs': 10,\n                    'ds': 100,\n                    's': 1000,\n                    'das': 10000,\n                    'hs': 100000,\n                    'ks': 1000000\n                },\n                timeParse: function(value) {\n                    if (value === undefined || value === null) {\n                        return null;\n                    }\n                    var result = this.regex.exec(jQuery.trim(value.toString()));\n                    if (result[2]) {\n                        var num = parseInt(result[1], 10);\n                        var mult = this.powers[result[2]] || 1;\n                        return num * mult;\n                    } else {\n                        return value;\n                    }\n                },\n                add: function(element, interval, label, fn, times, belay) {\n                    var counter = 0;\n\n                    if (jQuery.isFunction(label)) {\n                        if (!times) {\n                            times = fn;\n                        }\n                        fn = label;\n                        label = interval;\n                    }\n\n                    interval = jQuery.timer.timeParse(interval);\n\n                    if (typeof interval !== 'number' ||\n                        isNaN(interval) ||\n                        interval <= 0) {\n                        return;\n                    }\n                    if (times && times.constructor !== Number) {\n                        belay = !!times;\n                        times = 0;\n                    }\n\n                    times = times || 0;\n                    belay = belay || false;\n\n                    if (!element.$timers) {\n                        element.$timers = {};\n                    }\n                    if (!element.$timers[label]) {\n                        element.$timers[label] = {};\n                    }\n                    fn.$timerID = fn.$timerID || this.guid++;\n\n                    var handler = function() {\n                        if (belay && handler.inProgress) {\n                            return;\n                        }\n                        handler.inProgress = true;\n                        if ((++counter > times && times !== 0) ||\n                            fn.call(element, counter) === false) {\n                            jQuery.timer.remove(element, label, fn);\n                        }\n                        handler.inProgress = false;\n                    };\n\n                    handler.$timerID = fn.$timerID;\n\n                    if (!element.$timers[label][fn.$timerID]) {\n                        element.$timers[label][fn.$timerID] = setInterval(handler, interval);\n                    }\n\n                    if (!this.global[label]) {\n                        this.global[label] = [];\n                    }\n                    this.global[label].push(element);\n\n                },\n                remove: function(element, label, fn) {\n                    var timers = element.$timers, ret;\n\n                    if (timers) {\n\n                        if (!label) {\n                            for (var lab in timers) {\n                                if (timers.hasOwnProperty(lab)) {\n                                    this.remove(element, lab, fn);\n                                }\n                            }\n                        } else if (timers[label]) {\n                            if (fn) {\n                                if (fn.$timerID) {\n                                    clearInterval(timers[label][fn.$timerID]);\n                                    delete timers[label][fn.$timerID];\n                                }\n                            } else {\n                                for (var _fn in timers[label]) {\n                                    if (timers[label].hasOwnProperty(_fn)) {\n                                        clearInterval(timers[label][_fn]);\n                                        delete timers[label][_fn];\n                                    }\n                                }\n                            }\n\n                            for (ret in timers[label]) {\n                                if (timers[label].hasOwnProperty(ret)) {\n                                    break;\n                                }\n                            }\n                            if (!ret) {\n                                ret = null;\n                                delete timers[label];\n                            }\n                        }\n\n                        for (ret in timers) {\n                            if (timers.hasOwnProperty(ret)) {\n                                break;\n                            }\n                        }\n                        if (!ret) {\n                            element.$timers = null;\n                        }\n                    }\n                }\n            }\n        });\n        if (/(msie) ([\\w.]+)/.exec(navigator.userAgent.toLowerCase())) {\n            $(window).one('unload', function() {\n                var global = jQuery.timer.global;\n                for (var label in global) {\n                    if (global.hasOwnProperty(label)) {\n                        var els = global[label], i = els.length;\n                        while (--i) {\n                            jQuery.timer.remove(els[i], label);\n                        }\n                    }\n                }\n            });\n        }\n    })(jQuery);\n    // -----------------------------------------------------------------------\n    // :: CROSS BROWSER SPLIT\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    (function(undef) {\n        // prevent double include\n\n        if (!String.prototype.split.toString().match(/\\[native/)) {\n            return;\n        }\n\n        var nativeSplit = String.prototype.split,\n        compliantExecNpcg = /()??/.exec(\"\")[1] === undef, // NPCG: nonparticipating capturing group\n        self;\n\n        self = function(str, separator, limit) {\n            // If `separator` is not a regex, use `nativeSplit`\n            if (Object.prototype.toString.call(separator) !== \"[object RegExp]\") {\n                return nativeSplit.call(str, separator, limit);\n            }\n            var output = [],\n            flags = (separator.ignoreCase ? \"i\" : \"\") +\n                (separator.multiline  ? \"m\" : \"\") +\n                (separator.extended   ? \"x\" : \"\") + // Proposed for ES6\n                (separator.sticky     ? \"y\" : \"\"), // Firefox 3+\n                lastLastIndex = 0,\n            // Make `global` and avoid `lastIndex` issues by working with a copy\n            separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + \"g\");\n            str += \"\"; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp(\"^\" + separator.source + \"$(?!\\\\s)\", flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            // ? Math.pow(2, 32) - 1 : ToUint32(limit)\n            limit = limit === undef ? -1 >>> 0 : limit >>> 0;\n            while (match = separator.exec(str)) {\n                    // `separator.lastIndex` is not reliable cross-browser\n                    lastIndex = match.index + match[0].length;\n                    if (lastIndex > lastLastIndex) {\n                        output.push(str.slice(lastLastIndex, match.index));\n                        // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                        // nonparticipating capturing groups\n                        if (!compliantExecNpcg && match.length > 1) {\n                            match[0].replace(separator2, function() {\n                                for (var i = 1; i < arguments.length - 2; i++) {\n                                    if (arguments[i] === undef) {\n                                        match[i] = undef;\n                                    }\n                                }\n                            });\n                        }\n                        if (match.length > 1 && match.index < str.length) {\n                            Array.prototype.push.apply(output, match.slice(1));\n                        }\n                        lastLength = match[0].length;\n                        lastLastIndex = lastIndex;\n                        if (output.length >= limit) {\n                            break;\n                        }\n                    }\n                    if (separator.lastIndex === match.index) {\n                        separator.lastIndex++; // Avoid an infinite loop\n                    }\n                }\n            if (lastLastIndex === str.length) {\n                if (lastLength || !separator.test(\"\")) {\n                    output.push(\"\");\n                }\n            } else {\n                output.push(str.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n\n        // For convenience\n        String.prototype.split = function(separator, limit) {\n            return self(this, separator, limit);\n        };\n\n        return self;\n\n    })();\n    // -----------------------------------------------------------------------\n    // :: jQuery Caret\n    // -----------------------------------------------------------------------\n    /* istanbul ignore next */\n    $.fn.caret = function(pos) {\n        var target = this[0];\n        var isContentEditable = target.contentEditable === 'true';\n        //get\n        if (arguments.length === 0) {\n            //HTML5\n            if (window.getSelection) {\n                //contenteditable\n                if (isContentEditable) {\n                    if (!this.is(':focus')) {\n                        target.focus();\n                    }\n                    var range1 = window.getSelection().getRangeAt(0),\n                    range2 = range1.cloneRange();\n                    range2.selectNodeContents(target);\n                    range2.setEnd(range1.endContainer, range1.endOffset);\n                    return range2.toString().length;\n                }\n                //textarea\n                return target.selectionStart;\n            }\n            //IE<9\n            if (document.selection) {\n                target.focus();\n                //contenteditable\n                if (isContentEditable) {\n                    var range1 = document.selection.createRange(),\n                    range2 = document.body.createTextRange();\n                    range2.moveToElementText(target);\n                    range2.setEndPoint('EndToEnd', range1);\n                    return range2.text.length;\n                }\n                //textarea\n                var pos = 0,\n                range = target.createTextRange(),\n                range2 = document.selection.createRange().duplicate(),\n                bookmark = range2.getBookmark();\n                range.moveToBookmark(bookmark);\n                while (range.moveStart('character', -1) !== 0) pos++;\n                return pos;\n            }\n            //not supported\n            return 0;\n        }\n        //set\n        if (pos === -1)\n            pos = this[isContentEditable? 'text' : 'val']().length;\n        //HTML5\n        if (window.getSelection) {\n            //contenteditable\n            if (isContentEditable) {\n                if (!this.is(':focus')) {\n                    target.focus();\n                }\n                var selection = window.getSelection();\n                selection.collapse(selection.focusNode, pos);\n            }\n            //textarea\n            else\n                target.setSelectionRange(pos, pos);\n        }\n        //IE<9\n        else if (document.body.createTextRange) {\n            var range = document.body.createTextRange();\n            range.moveToElementText(target);\n            range.moveStart('character', pos);\n            range.collapse(true);\n            range.select();\n        }\n        if (!isContentEditable && !this.is(':focus')) {\n            target.focus();\n        }\n        return pos;\n    };\n    /* eslint-enable */\n    // -----------------------------------------------------------------------\n    // :: callback based event handler plugin generator\n    // -----------------------------------------------------------------------\n    function make_callback_plugin(options) {\n        var factory_settings = $.extend({\n            init: $.noop,\n            destroy: $.noop,\n            name: 'event'\n        }, options);\n        return function(callback, options) {\n            var trigger = arguments.length === 0;\n            var unbind = arguments[0] === \"unbind\";\n            if (!trigger && !unbind && !is_function(callback)) {\n                throw new Error('Invalid argument, it need to a function or string ' +\n                                '\"unbind\" or no arguments.');\n            }\n            if (unbind) {\n                callback = is_function(arguments[1]) ? arguments[1] : null;\n            }\n            var data_name = 'callbacks_' + factory_settings.name;\n            return this.each(function() {\n                var $this = $(this);\n                var callbacks;\n                function handler(arg) {\n                    callbacks.fireWith($this, [arg]);\n                }\n                if (trigger || unbind) {\n                    callbacks = $this.data(data_name);\n                    if (trigger) {\n                        callbacks && callbacks.fire();\n                    } else {\n                        if (callback && callbacks) {\n                            callbacks.remove(callback);\n                            if (!callbacks.has()) {\n                                callbacks = null;\n                            }\n                        } else {\n                            callbacks = null;\n                        }\n                        if (!callbacks) {\n                            $this.removeData(data_name);\n                            factory_settings.destroy.call(this, handler, options);\n                        }\n                    }\n                } else if ($this.data(data_name)) {\n                    $(this).data(data_name).add(callback);\n                } else {\n                    callbacks = $.Callbacks();\n                    callbacks.add(callback);\n                    $this.data(data_name, callbacks);\n                    factory_settings.init.call(this, handler, options);\n                }\n            });\n        };\n    }\n    // -----------------------------------------------------------------------\n    // :: Cross-browser resize element plugin using sentinel iframe or\n    // :: resizeObserver\n    // -----------------------------------------------------------------------\n    $.fn.resizer = make_callback_plugin({\n        name: 'resize',\n        init: function(handler, options) {\n            var settings = $.extend({\n                prefix: ''\n            }, options);\n            var $this = $(this);\n            var resizer;\n            var first = true;\n            if ($this.is('body')) {\n                $(window).on('resize.resizer', handler);\n            } else if (window.ResizeObserver) {\n                resizer = new ResizeObserver(function() {\n                    if (!first) {\n                        handler();\n                    }\n                    first = false;\n                });\n                resizer.observe(this);\n                $this.data('observer', resizer);\n            } else {\n                var iframe = $('<iframe/>').addClass(settings.prefix + 'resizer')\n                    .appendTo(this)[0];\n                $(iframe.contentWindow).on('resize', handler);\n            }\n        },\n        destroy: function() {\n            var $this = $(this);\n            if (window.ResizeObserver) {\n                var observer = $this.data('observer');\n                if (observer) {\n                    observer.unobserve(this);\n                    $this.removeData('observer');\n                }\n            } else {\n                var iframe = $this.find('> iframe[class$=\"resizer\"]');\n                if (iframe.length) {\n                    // just in case of memory leaks in IE\n                    $(iframe[0].contentWindow).off('resize').remove();\n                    iframe.remove();\n                } else if ($this.is('body')) {\n                    $(window).off('resize.resizer');\n                }\n            }\n        }\n    });\n    // -----------------------------------------------------------------------\n    // :: Mobile friendly scroll that work without scrollbar (for less)\n    // -----------------------------------------------------------------------\n    $.fn.touch_scroll = make_callback_plugin({\n        name: 'touch',\n        init: function(handler) {\n            var origin;\n            var previous;\n            $(this).on('touchstart.scroll', function(e) {\n                e = e.originalEvent;\n                if (e.target.tagName.toLowerCase() !== 'a' && e.touches.length === 1) {\n                    previous = origin = e.touches[0];\n                }\n            }).on('touchmove.scroll', function(e) {\n                e = e.originalEvent;\n                if (origin && e.touches.length === 1) {\n                    var current = e.touches[0];\n                    var ret = handler({\n                        origin: origin,\n                        previous: previous,\n                        current: current\n                    });\n                    if (ret === false) {\n                        e.preventDefault();\n                    }\n                    previous = current;\n                }\n            }).on('touchend.scroll', function() {\n                if (origin || previous) {\n                    origin = previous = null;\n                }\n            });\n        },\n        destroy: function() {\n            $(this).off('touchstart.scroll touchmove.scroll touchend.scroll');\n        }\n    });\n    // -----------------------------------------------------------------------\n    function jquery_resolve(value) {\n        var defer = jQuery.Deferred();\n        defer.resolve(value);\n        return defer.promise();\n    }\n    // -----------------------------------------------------------------------\n    function unpromise(value, callback, error) {\n        if (value !== undefined) {\n            if (is_function(value.catch)) {\n                value.catch(error);\n            }\n            if (is_function(value.done)) {\n                return value.done(callback);\n            } else if (is_function(value.then)) {\n                return value.then(callback);\n            } else if (value instanceof Array) {\n                var promises = value.filter(function(value) {\n                    return value && (is_function(value.done) || is_function(value.then));\n                });\n                if (promises.length) {\n                    var result = $.when.apply($, value).then(function() {\n                        return callback([].slice.call(arguments));\n                    });\n                    if (is_function(value.catch)) {\n                        result.catch(error);\n                    }\n                    return result;\n                }\n            }\n            // TODO: investigate why it break when called\n            //       when value is undefined\n            //       when moving this line outside if\n            //       it breaks all completion unit tests\n            return callback(value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: based on https://github.com/zeusdeux/isInViewport\n    // :: work only vertically and on dom elements\n    // -----------------------------------------------------------------------\n    $.fn.is_fully_in_viewport = (function() {\n        function is_visible(node, container) {\n            var box = node.getBoundingClientRect();\n            var viewport = container[0].getBoundingClientRect();\n            var top = box.top - viewport.top;\n            var bottom = box.bottom - viewport.top;\n            var height = container.height();\n            return bottom > 0 && top <= height;\n        }\n        if (root.IntersectionObserver) {\n            return function(container) {\n                var node = this[0];\n                var defer = jQuery.Deferred();\n                var item_observer = new root.IntersectionObserver(function(entries) {\n                    defer.resolve(entries[0].isIntersecting && entries[0].ratio === 1);\n                    item_observer.unobserve(node);\n                }, {\n                    root: container[0]\n                });\n                item_observer.observe(node);\n                return defer.promise();\n            };\n        } else {\n            return function(container) {\n                return jquery_resolve(is_visible(this[0], container));\n            };\n        }\n    })();\n    // -------------------------------------------------------------------------\n    /* eslint-disable */\n    var entity_re = /(&(?:[a-z\\d]+|#\\d+|#x[a-f\\d]+);)/i;\n    // regex that match single character at begining and folowing combine character\n    // https://en.wikipedia.org/wiki/Combining_character\n    var combine_chr_re = /(.(?:[\\u0300-\\u036F]|[\\u1AB0-\\u1abE]|[\\u1DC0-\\u1DF9]|[\\u1DFB-\\u1DFF]|[\\u20D0-\\u20F0]|[\\uFE20-\\uFE2F])+)/;\n    // source: https://mathiasbynens.be/notes/javascript-unicode\n    var astral_symbols_re = /([\\uD800-\\uDBFF][\\uDC00-\\uDFFF])/;\n    // source: https://github.com/mathiasbynens/emoji-regex\n    var emoji_re = /(\\uD83C\\uDFF4\\uDB40\\uDC67\\uDB40\\uDC62(?:\\uDB40\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73|\\uDB40\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDB40\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67)\\uDB40\\uDC7F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC68(?:\\uD83C\\uDFFF\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83D\\uDC68(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83D\\uDC68|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67]))|\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D[\\uDC68\\uDC69])\\u200D(?:\\uD83D[\\uDC66\\uDC67])|[\\u2695\\u2696\\u2708]\\uFE0F|\\uD83D[\\uDC66\\uDC67]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708])\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\u200D(?:\\uD83E\\uDD1D\\u200D\\uD83E\\uDDD1|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69(?:\\u200D(?:\\u2764\\uFE0F\\u200D(?:\\uD83D\\uDC8B\\u200D(?:\\uD83D[\\uDC68\\uDC69])|\\uD83D[\\uDC68\\uDC69])|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFF\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFE\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFD\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFC\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD])|\\uD83C\\uDFFB\\u200D(?:\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E[\\uDDAF-\\uDDB3\\uDDBC\\uDDBD]))|\\uD83D\\uDC69\\uD83C\\uDFFF\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFE])|\\uD83D\\uDC69\\uD83C\\uDFFE\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFD\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFC\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])|\\uD83D\\uDC69\\uD83C\\uDFFB\\u200D\\uD83E\\uDD1D\\u200D(?:\\uD83D[\\uDC68\\uDC69])(?:\\uD83C[\\uDFFC-\\uDFFF])|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66\\u200D\\uD83D\\uDC66|\\uD83D\\uDC69\\u200D\\uD83D\\uDC69\\u200D(?:\\uD83D[\\uDC66\\uDC67])|(?:\\uD83D\\uDC41\\uFE0F\\u200D\\uD83D\\uDDE8|\\uD83D\\uDC69(?:\\uD83C\\uDFFF\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFE\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFD\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFC\\u200D[\\u2695\\u2696\\u2708]|\\uD83C\\uDFFB\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83C\\uDFF3\\uFE0F\\u200D\\u26A7|\\uD83E\\uDDD1(?:(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2695\\u2696\\u2708]|\\u200D[\\u2695\\u2696\\u2708])|\\uD83D\\uDC3B\\u200D\\u2744|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642]|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uFE0F\\u200D[\\u2640\\u2642]|(?:\\uD83C[\\uDFFB-\\uDFFF])\\u200D[\\u2640\\u2642])|\\uD83C\\uDFF4\\u200D\\u2620|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E-\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3C-\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDF])\\u200D[\\u2640\\u2642])\\uFE0F|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67\\u200D(?:\\uD83D[\\uDC66\\uDC67])|\\uD83C\\uDFF3\\uFE0F\\u200D\\uD83C\\uDF08|\\uD83D\\uDC69\\u200D\\uD83D\\uDC67|\\uD83D\\uDC69\\u200D\\uD83D\\uDC66|\\uD83D\\uDC15\\u200D\\uD83E\\uDDBA|\\uD83C\\uDDFD\\uD83C\\uDDF0|\\uD83C\\uDDF6\\uD83C\\uDDE6|\\uD83C\\uDDF4\\uD83C\\uDDF2|\\uD83D\\uDC08\\u200D\\u2B1B|\\uD83E\\uDDD1(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83D\\uDC69(?:\\uD83C[\\uDFFB-\\uDFFF])|\\uD83C\\uDDFF(?:\\uD83C[\\uDDE6\\uDDF2\\uDDFC])|\\uD83C\\uDDFE(?:\\uD83C[\\uDDEA\\uDDF9])|\\uD83C\\uDDFC(?:\\uD83C[\\uDDEB\\uDDF8])|\\uD83C\\uDDFB(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA])|\\uD83C\\uDDFA(?:\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF])|\\uD83C\\uDDF9(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF])|\\uD83C\\uDDF8(?:\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF])|\\uD83C\\uDDF7(?:\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC])|\\uD83C\\uDDF5(?:\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE])|\\uD83C\\uDDF3(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF])|\\uD83C\\uDDF2(?:\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF])|\\uD83C\\uDDF1(?:\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE])|\\uD83C\\uDDF0(?:\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDEF(?:\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5])|\\uD83C\\uDDEE(?:\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9])|\\uD83C\\uDDED(?:\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA])|\\uD83C\\uDDEC(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE])|\\uD83C\\uDDEB(?:\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7])|\\uD83C\\uDDEA(?:\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA])|\\uD83C\\uDDE9(?:\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF])|\\uD83C\\uDDE8(?:\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF])|\\uD83C\\uDDE7(?:\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF])|\\uD83C\\uDDE6(?:\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF])|[#\\*0-9]\\uFE0F\\u20E3|(?:\\uD83C[\\uDFC3\\uDFC4\\uDFCA]|\\uD83D[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4-\\uDEB6]|\\uD83E[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD-\\uDDCF\\uDDD6-\\uDDDD])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:\\u26F9|\\uD83C[\\uDFCB\\uDFCC]|\\uD83D\\uDD75)(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u261D\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2\\uDFC7]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC6B-\\uDC6D\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDCAA\\uDD74\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1C\\uDD1E\\uDD1F\\uDD30-\\uDD34\\uDD36\\uDD77\\uDDB5\\uDDB6\\uDDBB\\uDDD2-\\uDDD5])(?:\\uD83C[\\uDFFB-\\uDFFF])|(?:[\\u231A\\u231B\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u25FE\\u2614\\u2615\\u2648-\\u2653\\u267F\\u2693\\u26A1\\u26AA\\u26AB\\u26BD\\u26BE\\u26C4\\u26C5\\u26CE\\u26D4\\u26EA\\u26F2\\u26F3\\u26F5\\u26FA\\u26FD\\u2705\\u270A\\u270B\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2795-\\u2797\\u27B0\\u27BF\\u2B1B\\u2B1C\\u2B50\\u2B55]|\\uD83C[\\uDC04\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF7C\\uDF7E-\\uDF93\\uDFA0-\\uDFCA\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF4\\uDFF8-\\uDFFF]|\\uD83D[\\uDC00-\\uDC3E\\uDC40\\uDC42-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDD7A\\uDD95\\uDD96\\uDDA4\\uDDFB-\\uDE4F\\uDE80-\\uDEC5\\uDECC\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])|(?:[#\\*0-9\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u261D\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A1\\u26A7\\u26AA\\u26AB\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C5\\u26C8\\u26CE\\u26CF\\u26D1\\u26D3\\u26D4\\u26E9\\u26EA\\u26F0-\\u26F5\\u26F7-\\u26FA\\u26FD\\u2702\\u2705\\u2708-\\u270D\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763\\u2764\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC04\\uDCCF\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDE6-\\uDDFF\\uDE01\\uDE02\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF21\\uDF24-\\uDF93\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E-\\uDFF0\\uDFF3-\\uDFF5\\uDFF7-\\uDFFF]|\\uD83D[\\uDC00-\\uDCFD\\uDCFF-\\uDD3D\\uDD49-\\uDD4E\\uDD50-\\uDD67\\uDD6F\\uDD70\\uDD73-\\uDD7A\\uDD87\\uDD8A-\\uDD8D\\uDD90\\uDD95\\uDD96\\uDDA4\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA-\\uDE4F\\uDE80-\\uDEC5\\uDECB-\\uDED2\\uDED5-\\uDED7\\uDEE0-\\uDEE5\\uDEE9\\uDEEB\\uDEEC\\uDEF0\\uDEF3-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDD78\\uDD7A-\\uDDCB\\uDDCD-\\uDDFF\\uDE70-\\uDE74\\uDE78-\\uDE7A\\uDE80-\\uDE86\\uDE90-\\uDEA8\\uDEB0-\\uDEB6\\uDEC0-\\uDEC2\\uDED0-\\uDED6])\\uFE0F?|(?:[\\u261D\\u26F9\\u270A-\\u270D]|\\uD83C[\\uDF85\\uDFC2-\\uDFC4\\uDFC7\\uDFCA-\\uDFCC]|\\uD83D[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66-\\uDC78\\uDC7C\\uDC81-\\uDC83\\uDC85-\\uDC87\\uDC8F\\uDC91\\uDCAA\\uDD74\\uDD75\\uDD7A\\uDD90\\uDD95\\uDD96\\uDE45-\\uDE47\\uDE4B-\\uDE4F\\uDEA3\\uDEB4-\\uDEB6\\uDEC0\\uDECC]|\\uD83E[\\uDD0C\\uDD0F\\uDD18-\\uDD1F\\uDD26\\uDD30-\\uDD39\\uDD3C-\\uDD3E\\uDD77\\uDDB5\\uDDB6\\uDDB8\\uDDB9\\uDDBB\\uDDCD-\\uDDCF\\uDDD1-\\uDDDD]))/;\n    // https://stackoverflow.com/questions/11381673/detecting-a-mobile-browser\n    var mobile_re = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\n    var tablet_re = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\n    var format_split_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\](?:[^\\]\\\\]*(?:\\\\\\\\)*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?)/i;\n    var format_parts_re = /\\[\\[((?:-?[@!gbiuso])*);([^;]*);([^;\\]]*);?([^;\\]]*);?([^\\]]*)\\]([^\\]\\\\]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]+)\\]?/gi;\n    var format_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]?/gi;\n    var format_exist_re = /\\[\\[((?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\]([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)\\]/gi;\n    var format_full_re = /^(\\[\\[(?:(?:-?[@!gbiuso])*;[^;\\]]*;[^;\\]]*(?:;|[^\\]()]*);?[^\\]]*)\\])([^\\]]*\\\\\\][^\\]]*|[^\\]]*|[^[]*\\[[^\\]]*)(\\])$/i;\n    var format_begin_re = /(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_start_re = /^(\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\])/i;\n    var format_end_re = /\\[\\[(?:-?[@!gbiuso])*;[^;]*;[^\\]]*\\]?$/i;\n    var self_closing_re = /^(?:\\[\\[)?[^;]*@[^;]*;/;\n    var color_re = /^(?:#([0-9a-f]{3}|[0-9a-f]{4}|[0-9a-f]{6}|[0-9a-f]{8})|rgba?\\([^)]+\\)|hsla?\\([^)]+\\))$/i;\n    var url_re = /(\\b(?:file|ftp|https?):\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'\\\\<>\\][)])+)/gi;\n    var url_nf_re = /\\b(?![^\"\\s[\\]]*])(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'\\\\<>\\][)])+)/gi;\n    var email_re = /((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))/g;\n    var url_full_re = /^(https?:\\/\\/(?:(?:(?!&[^;]+;)|(?=&amp;))[^\\s\"'<>\\\\\\][)])+)$/gi;\n    var email_full_re = /^((([^<>('\")[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,})))$/g;\n    var command_re = /((?:\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|`[^`\\\\]*(?:\\\\[\\S\\s][^`\\\\]*)*`|\\/[^\\/\\\\]*(?:\\\\[\\S\\s][^\\/\\\\]*)*\\/[gimsuy]*(?=\\s|$)|(?:\\\\\\s|\\S))+)(?=\\s|$)/gi;\n    var extended_command_re = /^\\s*((terminal|cmd)::([a-z_]+)\\(([\\s\\S]*)\\))\\s*$/;\n    var format_exec_split_re = /(\\[\\[(?:-?[@!gbiuso])*;[^\\]]+\\](?:\\\\[[\\]]|[^\\]])*\\]|\\[\\[[\\s\\S]+?\\]\\])/;\n    var format_exec_re = /(\\[\\[[\\s\\S]+?\\]\\])/;\n    var float_re = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$/;\n    var re_re = /^\\/((?:\\\\\\/|[^/]|\\[[^\\]]*\\/[^\\]]*\\])+)\\/([gimsuy]*)$/;\n    var string_re = /(\"(?:[^\"\\\\]|\\\\(?:\\\\\\\\)*\"|\\\\\\\\)*\"|'(?:[^'\\\\]|\\\\(?:\\\\\\\\)*'|\\\\\\\\)*'|`(?:[^`\\\\]|\\\\(?:\\\\\\\\)*`|\\\\\\\\)*`)/;\n    var unclosed_strings_re = /^(?=((?:[^\"']+|\"[^\"\\\\]*(?:\\\\[^][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[^][^'\\\\]*)*')*))\\1./;\n    var broken_image = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\"><title id=\"title2\">rounded</title><path id=\"terminal-broken-image\" d=\"m 14,10 h 2 v 1 a 3,3 0 0 1 -3,3 H 3 A 3,3 0 0 1 0,11 H 4.5 A 1.00012,1.00012 0 0 0 5.207,10.707 L 6.5,9.414 7.793,10.707 a 0.99963,0.99963 0 0 0 1.41406,0 l 2.36719,-2.36719 1.80127,1.44092 A 0.99807,0.99807 0 0 0 14,10 Z M 16,3 V 8 H 14.35059 L 12.12451,6.21924 A 0.99846,0.99846 0 0 0 10.793,6.293 L 8.5,8.586 7.207,7.293 a 0.99962,0.99962 0 0 0 -1.41406,0 L 4.08594,9 H 0 V 3 A 3,3 0 0 1 3,0 h 10 a 3,3 0 0 1 3,3 z M 6,4.5 A 1.5,1.5 0 1 0 4.5,6 1.5,1.5 0 0 0 6,4.5 Z\" /></svg>';\n    var use_broken_image = '<svg class=\"terminal-broken-image\" role=\"presentation\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 16 14\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><use xlink:href=\"#terminal-broken-image\"/></svg>';\n    /* eslint-enable */\n    // -------------------------------------------------------------------------\n    // :: features flags\n    // -------------------------------------------------------------------------\n    // taken from https://hacks.mozilla.org/2011/09/detecting-and-generating-\n    // css-animations-in-javascript/\n    var animation_supported = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        var animation = false,\n            domPrefixes = 'Webkit Moz O ms Khtml'.split(' '),\n            elm = document.createElement('div');\n        if (elm.style.animationName) {\n            animation = true;\n        }\n        if (animation === false) {\n            for (var i = 0; i < domPrefixes.length; i++) {\n                var name = domPrefixes[i] + 'AnimationName';\n                if (elm.style[name] !== undefined) {\n                    animation = true;\n                    break;\n                }\n            }\n        }\n        elm = null;\n        return animation;\n    })();\n    // -------------------------------------------------------------------------\n    var agent = (root.navigator || window.navigator).userAgent;\n    var is_IE = /MSIE|Trident/.test(agent) || /rv:11.0/i.test(agent);\n    var is_IEMobile = /IEMobile/.test(agent);\n    // -------------------------------------------------------------------------\n    var is_ch_unit_supported = (function() {\n        if (is_IE && !is_IEMobile) {\n            return false;\n        }\n        if (typeof document === 'undefined') {\n            return true; // run without browser context\n        }\n        var div = document.createElement('div');\n        div.style.width = '1ch';\n        return div.style.width === '1ch';\n    })();\n    // -------------------------------------------------------------------------\n    var is_css_variables_supported = root.CSS && root.CSS.supports &&\n            root.CSS.supports('--fake-var', 0);\n    // -------------------------------------------------------------------------\n    var is_android = navigator.userAgent.toLowerCase().indexOf('android') !== -1;\n    // -------------------------------------------------------------------------\n    var is_key_native = (function is_key_native() {\n        if (!('KeyboardEvent' in root && 'key' in root.KeyboardEvent.prototype)) {\n            return false;\n        }\n        var proto = root.KeyboardEvent.prototype;\n        var get = Object.getOwnPropertyDescriptor(proto, 'key').get;\n        return !!get.toString().match(/\\[native code\\]/);\n    })();\n    // -------------------------------------------------------------------------\n    var is_browser = (function() {\n        try {\n            return this === window;\n        } catch (e) {\n            return false;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    var is_mobile = (function(a) {\n        var check = false;\n        if (mobile_re.test(a) || tablet_re.test(a.substr(0, 4))) {\n            check = true;\n        }\n        // detect iPad 13\n        // ref: https://stackoverflow.com/a/57924983/387194s\n        if (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1) {\n            return true;\n        }\n        return check;\n    })(navigator.userAgent || navigator.vendor || root.opera);\n    // -------------------------------------------------------------------------\n    // IE ch unit bug detection - better that UserAgent that can be changed\n    // -------------------------------------------------------------------------\n    var ch_unit_bug = false;\n    if (is_browser) {\n        $(function() {\n            function width(e) {\n                return e[0].getBoundingClientRect().width;\n            }\n            var base = '<span style=\"font-family: monospace;visibility:hidden;';\n            var ch = $(base + 'width:1ch;overflow: hidden\">&nbsp;</span>');\n            ch.appendTo('body');\n            var space = $(base + '\">&nbsp;</span>').appendTo('body');\n            // in FireFox the size of space is fraction larger #579\n            ch_unit_bug = Math.abs(width(ch) - width(space)) > 0.0001;\n            ch.remove();\n            space.remove();\n        });\n    }\n    // -----------------------------------------------------------------------\n    // :: css helper that work with css variables\n    // :: jQuery css method from 3.4 support them by default\n    // -----------------------------------------------------------------------\n    function css(node, obj, value) {\n        if (node instanceof $.fn.init) {\n            node.each(function() {\n                css(this, obj, value);\n            });\n        } else if ($.isPlainObject(obj)) {\n            Object.keys(obj).forEach(function(key) {\n                node.style.setProperty(key, obj[key]);\n            });\n        } else if (typeof value === 'undefined') {\n            return node.style.getPropertyValue(obj);\n        } else {\n            node.style.setProperty(obj, value);\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: hide elements from screen readers\n    // -----------------------------------------------------------------------\n    function a11y_hide(element) {\n        element.attr({\n            role: 'presentation',\n            'aria-hidden': 'true'\n        });\n    }\n    // ---------------------------------------------------------------------\n    // :: alert only first exception of type\n    // ---------------------------------------------------------------------\n    var excepctions = [];\n    function alert_exception(label, e) {\n        if (arguments[0] instanceof $.terminal.Exception) {\n            label = arguments[0].type;\n            e = arguments[0];\n        }\n        var message = (label ? label + ': ' : '') + exception_message(e);\n        if (excepctions.indexOf(message) === -1) {\n            excepctions.push(message);\n            setTimeout(function() {\n                throw e;\n            }, 0);\n            //alert(message + (e.stack ? '\\n' + e.stack : ''));\n        }\n    }\n    // ---------------------------------------------------------------------\n    // ref: https://stackoverflow.com/a/6248722/387194\n    function generate_id() {\n        // I generate the UID from two parts here\n        // to ensure the random number provide enough bits.\n        var firstPart = (Math.random() * 46656) | 0;\n        var secondPart = (Math.random() * 46656) | 0;\n        firstPart = (\"000\" + firstPart.toString(36)).slice(-3);\n        secondPart = (\"000\" + secondPart.toString(36)).slice(-3);\n        return firstPart + secondPart;\n    }\n    // ---------------------------------------------------------------------\n    // :; detect if mouse event happen on scrollbar\n    // ---------------------------------------------------------------------\n    function scrollbar_event(e, node) {\n        var left = node.offset().left;\n        return node.outerWidth() <= e.clientX - left;\n    }\n    // ---------------------------------------------------------------------\n    // :: Return exception message as string\n    // ---------------------------------------------------------------------\n    function exception_message(e) {\n        if (typeof e === 'string') {\n            return e;\n        } else if (typeof e.fileName === 'string') {\n            return e.fileName + ': ' + e.message;\n        } else {\n            return e.message;\n        }\n    }\n    // -----------------------------------------------------------------------\n    // :: CYCLE DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Cycle() {\n        var data = [].slice.call(arguments);\n        var pos = 0;\n        $.extend(this, {\n            get: function() {\n                return data;\n            },\n            index: function() {\n                return pos;\n            },\n            rotate: function(skip, init) {\n                if (init === undefined) {\n                    init = pos;\n                } else if (init === pos) {\n                    return;\n                }\n                if (!skip) {\n                    var defined = data.filter(function(item) {\n                        return typeof item !== 'undefined';\n                    });\n                    if (!defined.length) {\n                        return;\n                    }\n                }\n                if (!data.length) {\n                    return;\n                }\n                if (data.length === 1) {\n                    return data[0];\n                } else {\n                    if (pos === data.length - 1) {\n                        pos = 0;\n                    } else {\n                        ++pos;\n                    }\n                    if (typeof data[pos] !== 'undefined') {\n                        return data[pos];\n                    } else {\n                        return this.rotate(true, init);\n                    }\n                }\n            },\n            length: function() {\n                return data.length;\n            },\n            remove: function(index) {\n                delete data[index];\n            },\n            set: function(item) {\n                for (var i = data.length; i--;) {\n                    if (data[i] === item) {\n                        pos = i;\n                        return;\n                    }\n                }\n                this.append(item);\n                pos = data.length - 1;\n            },\n            front: function() {\n                if (data.length) {\n                    var index = pos;\n                    var restart = false;\n                    while (!data[index]) {\n                        index++;\n                        if (index > data.length) {\n                            if (restart) {\n                                break;\n                            }\n                            index = 0;\n                            restart = true;\n                        }\n                    }\n                    return data[index];\n                }\n            },\n            map: function(fn) {\n                return data.map(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        return fn(item, i);\n                    }\n                    return null;\n                }).filter(Boolean);\n            },\n            forEach: function(fn) {\n                return data.forEach(function(item, i) {\n                    if (typeof item !== 'undefined') {\n                        fn(item, i);\n                    }\n                });\n            },\n            append: function(item) {\n                data.push(item);\n            }\n        });\n    }\n    /*\n    function time() {\n        // performance.now almost equal Date.now()- performance.timing.navigationStart\n        // the difference check should be almost the same\n        return performance ? performance.now() : Date.now();\n    }\n    */\n    // -----------------------------------------------------------------------\n    // :: STACK DATA STRUCTURE\n    // -----------------------------------------------------------------------\n    function Stack(init) {\n        var data = is_array(init) ? init : init ? [init] : [];\n        $.extend(this, {\n            data: function() {\n                return data;\n            },\n            map: function(fn) {\n                return $.map(data, fn);\n            },\n            size: function() {\n                return data.length;\n            },\n            pop: function() {\n                if (data.length === 0) {\n                    return null;\n                } else {\n                    var value = data[data.length - 1];\n                    data = data.slice(0, data.length - 1);\n                    return value;\n                }\n            },\n            push: function(value) {\n                data = data.concat([value]);\n                return value;\n            },\n            top: function() {\n                return data.length > 0 ? data[data.length - 1] : null;\n            },\n            clone: function() {\n                return new Stack(data.slice(0));\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    // :: Class for Worker that do some computation when needed\n    // :: if validation function return false it mean that condition changed\n    // :: and cache need to be cleared. If value was not processed it will run\n    // :: the action\n    // -------------------------------------------------------------------------\n    function WorkerCache(options) {\n        var settings = $.extend({\n            validation: $.noop,\n            action: $.noop,\n            onCache: $.noop\n        }, options);\n        this._onCache = settings.onCache.bind(this);\n        this._action = settings.action.bind(this);\n        this._validation = settings.validation.bind(this);\n        if ('Map' in root) {\n            this._cache = new Map();\n        }\n    }\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.validate = function(key) {\n        var valid = this._validation(key);\n        var test = valid === undefined || valid === true;\n        if (!test) {\n            this._cache.clear();\n        }\n        return test;\n    };\n    // -------------------------------------------------------------------------\n    WorkerCache.prototype.get = function(key) {\n        if (!this._cache) {\n            return this._action(key);\n        }\n        var value;\n        if (this.validate(key) && this._cache.has(key)) {\n            value = this._cache.get(key);\n            this._onCache({cache: value});\n            return value;\n        }\n        value = this._action(key);\n        this._cache.set(key, value);\n        return value;\n    };\n    // -------------------------------------------------------------------------\n    // :: HISTORY CLASS\n    // -------------------------------------------------------------------------\n    function History(name, size, memory) {\n        var enabled = true;\n        var storage_key = '';\n        if (typeof name === 'string' && name !== '') {\n            storage_key = name + '_';\n        }\n        storage_key += 'commands';\n        var data;\n        if (memory) {\n            data = [];\n        } else {\n            data = $.Storage.get(storage_key);\n            data = data ? JSON.parse(data) : [];\n        }\n        var pos = data.length - 1;\n        $.extend(this, {\n            append: function(item) {\n                if (enabled) {\n                    if (data[data.length - 1] !== item) {\n                        data.push(item);\n                        if (size && data.length > size) {\n                            data = data.slice(-size);\n                        }\n                        pos = data.length - 1;\n                        if (!memory) {\n                            $.Storage.set(storage_key, JSON.stringify(data));\n                        }\n                    }\n                }\n            },\n            set: function(new_data) {\n                if (is_array(new_data)) {\n                    data = new_data;\n                    if (!memory) {\n                        $.Storage.set(storage_key, JSON.stringify(data));\n                    }\n                }\n            },\n            data: function() {\n                return data;\n            },\n            reset: function() {\n                pos = data.length - 1;\n            },\n            last: function() {\n                return data[data.length - 1];\n            },\n            end: function() {\n                return pos === data.length - 1;\n            },\n            position: function() {\n                return pos;\n            },\n            current: function() {\n                return data[pos];\n            },\n            next: function() {\n                var old = pos;\n                if (pos < data.length - 1) {\n                    ++pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            previous: function() {\n                var old = pos;\n                if (pos > 0) {\n                    --pos;\n                }\n                if (old !== pos) {\n                    return data[pos];\n                }\n            },\n            clear: function() {\n                data = [];\n                this.purge();\n            },\n            enabled: function() {\n                return enabled;\n            },\n            enable: function() {\n                enabled = true;\n            },\n            purge: function() {\n                if (!memory) {\n                    $.Storage.remove(storage_key);\n                }\n            },\n            disable: function() {\n                enabled = false;\n            },\n            toggle: function(value) {\n                if (typeof value === 'undefined') {\n                    enabled = !enabled;\n                } else {\n                    enabled = value;\n                }\n            }\n        });\n    }\n    // -------------------------------------------------------------------------\n    function OutputLines(settings) {\n        this._settings = settings;\n        this._lines = [];\n        this._snapshot = [];\n    }\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.make_snapshot = function(snapshot) {\n        this._snapshot.push(snapshot);\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.get_partial = function() {\n        var last = this._snapshot[this._snapshot.length - 1];\n        return last;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.update_snapshot = function(index, snapshot) {\n        this._snapshot[index] = snapshot;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.limit_snapshot = function(limit) {\n        this._snapshot = this._snapshot.slice(limit);\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.clear_snapshot = function() {\n        this._snapshot = [];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.get_snapshot = function() {\n        return this._snapshot.reduce(function(acc, arr) {\n            return acc.concat(arr);\n        }, []).join('\\n');\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.join = function() {\n        var args = [].slice.call(arguments);\n        if (args.some(is_function)) {\n            return function() {\n                return args.reduce(function(acc, arg) {\n                    if (is_function(acc)) {\n                        acc = acc();\n                    }\n                    if (is_function(arg)) {\n                        arg = arg();\n                    }\n                    if (is_promise(acc) || is_promise(arg)) {\n                        return $.when(acc, arg).then(function(acc, arg) {\n                            return acc + arg;\n                        });\n                    }\n                    return arg;\n                });\n            };\n        } else if (args.some(is_promise)) {\n            return args.reduce(function(acc, arg) {\n                return $.when(acc, arg).then(function(acc, arg) {\n                    return acc + arg;\n                });\n            });\n        }\n        return args.join('');\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.import = function(data) {\n        this._lines = data;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.push = function(data) {\n        var value = data[0];\n        var options = data[1];\n        if (this.has_newline()) {\n            this._lines.push(data);\n        } else {\n            var last_line = this.last_line();\n            last_line[0] = this.join(last_line[0], value);\n            last_line[1].newline = options.newline;\n        }\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.clear = function(fn) {\n        this._lines.forEach(function(line, i) {\n            var options = line[1];\n            if (is_function(options.onClear)) {\n                options.onClear.call(self, fn(i));\n            }\n        });\n        this._lines = [];\n        this._snapshot = [];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.data = function() {\n        return this._lines;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.has_newline = function() {\n        if (this._lines.length === 0) {\n            return true;\n        }\n        return this.last_line()[1].newline;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.last_line = function() {\n        var len = this._lines.length;\n        return this._lines[len - 1];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.update = function(index, value, options) {\n        if (value === null) {\n            this._lines.splice(index, 1);\n        } else {\n            this._lines[index][0] = value;\n            if (options) {\n                this._lines[index][1] = $.extend(this._lines[index][1], options);\n            }\n            return this._lines[index][1];\n        }\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.length = function() {\n        return this._lines.length;\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.valid_index = function(index) {\n        return !!this._lines[index];\n    };\n    // -------------------------------------------------------------------------\n    OutputLines.prototype.render = function(cols, fn) {\n        var settings = this._settings();\n        var lines_to_show = [];\n        this._snapshot = [];\n        if (settings.outputLimit >= 0) {\n            // flush will limit lines but if there is lot of\n            // lines we don't need to show them and then remove\n            // them from terminal\n            var limit;\n            if (settings.outputLimit === 0) {\n                limit = cols;\n            } else {\n                limit = settings.outputLimit;\n            }\n            this._lines.forEach(function(line, index) {\n                var value = line[0];\n                var options = line[1];\n                lines_to_show.push({\n                    value: value,\n                    index: index,\n                    options: options\n                });\n            });\n            var pivot = lines_to_show.length - limit - 1;\n            lines_to_show = lines_to_show.slice(pivot);\n        } else {\n            lines_to_show = this._lines.map(function(line, index) {\n                return {\n                    value: line[0],\n                    index: index,\n                    options: line[1]\n                };\n            });\n        }\n        return fn(lines_to_show);\n    };\n    // -------------------------------------------------------------------------\n    // :: FormatBuffer is a class that buffer line printed on terminal\n    // :: with optional format of the text, the class also usse cache\n    // :: the options in the constructor is a function that should returns\n    // :: settings for given format, the settings may change while the terminal\n    // :: is running, that's why they are dynamic in form of a function\n    // -------------------------------------------------------------------------\n    function FormatBuffer(options) {\n        this._options = options;\n        if ('Map' in root) {\n            this._format_cache = new Map();\n        }\n        this._output_buffer = [];\n    }\n    // -------------------------------------------------------------------------\n    FormatBuffer.NEW_LINE = 1;\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.format = function format(arg, newline, raw) {\n        var use_cache = this._format_cache && this._settings.useCache;\n\n        if (use_cache) {\n            var args = JSON.stringify([arg, this._settings]);\n            if (this._format_cache.has(args)) {\n                return this._format_cache.get(args);\n            }\n        }\n        var data = {\n            line: $.terminal.format(\n                arg,\n                this._settings\n            ),\n            raw: raw,\n            newline: newline\n        };\n        if (use_cache) {\n            this._format_cache.set(args, data);\n        }\n        return data;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.empty = function() {\n        return !this._output_buffer.length;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.append = function(arg, index, options, raw) {\n        this._settings = $.extend({\n            useCache: true\n        }, this._options(options));\n\n        this._output_buffer.push(FormatBuffer.NEW_LINE);\n\n        if (arg instanceof Array) {\n            var raw_lines = raw.split('\\n');\n            for (var i = 0, len = arg.length; i < len; ++i) {\n                if (arg[i] === '' || arg[i] === '\\r') {\n                    this._output_buffer.push({line: '', raw: ''});\n                } else {\n                    var formatted = this.format(arg[i], i === len - 1, raw_lines[i]);\n                    this._output_buffer.push(formatted);\n                }\n            }\n        } else if (!options.raw) {\n            this._output_buffer.push(this.format(arg, false, raw));\n        } else {\n            this._output_buffer.push({line: arg, raw: raw});\n        }\n        this._output_buffer.push({\n            finalize: options.finalize,\n            index: index,\n            newline: options.newline\n        });\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.clear_cache = function() {\n        if (this._format_cache) {\n            this._format_cache.clear();\n        }\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.output = function() {\n        return this._output_buffer.slice();\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.is_empty = function() {\n        return !this._output_buffer.length;\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.clear = function() {\n        this._output_buffer = [];\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.forEach = function(fn) {\n        var i = 0;\n        while (i < this._output_buffer.length) {\n            var data = this._output_buffer[i++];\n            if (data === FormatBuffer.NEW_LINE) {\n                fn();\n            } else {\n                fn(data);\n            }\n        }\n    };\n    // -------------------------------------------------------------------------\n    FormatBuffer.prototype.flush = function(render) {\n        this.forEach(render);\n        this.clear();\n    };\n    // -------------------------------------------------------------------------\n    // :: function that handle all cases of prompt and call the function set\n    // :: with a string\n    // -------------------------------------------------------------------------\n    function with_prompt(prompt, set, context) {\n        function error(e) {\n            var prompt = $.terminal.escape_brackets('[ERR]> ');\n            set('[[;red;]' + prompt + ']');\n            alert_exception('Prompt', e);\n        }\n        switch (typeof prompt) {\n            case 'string':\n                set(prompt);\n                break;\n            case 'function':\n                try {\n                    var ret = prompt.call(context, function(string) {\n                        set(string);\n                    });\n                    if (typeof ret === 'string') {\n                        set(ret);\n                    }\n                    if (ret && ret.then) {\n                        ret.then(set).catch(error);\n                    }\n                } catch (e) {\n                    error(e);\n                }\n                break;\n        }\n    }\n    // -------------------------------------------------------------------------\n    // :: COMMAND LINE PLUGIN\n    // -------------------------------------------------------------------------\n    var cmd_index = 0;\n    $.cmd = {\n        defaults: {\n            mask: false,\n            caseSensitiveSearch: true,\n            historySize: 60,\n            prompt: '> ',\n            enabled: true,\n            history: true,\n            onPositionChange: $.noop,\n            onCommandChange: $.noop,\n            inputStyle: 'textarea',\n            mobileDelete: is_mobile,\n            onPaste: $.noop,\n            clickTimeout: 200,\n            holdTimeout: 400,\n            holdRepeatTimeout: 200,\n            mobileIngoreAutoSpace: [],\n            repeatTimeoutKeys: [],\n            tabindex: 1,\n            tabs: 4\n        }\n    };\n    $.fn.cmd = function(options) {\n        var settings = $.extend({}, $.cmd.defaults, options);\n        function mobile_ignore_key(key) {\n            return settings.mobileIngoreAutoSpace.length &&\n                settings.mobileIngoreAutoSpace.indexOf(key) !== -1 && is_android;\n        }\n        var self = this;\n        var maybe_data = self.data('cmd');\n        if (maybe_data) {\n            return maybe_data;\n        }\n        var id = cmd_index++;\n        self.addClass('cmd');\n        var wrapper = $('<div class=\"cmd-wrapper\"/>').appendTo(self);\n        wrapper.append('<span class=\"cmd-prompt\"></span>');\n        wrapper.append('<div class=\"cmd-cursor-line\">' +\n                       '<span></span>' +\n                       '<span class=\"cmd-cursor\">' +\n                       '<span data-text class=\"end\"><span>&nbsp;</span></span>' +\n                       '</span>' +\n                       '<span></span>' +\n                       '</div>');\n        var cursor_line = wrapper.find('.cmd-cursor-line');\n        // a11y: don't read command it's in textarea that's in focus\n        a11y_hide(cursor_line);\n        // on mobile the only way to hide textarea on desktop it's needed because\n        // textarea show up after focus\n        //self.append('<span class=\"mask\"></mask>');\n        var clip;\n        if (is_mobile) {\n            clip = (function() {\n                var $node = $('<div class=\"cmd-editable\" ' +\n                              'contenteditable=\"plaintext-only\" ' +\n                              'spellcheck=\"false\"/>').attr({\n                    autocapitalize: 'off',\n                    autocorrect: 'off',\n                    spellcheck: 'false',\n                    tabindex: settings.tabindex\n                }).insertAfter(self);\n                $node.on('focus', function() {\n                    self.enable();\n                }).on('blur', function() {\n                    self.disable();\n                });\n                var timer;\n                var clip = {\n                    $node: $node,\n                    val: function(value) {\n                        if (typeof value === 'undefined') {\n                            return $node.text();\n                        } else {\n                            $node.html(value);\n                        }\n                    },\n                    reset: function() {\n                        clearTimeout(timer);\n                        timer = setTimeout(function() {\n                            $node.css({\n                                top: '',\n                                bottom: ''\n                            });\n                        }, 400);\n                    },\n                    focus: function() {\n                        css($node[0], {\n                            top: 'calc(var(--terminal-scroll, 0) * 1px)'\n                        });\n                        clip.reset();\n                    },\n                    blur: function() {\n                        $node.css({\n                            top: '100%',\n                            bottom: 0\n                        }).blur();\n                        // just in case of Webkit bug\n                        window.getSelection().removeAllRanges();\n                        clip.reset();\n                    }\n                };\n                return clip;\n            })();\n            self.addClass('cmd-mobile');\n        } else {\n            clip = (function() {\n                var id = generate_id();\n                var $node = $('<textarea>').attr({\n                    autocapitalize: 'off',\n                    spellcheck: 'false',\n                    id: id,\n                    tabindex: settings.tabindex\n                }).addClass('cmd-clipboard').appendTo(self);\n                // some a11y to make lighthouse happy\n                $node.before('<label class=\"visually-hidden\" for=\"' + id + '\">' +\n                             'Clipbard textarea for jQuery Terminal</label>');\n                return {\n                    $node: $node,\n                    val: function(value) {\n                        // even if value is undeifned\n                        // when calling val(value) it return jQuery object\n                        if (typeof value === 'undefined') {\n                            return $node.val();\n                        } else {\n                            return $node.val(value);\n                        }\n                    }\n                };\n            })();\n            clip.val(' ');\n        }\n        if (settings.width) {\n            self.width(settings.width);\n        }\n        var num_chars; // calculated by resize\n        var char_width;\n        var last_rendered_prompt;\n        var prompt_last_line;\n        var just_prompt_len;\n        var extra_prompt_margin = 0;\n        var prompt_len;\n        var prompt_node = self.find('.cmd-prompt');\n        var reverse_search = false;\n        var rev_search_str = '';\n        var reverse_search_position = null;\n        var backup_prompt;\n        var command = '';\n        var last_command;\n        // text from selection using CTRL+SHIFT+C (as in Xterm)\n        var kill_text = ''; // text from command that kill part of the command\n        var position = 0;\n        var prompt;\n        var enabled;\n        var formatted_position = 0;\n        var name, history;\n        var cursor = self.find('.cmd-cursor');\n        var animation;\n        var restart_animation;\n        var paste_count = 0;\n        // use \\uFFFF to mark newline extra character\n        // so we can hide it by css when using text selection\n        var line_marker = '\\uFFFF';\n        var line_marker_re = /\\uFFFF$/;\n        var empty_marker_re = /^\\uFFFF$/;\n        function get_char_pos(e) {\n            var node = $(e.target);\n            if (node.is('span,img,a')) {\n                node = node.closest('[data-text]');\n                return node.index() +\n                    node.parent('span').prevAll().find('[data-text]').length +\n                    node.closest('[role=\"presentation\"]')\n                        .prevUntil('.cmd-prompt').find('[data-text]').length;\n            } else if (node.is('div[role=\"presentation\"]')) {\n                var last = !node.next().length;\n                return node.find('[data-text]').length +\n                    node.prevUntil('.cmd-prompt').find('[data-text]').length -\n                    (last ? 0 : 1);\n            }\n        }\n        // IE mapping\n        var key_mapping = {\n            'SPACEBAR': ' ',\n            'UP': 'ArrowUP',\n            'DOWN': 'ArrowDown',\n            'LEFT': 'ArrowLeft',\n            'RIGHT': 'ArrowRight',\n            'DEL': 'Delete',\n            'MULTIPLY': '*',\n            'DIVIDE': '/',\n            'SUBTRACT': '-',\n            'ADD': '+'\n        };\n        function ie_key_fix(e) {\n            var key = e.key.toUpperCase();\n            if (key_mapping[key]) {\n                return key_mapping[key];\n            }\n            return key;\n        }\n        function get_key(e) {\n            if (e.key) {\n                var key = ie_key_fix(e).toUpperCase();\n                if (key === 'CONTROL') {\n                    return 'CTRL';\n                } else {\n                    var combo = [];\n                    if (e.ctrlKey) {\n                        combo.push('CTRL');\n                    }\n                    if (e.metaKey && key !== 'META') {\n                        combo.push('META');\n                    }\n                    if (e.shiftKey && key !== 'SHIFT') {\n                        combo.push('SHIFT');\n                    }\n                    if (e.altKey && key !== 'ALT') {\n                        combo.push('ALT');\n                    }\n                    if (combo.length && key === ' ') {\n                        key = 'SPACEBAR';\n                    }\n                    if (e.key) {\n                        combo.push(key);\n                    }\n                    return combo.join('+');\n                }\n            }\n        }\n        // -----------------------------------------------------------------\n        // for invoking shortcuts using terminal::keydown\n        // taken from https://github.com/cvan/keyboardevent-key-polyfill/\n        var keycodes = {\n            3: 'Cancel',\n            6: 'Help',\n            8: 'Backspace',\n            9: 'Tab',\n            12: 'Clear',\n            13: 'Enter',\n            16: 'Shift',\n            17: 'Control',\n            18: 'Alt',\n            19: 'Pause',\n            20: 'CapsLock',\n            27: 'Escape',\n            28: 'Convert',\n            29: 'NonConvert',\n            30: 'Accept',\n            31: 'ModeChange',\n            32: ' ',\n            33: 'PageUp',\n            34: 'PageDown',\n            35: 'End',\n            36: 'Home',\n            37: 'ArrowLeft',\n            38: 'ArrowUp',\n            39: 'ArrowRight',\n            40: 'ArrowDown',\n            41: 'Select',\n            42: 'Print',\n            43: 'Execute',\n            44: 'PrintScreen',\n            45: 'Insert',\n            46: 'Delete',\n            48: ['0', ')'],\n            49: ['1', '!'],\n            50: ['2', '@'],\n            51: ['3', '#'],\n            52: ['4', '$'],\n            53: ['5', '%'],\n            54: ['6', '^'],\n            55: ['7', '&'],\n            56: ['8', '*'],\n            57: ['9', '('],\n            91: 'OS',\n            93: 'ContextMenu',\n            144: 'NumLock',\n            145: 'ScrollLock',\n            181: 'VolumeMute',\n            182: 'VolumeDown',\n            183: 'VolumeUp',\n            186: [';', ':'],\n            187: ['=', '+'],\n            188: [',', '<'],\n            189: ['-', '_'],\n            190: ['.', '>'],\n            191: ['/', '?'],\n            192: ['`', '~'],\n            219: ['[', '{'],\n            220: ['\\\\', '|'],\n            221: [']', '}'],\n            222: [\"'\", '\"'],\n            224: 'Meta',\n            225: 'AltGraph',\n            246: 'Attn',\n            247: 'CrSel',\n            248: 'ExSel',\n            249: 'EraseEof',\n            250: 'Play',\n            251: 'ZoomOut'\n        };\n        var i;\n        // Function keys (F1-24).\n        for (i = 1; i < 25; i++) {\n            keycodes[111 + i] = 'F' + i;\n        }\n        // Printable ASCII characters.\n        var letter = '';\n        for (i = 65; i < 91; i++) {\n            letter = String.fromCharCode(i);\n            keycodes[i] = [letter.toLowerCase(), letter.toUpperCase()];\n        }\n        var reversed_keycodes = {};\n        Object.keys(keycodes).forEach(function(which) {\n            if (is_array(keycodes[which])) {\n                keycodes[which].forEach(function(key) {\n                    reversed_keycodes[key.toUpperCase()] = which;\n                });\n            } else {\n                reversed_keycodes[keycodes[which].toUpperCase()] = which;\n            }\n        });\n        // -----------------------------------------------------------------\n        var keymap;\n        var default_keymap = {\n            'ALT+D': delete_forward({clipboard: true}),\n            'HOLD+ALT+D': delete_forward({clipboard: true, hold: true}),\n            'HOLD+DELETE': delete_forward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+DELETE': delete_forward({clipboard: false, hold: true}),\n            'ENTER': function() {\n                if (history && command && !settings.mask &&\n                    ((is_function(settings.historyFilter) &&\n                      settings.historyFilter(command)) ||\n                     (settings.historyFilter instanceof RegExp &&\n                      command.match(settings.historyFilter)) ||\n                     !settings.historyFilter)) {\n                    history.append(command);\n                }\n                var tmp = command;\n                // fix scroll the page where there is no scrollbar\n                clip.$node.blur();\n                history.reset();\n\n                // for next input event on firefox/android with google keyboard\n                prev_command = '';\n                no_keydown = true;\n\n                var promise;\n                if (settings.commands) {\n                    promise = settings.commands.call(self, tmp);\n                }\n                if (is_function(prompt)) {\n                    if (promise && is_function(promise.then)) {\n                        promise.then(draw_prompt);\n                    } else {\n                        draw_prompt();\n                    }\n                }\n                self.set('');\n                clip.val('');\n                clip.$node.focus();\n                return false;\n            },\n            'SHIFT+ENTER': function() {\n                self.insert('\\n');\n                return true;\n            },\n            'BACKSPACE': backspace_key,\n            'SHIFT+BACKSPACE': backspace_key,\n            'TAB': function() {\n                self.insert('\\t');\n            },\n            'CTRL+D': function() {\n                self['delete'](1);\n                return false;\n            },\n            'DELETE': function() {\n                self['delete'](1);\n                return true;\n            },\n            'HOLD+ARROWUP': up_arrow,\n            'ARROWUP': up_arrow,\n            'CTRL+ARROWUP': prev_history,\n            'CTRL+P': prev_history,\n            'ARROWDOWN': down_arrow,\n            'HOLD+ARROWDOWN': down_arrow,\n            'CTRL+N': next_history,\n            'CTRL+ARROWDOWN': next_history,\n            'ARROWLEFT': left,\n            'HOLD+ARROWLEFT': debounce(left, 10),\n            'CTRL+B': left,\n            'CTRL+ARROWLEFT': function() {\n                // jump to one character after last space before prevoius word\n                var len = position - 1;\n                var pos = 0;\n                if (command[len] === ' ') {\n                    --len;\n                }\n                for (var i = len; i > 0; --i) {\n                    if (command[i] === ' ' && command[i + 1] !== ' ') {\n                        pos = i + 1;\n                        break;\n                    } else if (command[i] === '\\n' &&\n                               command[i + 1] !== '\\n') {\n                        pos = i;\n                        break;\n                    }\n                }\n                self.position(pos);\n            },\n            'CTRL+R': function() {\n                if (reverse_search) {\n                    reverse_history_search(true);\n                } else {\n                    backup_prompt = prompt;\n                    draw_reverse_prompt();\n                    last_command = command;\n                    self.set('');\n                    redraw();\n                    reverse_search = true;\n                }\n                return false;\n            },\n            'CTRL+G': function() {\n                if (reverse_search) {\n                    prompt = backup_prompt;\n                    draw_prompt();\n                    self.set(last_command);\n                    redraw();\n                    reverse_search = false;\n                    rev_search_str = '';\n                    return false;\n                }\n            },\n            'ARROWRIGHT': right,\n            'HOLD+ARROWRIGHT': debounce(right, 10),\n            'CTRL+F': right,\n            'CTRL+ARROWRIGHT': function() {\n                // jump to beginning or end of the word\n                if (command[position] === ' ') {\n                    ++position;\n                }\n                var re = /\\S[\\n\\s]{2,}|[\\n\\s]+\\S?/;\n                var match = command.slice(position).match(re);\n                if (!match || match[0].match(/^\\s+$/)) {\n                    self.position(bare_text(command).length);\n                } else if (match[0][0] !== ' ') {\n                    position += match.index + 1;\n                } else {\n                    position += match.index + match[0].length - 1;\n                    if (match[0][match[0].length - 1] !== ' ') {\n                        --position;\n                    }\n                }\n                redraw();\n            },\n            'F12': return_true, // Allow Firebug\n            'END': end(true),\n            'CTRL+END': end(),\n            'CTRL+E': end(),\n            'HOME': home(true),\n            'CTRL+HOME': home(),\n            'CTRL+A': home(),\n            'SHIFT+INSERT': paste_event,\n            'CTRL+SHIFT+T': return_true, // open closed tab\n            'CTRL+W': delete_backward({clipboard: true, hold: false}),\n            'HOLD+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'HOLD+SHIFT+BACKSPACE': delete_backward({clipboard: false, hold: true}),\n            'CTRL+H': function() {\n                if (command !== '' && position > 0) {\n                    self['delete'](-1);\n                }\n                return false;\n            },\n            'CTRL+X': return_true,\n            'CTRL+C': function() {\n                return get_selected_html() === '';\n            },\n            'CTRL+T': return_true,\n            'CTRL+Y': function() {\n                if (kill_text !== '') {\n                    self.insert(kill_text);\n                }\n            },\n            'CTRL+V': paste_event,\n            'META+V': paste_event,\n            'CTRL+K': function() {\n                var len = text(command).length;\n                if (len > position) {\n                    kill_text = self['delete'](len - position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+U': function() {\n                if (command !== '' && position !== 0) {\n                    kill_text = self['delete'](-position);\n                    text_to_clipboard(clip.$node, kill_text);\n                }\n                return false;\n            },\n            'CTRL+TAB': function() {\n                return false;\n            },\n            'META+`': return_true, // CMD+` switch browser window on Mac\n            'META+R': return_true, // CMD+R page reload in Chrome Mac\n            'META+L': return_true // CLD+L jump into Ominbox on Chrome Mac\n        };\n        // -------------------------------------------------------------------------------\n        function delete_forward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_forward() {\n                    self['delete'](1);\n                    return false;\n                };\n            }\n            return function delete_word_forward() {\n                var re = / *[^ ]+ *(?= )|[^ ]+$/;\n                var substring = command.slice(position);\n                var m = substring.match(re);\n                if (m) {\n                    kill_text = m[0];\n                    if (options.clipboard) {\n                        text_to_clipboard(clip.$node, kill_text);\n                    }\n                }\n                self.set(\n                    command.slice(0, position) +\n                        command.slice(position).replace(re, ''),\n                    true\n                );\n                // chrome jump to address bar\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function delete_backward(options) {\n            options = options || {};\n            if (options.hold && !settings.mobileDelete) {\n                return function delete_character_backward() {\n                    self['delete'](-1);\n                };\n            }\n            return function delete_word_backward() {\n                // don't work in Chromium (can't prevent close tab)\n                if (command !== '' && position !== 0) {\n                    var m = command.slice(0, position).match(/([^ ]* *$)/);\n                    if (m[0].length) {\n                        kill_text = self['delete'](-m[0].length);\n                        if (options.clipboard) {\n                            text_to_clipboard(clip.$node, kill_text);\n                        }\n                    }\n                }\n                return false;\n            };\n        }\n        // -------------------------------------------------------------------------------\n        function return_true() {\n            return true;\n        }\n        // -------------------------------------------------------------------------------\n        function paste_event() {\n            clip.val('');\n            paste_count = 0;\n            if (self.isenabled() && !clip.$node.is(':focus')) {\n                clip.$node.trigger('focus', [true]);\n            }\n            clip.$node.one('input', paste);\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Paste content to terminal using hidden textarea\n        // ---------------------------------------------------------------------\n        function paste() {\n            if (paste_count++ > 0) {\n                return;\n            }\n            function set() {\n                clip.val(command);\n                fix_textarea();\n            }\n            function insert(text) {\n                self.insert(text);\n                set();\n            }\n            if (self.isenabled()) {\n                //wait until Browser insert text to textarea\n                self.oneTime(100, function() {\n                    var value = clip.val().replace(/\\r/g, '');\n                    if (is_function(settings.onPaste)) {\n                        var ret = settings.onPaste.call(self, {\n                            target: self,\n                            text: value\n                        });\n                        if (ret !== undefined) {\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, insert);\n                            } else if (typeof ret === 'string') {\n                                insert(ret);\n                            } else if (ret === false) {\n                                set();\n                            }\n                            return;\n                        }\n                    }\n                    insert(value);\n                });\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function prev_history() {\n            if (first_up_history) {\n                last_command = command;\n                self.set(history.current());\n            } else {\n                self.set(history.previous());\n            }\n            first_up_history = false;\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function next_history() {\n            if (history.end()) {\n                first_up_history = true;\n                self.set(last_command);\n            } else {\n                self.set(history.next());\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function have_newlines(string) {\n            return string.match(/\\n/);\n        }\n        // -------------------------------------------------------------------------------\n        function have_wrapping(string, prompt_len) {\n            var lengths = string.split('\\n').map(function(line) {\n                return $.terminal.length(line);\n            });\n            if (prompt_len) {\n                lengths[0] += prompt_len;\n            }\n            var wrap = lengths.filter(function(len) {\n                return len >= num_chars;\n            });\n            return !!wrap.length;\n        }\n        // -------------------------------------------------------------------------------\n        function simple_split_command_line(formatted) {\n            var prompt = last_rendered_prompt;\n            var lines = $.terminal.split_equal(prompt + formatted, num_chars);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            lines = lines.map($.terminal.unescape_brackets);\n            lines[0] = lines[0].replace(re, '');\n            return lines;\n        }\n        // -------------------------------------------------------------------------------\n        function up_arrow() {\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var before = $.terminal.substring(formatted, 0, position);\n            var col = self.column();\n            var cursor_line = self.find('.cmd-cursor-line');\n            var line = cursor_line.prevUntil('span').length;\n            // case when line is wrapped and we are below prompt\n            if (line === 1 && col <= prompt_len) {\n                self.position(0);\n                return false;\n            }\n            if (line === 0) {\n                return prev_history();\n            }\n            if (have_newlines(before) || have_wrapping(before, prompt_len)) {\n                var prev = cursor_line.prev();\n                var splitted = prev.is('.cmd-end-line');\n                var lines = simple_split_command_line(formatted);\n                prev = lines[line - 1];\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                if (left_over > 0) {\n                    diff = col;\n                    if (line - 1 === 0) {\n                        diff -= prompt_len;\n                    }\n                    diff = col + prev.substring(diff).length;\n                    if (splitted) {\n                        ++diff;\n                    }\n                } else {\n                    diff = col + 1;\n                }\n                self.position(-diff, true);\n                return false;\n            } else {\n                return prev_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function down_arrow() {\n            // use format and strip so we get visual strings (formatting can change text)\n            var formatted = formatting(command);\n            formatted = $.terminal.strip(formatted);\n            var after = $.terminal.substring(formatted, position);\n            if (have_newlines(after) || have_wrapping(after)) {\n                var lines = simple_split_command_line(formatted);\n                var col = self.column();\n                var cursor_line = self.find('.cmd-cursor-line');\n                var $line = cursor_line.prevUntil('span');\n                var line = $line.length;\n                var ending = cursor_line.is('.cmd-end-line');\n                var next_broken = cursor_line.next().is('.cmd-end-line');\n                var next = lines[line + 1];\n                if (!next) {\n                    return next_history();\n                }\n                var left_over = lines[line].substring(col).length;\n                var diff;\n                // move to next line if at the end move to end of next line\n                if (left_over === 0) {\n                    diff = next.length;\n                    if (next_broken) {\n                        diff++;\n                    }\n                } else {\n                    diff = Math.min(col, next.length) + left_over;\n                    if (line === 0) {\n                        diff += prompt_len;\n                    }\n                    if (ending) {\n                        // correction for splitted line that don't have extra space\n                        diff += 1;\n                    }\n                }\n                self.position(diff, true);\n                return false;\n            } else {\n                return next_history();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function backspace_key() {\n            if (reverse_search) {\n                rev_search_str = rev_search_str.slice(0, -1);\n                draw_reverse_prompt();\n            } else if (command !== '' && position > 0) {\n                self['delete'](-1);\n            }\n            // for next input after naitve backspace\n            // we need timeout because we don't want it to trigger\n            // for current input but next one\n            self.oneTime(1, function() {\n                no_keydown = true;\n            });\n        }\n        // -------------------------------------------------------------------------------\n        function left() {\n            if (position > 0) {\n                self.position(-1, true);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function right() {\n            if (position < bare_text(command).length) {\n                self.position(1, true);\n            }\n            return false;\n        }\n        // -------------------------------------------------------------------------------\n        function home(line) {\n            function home() {\n                self.position(0);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var string = command.substring(0, self.position());\n                        self.position(string.lastIndexOf('\\n') + 1);\n                    } else {\n                        home();\n                    }\n                };\n            } else {\n                return home;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function end(line) {\n            function end() {\n                self.position(text(command).length);\n            }\n            if (line) {\n                return function() {\n                    if (command.match(/\\n/)) {\n                        var lines = command.split('\\n');\n                        var pos = self.position();\n                        var sum = 0;\n                        for (var i = 0; i < lines.length; ++i) {\n                            sum += lines[i].length;\n                            if (sum > pos) {\n                                self.position(sum + i);\n                                return;\n                            }\n                        }\n                    }\n                    end();\n                };\n            } else {\n                return end;\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function mobile_focus() {\n            //if (is_touch) {\n            var $clip = clip.$node;\n            var focus = $clip.is(':focus');\n            if (enabled) {\n                if (!focus) {\n                    //clip.trigger('focus', [true]);\n                }\n                self.oneTime(10, function() {\n                    if (!$clip.is(':focus') && enabled) {\n                        $clip.trigger('focus', [true]);\n                    }\n                });\n            } else if (focus && !enabled) {\n                $clip.trigger('blur', [true]);\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // fix for .cursor span animation that should only be applied when\n        // animation is equal to terminal-blink\n        // -------------------------------------------------------------------------------\n        function fix_cursor() {\n            if (animation_supported) {\n                var style = window.getComputedStyle(cursor[0]);\n                var animationName = style.getPropertyValue('--animation');\n                animationName = animationName.replace(/^\\s*|\\s*$/g, '');\n                var _class = self.attr('class');\n                if (_class.match(/-animation/)) {\n                    _class = _class.replace(/[a-z]+-animation/g, '');\n                }\n                if (animationName && !animationName.match(/blink/)) {\n                    var className = animationName.replace(/terminal-/, '') + '-animation';\n                    if (!_class.match(className)) {\n                        _class += ' ' + className;\n                    }\n                }\n                _class = _class.replace(/\\s+/g, ' ');\n                if (_class !== self.attr('class').replace(/\\s+/g, ' ')) {\n                    self.attr('class', _class);\n                }\n            }\n        }\n        // -------------------------------------------------------------------------------\n        // on mobile you can't delete character if input is empty (event\n        // will not fire) so we fake text entry, we could just put dummy\n        // data but we put real command and position\n        // -------------------------------------------------------------------------------\n        function fix_textarea(position_only) {\n            if (!self.isenabled()) {\n                return;\n            }\n            // delay worked while experimenting\n            self.oneTime(10, function() {\n                // we use space before command to show select all context menu\n                // idea taken from CodeMirror\n                if (!is_mobile && clip.val() !== command && !position_only) {\n                    clip.val(' ' + command);\n                }\n                if (enabled) {\n                    self.oneTime(10, function() {\n                        try {\n                            var pos = !is_mobile ? position + 1 : position;\n                            // we check first to improve performance\n                            if (clip.$node.caret() !== pos) {\n                                clip.$node.caret(pos);\n                            }\n                        } catch (e) {\n                            // firefox throw NS_ERROR_FAILURE ignore\n                        }\n                    });\n                }\n            });\n        }\n        // -------------------------------------------------------------------------------\n        // terminal animation don't work on android because they animate\n        // 2 properties\n        // -------------------------------------------------------------------------------\n        if (animation_supported && !is_android) {\n            animation = function(toggle) {\n                if (toggle) {\n                    cursor.addClass('cmd-blink');\n                } else {\n                    cursor.removeClass('cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                var new_cursor = cursor.clone();\n                new_cursor.insertBefore(cursor);\n                cursor.remove();\n                cursor = new_cursor;\n            };\n        } else {\n            var animating = false;\n            animation = function(toggle) {\n                if (toggle && !animating) {\n                    animating = true;\n                    cursor.addClass('cmd-inverted cmd-blink');\n                    self.everyTime(500, 'blink', blink);\n                } else if (animating && !toggle) {\n                    animating = false;\n                    self.stopTime('blink', blink);\n                    cursor.removeClass('cmd-inverted cmd-blink');\n                }\n            };\n            restart_animation = function() {\n                animation(false);\n                animation(true);\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Blinking cursor function\n        // ---------------------------------------------------------------------\n        function blink() {\n            cursor.toggleClass('cmd-inverted');\n        }\n        // ---------------------------------------------------------------------\n        // :: Set prompt for reverse search\n        // ---------------------------------------------------------------------\n        function draw_reverse_prompt() {\n            prompt = '(reverse-i-search)`' + rev_search_str + \"': \";\n            draw_prompt();\n        }\n        // ---------------------------------------------------------------------\n        // :: Disable reverse search\n        // ---------------------------------------------------------------------\n        function clear_reverse_state() {\n            prompt = backup_prompt;\n            reverse_search = false;\n            reverse_search_position = null;\n            rev_search_str = '';\n        }\n        // ---------------------------------------------------------------------\n        // :: Search through command line history. If next is not defined or\n        // :: false it searches for the first item from the end. If true it\n        // :: search for the next item\n        // ---------------------------------------------------------------------\n        function reverse_history_search(next) {\n            var history_data = history.data();\n            var regex, save_string;\n            var len = history_data.length;\n            if (next && reverse_search_position > 0) {\n                len -= reverse_search_position;\n            }\n            if (rev_search_str.length > 0) {\n                for (var j = rev_search_str.length; j > 0; j--) {\n                    save_string = $.terminal.escape_regex(rev_search_str.slice(0, j));\n                    if (settings.caseSensitiveSearch) {\n                        regex = new RegExp(save_string);\n                    } else {\n                        regex = new RegExp(save_string, 'i');\n                    }\n                    for (var i = len; i--;) {\n                        if (regex.test(history_data[i])) {\n                            reverse_search_position = history_data.length - i;\n                            self.position(history_data[i].indexOf(save_string));\n                            self.set(history_data[i], true);\n                            redraw();\n                            if (rev_search_str.length !== j) {\n                                rev_search_str = rev_search_str.slice(0, j);\n                                draw_reverse_prompt();\n                            }\n                            return;\n                        }\n                    }\n                }\n            }\n            rev_search_str = ''; // clear if not found any\n        }\n        // ---------------------------------------------------------------------\n        // :: calculate width of hte character\n        // ---------------------------------------------------------------------\n        function get_char_width() {\n            var $prompt = self.find('.cmd-prompt');\n            var html = $prompt.html();\n            $prompt.html('<span>&nbsp;</span>');\n            var width = $prompt.find('span')[0].getBoundingClientRect().width;\n            $prompt.html(html);\n            return width;\n        }\n        // ---------------------------------------------------------------------\n        // :: return number of characters in command line\n        // ---------------------------------------------------------------------\n        function get_num_chars(char_width) {\n            var width = self.width();\n            return Math.floor(width / char_width);\n        }\n        // ---------------------------------------------------------------------\n        // :: Split String that fit into command line where first line need to\n        // :: fit next to prompt (need to have less characters)\n        // ---------------------------------------------------------------------\n        function process_cmd_line(string) {\n            function split(string) {\n                return $.terminal.split_equal(string, num_chars);\n            }\n            // -----------------------------------------------------------------\n            function skip_empty(array) {\n                // we remove lines that are leftovers after adding space at the end\n                var result = [];\n                array.forEach(function(line, i) {\n                    if ($.terminal.strip(line).match(empty_marker_re)) {\n                        result[i] = false;\n                        // lines that will get removed need line ending on previos\n                        // line so code that check that marker works correctly\n                        if (i > 0) {\n                            result[i - 1] += line_marker;\n                        }\n                    } else {\n                        result[i] = array[i];\n                    }\n                });\n                return result.filter(function(line) {\n                    return line !== false;\n                });\n            }\n            // -----------------------------------------------------------------\n            var line = prompt_node.find('.cmd-line');\n            var prompt;\n            if (line.length) {\n                prompt = line.nextUntil('.cmd-line').text();\n            } else {\n                prompt = prompt_node.text();\n            }\n            prompt = $.terminal.escape_brackets(prompt);\n            var re = new RegExp('^' + $.terminal.escape_regex(prompt));\n            var array;\n            if (string.match(/\\n/)) {\n                var tmp = string.split('\\n');\n                var first_len = num_chars - prompt_len - 1;\n                for (var i = 0; i < tmp.length - 1; ++i) {\n                    tmp[i] += line_marker;\n                }\n                // split first line\n                if (strlen(tmp[0]) > first_len) {\n                    array = split(prompt + tmp[0]);\n                    array[0] = array[0].replace(re, '');\n                    array = skip_empty(array);\n                } else {\n                    array = [tmp[0]];\n                }\n                // process rest of the lines\n                for (i = 1; i < tmp.length; ++i) {\n                    if (strlen(tmp[i]) > num_chars) {\n                        var splitted = split(tmp[i]);\n                        if (i < tmp.length - 1) {\n                            splitted = skip_empty(splitted);\n                        }\n                        array = array.concat(splitted);\n                    } else {\n                        array.push(tmp[i]);\n                    }\n                }\n            } else {\n                array = split(prompt + string, num_chars);\n                array[0] = array[0].replace(re, '');\n            }\n            // fix issue with cursor that was cut off #379\n            if (array.length > 1) {\n                var len = $.terminal.length(array[array.length - 1]);\n                if (len === num_chars) {\n                    array.push('');\n                }\n            }\n            return array;\n        }\n        // ---------------------------------------------------------------------\n        var cmd_line_worker = new WorkerCache({\n            validation: function(key) {\n                var result = false;\n                if ((!this._previous_value || this._previous_value === key) &&\n                    (!this._cols || this._cols === num_chars)) {\n                    result = true;\n                }\n                this._previous_value = key;\n                this._cols = num_chars;\n                return result;\n            },\n            action: process_cmd_line\n        });\n        // ---------------------------------------------------------------------\n        function split_command_line(string) {\n            return cmd_line_worker.get(string);\n        }\n        // ---------------------------------------------------------------------\n        // :: use custom formatting\n        // ---------------------------------------------------------------------\n        function formatting(string, skip_formatted_position) {\n            // we don't want to format command when user type formatting in\n            try {\n                string = $.terminal.escape_formatting(string);\n                var format_options = $.extend({}, settings, {\n                    unixFormattingEscapeBrackets: true,\n                    position: position,\n                    command: true\n                });\n                var formatted = $.terminal.apply_formatters(string, format_options);\n                var output = $.terminal.normalize(formatted[0]);\n                var max = $.terminal.length(output);\n                if (!skip_formatted_position) {\n                    formatted_position = formatted[1];\n                    // fix issue with nested formatting where max length\n                    // is checked before nested_formatting flatten formatting\n                    if (formatted_position > max) {\n                        formatted_position = max;\n                    }\n                }\n                return output;\n            } catch (e) {\n                alert_exception('[Formatting]', e.stack);\n                return string;\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: format and encode the string\n        // ---------------------------------------------------------------------\n        function format(string, before) {\n            //string = $.terminal.normalize(string);\n            var encoded = $.terminal.encode(wrap(string), {\n                tabs: settings.tabs,\n                before: before\n            });\n            return $.terminal.format(encoded, {\n                charWidth: settings.charWidth,\n                allowedAttributes: settings.allowedAttributes || []\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create new string with all characters in it's own\n        // :: formatting - it will only have style if the input is formatting\n        // :: this function is not very usefull so it's not in $.terminal\n        // ---------------------------------------------------------------------\n        function wrap(string) {\n            return $.terminal.partition(string).join('');\n        }\n        // ---------------------------------------------------------------------\n        // :: shortcut helpers\n        // ---------------------------------------------------------------------\n        function length(str, raw) {\n            return $.terminal.length(str, raw);\n        }\n        // ---------------------------------------------------------------------\n        function is_multiline(str) {\n            return strlen(text(str)) > num_chars - prompt_len - 1 ||\n                str.match(/\\n/);\n        }\n        // ---------------------------------------------------------------------\n        function substring(str, start, end) {\n            return $.terminal.substring(str, start, end);\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that check if string is valid emoji formatting\n        // ---------------------------------------------------------------------\n        function is_emoji_formatting(str) {\n            if ($.terminal.is_formatting(str)) {\n                return str.replace(format_parts_re, '$4').match(/^emoji /);\n            }\n            return false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Function that displays the command line. Split long lines and\n        // :: place cursor in the right place\n        // ---------------------------------------------------------------------\n        var redraw = (function() {\n            var before = cursor.prev();\n            var after = cursor.next();\n            var cursor_line = cursor.parent();\n            // -----------------------------------------------------------------\n            // :: Draw line with the cursor\n            // -----------------------------------------------------------------\n            function draw_cursor_line(string, options) {\n                var end_line = string.match(line_marker_re);\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                }\n                cursor_line.toggleClass('cmd-end-line', !!end_line);\n                var cursor_end_line = false;\n                var settings = $.extend({\n                    prompt: '',\n                    last: false\n                }, options);\n                var position = settings.position;\n                var len = length(string);\n                var prompt = settings.prompt;\n                var c;\n                if (position === len) {\n                    before.html(format(string));\n                    c = '&nbsp;';\n                    empty_cursor();\n                    after.html('');\n                } else if (position === 0) {\n                    before.html('');\n                    c = substring(string, 0, 1);\n                    cursor.html(format(c));\n                    after.html(format(substring(string, 1), prompt + c));\n                } else {\n                    var before_str = $.terminal.substring(string, 0, position);\n                    before.html(format(before_str, prompt));\n                    c = substring(string, position, position + 1);\n                    var c_before = (prompt + before_str).replace(/^.*\\t/, '');\n                    cursor.html(format(c, c_before));\n                    if (position === len - 1) {\n                        cursor_end_line = true;\n                        after.html('');\n                    } else {\n                        if (c.match(/\\t/)) {\n                            c_before = '';\n                        } else {\n                            c_before += c;\n                        }\n                        after.html(format(substring(string, position + 1), c_before));\n                    }\n                }\n                if (ch_unit_bug) {\n                    if (typeof wcwidth !== 'undefined') {\n                        // handle emoji and wide characters in IE or\n                        // other possible browsers that don't have valid ch unit\n                        var size = strlen(text(c));\n                        if (size === 1 && is_emoji_formatting(c)) {\n                            size = 2;\n                        }\n                        cursor.width(char_width * size);\n                    } else {\n                        cursor.width(char_width);\n                    }\n                }\n                cursor.toggleClass('cmd-end-line', cursor_end_line);\n                // fix for animation when changing --animation dynamically\n                fix_cursor();\n                var cursor_len = $.terminal.length(cursor.text());\n                if (cursor_len > 1) {\n                    var node = cursor.find('[data-text]')[0];\n                    node.style.setProperty('--length', cursor_len);\n                }\n                // synchronize css animations (it's not that important because if user\n                // will change animation she should disable animation on span, but it\n                // looks nicer until she disable that inner animation)\n                restart_animation();\n            }\n            // -----------------------------------------------------------------\n            function div(string, before) {\n                var end_line = string.match(line_marker_re);\n                var result = '<div role=\"presentation\" aria-hidden=\"true\"';\n                if (end_line) {\n                    string = string.replace(line_marker_re, ' ');\n                    result += ' class=\"cmd-end-line\"';\n                }\n                result += '>' + format(string, before || '') + '</div>';\n                return result;\n            }\n            // -----------------------------------------------------------------\n            function empty_cursor() {\n                // data-text is for consistency in CSS and end class is for unit tests\n                cursor.html('<span data-text class=\"end\"><span>&nbsp;<span></span>');\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines after the cursor\n            // -----------------------------------------------------------------\n            function lines_after(lines) {\n                var last_ins = cursor_line;\n                $.each(lines, function(i, line) {\n                    last_ins = $(div(line)).insertAfter(last_ins);\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Display lines before the cursor\n            // -----------------------------------------------------------------\n            function lines_before(lines) {\n                $.each(lines, function(i, line) {\n                    cursor_line.before(div(line, i === 0 ? prompt_last_line : ''));\n                });\n            }\n            // -----------------------------------------------------------------\n            // :: Redraw function\n            // -----------------------------------------------------------------\n            return function() {\n                var string;\n                switch (typeof settings.mask) {\n                    case 'boolean':\n                        string = settings.mask ? command.replace(/./g, '*') : command;\n                        break;\n                    case 'string':\n                        string = command.replace(/./g, settings.mask);\n                        break;\n                }\n                var formatted = formatting(string);\n                var pos;\n                if (length(formatted) === text(string).length) {\n                    pos = position;\n                } else {\n                    pos = formatted_position;\n                }\n                var i;\n                wrapper.css({\n                    display: 'none'\n                });\n                wrapper.find('div:not(.cmd-cursor-line)').remove();\n                before.html('');\n                if (is_multiline(formatted)) {\n                    var tabs = formatted.match(/\\t/g);\n                    var original_string = formatted;\n                    //quick tabulation hack\n                    if (tabs) {\n                        formatted = formatted.replace(/\\t/g, '\\x00\\x00\\x00\\x00');\n                    }\n                    var array = split_command_line(formatted);\n                    if (tabs) {\n                        array = $.map(array, function(line) {\n                            return line.replace(/\\x00\\x00\\x00\\x00/g, '\\t');\n                        });\n                    }\n                    var first_len = length(array[0]);\n                    //cursor in first line\n                    if (first_len === 0 && array.length === 1) {\n                        // skip empty line\n                    } else if (pos < first_len) {\n                        draw_cursor_line(array[0], {\n                            length: array.length,\n                            position: pos,\n                            prompt: prompt_last_line\n                        });\n                        lines_after(array.slice(1));\n                    } else if (pos === first_len) {\n                        // first char acter of second line\n                        cursor_line.before(div(array[0], prompt_last_line));\n                        draw_cursor_line(array[1] || '', {\n                            length: array.length,\n                            position: 0,\n                            last: array.length <= 2\n                        });\n                        if (array.length > 2) {\n                            lines_after(array.slice(2));\n                        }\n                    } else {\n                        var last = array.slice(-1)[0];\n                        var len = length(original_string);\n                        var from_last = len - pos;\n                        var last_len = length(last);\n                        var new_pos = 0;\n                        if (from_last === -1) {\n                            from_last = 0;\n                        }\n                        if (from_last <= last_len) { // in last line\n                            lines_before(array.slice(0, -1));\n                            if (last_len === from_last) {\n                                new_pos = 0;\n                            } else {\n                                new_pos = last_len - from_last;\n                            }\n                            draw_cursor_line(last, {\n                                length: array.length,\n                                position: new_pos,\n                                last: true\n                            });\n                        } else {\n                            // more lines, cursor in the middle\n                            var line_index;\n                            var current;\n                            new_pos = pos;\n                            for (i = 0; i < array.length; ++i) {\n                                var current_len = $.terminal.length(array[i]);\n                                if (new_pos > current_len) {\n                                    new_pos -= current_len;\n                                } else {\n                                    break;\n                                }\n                            }\n                            current = array[i];\n                            line_index = i;\n                            // cursor on first character in line\n                            if (new_pos === length(current)) {\n                                new_pos = 0;\n                                current = array[++line_index];\n                                if (current === undefined) {\n                                    //should never happen\n                                    var msg = $.terminal.defaults.strings.redrawError;\n                                    throw new Error(msg);\n                                }\n                            }\n                            draw_cursor_line(current, {\n                                length: array.length,\n                                position: new_pos\n                            });\n                            lines_before(array.slice(0, line_index));\n                            lines_after(array.slice(line_index + 1));\n                        }\n                    }\n                    self.find('.cmd-cursor-line ~ div:last-of-type')\n                        .append('<span></span>');\n                } else if (formatted === '') {\n                    before.html('');\n                    empty_cursor();\n                    after.html('');\n                } else {\n                    draw_cursor_line(formatted, {\n                        length: 1,\n                        position: pos\n                    });\n                }\n                var in_line = cursor_line.prevUntil('.cmd-prompt').length;\n                if (is_css_variables_supported) {\n                    self[0].style.setProperty('--cursor-line', in_line);\n                } else {\n                    clip.$node.css('top', in_line * 14 + 'px');\n                }\n                wrapper.css({\n                    display: ''\n                });\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: find position that match display position for commands that\n        // :: change length by formatters\n        // ---------------------------------------------------------------------\n        var find_position = (function() {\n            function make_guess(string, position) {\n                var opts = $.extend({}, settings, {\n                    position: position,\n                    command: true\n                });\n                return $.terminal.apply_formatters(string, opts)[1];\n            }\n            function cmp(search_pos, pos, string) {\n                var guess = make_guess(string, pos);\n                if (guess === search_pos) {\n                    var next_guess = make_guess(string, pos + 1);\n                    if (next_guess > search_pos) {\n                        return 0;\n                    }\n                    return 1;\n                } else if (guess < search_pos) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            }\n            return function(string, formatted_position) {\n                if (formatted_position === 0) {\n                    return 0;\n                }\n                string = bare_text(string);\n                var codepoint_len = string.length;\n                var str = $.terminal.escape_brackets(command);\n                var pos = binary_search(0, codepoint_len, formatted_position, cmp, [str]);\n                var chars = $.terminal.split_characters(string);\n                if (codepoint_len > chars.length) {\n                    var len = 0;\n                    for (var i = 0; i < chars.length; ++i) {\n                        len += chars[i].length;\n                        if (len >= pos) {\n                            return len;\n                        }\n                    }\n                }\n                return pos;\n            };\n        })();\n        // ---------------------------------------------------------------------\n        // :: Draw prompt that can be a function or a string\n        // ---------------------------------------------------------------------\n        var prev_prompt_data;\n        var draw_prompt = (function() {\n            function format_prompt(prompt) {\n                if (!prompt) {\n                    just_prompt_len = 0;\n                    prompt_len = just_prompt_len + extra_prompt_margin;\n                    return prompt;\n                }\n                var lines = $.terminal.split_equal(prompt, num_chars).map(function(line) {\n                    if (!$.terminal.have_formatting(line)) {\n                        return '[[;;]' + $.terminal.escape_brackets(line) + ']';\n                    }\n                    return $.terminal.format_split(line).map(function(str) {\n                        if ($.terminal.is_formatting(str)) {\n                            return str;\n                        }\n                        return '[[;;]' + $.terminal.escape_brackets(str) + ']';\n                    }).join('');\n                });\n                var options = {\n                    charWidth: settings.charWidth\n                };\n                prompt_last_line = lines[lines.length - 1];\n                var encoded_last_line = $.terminal.encode(lines[lines.length - 1], {\n                    tabs: settings.tabs\n                });\n                var last_line = $.terminal.format(encoded_last_line, options);\n                just_prompt_len = strlen(text(encoded_last_line));\n                prompt_len = just_prompt_len + extra_prompt_margin;\n                return lines.slice(0, -1).map(function(line) {\n                    line = $.terminal.encode(line, {\n                        tabs: settings.tabs\n                    });\n                    return '<span class=\"cmd-line\">' +\n                           $.terminal.format(line, options) +\n                           '</span>';\n                }).concat([last_line]).join('\\n');\n            }\n            function set(prompt) {\n                if (prompt) {\n                    prompt = $.terminal.apply_formatters(prompt, {prompt: true});\n                    prompt = $.terminal.normalize(prompt);\n                    prompt = crlf(prompt);\n                }\n                var formatted = format_prompt(prompt);\n                last_rendered_prompt = prompt;\n                // zero width space to make sure prompt margin takes up space,\n                // so that echo with newline: false works when prompt is empty\n                formatted = formatted || $.terminal.format('[[;;]\\u200b]');\n                // update prompt if changed\n                if (prompt_node.html() !== formatted) {\n                    prompt_node.html(formatted);\n                    // fix for Chrome bug width selection\n                    // https://bugs.chromium.org/p/chromium/issues/detail?id=1087787\n                    var spans = prompt_node.find('> span span');\n                    clip.$node.attr('data-cmd-prompt', prompt_node.text());\n                    if (is_ch_unit_supported) {\n                        prompt_node.hide();\n                        spans.each(function() {\n                            var self = $(this);\n                            var len = strlen(self.text());\n                            if (len === 0) {\n                                self.css('width', 1);\n                            } else {\n                                self.css('width', len + 'ch');\n                            }\n                        });\n                        prompt_node.show();\n                    }\n                }\n            }\n            return function() {\n                // the data is used as cancelable reference because we have ref\n                // data object that is hold in closure and we remove `set` function\n                // so previous call to function prompt will be ignored\n                if (prev_prompt_data && prev_prompt_data.set) {\n                    prev_prompt_data.set = $.noop;\n                    // remove reference for garbage collector\n                    prev_prompt_data = null;\n                }\n                var data = prev_prompt_data = {\n                    set: set\n                };\n                with_prompt(prompt, function(prompt) {\n                    data.set(prompt);\n                }, self);\n            };\n        })();\n        // ---------------------------------------------------------------------\n        function fire_change_command() {\n            if (is_function(settings.onCommandChange)) {\n                settings.onCommandChange.call(self, command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Command Line Methods\n        // ---------------------------------------------------------------------\n        $.extend(self, {\n            option: function(name, value) {\n                if (typeof value === 'undefined') {\n                    return settings[name];\n                } else {\n                    settings[name] = value;\n                }\n                return self;\n            },\n            name: function(string) {\n                if (string !== undefined) {\n                    name = string;\n                    var enabled = history && history.enabled() || !history;\n                    history = new History(\n                        name,\n                        settings.historySize,\n                        settings.history === 'memory'\n                    );\n                    // disable new history if old was disabled\n                    if (!enabled) {\n                        history.disable();\n                    }\n                    return self;\n                } else {\n                    return name;\n                }\n            },\n            purge: function() {\n                history.clear();\n                return self;\n            },\n            history: function() {\n                return history;\n            },\n            'delete': function(n, stay) {\n                var removed, string;\n                if (n === 0) {\n                    return \"\";\n                } else if (n < 0) {\n                    if (position > 0) {\n                        // this may look weird but if n is negative we need\n                        // to use +\n                        removed = command.slice(0, position).slice(n);\n                        string = bare_text(command);\n                        string = string.slice(0, position + n) +\n                            string.slice(position, string.length);\n                        if (!stay) {\n                            self.position(position + n);\n                        }\n                    }\n                } else if (command !== '') {\n                    string = text(command);\n                    if (position < string.length) {\n                        removed = string.slice(position).slice(0, n);\n                        string = string.slice(0, position) +\n                            string.slice(position + n, string.length);\n                    }\n                }\n                if (removed) {\n                    command = string;\n                }\n                redraw();\n                fix_textarea();\n                fire_change_command();\n                return removed;\n            },\n            set: function(string, stay, silent) {\n                if (string !== undefined) {\n                    command = string;\n                    if (!stay) {\n                        self.position(bare_text(command).length);\n                    }\n                    redraw();\n                    fix_textarea();\n                    if (!silent) {\n                        fire_change_command();\n                    }\n                }\n                return self;\n            },\n            keymap: function(new_keymap, value) {\n                function wrap(key, fn) {\n                    var original = default_keymap[key];\n                    if (is_function(original)) {\n                        original = original.bind(self);\n                    }\n                    return function(e) {\n                        // new keymap function will get default as 2nd argument\n                        return fn.call(self, e, original);\n                    };\n                }\n                if (new_keymap === null) {\n                    keymap = default_keymap;\n                    return self;\n                } else if (typeof new_keymap === 'undefined') {\n                    return keymap;\n                } else if (typeof new_keymap === 'string') {\n                    if (typeof value === 'undefined') {\n                        if (keymap[new_keymap]) {\n                            return keymap[new_keymap];\n                        } else if (default_keymap[new_keymap]) {\n                            return default_keymap[new_keymap];\n                        }\n                    } else {\n                        keymap[new_keymap] = wrap(new_keymap, value);\n                    }\n                } else {\n                    keymap = $.extend(\n                        {},\n                        keymap ? keymap : default_keymap,\n                        $.omap(new_keymap || {}, wrap)\n                    );\n                    return self;\n                }\n            },\n            insert: function(string, stay) {\n                var bare_command = bare_text(command);\n                var len = bare_text(string).length;\n                if (position === bare_command.length) {\n                    string = bare_command + string;\n                } else if (position === 0) {\n                    string = string + bare_command;\n                } else {\n                    string = bare_command.slice(0, position) +\n                        string + bare_command.slice(position);\n                }\n                command = string;\n                if (!stay) {\n                    self.position(len, true, true);\n                }\n                fix_textarea();\n                redraw();\n                fire_change_command();\n                return self;\n            },\n            get: function() {\n                return command;\n            },\n            commands: function(commands) {\n                if (commands) {\n                    settings.commands = commands;\n                    return self;\n                } else {\n                    return commands;\n                }\n            },\n            destroy: function() {\n                doc.unbind('keypress.cmd', keypress_event);\n                doc.unbind('keydown.cmd', keydown_event);\n                doc.unbind('input.cmd', input_event);\n                self.stopTime('blink', blink);\n                self.find('.cmd-wrapper').remove();\n                self.find('.cmd-prompt, .cmd-clipboard, .cmd-editable').remove();\n                self.removeClass('cmd').removeData('cmd').off('.cmd');\n                return self;\n            },\n            column: function(include_prompt) {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                var re = /\\n?([^\\n]*)$/;\n                var match = before.match(re);\n                var col = match[1].length;\n                if (!have_newlines(before) &&\n                    (include_prompt || have_wrapping(before, prompt_len))) {\n                    col += prompt_len;\n                }\n                if (col === 0) {\n                    return col;\n                }\n                col %= num_chars;\n                if (col === 0) {\n                    return num_chars;\n                }\n                return col;\n            },\n            line: function() {\n                var before = command.substring(0, position);\n                if (position === 0 || !command.length) {\n                    return 0;\n                }\n                return before.split(/\\n/).length - 1;\n            },\n            // inform cursor about size of partial output line\n            __set_prompt_margin: function(len) {\n                extra_prompt_margin = len;\n                prompt_len = just_prompt_len + extra_prompt_margin;\n            },\n            prompt: function(user_prompt) {\n                if (user_prompt === true) {\n                    return last_rendered_prompt;\n                } else if (user_prompt === undefined) {\n                    return prompt;\n                } else {\n                    var should_redraw = user_prompt !== prompt;\n                    if (typeof user_prompt === 'string' ||\n                        typeof user_prompt === 'function') {\n                        prompt = user_prompt;\n                    } else {\n                        throw new Error('prompt must be a function or string');\n                    }\n                    if (should_redraw) {\n                        draw_prompt();\n                        // we could check if command is longer then numchars-new\n                        // prompt\n                        redraw();\n                    }\n                    return self;\n                }\n            },\n            kill_text: function() {\n                return kill_text;\n            },\n            position: function(n, relative, silent) {\n                if (typeof n === 'number') {\n                    var pos = position;\n                    var len = bare_text(command).length;\n                    if (relative) {\n                        position += n;\n                    } else if (n < 0) {\n                        position = 0;\n                    } else if (n > len) {\n                        position = len;\n                    } else {\n                        position = n;\n                    }\n                    if (pos !== position) {\n                        redraw();\n                        if (!silent && is_function(settings.onPositionChange)) {\n                            settings.onPositionChange(position, formatted_position);\n                        }\n                        fix_textarea(true);\n                    }\n                    return self;\n                } else {\n                    return position;\n                }\n            },\n            refresh: function() {\n                draw_prompt();\n                redraw();\n                fix_textarea(true);\n                return self;\n            },\n            // if formatter change length of the strings (like emoji demo) we need to keep\n            // track of two different positions one for command and one for display\n            display_position: function(n, relative) {\n                if (n === undefined) {\n                    return formatted_position;\n                } else {\n                    // double escape\n                    var string = formatting($.terminal.escape_formatting(command), true);\n                    var len = length(string);\n                    var command_len = bare_text(command).length;\n                    var new_formatted_pos;\n                    if (relative) {\n                        new_formatted_pos = formatted_position + n;\n                    } else if (n > len) {\n                        new_formatted_pos = len;\n                    } else {\n                        new_formatted_pos = n;\n                    }\n                    if (len === command_len) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(new_formatted_pos);\n                    }\n                    if (len === new_formatted_pos) {\n                        formatted_position = new_formatted_pos;\n                        return self.position(command_len);\n                    }\n                    var pos = find_position(command, new_formatted_pos);\n                    if (pos !== -1) {\n                        formatted_position = new_formatted_pos;\n                        self.position(pos);\n                    }\n                    return self;\n                }\n            },\n            visible: (function() {\n                var visible = self.visible;\n                return function() {\n                    visible.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            show: (function() {\n                var show = self.show;\n                return function() {\n                    show.apply(self, []);\n                    redraw();\n                    draw_prompt();\n                    return self;\n                };\n            })(),\n            resize: function(num) {\n                char_width = get_char_width();\n                var new_num_chars;\n                if (typeof num === 'number') {\n                    new_num_chars = num;\n                } else {\n                    new_num_chars = get_num_chars(char_width);\n                }\n                if (num_chars !== new_num_chars || arguments[0] === true) {\n                    num_chars = new_num_chars;\n                    redraw();\n                    draw_prompt();\n                }\n                return self;\n            },\n            invoke_key: function(shortcut) {\n                if (!enabled) {\n                    warn('invoke_key(\"' + shortcut + '\") called on disabled terminal');\n                }\n                var keys = shortcut.toUpperCase().split('+');\n                var key = keys.pop();\n                var ctrl = keys.indexOf('CTRL') !== -1;\n                var shift = keys.indexOf('SHIFT') !== -1;\n                var alt = keys.indexOf('ALT') !== -1;\n                var meta = keys.indexOf('META') !== -1;\n                var e = $.Event(\"keydown\", {\n                    ctrlKey: ctrl,\n                    shiftKey: shift,\n                    altKey: alt,\n                    metaKey: meta,\n                    which: reversed_keycodes[key],\n                    key: key\n                });\n                var doc = $(document.documentElement || window);\n                doc.trigger(e);\n                e = $.Event(\"keypress\");\n                e.key = key;\n                e.which = e.keyCode = 0;\n                doc.trigger(e);\n                return self;\n            },\n            clip: function() {\n                return clip;\n            },\n            enable: function(silent) {\n                if (!enabled) {\n                    enabled = true;\n                    self.addClass('enabled');\n                    try {\n                        if (!clip.$node.is(':focus')) {\n                            clip.$node.focus();\n                        }\n                        clip.$node.caret(position);\n                    } catch (e) {\n                        // firefox throw NS_ERROR_FAILURE - ignore\n                    }\n                    animation(true);\n                    if (!silent && is_function(prompt)) {\n                        draw_prompt();\n                    }\n                    fix_cursor();\n                    fix_textarea();\n                }\n                mobile_focus();\n                return self;\n            },\n            isenabled: function() {\n                return enabled;\n            },\n            disable: function(focus) {\n                enabled = false;\n                self.removeClass('enabled');\n                animation(false);\n                if (!focus) {\n                    mobile_focus();\n                }\n                return self;\n            },\n            mask: function(new_mask) {\n                if (typeof new_mask === 'undefined') {\n                    return settings.mask;\n                } else {\n                    settings.mask = new_mask;\n                    redraw();\n                    return self;\n                }\n            }\n        });\n        // ---------------------------------------------------------------------\n        // :: INIT\n        // ---------------------------------------------------------------------\n        self.name(settings.name || settings.prompt || '');\n        if (settings.prompt !== false) {\n            prompt = settings.prompt;\n            draw_prompt();\n        }\n        if (settings.enabled === true) {\n            self.enable();\n        }\n        char_width = get_char_width();\n        num_chars = get_num_chars(char_width);\n        if (!settings.history) {\n            history.disable();\n        }\n        var first_up_history = true;\n        // skip_keypress - hack for Android that was inserting characters on\n        // backspace\n        var skip_keypress = false;\n        var dead_key = false;\n        var single_key = false;\n        var no_keypress = false;\n        var no_key = false;\n        var no_keydown = true;\n        var backspace = false;\n        var process = false;\n        var hold = false;\n        var hold_pause = false;\n        var skip_insert;\n        // we hold text before keydown to fix backspace for Android/Chrome/SwiftKey\n        // keyboard that generate keycode 229 for all keys #296\n        var prev_command = '';\n        var prev_key;\n        // ---------------------------------------------------------------------\n        // :: Keydown Event Handler\n        // ---------------------------------------------------------------------\n        function is_backspace(e) {\n            return e.key.toUpperCase() === 'BACKSPACE' || e.which === 8;\n        }\n        // ---------------------------------------------------------------------\n        function is_single(e) {\n            return e.key && e.key.length === 1 && !e.ctrlKey;\n        }\n        // ---------------------------------------------------------------------\n        function is_delay_key(key) {\n            var specials = ['HOLD+SHIFT+BACKSPACE', 'HOLD+BACKSPACE'];\n            return specials.indexOf(key) !== -1 && settings.mobileDelete ||\n                settings.repeatTimeoutKeys.indexOf(key) !== -1;\n        }\n        // ---------------------------------------------------------------------\n        function clear_reverse_search_key(e) {\n            // arrows / Home / End / ENTER\n            return e.which === 35 || e.which === 36 ||\n                e.which === 37 || e.which === 38 ||\n                e.which === 39 || e.which === 40 ||\n                e.which === 13 || e.which === 27;\n        }\n        var skip_keydown = false;\n        // ---------------------------------------------------------------------\n        // function complexicity is 35 when adding this exception\n        // eslint-disable-next-line complexity\n        function keydown_event(e) {\n            debug('keydown \"' + e.key + '\" ' + e.fake + ' ' + e.which);\n            var result;\n            process = (e.key || '').toLowerCase() === 'process' || e.which === 0;\n            dead_key = no_keypress && single_key && !is_backspace(e);\n            // special keys don't trigger keypress fix #293\n            try {\n                if (!e.fake) {\n                    single_key = is_single(e);\n                    // chrome on android support key property but it's \"Unidentified\"\n                    no_key = String(e.key).toLowerCase() === 'unidentified';\n                    backspace = is_backspace(e);\n                }\n            } catch (exception) {}\n            // keydown created in input will have text already inserted and we\n            // want text before input\n            if (e.key === \"Unidentified\") {\n                no_keydown = true;\n                // android swift keyboard have always which == 229 we will triger proper\n                // event in input with e.fake == true\n                return;\n            }\n            // meta and os are special keydown triggered by Emoji picker on Windows 10\n            // meta is in Google Chrome is is in Firefox\n            if (!e.fake && ['meta', 'os'].indexOf(e.key.toLowerCase()) === -1) {\n                no_keydown = false;\n            }\n            no_keypress = true;\n            // Meta+V did bind input but it didin't happen because terminal paste\n            // prevent native insert action\n            clip.$node.off('input', paste);\n            var key = get_key(e);\n            if (is_function(settings.keydown)) {\n                e.key = ie_key_fix(e);\n                result = settings.keydown.call(self, e);\n                if (result !== undefined) {\n                    //skip_keypress = true;\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (key !== prev_key) {\n                clear_hold();\n            }\n            // CTRL+C hanlding is only exception of cmd aware terminal logic\n            // cmd need to call CTRL+C keymap when terminal is not enabled\n            if (enabled || (key === 'CTRL+C' && is_terminal_selected(self))) {\n                if (hold) {\n                    prev_key = key;\n                    key = 'HOLD+' + key;\n                    if (hold_pause) {\n                        return;\n                    }\n                    if (settings.holdRepeatTimeout > 0 && is_delay_key(key)) {\n                        hold_pause = true;\n                        self.oneTime(settings.holdRepeatTimeout, 'delay', function() {\n                            hold_pause = false;\n                        });\n                    }\n                } else {\n                    self.oneTime(settings.holdTimeout, 'hold', function() {\n                        hold = true;\n                    });\n                    prev_key = key;\n                }\n                // if e.fake ignore of space is handled in input and next keydown\n                // is not triggered this is just in case code since on Android\n                // keydown is not triggered only input so event is always fake on Android\n                if (!e.fake && is_android) {\n                    if (skip_keydown) {\n                        clear_hold();\n                        skip_keydown = false;\n                        return false;\n                    }\n                    if (mobile_ignore_key(key)) {\n                        skip_keydown = true;\n                    } else if (mobile_ignore_key(prev_key)) {\n                        // just in case next key is different then space\n                        skip_keydown = false;\n                    }\n                }\n                restart_animation();\n                // CTRL+V don't fire keypress in IE11\n                skip_insert = ['CTRL+V', 'META+V'].indexOf(key) !== -1;\n                // only enter will reset history (and down arrow on last command)\n                if (key.toLowerCase() === 'enter') {\n                    first_up_history = true;\n                }\n                if (reverse_search && clear_reverse_search_key(e)) {\n                    clear_reverse_state();\n                    draw_prompt();\n                    if (e.which === 27) { // ESC\n                        self.set('');\n                    }\n                    redraw();\n                    if (e.which === 13) {\n                        keydown_event.call(this, e);\n                    }\n                } else if (is_function(keymap[key])) {\n                    result = keymap[key](e);\n                    if (result === true) {\n                        return;\n                    }\n                    if (result !== undefined) {\n                        return result;\n                    }\n                } else if (e.altKey) {\n                    return;\n                } else {\n                    skip_keypress = false;\n                    return;\n                }\n                // this will prevent for instance backspace to go back one page\n                //skip_keypress = true;\n                //e.preventDefault();\n            }\n        }\n        function clear_hold() {\n            self.stopTime('hold');\n            self.stopTime('delay');\n            hold_pause = hold = false;\n        }\n        var doc = $(document.documentElement || window);\n        self.keymap(settings.keymap || {});\n        function keypress_event(e) {\n            debug('keypress \"' + e.key + '\" ' + e.fake);\n            clear_hold();\n            var result;\n            if (!e.fake) {\n                no_keypress = false;\n            }\n            if ((e.ctrlKey || e.metaKey) && !e.altKey) {\n                return;\n            }\n            if (skip_keypress) {\n                return;\n            }\n            if (is_function(settings.keypress)) {\n                result = settings.keypress.call(self, e);\n                if (result !== undefined) {\n                    if (!result) {\n                        skip_insert = true;\n                    }\n                    return result;\n                }\n            }\n            if (enabled) {\n                if (e.fake) {\n                    // event created in input, we prevent inserting text\n                    // in different interpreter when keydown called pop\n                    return;\n                }\n                // key polyfill is not correct for keypress\n                // https://github.com/cvan/keyboardevent-key-polyfill/issues/15\n                var key;\n                if (is_key_native) {\n                    key = e.key;\n                    // fixing IE inconsistency #362\n                    var normalized = key.toUpperCase();\n                    if (key_mapping[normalized]) {\n                        key = key_mapping[normalized];\n                    }\n                }\n                if (!key || no_key) {\n                    key = String.fromCharCode(e.which);\n                }\n                if ($.inArray(e.which, [13, 0, 8]) > -1) {\n                    if (e.keyCode === 123) { // for F12 which === 0\n                        return;\n                    }\n                    return false;\n                    // which === 100 - d\n                } else if (key && (!e.ctrlKey || (e.ctrlKey && e.ctrlKey)) &&\n                           (!(e.altKey && e.which === 100) || e.altKey) &&\n                           !dead_key) {\n                    // dead_key are handled by input event\n                    if (reverse_search) {\n                        rev_search_str += key;\n                        reverse_history_search();\n                        draw_reverse_prompt();\n                    } else if (key.length === 1) {\n                        self.insert(key);\n                    }\n                }\n            }\n        }\n        function event(type, chr, which) {\n            var event = $.Event(type);\n            event.which = which;\n            event.key = chr;\n            event.fake = true;\n            doc.trigger(event);\n        }\n        var skip_input = false;\n        function finalize_input_event() {\n            prev_command = command;\n            skip_insert = false;\n            no_keydown = true;\n        }\n        function input_event() {\n            debug('input ' + no_keydown + ' || ' + process + ' ((' + no_keypress +\n                  ' || ' + dead_key + ') && !' + skip_insert + ' && (' + single_key +\n                  ' || ' + no_key + ') && !' + backspace + ')');\n            // correct for fake space used for select all context menu hack\n            var val = clip.val();\n            if (!is_mobile) {\n                val = val.replace(/^ /, '');\n            }\n            // Some Androids don't fire keypress - #39\n            // if there is dead_key we also need to grab real character #158\n            // Firefox/Android with google keyboard don't fire keydown and keyup #319\n            if (no_keydown || process || ((no_keypress || dead_key) &&\n                                          !skip_insert &&\n                                          (single_key || no_key) && !backspace)) {\n                if (val && val === command) {\n                    if (is_android) {\n                        // ignore autocomplete on GBoard keyboard #693\n                        if (no_keydown) {\n                            event('keydown', 'Enter', 13);\n                        }\n                    }\n                    finalize_input_event();\n                    return;\n                }\n                var pos = position;\n                // backspace is set in keydown if no keydown we need to get new one\n                if (no_keydown) {\n                    var cmd = prev_command;\n                    backspace = cmd.slice(0, cmd.length - 1).length === val.length;\n                }\n                if (skip_input) {\n                    skip_input = false;\n                    clip.val(command);\n                    return;\n                }\n                if (reverse_search) {\n                    rev_search_str = val;\n                    reverse_history_search();\n                    draw_reverse_prompt();\n                } else {\n                    var str = val.slice(position);\n                    if (str.length === 1 || backspace) {\n                        // original not optimized function called once\n                        var chr = get_next_character(str);\n                        if (mobile_ignore_key(chr)) {\n                            skip_input = true;\n                        }\n                        // we trigger events so keypress and keydown callback work\n                        if (no_keydown) {\n                            var keycode;\n                            if (backspace) {\n                                keycode = 8;\n                            } else {\n                                keycode = str.toUpperCase().charCodeAt(0);\n                            }\n                            event('keydown', backspace ? 'Backspace' : str, keycode);\n                        }\n                        if (no_keypress && !backspace) {\n                            event('keypress', chr, str.charCodeAt(0));\n                        }\n                    }\n                    if (backspace) {\n                        prev_command = command;\n                        return;\n                    }\n                    // if user return false in keydown we don't want to insert text\n                    if (skip_insert) {\n                        skip_insert = false;\n                        return;\n                    }\n                    self.set(val);\n                }\n                if (backspace) {\n                    self.position(pos - 1);\n                } else {\n                    // user enter more then one character if click on complete word\n                    // on android\n                    self.position(pos + Math.abs(val.length - prev_command.length));\n                }\n            }\n            finalize_input_event();\n        }\n        doc.bind('keypress.cmd', keypress_event);\n        doc.bind('keydown.cmd', keydown_event);\n        doc.bind('keyup.cmd', clear_hold);\n        doc.bind('input.cmd', input_event);\n        (function() {\n            if (is_mobile) {\n                $(self[0]).add(clip.$node).on('touchstart.cmd', function() {\n                    if (!self.isenabled()) {\n                        clip.focus();\n                    } else {\n                        clip.blur();\n                    }\n                });\n                self.disable();\n                return;\n            }\n            var was_down = false;\n            var count = 0;\n            self.on('mousedown.cmd', function() {\n                was_down = true;\n            }).on('mouseup.cmd', function(e) {\n                function trigger() {\n                    var $target = $(e.target);\n                    var is_prompt = $target.is('.cmd-prompt');\n                    if (!is_prompt && down && get_selected_html() === '') {\n                        if (enabled) {\n                            if ($target.is('.cmd')) {\n                                self.position(text(command).length);\n                            } else {\n                                self.display_position(get_char_pos(e));\n                            }\n                        }\n                    }\n                    count = 0;\n                }\n                // we get button from event for testing normally it's on originalEvent\n                var button;\n                if (e.originalEvent === undefined) {\n                    button = e.button;\n                } else {\n                    button = e.originalEvent.button;\n                }\n                if (button === 0 && get_selected_html() === '') {\n                    var name = 'click_' + id;\n                    if (++count === 1) {\n                        var down = was_down;\n                        if (enabled) {\n                            if (settings.clickTimeout === 0) {\n                                trigger();\n                            } else {\n                                self.oneTime(settings.clickTimeout, name, trigger);\n                            }\n                        } else {\n                            count = 0;\n                        }\n                    } else {\n                        self.stopTime(name);\n                        count = 0;\n                    }\n                }\n                was_down = false;\n            });\n        })();\n        self.data('cmd', self);\n        if (!('KeyboardEvent' in window && 'key' in window.KeyboardEvent.prototype)) {\n            setTimeout(function() {\n                throw new Error('key event property not supported try https://github.' +\n                                'com/inexorabletash/polyfill/blob/master/keyboard.js');\n            }, 0);\n        }\n        return self;\n    }; // cmd plugin\n    // -------------------------------------------------------------------------\n    var strlen = (function() {\n        if (typeof wcwidth === 'undefined') {\n            return function(string) {\n                // fix empty prompt that use 0 width space\n                string = string.replace(/\\u200B/g, '');\n                return $.terminal.length(string);\n            };\n        } else {\n            return wcwidth;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function count_selfclosing_formatting(string) {\n        var count = 0;\n        if ($.terminal.have_formatting(string)) {\n            var re = new RegExp(format_parts_re.source, 'i'); // without g flag\n            $.terminal.format_split(string).forEach(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    var m = str.match(re);\n                    if (m && m[1].match(/@/) && m[6] === '') {\n                        count++;\n                    }\n                }\n            });\n        }\n        return count;\n    }\n    // -------------------------------------------------------------------------\n    // entiteis are case sensitive\n    // generated from https://www.freeformatter.com/html-entities.html\n    // -------------------------------------------------------------------------\n    var entities = {\n        \"&amp;\": \"&\",\n        \"&lt;\": \"<\",\n        \"&gt;\": \">\",\n        \"&Agrave;\": \"\",\n        \"&Aacute;\": \"\",\n        \"&Acirc;\": \"\",\n        \"&Atilde;\": \"\",\n        \"&Auml;\": \"\",\n        \"&Aring;\": \"\",\n        \"&AElig;\": \"\",\n        \"&Ccedil;\": \"\",\n        \"&Egrave;\": \"\",\n        \"&Eacute;\": \"\",\n        \"&Ecirc;\": \"\",\n        \"&Euml;\": \"\",\n        \"&Igrave;\": \"\",\n        \"&Iacute;\": \"\",\n        \"&Icirc;\": \"\",\n        \"&Iuml;\": \"\",\n        \"&ETH;\": \"\",\n        \"&Ntilde;\": \"\",\n        \"&Ograve;\": \"\",\n        \"&Oacute;\": \"\",\n        \"&Ocirc;\": \"\",\n        \"&Otilde;\": \"\",\n        \"&Ouml;\": \"\",\n        \"&Oslash;\": \"\",\n        \"&Ugrave;\": \"\",\n        \"&Uacute;\": \"\",\n        \"&Ucirc;\": \"\",\n        \"&Uuml;\": \"\",\n        \"&Yacute;\": \"\",\n        \"&THORN;\": \"\",\n        \"&szlig;\": \"\",\n        \"&agrave;\": \"\",\n        \"&aacute;\": \"\",\n        \"&acirc;\": \"\",\n        \"&atilde;\": \"\",\n        \"&auml;\": \"\",\n        \"&aring;\": \"\",\n        \"&aelig;\": \"\",\n        \"&ccedil;\": \"\",\n        \"&egrave;\": \"\",\n        \"&eacute;\": \"\",\n        \"&ecirc;\": \"\",\n        \"&euml;\": \"\",\n        \"&igrave;\": \"\",\n        \"&iacute;\": \"\",\n        \"&icirc;\": \"\",\n        \"&iuml;\": \"\",\n        \"&eth;\": \"\",\n        \"&ntilde;\": \"\",\n        \"&ograve;\": \"\",\n        \"&oacute;\": \"\",\n        \"&ocirc;\": \"\",\n        \"&otilde;\": \"\",\n        \"&ouml;\": \"\",\n        \"&oslash;\": \"\",\n        \"&ugrave;\": \"\",\n        \"&uacute;\": \"\",\n        \"&ucirc;\": \"\",\n        \"&uuml;\": \"\",\n        \"&yacute;\": \"\",\n        \"&thorn;\": \"\",\n        \"&yuml;\": \"\",\n        \"&nbsp;\": \"\",\n        \"&iexcl;\": \"\",\n        \"&cent;\": \"\",\n        \"&pound;\": \"\",\n        \"&curren;\": \"\",\n        \"&yen;\": \"\",\n        \"&brvbar;\": \"\",\n        \"&sect;\": \"\",\n        \"&uml;\": \"\",\n        \"&copy;\": \"\",\n        \"&ordf;\": \"\",\n        \"&laquo;\": \"\",\n        \"&not;\": \"\",\n        \"&shy;\": \"\",\n        \"&reg;\": \"\",\n        \"&macr;\": \"\",\n        \"&deg;\": \"\",\n        \"&plusmn;\": \"\",\n        \"&sup2;\": \"\",\n        \"&sup3;\": \"\",\n        \"&acute;\": \"\",\n        \"&micro;\": \"\",\n        \"&para;\": \"\",\n        \"&cedil;\": \"\",\n        \"&sup1;\": \"\",\n        \"&ordm;\": \"\",\n        \"&raquo;\": \"\",\n        \"&frac14;\": \"\",\n        \"&frac12;\": \"\",\n        \"&frac34;\": \"\",\n        \"&iquest;\": \"\",\n        \"&times;\": \"\",\n        \"&divide;\": \"\",\n        \"&forall;\": \"\",\n        \"&part;\": \"\",\n        \"&exist;\": \"\",\n        \"&empty;\": \"\",\n        \"&nabla;\": \"\",\n        \"&isin;\": \"\",\n        \"&notin;\": \"\",\n        \"&ni;\": \"\",\n        \"&prod;\": \"\",\n        \"&sum;\": \"\",\n        \"&minus;\": \"\",\n        \"&lowast;\": \"\",\n        \"&radic;\": \"\",\n        \"&prop;\": \"\",\n        \"&infin;\": \"\",\n        \"&ang;\": \"\",\n        \"&and;\": \"\",\n        \"&or;\": \"\",\n        \"&cap;\": \"\",\n        \"&cup;\": \"\",\n        \"&int;\": \"\",\n        \"&there4;\": \"\",\n        \"&sim;\": \"\",\n        \"&cong;\": \"\",\n        \"&asymp;\": \"\",\n        \"&ne;\": \"\",\n        \"&equiv;\": \"\",\n        \"&le;\": \"\",\n        \"&ge;\": \"\",\n        \"&sub;\": \"\",\n        \"&sup;\": \"\",\n        \"&nsub;\": \"\",\n        \"&sube;\": \"\",\n        \"&supe;\": \"\",\n        \"&oplus;\": \"\",\n        \"&otimes;\": \"\",\n        \"&perp;\": \"\",\n        \"&sdot;\": \"\",\n        \"&Alpha;\": \"\",\n        \"&Beta;\": \"\",\n        \"&Gamma;\": \"\",\n        \"&Delta;\": \"\",\n        \"&Epsilon;\": \"\",\n        \"&Zeta;\": \"\",\n        \"&Eta;\": \"\",\n        \"&Theta;\": \"\",\n        \"&Iota;\": \"\",\n        \"&Kappa;\": \"\",\n        \"&Lambda;\": \"\",\n        \"&Mu;\": \"\",\n        \"&Nu;\": \"\",\n        \"&Xi;\": \"\",\n        \"&Omicron;\": \"\",\n        \"&Pi;\": \"\",\n        \"&Rho;\": \"\",\n        \"&Sigma;\": \"\",\n        \"&Tau;\": \"\",\n        \"&Upsilon;\": \"\",\n        \"&Phi;\": \"\",\n        \"&Chi;\": \"\",\n        \"&Psi;\": \"\",\n        \"&Omega;\": \"\",\n        \"&alpha;\": \"\",\n        \"&beta;\": \"\",\n        \"&gamma;\": \"\",\n        \"&delta;\": \"\",\n        \"&epsilon;\": \"\",\n        \"&zeta;\": \"\",\n        \"&eta;\": \"\",\n        \"&theta;\": \"\",\n        \"&iota;\": \"\",\n        \"&kappa;\": \"\",\n        \"&lambda;\": \"\",\n        \"&mu;\": \"\",\n        \"&nu;\": \"\",\n        \"&xi;\": \"\",\n        \"&omicron;\": \"\",\n        \"&pi;\": \"\",\n        \"&rho;\": \"\",\n        \"&sigmaf;\": \"\",\n        \"&sigma;\": \"\",\n        \"&tau;\": \"\",\n        \"&upsilon;\": \"\",\n        \"&phi;\": \"\",\n        \"&chi;\": \"\",\n        \"&psi;\": \"\",\n        \"&omega;\": \"\",\n        \"&thetasym;\": \"\",\n        \"&upsih;\": \"\",\n        \"&piv;\": \"\",\n        \"&OElig;\": \"\",\n        \"&oelig;\": \"\",\n        \"&Scaron;\": \"\",\n        \"&scaron;\": \"\",\n        \"&Yuml;\": \"\",\n        \"&fnof;\": \"\",\n        \"&circ;\": \"\",\n        \"&tilde;\": \"\",\n        \"&ensp;\": \"\",\n        \"&emsp;\": \"\",\n        \"&thinsp;\": \"\",\n        \"&zwnj;\": \"\",\n        \"&zwj;\": \"\",\n        \"&lrm;\": \"\",\n        \"&rlm;\": \"\",\n        \"&ndash;\": \"\",\n        \"&mdash;\": \"\",\n        \"&lsquo;\": \"\",\n        \"&rsquo;\": \"\",\n        \"&sbquo;\": \"\",\n        \"&ldquo;\": \"\",\n        \"&rdquo;\": \"\",\n        \"&bdquo;\": \"\",\n        \"&dagger;\": \"\",\n        \"&Dagger;\": \"\",\n        \"&bull;\": \"\",\n        \"&hellip;\": \"\",\n        \"&permil;\": \"\",\n        \"&prime;\": \"\",\n        \"&Prime;\": \"\",\n        \"&lsaquo;\": \"\",\n        \"&rsaquo;\": \"\",\n        \"&oline;\": \"\",\n        \"&euro;\": \"\",\n        \"&trade;\": \"\",\n        \"&larr;\": \"\",\n        \"&uarr;\": \"\",\n        \"&rarr;\": \"\",\n        \"&darr;\": \"\",\n        \"&harr;\": \"\",\n        \"&crarr;\": \"\",\n        \"&lceil;\": \"\",\n        \"&rceil;\": \"\",\n        \"&lfloor;\": \"\",\n        \"&rfloor;\": \"\",\n        \"&loz;\": \"\",\n        \"&spades;\": \"\",\n        \"&clubs;\": \"\",\n        \"&hearts;\": \"\",\n        \"&diams;\": \"\"\n    };\n    // -------------------------------------------------------------------------\n    function render_entities(str) {\n        return str.replace(/&#(x?)([0-9]+);/g, function(_, hex, code) {\n            code = parseInt(code, hex ? 16 : 10);\n            return String.fromCharCode(code);\n        }).replace(/(&[^;]+;)/g, function(_, entity) {\n            return entities[entity] || entity;\n        });\n    }\n    // -------------------------------------------------------------------------\n    function bare_text(string) {\n        if (!string.match(/&/)) {\n            return string;\n        }\n        return render_entities(safe(string));\n    }\n    // -------------------------------------------------------------------------\n    function text(string) {\n        return bare_text($.terminal.strip(string));\n    }\n    // -------------------------------------------------------------------------\n    function safe(string) {\n        if (!string.match(/[<>&]/)) {\n            return string;\n        }\n        return string.replace(/&(?![^;]+;)/g, '&amp;')\n            .replace(/>/g, '&gt;').replace(/</g, '&lt;');\n    }\n    // -------------------------------------------------------------------------\n    function crlf(string) {\n        return string.replace(/\\r/g, '');\n    }\n    // -------------------------------------------------------------------------\n    function char_len(chr) {\n        return entity_re.test(chr) ? 1 : chr.length;\n    }\n    // -------------------------------------------------------------------------\n    function make_re_fn(re) {\n        return function(string) {\n            var m = string.match(re);\n            if (starts_with(m)) {\n                return m[1];\n            }\n        };\n    }\n    // -------------------------------------------------------------------------\n    function starts_with(match) {\n        return match && match.index === 0;\n    }\n    // -------------------------------------------------------------------------\n    // :: optimized higher order function that it check complex regexes\n    // :: only when bigger string match those regexes, function is always\n    // :: used in loop when you process whole string, it's used to create local\n    // :: get_next_character function only cmd in input use original\n    // :: not optimized function\n    // -------------------------------------------------------------------------\n    function make_next_char_fun(string) {\n        var tests = [];\n        [\n            entity_re,\n            emoji_re,\n            combine_chr_re\n        ].forEach(function(re) {\n            if (string.match(re)) {\n                tests.push(make_re_fn(re));\n            }\n        });\n        if (string.match(astral_symbols_re)) {\n            tests.push(function(string) {\n                var m1 = string.match(astral_symbols_re);\n                if (starts_with(m1)) {\n                    var m2 = string.match(combine_chr_re);\n                    if (m2 && m2.index === 1) {\n                        return string.slice(0, 3);\n                    }\n                    return m1[1];\n                }\n            });\n        }\n        return function(string) {\n            for (var i = 0; i < tests.length; ++i) {\n                var test = tests[i];\n                var ret = test(string);\n                if (ret) {\n                    return ret;\n                }\n            }\n            return string[0];\n        };\n    }\n    // -------------------------------------------------------------------------\n    // :: function that return character from beginning of the string\n    // :: counting emoji, suroggate pairs and combine characters\n    // -------------------------------------------------------------------------\n    function get_next_character(string) {\n        var match_entity = string.match(entity_re);\n        if (starts_with(match_entity)) {\n            return match_entity[1];\n        }\n        var match_combo = string.match(combine_chr_re);\n        if (starts_with(match_combo)) {\n            return match_combo[1];\n        }\n        var match_emoji = string.match(emoji_re);\n        if (starts_with(match_emoji)) {\n            return match_emoji[1];\n        } else if (string.charCodeAt(0) < 255) {\n            return string[0];\n        } else {\n            var astral_match = string.match(astral_symbols_re);\n            if (starts_with(astral_match)) {\n                match_combo = string.match(combine_chr_re);\n                if (match_combo && match_combo.index === 1) {\n                    return string.slice(0, 3);\n                }\n                return string.slice(0, 2);\n            } else {\n                return string[0];\n            }\n        }\n    }\n    // -------------------------------------------------------------------------\n    // normalize position for counting emoji and extra chars\n    // -------------------------------------------------------------------------\n    function normalize_position(string, position) {\n        if (position === 0) {\n            return position;\n        }\n        string = $.terminal.strip(string);\n        var result = $.terminal.split_characters(string).reduce(function(acc, chr) {\n            if (typeof acc === 'number') {\n                return acc;\n            }\n            var length = acc.length + char_len(chr);\n            if (length >= position) {\n                return acc.position + 1;\n            }\n            return {\n                position: acc.position + 1,\n                length: length\n            };\n        }, {position: 0, length: 0});\n        if (typeof result === 'number') {\n            return result;\n        } else {\n            return result.position;\n        }\n    }\n    // -------------------------------------------------------------------------\n    function char_width_prop(len, options) {\n        if (len === 0) {\n            return 'width: 1px';\n        } else if (is_ch_unit_supported) {\n            return 'width: ' + len + 'ch';\n        } else if (!is_css_variables_supported) {\n            if (options.charWidth) {\n                return 'width: ' + (options.charWidth * len) + 'px';\n            }\n        } else {\n            return '--length: ' + len;\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    // options {charWidth}\n    function extra_css(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var len = strlen(bare);\n            if (len > 1 && len !== $.terminal.length(bare)) {\n                return char_width_prop(len, options);\n            }\n        }\n        return '';\n    }\n    // -------------------------------------------------------------------------\n    function wide_characters(text, options) {\n        if (typeof wcwidth !== 'undefined') {\n            var bare = bare_text(text);\n            var chars = $.terminal.split_characters(bare);\n            if (chars.length === 1) {\n                return text;\n            }\n            var specs = chars.map(function(chr) {\n                return {\n                    len: strlen(chr),\n                    chr: chr\n                };\n            }).reduce(function(arr, spec) {\n                var last = arr[arr.length - 1];\n                if (last) {\n                    if (last.len !== spec.len) {\n                        return arr.concat([{\n                            sum: spec.len,\n                            len: spec.len,\n                            specs: [spec]\n                        }]);\n                    } else {\n                        arr.pop();\n                        return arr.concat([{\n                            sum: last.sum + spec.len,\n                            len: last.len,\n                            specs: last.specs.concat(spec)\n                        }]);\n                    }\n                }\n                return [{\n                    sum: spec.len,\n                    specs: [spec],\n                    len: spec.len\n                }];\n            }, []);\n            return specs.map(function(spec) {\n                if (spec.len === 1) {\n                    return make_string(spec);\n                }\n                var style = char_width_prop(spec.sum, options);\n                if (spec.sum === chars.length || !style.length) {\n                    return '<span>' + make_string(spec) + '</span>';\n                } else if (spec.specs.length > 1) {\n                    return wrap(style, spec.specs.map(function(spec) {\n                        return wrap(char_width_prop(spec.len), spec.chr);\n                    }).join(''));\n                } else {\n                    return wrap(style, make_string(spec));\n                }\n            }).join('');\n        }\n        function make_string(spec) {\n            return spec.specs.map(function(spec) {\n                return spec.chr;\n            }).join('');\n        }\n        function wrap(style, str) {\n            return '<span style=\"' + style + '\">' + str + '</span>';\n        }\n        return text;\n    }\n    // ---------------------------------------------------------------------\n    // :: Binary search utility\n    // ---------------------------------------------------------------------\n    function binary_search(start, end, search_pos, compare_fn, more_args) {\n        var len = end - start;\n        var mid = start + Math.floor(len / 2);\n        var args = [search_pos, mid].concat(more_args);\n        var cmp = compare_fn.apply(null, args);\n        if (cmp === 0) {\n            return mid;\n        } else if (cmp > 0 && len > 1) {\n            return binary_search(\n                mid,\n                end,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else if (cmp < 0 && len > 1) {\n            return binary_search(\n                start,\n                mid,\n                search_pos,\n                compare_fn,\n                more_args\n            );\n        } else {\n            return -1;\n        }\n    }\n    // -----------------------------------------------------------------\n    // :: selection utilities - should work in modern browser including IE9\n    // -----------------------------------------------------------------\n    function is_terminal_selected(cmd) {\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.toString()) {\n                var node = selection.getRangeAt(0).startContainer.parentNode;\n                var term = $(node).closest('.terminal');\n                return term.length && (cmd && term.find('.cmd').is(cmd) || !cmd);\n            }\n        }\n    }\n    // -----------------------------------------------------------------\n    function get_selected_html() {\n        var html = '';\n        if (is_function(window.getSelection)) {\n            var sel = window.getSelection();\n            if (sel.rangeCount) {\n                var container = document.createElement('div');\n                for (var i = 0, len = sel.rangeCount; i < len; ++i) {\n                    container.appendChild(sel.getRangeAt(i).cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        return html;\n    }\n    // -----------------------------------------------------------------\n    function with_selection(fn) {\n        var html = '';\n        var ranges = [];\n        if (is_function(window.getSelection)) {\n            var selection = window.getSelection();\n            if (selection.rangeCount) {\n                var container = document.createElement(\"div\");\n                for (var i = 0, len = selection.rangeCount; i < len; ++i) {\n                    var range = selection.getRangeAt(i).cloneRange();\n                    ranges.push(range);\n                    container.appendChild(range.cloneContents());\n                }\n                html = container.innerHTML;\n            }\n        }\n        fn(html);\n        if (ranges.length) {\n            selection.removeAllRanges();\n            ranges.forEach(function(range) {\n                selection.addRange(range);\n            });\n        }\n        return html !== '';\n    }\n    // -----------------------------------------------------------------\n    function process_selected_line() {\n        var $self = $(this);\n        var result = $self.text();\n        if ($self.hasClass('cmd-end-line')) {\n            result += '\\n';\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------\n    function process_div(element) {\n        // span is empty line, div is default case with text\n        return $(element).find('> div, > span')\n            .map(process_selected_line).get().join('\\n').replace(/\\n$/, '');\n    }\n    // -----------------------------------------------------------------\n    function process_selected_html(html) {\n        var stdout;\n        var text = '';\n        var $html = $('<div>' + html + '</div>');\n        if (html.match(/<\\/div>/)) {\n            // match multiple echo output\n            stdout = $html.find('div[data-index]').map(function() {\n                return process_div(this);\n            }).get().join('\\n');\n            // match inside single echo output\n            if (!stdout && html.match(/style=\"width: 100%;?\"/)) {\n                stdout = process_div($html);\n            }\n            text = stdout;\n        }\n        var $prompt = $html.find('.cmd-prompt');\n        if ($prompt.length) {\n            if (text.length) {\n                text += '\\n';\n            }\n            text += $prompt.text();\n        }\n        var $cmd_lines = $html.find('[role=\"presentation\"]');\n        if ($cmd_lines.length) {\n            text += $cmd_lines.map(process_selected_line).get().join('');\n        }\n        if (!text.length && html) {\n            text = $html.text();\n        }\n        return text.replace(/\\xA0/g, ' '); // fix &nbsp; space\n    }\n    // ---------------------------------------------------------------------\n    // :: copy given DOM element text to clipboard\n    // ---------------------------------------------------------------------\n    var support_copy = (function() {\n        if (typeof document === 'undefined') {\n            return false;\n        }\n        if (!is_function(document.queryCommandSupported)) {\n            return false;\n        }\n        return document.queryCommandSupported('copy');\n    })();\n    // ---------------------------------------------------------------------\n    var text_to_clipboard;\n    if (support_copy) {\n        text_to_clipboard = function text_to_clipboard($textarea, text) {\n            var val = $textarea.val();\n            var had_focus = $textarea.is(':focus');\n            var pos = $textarea.caret();\n            if (window.navigator && window.navigator.clipboard) {\n                navigator.clipboard.writeText(text);\n            } else if (had_focus) {\n                $textarea.val(text).focus();\n                $textarea[0].select();\n                document.execCommand('copy');\n                $textarea.val(val);\n                $textarea.caret(pos);\n            } else {\n                var $text = $('<textarea/>').css({\n                    position: 'fixed',\n                    top: 0,\n                    left: 0\n                }).appendTo('body');\n                $text.val(text).focus();\n                $text[0].select();\n                document.execCommand('copy');\n                $text.blur();\n                $text.remove();\n            }\n            return true;\n        };\n    } else {\n        text_to_clipboard = $.noop;\n    }\n    // ---------------------------------------------------------------------\n    var get_textarea_selection = (function() {\n        function noop() {\n            return '';\n        }\n        if (typeof document === 'undefined') {\n            return noop;\n        }\n        var textarea = document.createElement('textarea');\n        var selectionStart = 'selectionStart' in textarea;\n        textarea = null;\n        if (selectionStart) {\n            return function(textarea) {\n                var length = textarea.selectionEnd - textarea.selectionStart;\n                return textarea.value.substr(textarea.selectionStart, length);\n            };\n        } else if (document.selection) {\n            return function() {\n                var range = document.selection.createRange();\n                return range.text();\n            };\n        } else {\n            return noop;\n        }\n    })();\n    // ---------------------------------------------------------------------\n    function clear_textarea_selection(textarea) {\n        textarea.selectionStart = textarea.selectionEnd = 0;\n    }\n    // ---------------------------------------------------------------------\n    // :: return string that are common in all elements of the array\n    // ---------------------------------------------------------------------\n    function common_string(string, array, matchCase) {\n        if (!array.length) {\n            return '';\n        }\n        var type = string_case(string);\n        var result = [];\n        for (var j = string.length; j < array[0].length; ++j) {\n            var push = false;\n            var candidate = array[0].charAt(j),\n                candidateLower = candidate.toLowerCase();\n            for (var i = 1; i < array.length; ++i) {\n                push = true;\n                var current = array[i].charAt(j),\n                    currentLower = current.toLowerCase();\n                if (candidate !== current) {\n                    if (matchCase || type === 'mixed') {\n                        push = false;\n                        break;\n                    } else if (candidateLower === currentLower) {\n                        if (type === 'lower') {\n                            candidate = candidate.toLowerCase();\n                        } else if (type === 'upper') {\n                            candidate = candidate.toUpperCase();\n                        } else {\n                            push = false;\n                            break;\n                        }\n                    } else {\n                        push = false;\n                        break;\n                    }\n                }\n            }\n            if (push) {\n                result.push(candidate);\n            } else {\n                break;\n            }\n        }\n        return string + result.join('');\n    }\n    // ---------------------------------------------------------------------\n    function trigger_terminal_change(next) {\n        terminals.forEach(function(term) {\n            term.settings().onTerminalChange.call(term, next);\n        });\n    }\n    // ---------------------------------------------------------------------\n    var select = (function() {\n        if (root.getSelection) {\n            var selection = root.getSelection();\n            if (selection.setBaseAndExtent) {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    selection.setBaseAndExtent(start, 0, end, 1);\n                };\n            } else {\n                return function(start, end) {\n                    var selection = root.getSelection();\n                    var range = document.createRange();\n                    range.setStart(start, 0);\n                    range.setEnd(end, end.childNodes.length);\n                    selection.removeAllRanges();\n                    selection.addRange(range);\n                };\n            }\n        } else {\n            return $.noop;\n        }\n    })();\n    // -------------------------------------------------------------------------\n    function process_command(original, fn) {\n        var string = original.trim();\n        var array = string.match(command_re) || [];\n        if (array.length) {\n            var name = array.shift();\n            var args = $.map(array, function(arg) {\n                if (arg.match(/^[\"']/)) {\n                    arg = arg.replace(/\\n/g, '\\\\u0000\\\\u0000\\\\u0000\\\\u0000');\n                    arg = fn(arg);\n                    return arg.replace(/\\x00\\x00\\x00\\x00/g, '\\n');\n                }\n                return fn(arg);\n            });\n            var quotes = $.map(array, function(arg) {\n                var m = arg.match(/^(['\"`]).*\\1$/);\n                return m && m[1] || '';\n            });\n            var rest = string.slice(name.length).trim();\n            return {\n                command: original,\n                name: name,\n                args: args,\n                args_quotes: quotes,\n                rest: rest\n            };\n        } else {\n            return {\n                command: original,\n                name: '',\n                args: [],\n                args_quotes: [],\n                rest: ''\n            };\n        }\n    }\n    // -------------------------------------------------------------------------\n    $.terminal = {\n        version: '2.31.1',\n        date: 'Thu, 30 Dec 2021 10:56:33 +0000',\n        // colors from https://www.w3.org/wiki/CSS/Properties/color/keywords\n        color_names: [\n            'transparent', 'currentcolor', 'black', 'silver', 'gray', 'white',\n            'maroon', 'red', 'purple', 'fuchsia', 'green', 'lime', 'olive',\n            'yellow', 'navy', 'blue', 'teal', 'aqua', 'aliceblue',\n            'antiquewhite', 'aqua', 'aquamarine', 'azure', 'beige', 'bisque',\n            'black', 'blanchedalmond', 'blue', 'blueviolet', 'brown',\n            'burlywood', 'cadetblue', 'chartreuse', 'chocolate', 'coral',\n            'cornflowerblue', 'cornsilk', 'crimson', 'cyan', 'darkblue',\n            'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen', 'darkgrey',\n            'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange',\n            'darkorchid', 'darkred', 'darksalmon', 'darkseagreen',\n            'darkslateblue', 'darkslategray', 'darkslategrey', 'darkturquoise',\n            'darkviolet', 'deeppink', 'deepskyblue', 'dimgray', 'dimgrey',\n            'dodgerblue', 'firebrick', 'floralwhite', 'forestgreen', 'fuchsia',\n            'gainsboro', 'ghostwhite', 'gold', 'goldenrod', 'gray', 'green',\n            'greenyellow', 'grey', 'honeydew', 'hotpink', 'indianred', 'indigo',\n            'ivory', 'khaki', 'lavender', 'lavenderblush', 'lawngreen',\n            'lemonchiffon', 'lightblue', 'lightcoral', 'lightcyan',\n            'lightgoldenrodyellow', 'lightgray', 'lightgreen', 'lightgrey',\n            'lightpink', 'lightsalmon', 'lightseagreen', 'lightskyblue',\n            'lightslategray', 'lightslategrey', 'lightsteelblue', 'lightyellow',\n            'lime', 'limegreen', 'linen', 'magenta', 'maroon',\n            'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n            'mediumseagreen', 'mediumslateblue', 'mediumspringgreen',\n            'mediumturquoise', 'mediumvioletred', 'midnightblue', 'mintcream',\n            'mistyrose', 'moccasin', 'navajowhite', 'navy', 'oldlace', 'olive',\n            'olivedrab', 'orange', 'orangered', 'orchid', 'palegoldenrod',\n            'palegreen', 'paleturquoise', 'palevioletred', 'papayawhip',\n            'peachpuff', 'peru', 'pink', 'plum', 'powderblue', 'purple', 'red',\n            'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown',\n            'seagreen', 'seashell', 'sienna', 'silver', 'skyblue', 'slateblue',\n            'slategray', 'slategrey', 'snow', 'springgreen', 'steelblue', 'tan',\n            'teal', 'thistle', 'tomato', 'turquoise', 'violet', 'wheat',\n            'white', 'whitesmoke', 'yellow', 'yellowgreen', 'rebeccapurple'],\n        // for unit tests\n        Cycle: Cycle,\n        History: History,\n        Stack: Stack,\n        // ---------------------------------------------------------------------\n        // :: Validate html color (it can be name or hex)\n        // ---------------------------------------------------------------------\n        valid_color: function valid_color(color) {\n            if (color.match(color_re)) {\n                return true;\n            } else {\n                return $.inArray(color.toLowerCase(), $.terminal.color_names) !== -1;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function check if given string contain invalid strings\n        // ---------------------------------------------------------------------\n        unclosed_strings: function unclosed_strings(string) {\n            return !!string.match(unclosed_strings_re);\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape all special regex characters, so it can be use as regex to\n        // :: match exact string that contain those characters\n        // ---------------------------------------------------------------------\n        escape_regex: function escape_regex(str) {\n            if (typeof str === 'string') {\n                var special = /([-\\\\^$[\\]()+{}?*.|])/g;\n                return str.replace(special, '\\\\$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: test if string contain formatting\n        // ---------------------------------------------------------------------\n        have_formatting: function have_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_exist_re);\n        },\n        is_formatting: function is_formatting(str) {\n            return typeof str === 'string' && !!str.match(format_full_re);\n        },\n        // ---------------------------------------------------------------------\n        is_extended_command: function is_extended_command(str) {\n            return typeof str === 'string' &&\n                str.match(format_exec_re) &&\n                !$.terminal.is_formatting(str);\n        },\n        // ---------------------------------------------------------------------\n        each_extended_command: function(string, fn) {\n            var parts = string.split(format_exec_split_re);\n            return $.map(parts, function(string) {\n                if ($.terminal.is_extended_command(string)) {\n                    var command = string.replace(/^\\[\\[|\\]\\]$/g, '');\n                    return fn(command) || '';\n                }\n                return string;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: return array of formatting and text between them\n        // ---------------------------------------------------------------------\n        format_split: function format_split(str) {\n            return str.split(format_split_re).filter(Boolean);\n        },\n        // ---------------------------------------------------------------------\n        // :: replace that return position after replace for working with\n        // :: replacement that change length of the string\n        // :: source https://stackoverflow.com/a/46756077/387194\n        // ---------------------------------------------------------------------\n        tracking_replace: function tracking_replace(string, rex, replacement, position) {\n            if (!(rex instanceof RegExp)) {\n                throw new Error('tracking_replace: Second argument need to be RegExp');\n            }\n            function substring(string, start, end) {\n                return string.slice(start, end);\n            }\n            function length(string) {\n                return $.terminal.strip(string).length;\n            }\n            var new_string = \"\";\n            var match;\n            var index = 0;\n            var rep_string;\n            var new_position = position;\n            var start;\n            rex.lastIndex = 0; // Just to be sure\n            while ((match = rex.exec(string))) {\n                // if regex don't have g flag lastIndex will not work\n                if (rex.global) {\n                    // Add any of the original string we just skipped\n                    var last_index = length(substring(string, 0, rex.lastIndex));\n                    start = last_index - length(match[0]);\n                } else {\n                    start = match.index;\n                    last_index = start + length(match[0]);\n                }\n                if (index < start) {\n                    new_string += substring(string, index, start);\n                }\n                index = last_index;\n                // Build the replacement string. This just handles $$ and $n,\n                // you may want to add handling for $`, $', and $&.\n                if (typeof replacement === 'function') {\n                    rep_string = replacement.apply(null, match);\n                } else {\n                    rep_string = replacement.replace(/\\$(\\$|\\d)/g, function(m, c0) {\n                        if (c0 === \"$\") {\n                            return \"$\";\n                        }\n                        return match[c0];\n                    });\n                }\n                // Add on the replacement\n                new_string += rep_string;\n                // If the position is affected...\n                if (start < position) {\n                    // ... update it:\n                    var rep_len = length(rep_string);\n                    rep_len += count_selfclosing_formatting(rep_string);\n                    if (last_index < position) {\n                        // It's after the replacement, move it\n                        new_position = Math.max(\n                            0,\n                            new_position +\n                            rep_len -\n                            length(match[0])\n                        );\n                    } else {\n                        // It's *in* the replacement, put it just after\n                        new_position += rep_len - (position - start);\n                    }\n                }\n                // If the regular expression doesn't have the g flag, break here so\n                // we do just one replacement (and so we don't have an endless loop!)\n                if (!rex.global) {\n                    break;\n                }\n            }\n            // Add on any trailing text in the string\n            if (index < length(string)) {\n                new_string += substring(string, index);\n            }\n            // Return the string and the updated position\n            if (string === new_string) {\n                return [string, position];\n            }\n            return [new_string, new_position];\n        },\n        // ---------------------------------------------------------------------\n        // :: helper function used by substring and split_equal it loop over\n        // :: string and execute callback with text count and other data\n        // ---------------------------------------------------------------------\n        iterate_formatting: function iterate_formatting(string, callback) {\n            function is_space(i) {\n                return string.slice(i - 6, i) === '&nbsp;' ||\n                    string.slice(i - 1, i).match(/\\s/);\n            }\n            // ----------------------------------------------------------------\n            function match_entity(index) {\n                return string.slice(index).match(entity_re);\n            }\n            // ----------------------------------------------------------------\n            function is_open_formatting(i) {\n                return string[i] === '[' && string[i + 1] === '[';\n            }\n            // ----------------------------------------------------------------\n            function is_escape_bracket(i) {\n                return string[i - 1] !== '\\\\' && string[i] === '\\\\' &&\n                    string[i + 1] === ']';\n            }\n            // ----------------------------------------------------------------\n            function is_text(i) {\n                return not_formatting && (string[i] !== ']' || !have_formatting)\n                    && !opening;\n            }\n            // ----------------------------------------------------------------\n            // :: function will skip to next character in main loop\n            // :: TODO: improve performance of emoji regex and check whole\n            // :: string it's complex string if not use simple function\n            // ----------------------------------------------------------------\n            var get_next_character = make_next_char_fun(string);\n            function next_iteration() {\n                var char = get_next_character(substring);\n                if (char.length > 1 && $.terminal.length(substring) > 1) {\n                    return char.length - 1;\n                }\n                return 0;\n            }\n            // ----------------------------------------------------------------\n            function is_next_space() {\n                return (is_space(i) && (not_formatting || opening)) &&\n                    (space === -1 && prev_space !== i || space !== -1);\n            }\n            // ----------------------------------------------------------------\n            // :: last iteration or one before closing formatting\n            // ----------------------------------------------------------------\n            var last = false;\n            function is_last() {\n                if (i === string.length - 1 && !last) {\n                    last = true;\n                } else {\n                    last = formatting && !!substring.match(/^.]$/);\n                }\n                return last;\n            }\n            // ----------------------------------------------------------------\n            var have_formatting = $.terminal.have_formatting(string);\n            var formatting = '';\n            var in_text = false;\n            var count = 0;\n            var match;\n            var space = -1;\n            var space_count = -1;\n            var prev_space;\n            var length = 0;\n            var offset = 0;\n            var re_ent = /(&[^;]+);$/;\n            for (var i = 0; i < string.length; i++) {\n                var substring = string.slice(i);\n                match = substring.match(format_start_re);\n                if (match) {\n                    formatting = match[1];\n                    in_text = false;\n                } else if (formatting) {\n                    if (string[i] === ']') {\n                        if (in_text) {\n                            formatting = '';\n                            in_text = false;\n                        } else {\n                            in_text = true;\n                        }\n                    }\n                } else {\n                    in_text = true;\n                }\n                var not_formatting = (formatting && in_text) || !formatting;\n                var opening = is_open_formatting(i);\n                if (is_next_space()) {\n                    space = i;\n                    space_count = count;\n                }\n                var braket = string[i].match(/[[\\]]/);\n                offset = 0;\n                if (not_formatting) {\n                    // treat entity as one character\n                    if (string[i] === '&') {\n                        match = match_entity(i);\n                        if (match) {\n                            i += match[1].length - 2; // 2 because continue adds 1 to i\n                            continue;\n                        }\n                        ++count;\n                        ++length;\n                    } else if (is_escape_bracket(i)) {\n                        // escape \\] and \\\\ counts as one character\n                        ++count;\n                        ++length;\n                        offset = 1;\n                        i += 1;\n                    } else if (!braket || !have_formatting) {\n                        ++count;\n                        ++length;\n                    }\n                }\n                if (is_text(i)) {\n                    if (strlen(string[i]) === 2) {\n                        length++;\n                    }\n                    var char = get_next_character(substring);\n                    var size = char.length;\n                    // begining of enity that we've skipped, we are at the end\n                    if (char === ';') {\n                        match = string.slice(0, i + 1).match(re_ent);\n                        if (match) {\n                            offset = match[1].length;\n                            size = offset + 1;\n                        }\n                    }\n                    var data = {\n                        last: is_last(),\n                        count: count,\n                        index: i - offset,\n                        formatting: formatting,\n                        length: length,\n                        text: in_text,\n                        size: size,\n                        space: space,\n                        space_count: space_count\n                    };\n                    var ret = callback(data);\n                    if (ret === false) {\n                        break;\n                    } else if (ret) {\n                        if (ret.count !== undefined) {\n                            count = ret.count;\n                        }\n                        if (ret.length !== undefined) {\n                            length = ret.length;\n                        }\n                        if (ret.space !== undefined) {\n                            prev_space = space;\n                            space = ret.space;\n                        }\n                        if (ret.index !== undefined) {\n                            i = ret.index;\n                            continue;\n                        }\n                    }\n                } else if (i === string.length - 1 && !last) {\n                    // last iteration, if formatting have last bracket,\n                    // from formatting, then last iteration\n                    // was already called (in if) #550\n                    callback({\n                        last: true,\n                        count: count + 1,\n                        index: i,\n                        formatting: formatting,\n                        length: 0,\n                        text: in_text,\n                        space: space\n                    });\n                }\n                // handle emoji, suroggate pairs and combine characters\n                if (in_text) {\n                    i += next_iteration();\n                }\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function return string splitted into single characters\n        // :: each character is wrapped into formatting from input string\n        // :: or empty formatting so it will create span when using with ::format\n        // ---------------------------------------------------------------------\n        partition: function partition(string) {\n            if (!$.terminal.have_formatting(string)) {\n                var chars = $.terminal.split_characters(string);\n                return chars.map(wrap);\n            }\n            var result = [];\n            function wrap(string) {\n                if (string.match(/\\\\$/)) {\n                    string += '\\\\';\n                }\n                return '[[;;]' + string + ']';\n            }\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\\\]$/)) {\n                        string = string.replace(/\\\\]/g, '\\\\\\\\]');\n                    }\n                } else {\n                    string = wrap(string);\n                }\n                return string;\n            }\n            $.terminal.iterate_formatting(string, function(data) {\n                if (data.text) {\n                    var text = [];\n                    if (data.formatting) {\n                        text.push(data.formatting);\n                    }\n                    text.push(string.substring(data.index, data.index + data.size));\n                    if (data.formatting) {\n                        text.push(']');\n                    }\n                    result.push(formatting(text.join('')));\n                }\n            });\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: formatting aware substring function\n        // ---------------------------------------------------------------------\n        substring: function substring(string, start_index, end_index) {\n            var chars = $.terminal.split_characters(string);\n            if (!chars.slice(start_index, end_index).length) {\n                return '';\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return chars.slice(start_index, end_index).join('');\n            }\n            var start = 0;\n            var end;\n            var start_formatting = '';\n            var end_formatting = '';\n            var prev_index;\n            var offset = 1;\n            $.terminal.iterate_formatting(string, function(data) {\n                if (start_index && data.count === start_index + 1) {\n                    start = data.index;\n                    if (data.formatting) {\n                        start_formatting = data.formatting;\n                    }\n                }\n                if (end_index && data.count === end_index) {\n                    end_formatting = data.formatting;\n                    prev_index = data.index;\n                    offset = data.size;\n                }\n                if (data.count === end_index + 1) {\n                    end = data.index;\n                    if (data.formatting) {\n                        end = prev_index + offset;\n                    }\n                }\n            });\n            if (start_index && !start) {\n                return '';\n            }\n            if (end === undefined) {\n                end = string.length;\n            }\n            string = start_formatting + string.slice(start, end);\n            if (end_formatting) {\n                string = string.replace(/(\\[\\[^\\]]+)?\\]$/, '');\n                string += ']';\n            }\n            return string;\n        },\n        // ---------------------------------------------------------------------\n        // :: add format text as 5th paramter to formatting it's used for\n        // :: data attribute in format function - and fix unclosed &\n        // ---------------------------------------------------------------------\n        normalize: function normalize(string) {\n            string = string.replace(format_re, function(_, format, text) {\n                if (format.match(self_closing_re) && text === '') {\n                    return '[[' + format + '] ]';\n                }\n                if (text === '') {\n                    return '';\n                }\n                function safe(string) {\n                    return string.replace(/\\\\\\]/g, '&#93;').replace(/\\n/g, '\\\\n')\n                        .replace(/&nbsp;/g, ' ');\n                }\n                format = safe(format);\n                var semicolons = format.match(/;/g).length;\n                // missing semicolons\n                if (semicolons >= 4) {\n                    var args = format.split(/;/);\n                    var start = args.slice(0, 4).join(';');\n                    var arg = args.slice(4).join(';');\n                    return '[[' + start + ';' + (arg || text) + ']' + text + ']';\n                } else if (semicolons === 2) {\n                    semicolons = ';;';\n                } else if (semicolons === 3) {\n                    semicolons = ';';\n                }\n                // return '[[' + format + ']' + text + ']';\n                // closing braket will break formatting so we need to escape\n                // those using html entity equvalent\n                // space is hack for images that break iterate_formatting\n                format += semicolons + safe(text);\n                return '[[' + format + ']' + text + ']';\n            });\n            return $.terminal.amp(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: split text into lines with equal length so each line can be\n        // :: rendered separately (text formatting can be longer then a line).\n        // ---------------------------------------------------------------------\n        split_equal: function split_equal(str, length, keep_words) {\n            var prev_format = '';\n            var result = [];\n            var array = $.terminal.normalize(str).split(/\\n/g);\n            for (var i = 0, len = array.length; i < len; ++i) {\n                if (array[i] === '') {\n                    result.push('');\n                    continue;\n                }\n                var line = array[i];\n                var get_next_character = make_next_char_fun(line);\n                var first_index = 0;\n                var output;\n                var line_length = line.length;\n                var last_bracket = !!line.match(/\\[\\[[^\\]]+\\](?:[^\\][]|\\\\\\])+\\]$/);\n                $.terminal.iterate_formatting(line, function(data) {\n                    var chr, substring;\n                    if (data.length >= length || data.last ||\n                        (data.length === length - 1 &&\n                         strlen(line[data.index + 1]) === 2)) {\n                        var can_break = false;\n                        // TODO: this need work\n                        if (keep_words && data.space !== -1) {\n                            // replace html entities with characters\n                            var stripped = text(line).substring(data.space_count);\n                            // real length, not counting formatting\n                            stripped = stripped.slice(0, length).trim();\n                            var text_len = strlen(stripped);\n                            if (stripped.match(/\\s/) || text_len < length) {\n                                can_break = true;\n                            }\n                        }\n                        // if words is true we split at last space and make next loop\n                        // continue where the space where located\n                        var after_index = data.index + data.size;\n                        if (last_bracket) {\n                            after_index += 1;\n                        }\n                        var new_index;\n                        if (keep_words && data.space !== -1 &&\n                            after_index !== line_length && can_break) {\n                            output = line.slice(first_index, data.space);\n                            new_index = data.space - 1;\n                        } else {\n                            substring = line.slice(data.index);\n                            chr = get_next_character(substring);\n                            output = line.slice(first_index, data.index) + chr;\n                            if (data.last && last_bracket && chr !== ']') {\n                                output += ']';\n                            }\n                            new_index = data.index + chr.length - 1;\n                        }\n                        if (keep_words) {\n                            output = output.replace(/^(&nbsp;|\\s)+|(&nbsp;|\\s)+$/g, '');\n                        }\n                        first_index = (new_index || data.index) + 1;\n                        if (prev_format) {\n                            var closed_formatting = output.match(/^[^\\]]*\\]/);\n                            output = prev_format + output;\n                            if (closed_formatting) {\n                                prev_format = '';\n                            }\n                        }\n                        var matched = output.match(format_re);\n                        if (matched) {\n                            var last = matched[matched.length - 1];\n                            if (last[last.length - 1] !== ']') {\n                                prev_format = last.match(format_begin_re)[1];\n                                output += ']';\n                            } else if (output.match(format_end_re)) {\n                                output = output.replace(format_end_re, '');\n                                prev_format = last.match(format_begin_re)[1];\n                            }\n                        }\n                        result.push(output);\n                        // modify loop by returing new data\n                        return {index: new_index, length: 0, space: -1};\n                    }\n                });\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: Escape & that's not part of entity\n        // ---------------------------------------------------------------------\n        amp: function amp(str) {\n            return str.replace(/&(?!#[0-9]+;|#x[0-9a-f]+;|[a-z]+;)/gi, '&amp;');\n        },\n        // ---------------------------------------------------------------------\n        // :: Encode formating as html for insertion into DOM\n        // ---------------------------------------------------------------------\n        encode: function encode(str, options) {\n            var settings = $.extend({\n                tabs: 4,\n                before: ''\n            }, options);\n            return $.terminal.amp(str).replace(/</g, '&lt;').replace(/>/g, '&gt;')\n                .replace(/ /g, '&nbsp;').split('\\n').map(function(line) {\n                    var splitted = line.split(/((?:\\[\\[[^\\]]+\\])?\\t(?:\\])?)/);\n                    splitted = splitted.filter(Boolean);\n                    return splitted.map(function(str, i) {\n                        if (str.match(/\\t/)) {\n                            return str.replace(/\\t([^\\t]*)$/, function(_, end) {\n                                if (i !== 0 && splitted[i - 1].match(/\\t\\]?$/)) {\n                                    var sp = new Array(settings.tabs + 1).join('&nbsp;');\n                                    return sp + end;\n                                } else {\n                                    var before = splitted.slice(i - 1, i).join('');\n                                    if (settings.before && i <= 1) {\n                                        before = settings.before + before;\n                                    }\n                                    var len = $.terminal.length(before);\n                                    var chars = settings.tabs - (len % settings.tabs);\n                                    if (chars === 0) {\n                                        chars = 4;\n                                    }\n                                    return new Array(chars + 1).join('&nbsp;') + end;\n                                }\n                            });\n                        }\n                        return str;\n                    }).join('');\n                }).join('\\n');\n        },\n        // -----------------------------------------------------------------------\n        // :: Default formatter that allow for nested formatting, example:\n        // :: [[;;#000]hello [[;#f00;]red] world]\n        // -----------------------------------------------------------------------\n        nested_formatting: function nested_formatting(string) {\n            if (!$.terminal.have_formatting(string)) {\n                return string;\n            }\n            var stack = [];\n            var re = /((?:\\[\\[(?:[^\\][]|\\\\\\])+\\])?(?:[^\\][]|\\\\\\])*\\]?)/;\n            var format_re = /\\[\\[([^\\][]+)\\][\\s\\S]*/;\n            var format_split_re = /^\\[\\[([^;]*);([^;]*);([^\\]]*)\\]/;\n            var class_i = 3; // index of the class in formatting\n            var attrs_i = 5; // index of attributes in formatting\n            // ---------------------------------------------------------------------------\n            function unique(value, index, self) {\n                return self.indexOf(value) === index;\n            }\n            // ---------------------------------------------------------------------------\n            function update_style(new_style, old_style) {\n                new_style = parse_style(new_style);\n                if (!old_style) {\n                    return new_style;\n                }\n                return $.extend(old_style, new_style);\n            }\n            // ---------------------------------------------------------------------------\n            function parse_style(string) {\n                var style = {};\n                string.split(/\\s*;\\s*/).forEach(function(string) {\n                    var parts = string.split(':').map(function(string) {\n                        return string.trim();\n                    });\n                    var prop = parts[0];\n                    var value = parts[1];\n                    style[prop] = value;\n                });\n                return style;\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_formatting(input) {\n                var result = input.slice();\n                if (input[attrs_i]) {\n                    result[attrs_i] = stringify_attrs(input[attrs_i]);\n                }\n                if (input[class_i]) {\n                    result[class_i] = stringify_class(input[class_i]);\n                }\n                result[0] = stringify_styles(input[0]);\n                return result.join(';');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_styles(input) {\n                var ignore = input.filter(function(s) {\n                    return s[0] === '-';\n                }).map(function(s) {\n                    return s[1];\n                });\n                return input.filter(function(s) {\n                    return ignore.indexOf(s) === -1 && ignore.indexOf(s[1]) === -1;\n                }).join('');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_attrs(attrs) {\n                return JSON.stringify(attrs, function(key, value) {\n                    if (key === 'style') {\n                        return stringify_style(value);\n                    }\n                    return value;\n                });\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_class(klass) {\n                return klass.filter(unique).join(' ');\n            }\n            // ---------------------------------------------------------------------------\n            function stringify_style(style) {\n                return Object.keys(style).map(function(prop) {\n                    return prop + ':' + style[prop];\n                }).join(';');\n            }\n            // ---------------------------------------------------------------------------\n            function get_inherit_style(stack) {\n                function update_attrs(value) {\n                    if (!output[attrs_i]) {\n                        output[attrs_i] = {};\n                    }\n                    try {\n                        var new_attrs = JSON.parse(value);\n                        if (new_attrs.style) {\n                            var new_style = new_attrs.style;\n                            var old_style = output[attrs_i].style;\n                            new_attrs.style = update_style(new_style, old_style);\n                            output[attrs_i] = $.extend(\n                                new_attrs,\n                                output[attrs_i],\n                                {\n                                    style: update_style(new_style, old_style)\n                                }\n                            );\n                        } else {\n                            output[attrs_i] = $.extend(\n                                new_attrs,\n                                output[attrs_i]\n                            );\n                        }\n                    } catch (e) {\n                        warn('Invalid JSON ' + value);\n                    }\n                }\n                var output = [[], '', ''];\n                if (!stack.length) {\n                    return output;\n                }\n                for (var i = stack.length; i--;) {\n                    var formatting = stack[i].split(';');\n                    if (formatting.length > 5) {\n                        var last = formatting.slice(5).join(';');\n                        formatting = formatting.slice(0, 5).concat(last);\n                    }\n                    var style = formatting[0].split(/(-?[@!gbiuso])/g).filter(Boolean);\n                    style.forEach(function(s) {\n                        if (output[0].indexOf(s) === -1) {\n                            output[0].push(s);\n                        }\n                    });\n                    for (var j = 1; j < formatting.length; ++j) {\n                        var value = formatting[j].trim();\n                        if (value) {\n                            if (j === class_i) {\n                                if (!output[class_i]) {\n                                    output[class_i] = [];\n                                }\n                                var classes = value.split(/\\s+/);\n                                output[class_i] = output[class_i].concat(classes);\n                            } else if (j === attrs_i) {\n                                update_attrs(value);\n                            } else if (!output[j]) {\n                                output[j] = value;\n                            }\n                        }\n                    }\n                }\n                return stringify_formatting(output);\n            }\n            return string.split(re).filter(Boolean).map(function(string) {\n                var style;\n                if (string.match(/^\\[\\[/) && !$.terminal.is_extended_command(string)) {\n                    var formatting = string.replace(format_re, '$1');\n                    var is_formatting = $.terminal.is_formatting(string);\n                    string = string.replace(format_split_re, '');\n                    stack.push(formatting);\n                    if ($.terminal.nested_formatting.__inherit__) {\n                        style = get_inherit_style(stack);\n                    } else {\n                        style = formatting;\n                    }\n                    if (!is_formatting) {\n                        string += ']';\n                    } else {\n                        stack.pop();\n                    }\n                    string = '[[' + style + ']' + string;\n                } else {\n                    var pop = false;\n                    if (string.match(/\\]/)) {\n                        pop = true;\n                    }\n                    if (stack.length) {\n                        if ($.terminal.nested_formatting.__inherit__) {\n                            style = get_inherit_style(stack);\n                        } else {\n                            style = stack[stack.length - 1];\n                        }\n                        string = '[[' + style + ']' + string;\n                    }\n                    if (pop) {\n                        stack.pop();\n                    } else if (stack.length) {\n                        string += ']';\n                    }\n                }\n                return string;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: safe function that will render text as it is\n        // ---------------------------------------------------------------------\n        escape_formatting: function escape_formatting(string) {\n            return $.terminal.escape_brackets(string);\n        },\n        // ---------------------------------------------------------------------\n        // :: apply custom formatters only to text\n        // ---------------------------------------------------------------------\n        apply_formatters: function apply_formatters(string, settings) {\n            if (string === \"\") {\n                if (settings && typeof settings.position === 'number') {\n                    return [\"\", settings.position];\n                } else {\n                    return \"\";\n                }\n            }\n            function test_lengths(formatter, index, ret, string) {\n                if (!formatter.__no_warn__ &&\n                    $.terminal.length(ret) !== $.terminal.length(string)) {\n                    warn('Your formatter[' + index + '] change length of the string, ' +\n                         'you should use [regex, replacement] formatter or function ' +\n                         ' that return [replacement, position] instead');\n                }\n            }\n            function should_format(options) {\n                if (!settings || !options) {\n                    return true;\n                }\n                var props = ['echo', 'command', 'prompt'];\n                var have_any = props.some(function(name) {\n                    return options[name] === true;\n                });\n                if (!have_any) {\n                    return true;\n                }\n                for (var i = props.length; i--;) {\n                    var prop = props[i];\n                    if (options[prop] === true && settings[prop] === true) {\n                        return true;\n                    }\n                }\n                return false;\n            }\n            settings = settings || {};\n            var formatters = settings.formatters || $.terminal.defaults.formatters;\n            var i = 0;\n            function apply_function_formatter(formatter, input) {\n                var options = $.extend({}, settings, {\n                    position: input[1]\n                });\n                var ret = formatter(input[0], options);\n                if (typeof ret === 'string') {\n                    test_lengths(formatter, i - 1, ret, input[0]);\n                    if (typeof ret === 'string') {\n                        return [ret, options.position];\n                    }\n                    return input;\n                } else if (is_array(ret) && ret.length === 2) {\n                    return ret;\n                } else {\n                    return input;\n                }\n            }\n            var input;\n            if (typeof settings.position === 'number') {\n                input = [string, settings.position];\n            } else {\n                input = [string, 0];\n            }\n            try {\n                var result = formatters.reduce(function(input, formatter) {\n                    i++;\n                    // __meta__ is for safe formatter that can handle formatters\n                    // inside formatters. for other usage we use format_split so one\n                    // formatter don't mess with formatter that was previous\n                    // on the list\n                    if (typeof formatter === 'function' && formatter.__meta__) {\n                        return apply_function_formatter(formatter, input);\n                    } else {\n                        var length = 0;\n                        var found_position = false;\n                        var splitted = $.terminal.format_split(input[0]);\n                        var partials = splitted.map(function(string) {\n                            var position;\n                            var this_len = text(string).length;\n                            // first position that match is used for this partial\n                            if (input[1] < length + this_len && !found_position) {\n                                position = input[1] - length;\n                                found_position = true;\n                            } else if (found_position) {\n                                // -1 indicate that we will not track position because it\n                                // was in one of the previous parial strings\n                                position = -1;\n                            } else {\n                                // initial position for replacers\n                                position = input[1];\n                            }\n                            // length is used to correct position after replace\n                            var length_before = length;\n                            var result;\n                            length += this_len;\n                            if ($.terminal.is_formatting(string)) {\n                                if (found_position) {\n                                    return [string, position];\n                                }\n                                return [string, -1];\n                            } else {\n                                if (is_array(formatter)) {\n                                    var options = formatter[2] || {};\n                                    result = [string, position < 0 ? 0 : position];\n                                    if (result[0].match(formatter[0]) &&\n                                        should_format(formatter[2])) {\n                                        if (options.loop) {\n                                            while (result[0].match(formatter[0])) {\n                                                result = $.terminal.tracking_replace(\n                                                    result[0],\n                                                    formatter[0],\n                                                    formatter[1],\n                                                    result[1]\n                                                );\n                                            }\n                                        } else {\n                                            result = $.terminal.tracking_replace(\n                                                result[0],\n                                                formatter[0],\n                                                formatter[1],\n                                                result[1]\n                                            );\n                                        }\n                                    }\n                                    if (position < 0) {\n                                        return [result[0], -1];\n                                    }\n                                } else if (typeof formatter === 'function') {\n                                    result = apply_function_formatter(formatter, [\n                                        string, position\n                                    ]);\n                                }\n                                if (typeof result !== 'undefined') {\n                                    // correct position becuase it's relative\n                                    // to partial and we need global for whole string\n                                    if (result[1] !== -1) {\n                                        result[1] += length_before;\n                                    }\n                                    var after_len = text(result[0]).length;\n                                    if (after_len !== this_len) {\n                                    }\n                                    return result;\n                                }\n                                return [string, -1];\n                            }\n                        });\n                        var position_partial = partials.filter(function(partial) {\n                            return partial[1] !== -1;\n                        })[0];\n                        var string = partials.map(function(partial) {\n                            return partial[0];\n                        }).join('');\n                        var position;\n                        if (typeof position_partial === 'undefined') {\n                            position = input[1];\n                        } else {\n                            position = position_partial[1];\n                        }\n                        // to make sure that output position is not outside the string\n                        var max = text(string).length;\n                        max += count_selfclosing_formatting(string);\n                        if (position > max) {\n                            position = max;\n                        }\n                        if (string === input[0]) {\n                            return input;\n                        }\n                        var before = $.terminal.strip(input[0]);\n                        var after = $.terminal.strip(string);\n                        if (before === after) {\n                            return [string, input[1]];\n                        }\n                        return [string, position];\n                    }\n                }, input);\n                if (typeof settings.position === 'number') {\n                    var codepoint_len = $.terminal.strip(result[0]).length;\n                    if ($.terminal.length(result[0]) < codepoint_len) {\n                        var position = result[1];\n                        position = normalize_position(result[0], position);\n                        var max = $.terminal.length(result[0]);\n                        if (position > max) {\n                            position = max;\n                        }\n                        result[1] = position;\n                    }\n                    return result;\n                } else {\n                    return result[0];\n                }\n            } catch (e) {\n                var msg = 'Error in formatter [' + (i - 1) + ']';\n                formatters.splice(i - 1);\n                throw new $.terminal.Exception('formatting', msg, e.stack);\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace terminal formatting with html\n        // ---------------------------------------------------------------------\n        format: function format(str, options) {\n            var settings = $.extend({}, {\n                linksNoReferrer: false,\n                linksNoFollow: false,\n                allowedAttributes: [],\n                charWidth: undefined,\n                escape: true,\n                anyLinks: false\n            }, options || {});\n            // -----------------------------------------------------------------\n            function filter_attr_names(names) {\n                if (names.length && settings.allowedAttributes.length) {\n                    return names.filter(function(name) {\n                        if (name === 'data-text') {\n                            return false;\n                        }\n                        var allowed = false;\n                        var filters = settings.allowedAttributes;\n                        for (var i = 0; i < filters.length; ++i) {\n                            if (filters[i] instanceof RegExp) {\n                                if (filters[i].test(name)) {\n                                    allowed = true;\n                                    break;\n                                }\n                            } else if (filters[i] === name) {\n                                allowed = true;\n                                break;\n                            }\n                        }\n                        return allowed;\n                    });\n                }\n                return [];\n            }\n            // -----------------------------------------------------------------\n            function clean_data(data, text) {\n                if (data === '') {\n                    return text;\n                } else {\n                    return data.replace(/&#93;/g, ']')\n                        .replace(/>/g, '&gt;')\n                        .replace(/</g, '&lt;')\n                        .replace(/\"/g, '&quot;');\n                }\n            }\n            // -----------------------------------------------------------------\n            function add_attrs(attrs) {\n                if (attrs) {\n                    var keys = filter_attr_names(Object.keys(attrs));\n                    if (keys.length) {\n                        return ' ' + keys.map(function(name) {\n                            var value = attrs[name].replace(/\"/g, '&quot;');\n                            return name + '=\"' + value + '\"';\n                        }).join(' ');\n                    }\n                }\n                return '';\n            }\n            // -----------------------------------------------------------------\n            function rel_attr() {\n                var rel = [\"noopener\"];\n                if (settings.linksNoReferrer) {\n                    rel.unshift(\"noreferrer\");\n                }\n                if (settings.linksNoFollow) {\n                    rel.unshift(\"nofollow\");\n                }\n                return rel;\n            }\n            // -----------------------------------------------------------------\n            // test if this is valid Path\n            // -----------------------------------------------------------------\n            function is_path(url) {\n                return url.match(/^\\.{1,2}\\//) ||\n                    url.match(/^\\//) ||\n                    !(url.match(/\\//) || url.match(/^[^:]+:/));\n            }\n            // -----------------------------------------------------------------\n            function with_url_validation(fn) {\n                return function(url) {\n                    if (settings.anyLinks) {\n                        return true;\n                    }\n                    var test = fn(url);\n                    if (!test) {\n                        warn('Invalid URL ' + url + ' only http(s) ftp and Path ' +\n                             'are allowed');\n                    }\n                    return test;\n                };\n            }\n            // -----------------------------------------------------------------\n            var valid_href = with_url_validation(function(url) {\n                return url.match(/^((https?|file|ftp):\\/\\/|\\.{0,2}\\/)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            var valid_src = with_url_validation(function(url) {\n                return url.match(/^(https?:|file:|blob:|data:)/) || is_path(url);\n            });\n            // -----------------------------------------------------------------\n            function format(s, style, color, background, _class, data_text, text) {\n                function pre_process_link(data) {\n                    var result;\n                    if (data.match(email_re)) {\n                        result = '<a href=\"mailto:' + data + '\"';\n                    } else {\n                        // only http and ftp links (prevent javascript)\n                        // unless user force it with anyLinks option\n                        if (!valid_href(data)) {\n                            data = '';\n                        }\n                        result = '<a target=\"_blank\"';\n                        if (data) {\n                            result += ' href=\"' + data + '\"';\n                        }\n                        result += ' rel=\"' + rel_attr().join(' ') + '\"';\n                    }\n                    return result;\n                }\n                function pre_process_image(data) {\n                    var result = '<img';\n                    if (valid_src(data)) {\n                        result += ' src=\"' + data + '\"';\n                        if (text) {\n                            result += ' alt=\"' + text + '\"';\n                        }\n                    }\n                    return result;\n                }\n                var attrs;\n                if (data_text.match(/;/)) {\n                    try {\n                        var splitted = data_text.split(';');\n                        var str = splitted.slice(1).join(';')\n                            .replace(/&nbsp;/g, ' ')\n                            .replace(/&lt;/g, '<')\n                            .replace(/&gt;/g, '>');\n                        if (str.match(/^\\s*\\{[^}]*\\}\\s*$/)) {\n                            attrs = JSON.parse(str);\n                            data_text = splitted[0];\n                        }\n                    } catch (e) {\n                    }\n                }\n                if (text === '' && !style.match(/@/)) {\n                    return ''; //'<span>&nbsp;</span>';\n                }\n                text = safe(text);\n                text = text.replace(/\\\\\\]/g, '&#93;');\n                if (settings.escape) {\n                    // inside formatting we need to unescape escaped slashes\n                    // but this escape is not needed when echo - don't know why\n                    text = text.replace(/\\\\\\\\/g, '\\\\');\n                }\n                var style_str = '';\n                if (style.indexOf('b') !== -1) {\n                    style_str += 'font-weight:bold;';\n                }\n                var text_decoration = [];\n                if (style.indexOf('u') !== -1) {\n                    text_decoration.push('underline');\n                }\n                if (style.indexOf('s') !== -1) {\n                    text_decoration.push('line-through');\n                }\n                if (style.indexOf('o') !== -1) {\n                    text_decoration.push('overline');\n                }\n                if (text_decoration.length) {\n                    style_str += 'text-decoration:' +\n                        text_decoration.join(' ') + ';';\n                }\n                if (style.indexOf('i') !== -1) {\n                    style_str += 'font-style:italic;';\n                }\n                if ($.terminal.valid_color(color)) {\n                    style_str += [\n                        'color:' + color,\n                        '--color:' + color,\n                        '--original-color:' + color\n                    ].join(';') + ';';\n                    if (style.indexOf('!') !== -1) {\n                        style_str += '--link-color:' + color + ';';\n                    }\n                    if (style.indexOf('g') !== -1) {\n                        style_str += 'text-shadow:0 0 5px ' + color + ';';\n                    }\n                }\n                if ($.terminal.valid_color(background)) {\n                    style_str += [\n                        'background-color:' + background,\n                        '--background:' + background\n                    ].join(';') + ';';\n                }\n                var data = clean_data(data_text, text);\n                var extra = extra_css(text, settings);\n                if (extra) {\n                    text = wide_characters(text, settings);\n                    style_str += extra;\n                }\n                var result;\n                if (style.indexOf('!') !== -1) {\n                    result = pre_process_link(data);\n                } else if (style.indexOf('@') !== -1) {\n                    result = pre_process_image(data);\n                } else {\n                    result = '<span';\n                }\n                if (attrs && attrs.style) {\n                    // merge style attr and colors #617\n                    attrs.style = style_str + attrs.style;\n                    style_str = '';\n                }\n                result += add_attrs(attrs);\n                if (style_str !== '') {\n                    result += ' style=\"' + style_str + '\"';\n                }\n                if (_class !== '') {\n                    result += ' class=\"' + _class + '\"';\n                }\n                // links and image need data-text attribute cmd click behavior\n                // formatter can return links.\n                if (style.indexOf('!') !== -1) {\n                    result += ' data-text>' + text + '</a>';\n                } else if (style.indexOf('@') !== -1) {\n                    result += ' data-text/>';\n                } else {\n                    result += ' data-text=\"' + data + '\">' +\n                        '<span>' + text + '</span></span>';\n                }\n                return result;\n            }\n            if (typeof str === 'string') {\n                // support for formating foo[[u;;]bar]baz[[b;#fff;]quux]zzz\n                var splitted = $.terminal.format_split(str);\n                str = $.map(splitted, function(text) {\n                    if (text === '') {\n                        return text;\n                    } else if ($.terminal.is_formatting(text)) {\n                        // fix &nbsp; inside formatting because encode is called\n                        // before format\n                        text = text.replace(/\\[\\[[^\\]]+\\]/, function(text) {\n                            return text.replace(/&nbsp;/g, ' ');\n                        });\n                        return text.replace(format_parts_re, format);\n                    } else {\n                        text = safe(text);\n                        text = text.replace(/\\\\\\]/, '&#93;');\n                        var data = clean_data(text);\n                        var extra = extra_css(text, settings);\n                        var prefix;\n                        if (extra.length) {\n                            text = wide_characters(text, settings);\n                            prefix = '<span style=\"' + extra + '\"';\n                        } else {\n                            prefix = '<span';\n                        }\n                        return prefix + ' data-text=\"' + data + '\">' + text + '</span>';\n                    }\n                }).join('');\n                return str.replace(/<span><br\\s*\\/?><\\/span>/gi, '<br/>');\n            } else {\n                return '';\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: Replace brackets with html entities\n        // ---------------------------------------------------------------------\n        escape_brackets: function escape_brackets(string) {\n            return string.replace(/\\[/g, '&#91;')\n                .replace(/\\]/g, '&#93;')\n                .replace(/\\\\/g, '&#92;');\n        },\n        // ---------------------------------------------------------------------\n        // :: complmentary function\n        // ---------------------------------------------------------------------\n        unescape_brackets: function unescape_brackets(string) {\n            return string.replace(/&#91;/g, '[')\n                .replace(/&#93;/g, ']')\n                .replace(/&#92;/g, '\\\\');\n        },\n        // ---------------------------------------------------------------------\n        // :: return number of characters without formatting\n        // ---------------------------------------------------------------------\n        length: function(string, raw) {\n            if (!string) {\n                return 0;\n            }\n            return $.terminal.split_characters(raw ? string : text(string)).length;\n        },\n        // ---------------------------------------------------------------------\n        // :: split characters handling emoji, surogate pairs and combine chars\n        // ---------------------------------------------------------------------\n        split_characters: function split_characters(string) {\n            var result = [];\n            var get_next_character = make_next_char_fun(string);\n            while (string.length) {\n                var chr = get_next_character(string);\n                string = string.slice(chr.length);\n                result.push(chr);\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: return string where array items are in columns padded spaces\n        // :: after adding align tabs arr.join('\\t\\t') looks much better\n        // ---------------------------------------------------------------------\n        columns: function(array, cols, space) {\n            var no_formatting = array.map(function(string) {\n                return $.terminal.strip(string);\n            });\n            var lengths = no_formatting.map(function(string) {\n                return strlen(string);\n            });\n            if (typeof space === 'undefined') {\n                space = 4;\n            }\n            var length = Math.max.apply(null, lengths) + space;\n            // we need value - 1 because index starts from 0\n            var column_limit = Math.floor(cols / length) - 1;\n            if (column_limit < 1) {\n                return array.join('\\n');\n            }\n            var lines = [];\n            for (var i = 0, len = array.length; i < len; i += column_limit) {\n                var line = array.slice(i, i + column_limit);\n                var last = line.pop();\n                lines.push(line.reduce(function(acc, string) {\n                    var stripped = $.terminal.strip(string);\n                    var pad = new Array(length - stripped.length + 1).join(' ');\n                    acc.push(string + pad);\n                    return acc;\n                }, []).join('') + last);\n            }\n            return lines.join('\\n');\n        },\n        // ---------------------------------------------------------------------\n        // :: Remove formatting from text\n        // ---------------------------------------------------------------------\n        strip: function strip(str) {\n            if (!$.terminal.have_formatting(str)) {\n                return str;\n            }\n            return $.terminal.format_split(str).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    str = str.replace(format_parts_re, '$6');\n                    return str.replace(/\\\\([[\\]])/g, function(whole, bracket) {\n                        return bracket;\n                    });\n                }\n                return str;\n            }).join('');\n        },\n        // ---------------------------------------------------------------------\n        // :: Return active terminal\n        // ---------------------------------------------------------------------\n        active: function active() {\n            return terminals.front();\n        },\n        // ---------------------------------------------------------------------\n        // :: Implmentation detail id is always length of terminals Cycle\n        // ---------------------------------------------------------------------\n        last_id: function last_id() {\n            var len = terminals.length();\n            return len - 1;\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that works with strings like 'asd' 'asd\\' asd' \"asd asd\"\n        // :: asd\\ 123 -n -b / [^ ]+ / /\\s+/ asd\\ a it creates a regex and\n        // :: numbers and replaces escape characters in double quotes\n        // :: if strict is set to false it only strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        parse_argument: function parse_argument(arg, strict) {\n            function parse_string(string) {\n                // split string to string literals and non-strings\n                return string.split(string_re).map(function(string) {\n                    // remove quotes if before are even number of slashes\n                    // we don't remove slases becuase they are handled by JSON.parse\n                    if (string.match(/^['\"`]/)) {\n                        // fixing regex to match empty string is not worth it\n                        if (string === '\"\"' || string === \"''\" || string === \"``\") {\n                            return '';\n                        }\n                        var quote = string[0];\n                        var re = new RegExp(\"(\\\\\\\\\\\\\\\\(?:\\\\\\\\\\\\\\\\)*)\" + quote, \"g\");\n                        string = string.replace(re, '$1').replace(/^[`'\"]|[`'\"]$/g, '');\n                        if (quote === \"'\") {\n                            string = string.replace(/\"/g, '\\\\\"');\n                        }\n                    }\n                    string = '\"' + string + '\"';\n                    // use build in function to parse rest of escaped characters\n                    return JSON.parse(string);\n                }).join('');\n            }\n            if (strict === false) {\n                if (arg[0] === \"'\" && arg[arg.length - 1] === \"'\") {\n                    return arg.replace(/^'|'$/g, '');\n                } else if (arg[0] === \"`\" && arg[arg.length - 1] === \"`\") {\n                    return arg.replace(/^`|`$/g, '');\n                } else if (arg[0] === '\"' && arg[arg.length - 1] === '\"') {\n                    return arg.replace(/^\"|\"$/g, '').replace(/\\\\([\" ])/g, '$1');\n                } else if (arg.match(/\\/.*\\/[gimy]*$/)) {\n                    return arg;\n                } else if (arg.match(/['\"`]]/)) {\n                    // part of arg is in quote\n                    return parse_string(arg);\n                } else {\n                    return arg.replace(/\\\\ /g, ' ');\n                }\n            }\n            if (arg === 'true') {\n                return true;\n            } else if (arg === 'false') {\n                return false;\n            }\n            var regex = arg.match(re_re);\n            if (regex) {\n                return new RegExp(regex[1], regex[2]);\n            } else if (arg.match(/['\"`]/)) {\n                return parse_string(arg);\n            } else if (arg.match(/^-?[0-9]+$/)) {\n                return parseInt(arg, 10);\n            } else if (arg.match(float_re)) {\n                return parseFloat(arg);\n            } else {\n                return arg.replace(/\\\\(['\"() ])/g, '$1');\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: function split and parse arguments\n        // ---------------------------------------------------------------------\n        parse_arguments: function parse_arguments(string) {\n            return $.map(string.match(command_re) || [], $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Function split and strips single and double quotes\n        // :: and escapes spaces\n        // ---------------------------------------------------------------------\n        split_arguments: function split_arguments(string) {\n            return $.map(string.match(command_re) || [], function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :: Function that returns an object {name,args}. Arguments are parsed\n        // :: using the function parse_arguments\n        // ---------------------------------------------------------------------\n        parse_command: function parse_command(string) {\n            return process_command(string, $.terminal.parse_argument);\n        },\n        // ---------------------------------------------------------------------\n        // :: Same as parse_command but arguments are parsed using split_arguments\n        // ---------------------------------------------------------------------\n        split_command: function split_command(string) {\n            return process_command(string, function(arg) {\n                return $.terminal.parse_argument(arg, false);\n            });\n        },\n        // ---------------------------------------------------------------------\n        // :; function that parse arguments like yargs library\n        // ---------------------------------------------------------------------\n        parse_options: function parse_options(arg, options) {\n            var settings = $.extend({}, {\n                boolean: []\n            }, options);\n            if (typeof arg === 'string') {\n                return parse_options($.terminal.split_arguments(arg), options);\n            }\n            var result = {\n                _: []\n            };\n            function token(value) {\n                this.value = value;\n            }\n            var rest = arg.reduce(function(acc, arg) {\n                var str = typeof arg === 'string' ? arg : '';\n                if (str.match(/^--?[^-]/) && acc instanceof token) {\n                    result[acc.value] = true;\n                }\n                if (str.match(/^--[^-]/)) {\n                    var name = str.replace(/^--/, '');\n                    if (settings.boolean.indexOf(name) === -1) {\n                        return new token(name);\n                    } else {\n                        result[name] = true;\n                    }\n                } else if (str.match(/^-[^-]/)) {\n                    var single = str.replace(/^-/, '').split('');\n                    if (settings.boolean.indexOf(single.slice(-1)[0]) === -1) {\n                        var last = single.pop();\n                    }\n                    single.forEach(function(single) {\n                        result[single] = true;\n                    });\n                    if (last) {\n                        return new token(last);\n                    }\n                } else if (acc instanceof token) {\n                    result[acc.value] = arg;\n                } else if (arg) {\n                    result._.push(arg);\n                }\n                return null;\n            }, null);\n            if (rest instanceof token) {\n                result[rest.value] = true;\n            }\n            return result;\n        },\n        // ---------------------------------------------------------------------\n        // :: function executed for each text inside [[ .... ]] in echo\n        // ---------------------------------------------------------------------\n        extended_command: function extended_command(term, string, options) {\n            var settings = $.extend({\n                invokeMethods: false\n            }, options);\n            var deferred = new $.Deferred();\n            try {\n                change_hash = false;\n                var m = string.match(extended_command_re);\n                if (m) {\n                    if (!settings.invokeMethods) {\n                        warn('To invoke terminal or cmd methods you need to enable ' +\n                             'invokeMethods option');\n                        deferred.reject();\n                    } else {\n                        string = m[1];\n                        var obj = m[2] === 'terminal' ? term : term.cmd();\n                        var fn = m[3];\n                        try {\n                            var args = eval('[' + m[4] + ']');\n                            if (!obj[fn]) {\n                                term.error('Unknow function ' + fn);\n                            } else {\n                                var ret = obj[fn].apply(term, args);\n                                if (ret && ret.then) {\n                                    return ret;\n                                }\n                            }\n                            deferred.resolve();\n                        } catch (e) {\n                            term.error('Invalid invocation in ' +\n                                       $.terminal.escape_brackets(string));\n                            deferred.reject();\n                        }\n                    }\n                } else {\n                    return term.exec(string, true).done(function() {\n                        change_hash = true;\n                    });\n                }\n            } catch (e) {\n                // error is process in exec\n                deferred.reject();\n            }\n            return deferred.promise();\n        },\n        // ---------------------------------------------------------------------\n        // :: ES6 iterator for a given string that handle emoji and formatting\n        // ---------------------------------------------------------------------\n        iterator: function(string) {\n            function formatting(string) {\n                if ($.terminal.is_formatting(string)) {\n                    if (string.match(/\\]\\\\\\]/)) {\n                        string = string.replace(/\\]\\\\\\]/g, ']\\\\\\\\]');\n                    }\n                }\n                return string;\n            }\n            if (typeof Symbol === 'function' && typeof Symbol.iterator === 'symbol') {\n                var len = $.terminal.length(string);\n                var i = 0;\n                var obj = {};\n                obj[Symbol.iterator] = function() {\n                    return {\n                        next: function() {\n                            if (i < len) {\n                                var text = $.terminal.substring(string, i, i + 1);\n                                i++;\n                                return {\n                                    value: formatting(text)\n                                };\n                            } else {\n                                return {\n                                    done: true\n                                };\n                            }\n                        }\n                    };\n                };\n                return obj;\n            }\n        },\n        // ---------------------------------------------------------------------\n        // :: object that can be used in string methods intead of regex\n        // ---------------------------------------------------------------------\n        formatter: new (function() {\n            try {\n                this[Symbol.split] = function(string) {\n                    return $.terminal.format_split(string);\n                };\n                this[Symbol.match] = function(string) {\n                    return string.match(format_re);\n                };\n                this[Symbol.replace] = function(string, replacer) {\n                    return string.replace(format_parts_re, replacer);\n                };\n                this[Symbol.search] = function(string) {\n                    return string.search(format_re);\n                };\n            } catch (e) {\n            }\n        })(),\n        // ---------------------------------------------------------------------\n        // :: helper function that add formatter before nested_formatting\n        // ---------------------------------------------------------------------\n        new_formatter: function(formatter) {\n            var formatters = $.terminal.defaults.formatters;\n            for (var i = 0; i < formatters.length; ++i) {\n                if (formatters[i] === $.terminal.nested_formatting) {\n                    formatters.splice(i, 0, formatter);\n                    return;\n                }\n            }\n            formatters.push(formatter);\n        }\n    };\n    // -------------------------------------------------------------------------\n    $.terminal.Exception = function Terminal_Exception(type, message, stack) {\n        if (arguments.length === 1) {\n            this.message = arguments[0];\n            this.type = 'TERMINAL';\n        } else {\n            this.type = type;\n            this.message = message;\n            if (stack) {\n                this.stack = stack;\n            }\n        }\n    };\n    $.terminal.Exception.prototype = new Error();\n    $.terminal.Exception.prototype.toString = function() {\n        return this.message + '\\n' + this.stack;\n    };\n    // -----------------------------------------------------------------------\n    // Helper plugins and functions\n    // -----------------------------------------------------------------------\n    $.fn.visible = function() {\n        return this.css('visibility', 'visible');\n    };\n    $.fn.hidden = function() {\n        return this.css('visibility', 'hidden');\n    };\n    // -----------------------------------------------------------------------\n    var warnings = [];\n    function warn(msg) {\n        msg = '[jQuery Terminal] ' + msg;\n        if (warnings.indexOf(msg) === -1) {\n            warnings.push(msg);\n            /* eslint-disable */\n            if (console) {\n                if (console.warn) {\n                    console.warn(msg);\n                } else if (console.log) {\n                    console.log(msg);\n                }\n                /* eslint-enable */\n            } else {\n                // prevent catching in outer try..catch\n                setTimeout(function() {\n                    throw new Error('WARN: ' + msg);\n                }, 0);\n            }\n        }\n    }\n    // -----------------------------------------------------------------------\n    // JSON-RPC CALL\n    // -----------------------------------------------------------------------\n    var ids = {}; // list of url based ids of JSON-RPC\n    $.jrpc = function(url, method, params, success, error) {\n        var deferred = new $.Deferred();\n        var options;\n        if ($.isPlainObject(url)) {\n            options = url;\n        } else {\n            options = {\n                url: url,\n                method: method,\n                params: params,\n                success: success,\n                error: error\n            };\n        }\n        function validJSONRPC(response) {\n            return $.isNumeric(response.id) &&\n                (typeof response.result !== 'undefined' ||\n                 typeof response.error !== 'undefined');\n        }\n        ids[options.url] = ids[options.url] || 0;\n        var request = {\n            'jsonrpc': '2.0',\n            'method': options.method,\n            'params': options.params,\n            'id': ++ids[options.url]\n        };\n        $.ajax({\n            url: options.url,\n            beforeSend: function beforeSend(jxhr, settings) {\n                if (is_function(options.request)) {\n                    options.request(jxhr, request);\n                }\n                settings.data = JSON.stringify(request);\n            },\n            success: function success(response, status, jqXHR) {\n                var content_type = jqXHR.getResponseHeader('Content-Type');\n                if (!content_type.match(/(application|text)\\/json/)) {\n                    warn('Response Content-Type is neither application/json' +\n                         ' nor text/json');\n                }\n                var json;\n                try {\n                    json = JSON.parse(response);\n                } catch (e) {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON', e);\n                    } else {\n                        throw new $.terminal.Exception('JSON', 'Invalid JSON', e.stack);\n                    }\n                    deferred.reject({message: 'Invalid JSON', response: response});\n                    return;\n                }\n                if (is_function(options.response)) {\n                    options.response(jqXHR, json);\n                }\n                if (validJSONRPC(json) || options.method === 'system.describe') {\n                    // don't catch errors in success callback\n                    if (options.success) {\n                        options.success(json, status, jqXHR);\n                    }\n                    deferred.resolve(json);\n                } else {\n                    if (options.error) {\n                        options.error(jqXHR, 'Invalid JSON-RPC');\n                    }\n                    deferred.reject({message: 'Invalid JSON-RPC', response: response});\n                }\n            },\n            error: options.error,\n            contentType: 'application/json',\n            dataType: 'text',\n            async: true,\n            cache: false,\n            // timeout: 1,\n            type: 'POST'\n        });\n        return deferred.promise();\n    };\n    // -----------------------------------------------------------------------\n    $.rpc = function(url, method, params) {\n        var deferred = new $.Deferred();\n        function success(res) {\n            if (res.error) {\n                deferred.reject(res.error);\n            } else {\n                deferred.resolve(res.result);\n            }\n        }\n        function error(jqXHR, status, message) {\n            deferred.reject({message: message});\n        }\n        $.jrpc(url, method, params, success, error);\n        return deferred.promise();\n    };\n    // -----------------------------------------------------------------------\n    function terminal_ready(term) {\n        return !!(term.closest('body').length &&\n                  term.is(':visible') &&\n                  term.find('.cmd-prompt').length);\n    }\n    // -----------------------------------------------------------------------\n    // :: Create fake terminal to calcualte the dimention of one character\n    // :: this will make terminal work if terminal div is not added to the\n    // :: DOM at init like with:\n    // :: $('<div/>').terminal().echo('foo bar').appendTo('body');\n    // -----------------------------------------------------------------------\n    function get_char_size(term) {\n        var rect;\n        if (terminal_ready(term)) {\n            var $prompt = term.find('.cmd-prompt').clone().css({\n                visiblity: 'hidden',\n                position: 'absolute'\n            });\n            $prompt.appendTo(term.find('.cmd')).html('&nbsp;');\n            rect = $prompt[0].getBoundingClientRect();\n            $prompt.remove();\n        } else {\n            var temp = $('<div class=\"terminal terminal-temp\"><div class=\"terminal-' +\n                         'wrapper\"><div class=\"terminal-output\"><div><div class=\"te' +\n                         'rminal-line\" style=\"float: left\"><span>&nbsp;</span></div' +\n                         '></div></div></div>').appendTo('body');\n            temp.addClass(term.attr('class')).attr('id', term.attr('id'));\n            if (term) {\n                var style = term.attr('style');\n                if (style) {\n                    style = style.split(/\\s*;\\s*/).filter(function(s) {\n                        return !s.match(/display\\s*:\\s*none/i);\n                    }).join(';');\n                    temp.attr('style', style);\n                }\n            }\n            rect = temp.find('.terminal-line')[0].getBoundingClientRect();\n        }\n        var result = {\n            width: rect.width,\n            height: rect.height\n        };\n        if (temp) {\n            temp.remove();\n        }\n        return result;\n    }\n    // -----------------------------------------------------------------------\n    // :: calculate numbers of characters\n    // -----------------------------------------------------------------------\n    function get_num_chars(terminal, char_size) {\n        var width = terminal.find('.terminal-fill').width();\n        var result = Math.floor(width / char_size.width);\n        // random number to not get NaN in node.js but big enough to\n        // not wrap exception\n        return result || 1000;\n    }\n    // -----------------------------------------------------------------------\n    // :: Calculate number of lines that fit without scroll\n    // -----------------------------------------------------------------------\n    function get_num_rows(terminal, char_size) {\n        var height = terminal.find('.terminal-fill').height();\n        return Math.floor(height / char_size.height);\n    }\n    // -----------------------------------------------------------------------\n    function all(array, fn) {\n        var same = array.filter(function(item) {\n            return item[fn]() === item;\n        });\n        return same.length === array.length;\n    }\n    // -----------------------------------------------------------------------\n    function string_case(string) {\n        var array = string.split('');\n        if (all(array, 'toLowerCase')) {\n            return 'lower';\n        } else if (all(array, 'toUpperCase')) {\n            return 'upper';\n        } else {\n            return 'mixed';\n        }\n    }\n    // -----------------------------------------------------------------------\n    function same_case(string) {\n        return string_case(string) !== 'mixed';\n    }\n    // -----------------------------------------------------------------------\n    // fix for jQuery bug\n    function is_function(object) {\n        return get_type(object) === 'function';\n    }\n    // -----------------------------------------------------------------------\n    function is_object(object) {\n        return object && typeof object === 'object';\n    }\n    // -----------------------------------------------------------------------\n    function is_promise(object) {\n        return is_object(object) && is_function(object.then || object.done);\n    }\n    // -----------------------------------------------------------------------\n    function is_deferred(object) {\n        return is_promise(object) && is_function(object.promise);\n    }\n    // -----------------------------------------------------------------------\n    if (!Array.isArray) {\n        Array.isArray = function(arg) {\n            return Object.prototype.toString.call(arg) === '[object Array]';\n        };\n    }\n    // -----------------------------------------------------------------------\n    function is_array(object) {\n        return Array.isArray(object);\n    }\n    // -----------------------------------------------------------------------\n    function get_type(object) {\n        if (typeof object === 'function') {\n            return 'function';\n        }\n        if (object === null) {\n            return object + '';\n        }\n        if (Array.isArray(object)) {\n            return 'array';\n        }\n        if (typeof object === 'object') {\n            return 'object';\n        }\n        return typeof object;\n    }\n    // -----------------------------------------------------------------------\n    // :: TERMINAL PLUGIN CODE\n    // -----------------------------------------------------------------------\n    var version_set = !$.terminal.version.match(/^\\{\\{/);\n    var copyright = 'Copyright (c) 2011-2021 Jakub T. Jankiewicz ' +\n        '<https://jcubic.pl/me>';\n    var version_string = version_set ? ' v. ' + $.terminal.version : ' ';\n    // regex is for placing version string aligned to the right\n    var reg = new RegExp(' {' + version_string.length + '}$');\n    var name_ver = 'jQuery Terminal Emulator' +\n        (version_set ? version_string : '');\n    // -----------------------------------------------------------------------\n    // :: Terminal Signatures\n    // -----------------------------------------------------------------------\n    var signatures = [\n        ['jQuery Terminal', '(c) 2011-2021 jcubic'],\n        [name_ver, copyright.replace(/^Copyright | *<.*>/g, '')],\n        [name_ver, copyright.replace(/^Copyright /, '')],\n        [\n            '      _______                 ________                        __',\n            '     / / _  /_ ____________ _/__  ___/______________  _____  / /',\n            ' __ / / // / // / _  / _/ // / / / _  / _/     / /  \\\\/ / _ \\\\/ /',\n            '/  / / // / // / ___/ // // / / / ___/ // / / / / /\\\\  / // / /__',\n            '\\\\___/____ \\\\\\\\__/____/_/ \\\\__ / /_/____/_//_/_/_/_/_/  \\\\/\\\\__\\\\_\\\\___/',\n            '         \\\\/          /____/                                   '\n                .replace(reg, ' ') + version_string,\n            copyright\n        ],\n        [\n            '      __ _____                     ________                            ' +\n                '  __',\n            '     / // _  /__ __ _____ ___ __ _/__  ___/__ ___ ______ __ __  __ ___ ' +\n                ' / /',\n            ' __ / // // // // // _  // _// // / / // _  // _//     // //  \\\\/ // _ ' +\n                '\\\\/ /',\n            '/  / // // // // // ___// / / // / / // ___// / / / / // // /\\\\  // // ' +\n                '/ /__',\n            '\\\\___//____ \\\\\\\\___//____//_/ _\\\\_  / /_//____//_/ /_/ /_//_//_/ /_/ \\\\' +\n                '__\\\\_\\\\___/',\n            ('          \\\\/              /____/                                     ' +\n             '     ').replace(reg, '') + version_string,\n            copyright\n        ]\n    ];\n    // -----------------------------------------------------------------------\n    // :: Default options\n    // -----------------------------------------------------------------------\n    $.terminal.nested_formatting.__meta__ = true;\n    // if set to false nested formatting will not inherit styles colors and attribues\n    $.terminal.nested_formatting.__inherit__ = true;\n    // nested formatting will always return different length so we silent the warning\n    $.terminal.nested_formatting.__no_warn__ = true;\n    $.terminal.defaults = {\n        prompt: '> ',\n        history: true,\n        exit: true,\n        clear: true,\n        enabled: true,\n        maskChar: '*',\n        wrap: true,\n        checkArity: true,\n        raw: false,\n        tabindex: 1,\n        invokeMethods: false,\n        exceptionHandler: null,\n        pauseEvents: true,\n        softPause: false,\n        mousewheel: null,\n        touchscroll: null,\n        memory: false,\n        cancelableAjax: true,\n        processArguments: true,\n        execAnimation: false,\n        execAnimationDelay: 100,\n        linksNoReferrer: false,\n        useCache: true,\n        anyLinks: false,\n        linksNoFollow: false,\n        processRPCResponse: null,\n        completionEscape: true,\n        onCommandChange: null,\n        mobileDelete: is_mobile,\n        onPositionChange: null,\n        convertLinks: true,\n        extra: {},\n        tabs: 4,\n        historySize: 60,\n        scrollObject: null,\n        historyState: false,\n        importHistory: false,\n        historyFilter: null,\n        echoCommand: true,\n        scrollOnEcho: true,\n        login: null,\n        outputLimit: -1,\n        formatters: [$.terminal.nested_formatting],\n        unixFormatting: {\n            escapeBrackets: false,\n            ansiParser: {},\n            ansiArt: false\n        },\n        onAjaxError: null,\n        pasteImage: true,\n        scrollBottomOffset: 20,\n        wordAutocomplete: true,\n        caseSensitiveAutocomplete: true,\n        caseSensitiveSearch: true,\n        clickTimeout: 200,\n        holdTimeout: 400,\n        holdRepeatTimeout: 200,\n        repeatTimeoutKeys: [],\n        mobileIngoreAutoSpace: [],\n        request: $.noop,\n        response: $.noop,\n        describe: 'procs',\n        onRPCError: null,\n        keymap: null,\n        doubleTab: null,\n        doubleTabEchoCommand: false,\n        completion: false,\n        onInit: $.noop,\n        onClear: $.noop,\n        onBlur: $.noop,\n        onFocus: $.noop,\n        onTerminalChange: $.noop,\n        onExit: $.noop,\n        onPush: $.noop,\n        onPop: $.noop,\n        keypress: $.noop,\n        keydown: $.noop,\n        renderHandler: null,\n        onAfterRedraw: $.noop,\n        onEchoCommand: $.noop,\n        onPaste: $.noop,\n        onFlush: $.noop,\n        onBeforeCommand: null,\n        onAfterCommand: null,\n        onBeforeEcho: null,\n        onAfterEcho: null,\n        onBeforeLogin: null,\n        onAfterLogout: null,\n        onBeforeLogout: null,\n        allowedAttributes: ['title', /^aria-/, 'id', /^data-/],\n        strings: {\n            comletionParameters: 'From version 1.0.0 completion function need to' +\n                ' have two arguments',\n            wrongPasswordTryAgain: 'Wrong username or password try again!',\n            wrongPassword: 'Wrong username or password!',\n            ajaxAbortError: 'Error while aborting ajax call!',\n            wrongArity: \"Wrong number of arguments. Function '%s' expects %s got\" +\n                ' %s!',\n            commandNotFound: \"Command '%s' Not Found!\",\n            oneRPCWithIgnore: 'You can use only one rpc with describe == false ' +\n                'or rpc without system.describe',\n            oneInterpreterFunction: \"You can't use more than one function (rpc \" +\n                'without system.describe or with option describe == false count' +\n                 's as one)',\n            loginFunctionMissing: \"You didn't specify a login function\",\n            noTokenError: 'Access denied (no token)',\n            serverResponse: 'Server responded',\n            wrongGreetings: 'Wrong value of greetings parameter',\n            notWhileLogin: \"You can't call `%s' function while in login\",\n            loginIsNotAFunction: 'Authenticate must be a function',\n            canExitError: \"You can't exit from main interpreter\",\n            invalidCompletion: 'Invalid completion',\n            invalidSelector: 'Sorry, but terminal said that you use invalid ' +\n                'selector!',\n            invalidTerminalId: 'Invalid Terminal ID',\n            login: 'login',\n            password: 'password',\n            recursiveLoop: 'Recursive loop in echo detected, skip',\n            notAString: '%s function: argument is not a string',\n            redrawError: 'Internal error, wrong position in cmd redraw',\n            invalidStrings: 'Command %s have unclosed strings',\n            defunctTerminal: \"You can't call method on terminal that was destroyed\"\n        }\n    };\n    // -------------------------------------------------------------------------\n    // :: All terminal globals\n    // -------------------------------------------------------------------------\n    var requests = []; // for canceling on CTRL+D\n    var terminals = new Cycle(); // list of terminals global in this scope\n    // state for all terminals, terminals can't have own array fo state because\n    // there is only one popstate event\n    var save_state = []; // hold objects returned by export_view by history API\n    var hash_commands;\n    var change_hash = false; // don't change hash on Init\n    var fire_hash_change = true;\n    var first_instance = true; // used by history state\n    $.fn.terminal = function(init_interpreter, options) {\n        function StorageHelper(memory) {\n            if (memory) {\n                this.storage = {};\n            }\n            this.set = function(key, value) {\n                if (memory) {\n                    this.storage[key] = value;\n                } else {\n                    $.Storage.set(key, value);\n                }\n            };\n            this.get = function(key) {\n                if (memory) {\n                    return this.storage[key];\n                } else {\n                    return $.Storage.get(key);\n                }\n            };\n            this.remove = function(key) {\n                if (memory) {\n                    delete this.storage[key];\n                } else {\n                    $.Storage.remove(key);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function\n        // ---------------------------------------------------------------------\n        function get_processed_command(command) {\n            if ($.terminal.unclosed_strings(command)) {\n                var string = $.terminal.escape_brackets(command);\n                var message = sprintf(strings().invalidStrings, \"`\" + string + \"`\");\n                throw new $.terminal.Exception(message);\n            } else if (is_function(settings.processArguments)) {\n                return process_command(command, settings.processArguments);\n            } else if (settings.processArguments) {\n                return $.terminal.parse_command(command);\n            } else {\n                return $.terminal.split_command(command);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that use option to render objects\n        // ---------------------------------------------------------------------\n        function preprocess_value(value, options) {\n            if ($.terminal.Animation && value instanceof $.terminal.Animation) {\n                value.start(self);\n                return false;\n            }\n            if (is_function(settings.renderHandler)) {\n                var ret = settings.renderHandler.call(self, value, options, self);\n                if (ret === false) {\n                    return false;\n                }\n                if (typeof ret === 'string' || is_node(ret) || is_promise(ret)) {\n                    return ret;\n                } else {\n                    return value;\n                }\n            }\n            return value;\n        }\n        // ---------------------------------------------------------------------\n        // :: call when line is out of view when outputLimit is used\n        // :: NOTE: it's not called when less plugin is used onClear is called\n        // :: instead because less call term::clear() after export old view\n        // ---------------------------------------------------------------------\n        function unmount(node) {\n            var index = node.data('index');\n            var line = lines[index];\n            var options = line[1];\n            if (is_function(options.unmount)) {\n                options.unmount.call(self, node);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function used in render and in update\n        // ---------------------------------------------------------------------\n        function prepare_render(value, options) {\n            if (is_node(value)) {\n                var settings = $.extend({}, options, {\n                    raw: true,\n                    finalize: function(div) {\n                        div.find('.terminal-render-item').replaceWith(value);\n                        if (options && is_function(options.finalize)) {\n                            options.finalize(div, self);\n                        }\n                    }\n                });\n                return ['<div class=\"terminal-render-item\"/>', settings];\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: helper function that renders DOM nodes and jQuery objects\n        // ---------------------------------------------------------------------\n        function render(value, options) {\n            var ret = prepare_render(value, options);\n            if (ret) {\n                self.echo.apply(self, ret);\n                return true;\n            }\n        }\n        // ---------------------------------------------------------------------\n        function get_node(index) {\n            return output.find('[data-index=' + index + ']');\n        }\n        // ---------------------------------------------------------------------\n        // :: test if object can be rendered\n        // ---------------------------------------------------------------------\n        function is_node(object) {\n            return object instanceof $.fn.init || object instanceof Element;\n        }\n        // ---------------------------------------------------------------------\n        // :: Display object on terminal\n        // ---------------------------------------------------------------------\n        function display_object(object) {\n            object = preprocess_value(object);\n            if (object === false) {\n                return;\n            }\n            if (render(object)) {\n                return;\n            }\n            if (typeof object === 'string') {\n                self.echo(object);\n            } else if (is_array(object)) {\n                self.echo($.map(object, function(object) {\n                    return JSON.stringify(object);\n                }).join(' '));\n            } else if (typeof object === 'object') {\n                self.echo(JSON.stringify(object));\n            } else {\n                self.echo(object);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display line code in the file if line numbers are present\n        // ---------------------------------------------------------------------\n        function print_line(url_spec, cols) {\n            var re = /(.*):([0-9]+):([0-9]+)$/;\n            // google chrome have line and column after filename\n            var m = url_spec.match(re);\n            if (m) {\n                // TODO: do we need to call pause/resume or return promise?\n                self.pause(settings.softPause);\n                $.get(m[1], function(response) {\n                    var file = m[1];\n                    var code = response.split('\\n');\n                    var n = +m[2] - 1;\n                    var start = n > 2 ? n - 2 : 0;\n                    var lines = code.slice(start, n + 3).map(function(line, i) {\n                        var prefix = '[' + (n + i - 1) + ']: ';\n                        var limit = cols - prefix.length - 4;\n                        if (line.length > limit) {\n                            line = line.substring(0, limit) + '...';\n                        }\n                        if (n > 2 ? i === 2 : i === n) {\n                            line = '[[;#f00;]' +\n                                $.terminal.escape_brackets(line) + ']';\n                        }\n                        return prefix + line;\n                    }).filter(Boolean).join('\\n');\n                    if (lines.length) {\n                        self.echo('[[b;white;]' + file + ']');\n                        self.echo(lines).resume();\n                    }\n                }, 'text');\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function display_json_rpc_error(error) {\n            if (is_function(settings.onRPCError)) {\n                settings.onRPCError.call(self, error);\n            } else {\n                self.error('&#91;RPC&#93; ' + error.message);\n                if (error.error && error.error.message) {\n                    error = error.error;\n                    // more detailed error message\n                    var msg = '\\t' + error.message;\n                    if (error.file) {\n                        msg += ' in file \"' + error.file.replace(/.*\\//, '') + '\"';\n                    }\n                    if (error.at) {\n                        msg += ' at line ' + error.at;\n                    }\n                    self.error(msg);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from url string\n        // ---------------------------------------------------------------------\n        function make_basic_json_rpc(url, auth) {\n            var interpreter = function(method, params) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: params,\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(json) {\n                        if (json.error) {\n                            display_json_rpc_error(json.error);\n                        } else if (is_function(settings.processRPCResponse)) {\n                            settings.processRPCResponse.call(self, json.result, self);\n                        } else if (json.result !== null) {\n                            display_object(json.result);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // this is the interpreter function\n            return function(command, terminal) {\n                if (command === '') {\n                    return;\n                }\n                try {\n                    command = get_processed_command(command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    display_exception(e, 'TERMINAL (get_processed_command)');\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                if (!auth || command.name === 'help') {\n                    // allows to call help without a token\n                    interpreter(command.name, command.args);\n                } else {\n                    var token = terminal.token(true);\n                    if (token) {\n                        interpreter(command.name, [token].concat(command.args));\n                    } else {\n                        // should never happen\n                        terminal.error('&#91;AUTH&#93; ' + strings().noTokenError);\n                    }\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Create interpreter function from Object. If the value is object\n        // :: it will create nested interpreters\n        // ---------------------------------------------------------------------\n        function make_object_interpreter(object, arity, login, fallback) {\n            // function that maps commands to object methods\n            // it keeps terminal context\n            return function(user_command, terminal) {\n                if (user_command === '') {\n                    return;\n                }\n                var command;\n                try {\n                    command = get_processed_command(user_command);\n                } catch (e) {\n                    // exception can be thrown on invalid regex\n                    if (is_function(settings.exception)) {\n                        settings.exception(e, self);\n                    } else {\n                        self.error('Error: ' + (e.message || e));\n                    }\n                    return;\n                    // throw e; // this will show stack in other try..catch\n                }\n                var val = object[command.name];\n                var type = get_type(val);\n                if (type === 'function') {\n                    if (arity && val.length !== command.args.length) {\n                        self.error(\n                            '&#91;Arity&#93; ' +\n                                sprintf(\n                                    strings().wrongArity,\n                                    command.name,\n                                    val.length,\n                                    command.args.length\n                                )\n                        );\n                    } else {\n                        return val.apply(self, command.args);\n                    }\n                } else if (type === 'object' || type === 'string') {\n                    var commands = [];\n                    if (type === 'object') {\n                        commands = Object.keys(val);\n                        val = make_object_interpreter(\n                            val,\n                            arity,\n                            login\n                        );\n                    }\n                    terminal.push(val, {\n                        prompt: command.name + '> ',\n                        name: command.name,\n                        completion: type === 'object' ? commands : undefined\n                    });\n                } else if (is_function(fallback)) {\n                    fallback(user_command, self);\n                } else if (is_function(settings.onCommandNotFound)) {\n                    settings.onCommandNotFound.call(self, user_command, self);\n                } else {\n                    terminal.error(sprintf(strings().commandNotFound, command.name));\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        function ajax_error(xhr, status, error) {\n            self.resume(); // onAjaxError can use pause/resume call it first\n            if (is_function(settings.onAjaxError)) {\n                settings.onAjaxError.call(self, xhr, status, error);\n            } else if (status !== 'abort') {\n                self.error('&#91;AJAX&#93; ' + status + ' - ' +\n                           strings().serverResponse + ':\\n' +\n                           $.terminal.escape_brackets(xhr.responseText));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpreter object based on JSON-RPC meta data\n        // ---------------------------------------------------------------------\n        function make_json_rpc_object(url, auth, success) {\n            function jrpc_success(json) {\n                if (json.error) {\n                    display_json_rpc_error(json.error);\n                } else if (is_function(settings.processRPCResponse)) {\n                    settings.processRPCResponse.call(self, json.result, self);\n                } else {\n                    display_object(json.result);\n                }\n                self.resume();\n            }\n            function jrpc_request(jxhr, request) {\n                try {\n                    settings.request.call(self, jxhr, request, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function jrpc_response(jxhr, response) {\n                try {\n                    settings.response.call(self, jxhr, response, self);\n                } catch (e) {\n                    display_exception(e, 'USER');\n                }\n            }\n            function response(response) {\n                var procs = response;\n                // we check if it's false before we call this function but\n                // it don't hurt to be explicit here\n                if (settings.describe !== false && settings.describe !== '') {\n                    settings.describe.split('.').forEach(function(field) {\n                        procs = procs[field];\n                    });\n                }\n                if (procs && procs.length) {\n                    var interpreter_object = {};\n                    $.each(procs, function(_, proc) {\n                        if ($.isPlainObject(proc) && typeof proc.name === 'string') {\n                            interpreter_object[proc.name] = function() {\n                                var append = auth && proc.name !== 'help';\n                                var args = Array.prototype.slice.call(arguments);\n                                var args_len = args.length + (append ? 1 : 0);\n                                if (settings.checkArity && proc.params &&\n                                    proc.params.length !== args_len) {\n                                    self.error(\n                                        '&#91;Arity&#93; ' +\n                                            sprintf(\n                                                strings().wrongArity,\n                                                proc.name,\n                                                proc.params.length,\n                                                args_len\n                                            )\n                                    );\n                                } else {\n                                    self.pause(settings.softPause);\n                                    if (append) {\n                                        var token = self.token(true);\n                                        if (token) {\n                                            args = [token].concat(args);\n                                        } else {\n                                            self.error('&#91;AUTH&#93; ' +\n                                                       strings().noTokenError);\n                                        }\n                                    }\n                                    $.jrpc({\n                                        url: url,\n                                        method: proc.name,\n                                        params: args,\n                                        request: jrpc_request,\n                                        response: jrpc_response,\n                                        success: jrpc_success,\n                                        error: ajax_error\n                                    });\n                                }\n                            };\n                        }\n                    });\n                    var login = typeof auth === 'string' ? auth : 'login';\n                    interpreter_object.help = interpreter_object.help || function(fn) {\n                        if (typeof fn === 'undefined') {\n                            var names = procs.map(function(proc) {\n                                return proc.name;\n                            }).join(', ') + ', help';\n                            self.echo('Available commands: ' + names);\n                        } else {\n                            var found = false;\n                            $.each(procs, function(_, proc) {\n                                if (proc.name === fn) {\n                                    found = true;\n                                    var msg = '';\n                                    msg += '[[bu;;]' + proc.name + ']';\n                                    if (proc.params) {\n                                        var params = proc.params;\n                                        if (auth && proc.name !== login) {\n                                            params = params.slice(1);\n                                        }\n                                        msg += ' ' + params.join(' ');\n                                    }\n                                    if (proc.help) {\n                                        msg += '\\n' + proc.help;\n                                    }\n                                    self.echo(msg);\n                                    return false;\n                                }\n                            });\n                            if (!found) {\n                                if (fn === 'help') {\n                                    self.echo('[[bu;;]help] [method]\\ndisplay help ' +\n                                              'for the method or list of methods if not' +\n                                              ' specified');\n                                } else {\n                                    var msg = 'Method `' + fn + \"' not found \";\n                                    self.error(msg);\n                                }\n                            }\n                        }\n                    };\n                    success(interpreter_object);\n                } else {\n                    success(null);\n                }\n            }\n            return $.jrpc({\n                url: url,\n                method: 'system.describe',\n                params: [],\n                success: response,\n                request: jrpc_request,\n                response: jrpc_response,\n                error: function error() {\n                    success(null);\n                }\n            });\n        }\n        // ---------------------------------------------------------------------\n        // :: function create interpeter function and call finalize with\n        // :: interpreter and optional completion\n        // ---------------------------------------------------------------------\n        function make_interpreter(user_intrp, login, finalize) {\n            finalize = finalize || $.noop;\n            var type = get_type(user_intrp);\n            var object;\n            var result = {};\n            var rpc_count = 0; // only one rpc can be use for array\n            var fn_interpreter;\n            if (type === 'array') {\n                object = {};\n                // recur will be called when previous acync call is finished\n                (function recur(interpreters, success) {\n                    if (interpreters.length) {\n                        var first = interpreters[0];\n                        var rest = interpreters.slice(1);\n                        var type = get_type(first);\n                        if (type === 'string') {\n                            self.pause(settings.softPause);\n                            if (settings.describe === false) {\n                                if (++rpc_count === 1) {\n                                    fn_interpreter = make_basic_json_rpc(first, login);\n                                } else {\n                                    self.error(strings().oneRPCWithIgnore);\n                                }\n                                recur(rest, success);\n                            } else {\n                                make_json_rpc_object(first, login, function(new_obj) {\n                                    if (new_obj) {\n                                        $.extend(object, new_obj);\n                                    } else if (++rpc_count === 1) {\n                                        fn_interpreter = make_basic_json_rpc(\n                                            first,\n                                            login\n                                        );\n                                    } else {\n                                        self.error(strings().oneRPCWithIgnore);\n                                    }\n                                    self.resume();\n                                    recur(rest, success);\n                                });\n                            }\n                        } else if (type === 'function') {\n                            if (fn_interpreter) {\n                                self.error(strings().oneInterpreterFunction);\n                            } else {\n                                fn_interpreter = first;\n                            }\n                            recur(rest, success);\n                        } else if (type === 'object') {\n                            $.extend(object, first);\n                            recur(rest, success);\n                        }\n                    } else {\n                        success();\n                    }\n                })(user_intrp, function() {\n                    finalize({\n                        interpreter: make_object_interpreter(\n                            object,\n                            false,\n                            login,\n                            fn_interpreter && fn_interpreter.bind(self)\n                        ),\n                        completion: Object.keys(object)\n                    });\n                });\n            } else if (type === 'string') {\n                if (settings.describe === false) {\n                    object = {\n                        interpreter: make_basic_json_rpc(user_intrp, login)\n                    };\n                    if ($.isArray(settings.completion)) {\n                        object.completion = settings.completion;\n                    }\n                    finalize(object);\n                } else {\n                    self.pause(settings.softPause);\n                    make_json_rpc_object(user_intrp, login, function(object) {\n                        if (object) {\n                            result.interpreter = make_object_interpreter(\n                                object,\n                                false,\n                                login\n                            );\n                            result.completion = Object.keys(object);\n                        } else {\n                            // no procs in system.describe\n                            result.interpreter = make_basic_json_rpc(user_intrp, login);\n                        }\n                        finalize(result);\n                        self.resume();\n                    });\n                }\n            } else if (type === 'object') {\n                finalize({\n                    interpreter: make_object_interpreter(\n                        user_intrp,\n                        settings.checkArity,\n                        login\n                    ),\n                    completion: Object.keys(user_intrp)\n                });\n            } else {\n                // allow $('<div/>').terminal();\n                if (type === 'undefined') {\n                    user_intrp = $.noop;\n                } else if (type !== 'function') {\n                    var msg = type + ' is invalid interpreter value';\n                    throw new $.terminal.Exception(msg);\n                }\n                // single function don't need bind\n                finalize({\n                    interpreter: user_intrp,\n                    completion: settings.completion\n                });\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Create JSON-RPC authentication function\n        // ---------------------------------------------------------------------\n        function make_json_rpc_login(url, login) {\n            var method = get_type(login) === 'boolean' ? 'login' : login;\n            return function(user, passwd, callback) {\n                self.pause(settings.softPause);\n                $.jrpc({\n                    url: url,\n                    method: method,\n                    params: [user, passwd],\n                    request: function(jxhr, request) {\n                        try {\n                            settings.request.call(self, jxhr, request, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    response: function(jxhr, response) {\n                        try {\n                            settings.response.call(self, jxhr, response, self);\n                        } catch (e) {\n                            display_exception(e, 'USER');\n                        }\n                    },\n                    success: function success(response) {\n                        if (!response.error && response.result) {\n                            callback(response.result);\n                        } else {\n                            // null will trigger message that login fail\n                            callback(null);\n                        }\n                        self.resume();\n                    },\n                    error: ajax_error\n                });\n            };\n            // default name is login so you can pass true\n        }\n        // ---------------------------------------------------------------------\n        // :: display Exception on terminal\n        // ---------------------------------------------------------------------\n        function display_exception(e, label, silent) {\n            if (is_function(settings.exceptionHandler)) {\n                settings.exceptionHandler.call(self, e, label);\n            } else {\n                self.exception(e, label);\n                if (!silent) {\n                    setTimeout(function() {\n                        throw e;\n                    }, 0);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function links(string) {\n            function format(_, style, color, background, _class, data, text) {\n                function formatting(s, text) {\n                    return '[[' + [\n                        style + (s || ''),\n                        color,\n                        background,\n                        _class,\n                        text || data\n                    ].join(';') + ']';\n                }\n                function escaped(_) {\n                    return ']' + formatting('!', _) + _ + ']' + formatting();\n                }\n                if (!style.match(/!/)) {\n                    var m = text.match(email_full_re) || text.match(url_full_re);\n                    if (m) {\n                        return formatting('!', m[1]) + text + ']';\n                    } else if (text.match(email_re) || text.match(url_nf_re)) {\n                        var output = text.replace(email_re, escaped)\n                            .replace(url_nf_re, escaped);\n                        return formatting('', data) + output + ']';\n                    }\n                }\n                return _;\n            }\n            function linkify(string) {\n                return string.replace(email_re, '[[!;;]$1]').\n                    replace(url_nf_re, '[[!;;]$1]');\n            }\n            if (!$.terminal.have_formatting(string)) {\n                return linkify(string);\n            }\n            return $.terminal.format_split(string).map(function(str) {\n                if ($.terminal.is_formatting(str)) {\n                    return str.replace(format_parts_re, format);\n                } else {\n                    return linkify(str);\n                }\n            }).join('');\n        }\n        // ---------------------------------------------------------------------\n        function should_wrap(string, options) {\n            return (strlen(text(string)) > options.cols ||\n                    string.match(/\\n/)) &&\n                ((settings.wrap === true &&\n                  options.wrap === undefined) ||\n                 settings.wrap === false &&\n                 options.wrap === true);\n        }\n        // ---------------------------------------------------------------------\n        var line_cache;\n        if ('Map' in root) {\n            line_cache = new Map();\n        }\n        // ---------------------------------------------------------------------\n        function process_extended_commands(string, line, line_settings) {\n            if (line_settings.exec || line.options.clear_exec) {\n                return $.terminal.each_extended_command(string, function(command) {\n                    // redraw should not execute commands and it have\n                    // and lines variable have all extended commands\n                    if (line_settings.exec) {\n                        line.options.exec = false;\n                        line.options.clear_exec = true;\n                        var trim = command.trim();\n                        if (prev_exec_cmd && prev_exec_cmd === trim) {\n                            prev_exec_cmd = '';\n                            self.error(strings().recursiveLoop);\n                        } else {\n                            prev_exec_cmd = trim;\n                            $.terminal.extended_command(self, command, {\n                                invokeMethods: line_settings.invokeMethods\n                            }).then(function() {\n                                prev_exec_cmd = '';\n                            });\n                        }\n                    }\n                });\n            }\n            return string;\n        }\n        // ---------------------------------------------------------------------\n        function process_line(line) {\n            // prevent exception in display exception\n            try {\n                var use_cache = !is_function(line.value);\n                var line_settings = $.extend({\n                    exec: true,\n                    raw: false,\n                    finalize: $.noop,\n                    useCache: use_cache,\n                    invokeMethods: false,\n                    formatters: true,\n                    convertLinks: settings.convertLinks\n                }, line.options || {});\n                var string = stringify_value(line.value);\n                if (string && is_function(string.then)) {\n                    // handle function that return a promise #629\n                    return string.then(function(string) {\n                        process_line($.extend(line, {\n                            value: string,\n                            options: line_settings\n                        }));\n                    });\n                }\n                if (string !== '') {\n                    if (!line_settings.raw) {\n                        if (settings.useCache && line_settings.useCache) {\n                            var key = string;\n                            if (line_cache && line_cache.has(key)) {\n                                var data = line_cache.get(key);\n                                buffer.append(\n                                    data.input,\n                                    line.index,\n                                    line_settings,\n                                    data.raw\n                                );\n                                return true;\n                            }\n                        }\n                        if (line_settings.formatters) {\n                            try {\n                                string = $.terminal.apply_formatters(\n                                    string,\n                                    $.extend(settings, {echo: true})\n                                );\n                            } catch (e) {\n                                display_exception(e, 'FORMATTING');\n                            }\n                        }\n                        string = process_extended_commands(string, line, line_settings);\n                        if (string === '') {\n                            return;\n                        }\n                        if (line_settings.convertLinks) {\n                            string = links(string);\n                        }\n                        var raw_string = string;\n                        string = crlf($.terminal.normalize(string));\n                        string = $.terminal.encode(string, {\n                            tabs: settings.tabs\n                        });\n                        //string = $.terminal.normalize(string);\n                        var array;\n                        var cols = line_settings.cols = self.cols();\n                        if (should_wrap(string, line_settings)) {\n                            var words = line_settings.keepWords;\n                            array = $.terminal.split_equal(string, cols, words);\n                        } else if (string.match(/\\n/)) {\n                            array = string.split(/\\n/);\n                        }\n                    }\n                } else {\n                    raw_string = '';\n                }\n                var arg = array || string;\n                if (line_cache && key && use_cache) {\n                    line_cache.set(key, {input: arg, raw: raw_string});\n                }\n                buffer.append(arg, line.index, line_settings, raw_string);\n            } catch (e) {\n                buffer.clear();\n                // don't display exception if exception throw in terminal\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL');\n                } else {\n                    alert_exception('[Internal Exception(process_line)]', e);\n                }\n            }\n            // is it work with unpromise that ignore undefined\n            return true;\n        }\n        // ---------------------------------------------------------------------\n        // :: Update terminal lines\n        // ---------------------------------------------------------------------\n        function redraw(options) {\n            options = $.extend({}, {\n                // should be used when single line is updated\n                update: false,\n                // should be used if you want to scroll to bottom after redraw\n                scroll: true\n            }, options || {});\n            if (!options.update) {\n                command_line.resize(num_chars);\n                // we don't want reflow while processing lines\n                var detached_output = output.empty().detach();\n            }\n            try {\n                buffer.clear();\n                unpromise(lines.render(self.rows(), function(lines_to_show) {\n                    return lines_to_show.map(function(line) {\n                        return process_line(line);\n                    });\n                }), function() {\n                    self.flush(options);\n                    if (!options.update) {\n                        command_line.before(detached_output); // reinsert output\n                    }\n                    fire_event('onAfterRedraw');\n                });\n            } catch (e) {\n                if (is_function(settings.exceptionHandler)) {\n                    settings.exceptionHandler.call(self, e, 'TERMINAL (redraw)');\n                } else {\n                    alert_exception('[redraw]', e);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function limit output lines based on outputLimit option\n        // ---------------------------------------------------------------------\n        function limit_lines() {\n            if (settings.outputLimit >= 0) {\n                var limit;\n                if (settings.outputLimit === 0) {\n                    limit = self.rows();\n                } else {\n                    limit = settings.outputLimit;\n                }\n                var $lines = output.find('> div > div');\n                if ($lines.length + 1 > limit) {\n                    var max = $lines.length - limit + 1;\n                    var for_remove = $lines.slice(0, max);\n                    // you can't get parent if you remove the\n                    // element so we first get the parent\n                    var parents = for_remove.parent();\n                    for_remove.remove();\n                    parents.each(function() {\n                        var $self = $(this);\n                        if ($self.is(':empty')) {\n                            unmount($self);\n                            // there can be divs inside parent that\n                            // was not removed\n                            $self.remove();\n                        }\n                    });\n                    lines.limit_snapshot(max);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display user greetings or terminal signature\n        // ---------------------------------------------------------------------\n        function show_greetings() {\n            if (settings.greetings === undefined) {\n                // signature have ascii art so it's not suite for screen readers\n                self.echo(self.signature, {finalize: a11y_hide, formatters: false});\n            } else if (settings.greetings) {\n                var type = typeof settings.greetings;\n                if (type === 'string') {\n                    self.echo(settings.greetings);\n                } else if (type === 'function') {\n                    self.echo(function() {\n                        try {\n                            return settings.greetings.call(self, self.echo);\n                        } catch (e) {\n                            settings.greetings = null;\n                            display_exception(e, 'greetings');\n                        }\n                    });\n                } else {\n                    self.error(strings().wrongGreetings);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Display prompt and last command\n        // ---------------------------------------------------------------------\n        function echo_command(command) {\n            if (typeof command === 'undefined') {\n                command = self.get_command();\n            }\n            // true will return last rendered string\n            var prompt = command_line.prompt(true);\n            var mask = command_line.mask();\n            switch (typeof mask) {\n                case 'string':\n                    command = command.replace(/./g, mask);\n                    break;\n                case 'boolean':\n                    if (mask) {\n                        command = command.replace(/./g, settings.maskChar);\n                    } else {\n                        command = $.terminal.escape_formatting(command);\n                    }\n                    break;\n            }\n            var options = {\n                exec: false,\n                formatters: false,\n                finalize: function finalize(div) {\n                    a11y_hide(div.addClass('terminal-command'));\n                    fire_event('onEchoCommand', [div, command]);\n                }\n            };\n            command = $.terminal.apply_formatters(command, {command: true});\n            self.echo(prompt + command, options);\n        }\n        // ---------------------------------------------------------------------\n        function have_scrollbar() {\n            return fill.outerWidth() !== self.outerWidth();\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function that restore state. Call import_view or exec\n        // ---------------------------------------------------------------------\n        function restore_state(spec) {\n            // spec [terminal_id, state_index, command]\n            var terminal = terminals.get()[spec[0]];\n            if (!terminal) {\n                throw new $.terminal.Exception(strings().invalidTerminalId);\n            }\n            var command_idx = spec[1];\n            if (save_state[command_idx]) { // state exists\n                terminal.import_view(save_state[command_idx]);\n            } else {\n                // restore state\n                change_hash = false;\n                var command = spec[2];\n                if (command) {\n                    terminal.exec(command).done(function() {\n                        change_hash = true;\n                        save_state[command_idx] = terminal.export_view();\n                    });\n                }\n            }\n            /*if (spec[3].length) {\n                restore_state(spec[3]);\n            }*/\n        }\n        // ---------------------------------------------------------------------\n        function make_label_error(label) {\n            return function(e) {\n                self.error('[' + label + '] ' + (e.message || e)).resume();\n            };\n        }\n        // ---------------------------------------------------------------------\n        // :: Helper function\n        // ---------------------------------------------------------------------\n        function maybe_update_hash() {\n            if (change_hash) {\n                fire_hash_change = false;\n                location.hash = '#' + JSON.stringify(hash_commands);\n                setTimeout(function() {\n                    fire_hash_change = true;\n                }, 100);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Wrapper over interpreter, it implements exit and catches all\n        // :: exeptions from user code and displays them on the terminal\n        // ---------------------------------------------------------------------\n        var first_command = true;\n        var resume_callbacks = [];\n        function commands(command, silent, exec) {\n            function init_state() {\n                // execHash need first empty command too\n                if (settings.historyState || settings.execHash && exec) {\n                    if (!save_state.length) {\n                        // first command in first terminal don't have hash\n                        self.save_state();\n                    } else {\n                        self.save_state(null);\n                    }\n                }\n            }\n            // -----------------------------------------------------------------\n            function before_async_exec() {\n                // variables defined later in commands\n                if (!exec) {\n                    change_hash = true;\n                    if (settings.historyState) {\n                        self.save_state(command, false);\n                    }\n                    change_hash = saved_change_hash;\n                }\n            }\n            // -----------------------------------------------------------------\n            function after_exec() {\n                deferred.resolve();\n                fire_event('onAfterCommand', [command]);\n            }\n            // -----------------------------------------------------------------\n            function show(result) {\n                if (typeof result !== 'undefined') {\n                    display_object(result);\n                }\n                after_exec();\n                self.resume();\n            }\n            // -----------------------------------------------------------------\n            function is_animation_promise(ret) {\n                return is_function(ret.done || ret.then) && animating;\n            }\n            // -----------------------------------------------------------------\n            function invoke() {\n                // Call user interpreter function\n                var result = interpreter.interpreter.call(self, command, self);\n                before_async_exec();\n                if (result) {\n                    // auto pause/resume when user return promises\n                    // it should not pause when user return promise from read()\n                    if (!force_awake) {\n                        if (is_animation_promise(result)) {\n                            paused = true;\n                        } else {\n                            self.pause(settings.softPause);\n                        }\n                    }\n                    force_awake = false;\n                    var error = make_label_error('Command');\n                    // when for native Promise object work only in jQuery 3.x\n                    if (is_function(result.done || result.then)) {\n                        return unpromise(result, show, error);\n                    } else {\n                        return $.when(result).done(show).catch(error);\n                    }\n                } else {\n                    if (paused) {\n                        resume_callbacks.push(function() {\n                            // exec with resume/pause in user code\n                            after_exec();\n                        });\n                    } else {\n                        after_exec();\n                    }\n                    return deferred.promise();\n                }\n            }\n            // -----------------------------------------------------------------\n            // first command store state of the terminal before the command get\n            // executed\n            if (first_command) {\n                first_command = false;\n                init_state();\n            }\n            try {\n                // this callback can disable commands\n                if (fire_event('onBeforeCommand', [command]) === false) {\n                    return;\n                }\n                if (exec) {\n                    prev_exec_cmd = command.trim();\n                    prev_command = $.terminal.split_command(prev_exec_cmd);\n                } else {\n                    prev_command = $.terminal.split_command(command);\n                }\n                if (!ghost()) {\n                    // exec execute this function wihout the help of cmd plugin\n                    // that add command to history on enter\n                    if (exec && (is_function(settings.historyFilter) &&\n                                 settings.historyFilter(command) ||\n                                 command.match(settings.historyFilter))) {\n                        command_line.history().append(command);\n                    }\n                }\n                var interpreter = interpreters.top();\n                if (!silent && settings.echoCommand) {\n                    echo_command(command);\n                }\n                // new promise will be returned to exec that will resolve his\n                // returned promise\n                var deferred = new $.Deferred();\n                // we need to save sate before commands is deleyd because\n                // execute_extended_command disable it and it can be executed\n                // after delay\n                var saved_change_hash = change_hash;\n                if (command.match(/^\\s*login\\s*$/) && self.token(true)) {\n                    before_async_exec();\n                    if (self.level() > 1) {\n                        self.logout(true);\n                    } else {\n                        self.logout();\n                    }\n                    after_exec();\n                } else if (settings.exit && command.match(/^\\s*exit\\s*$/) &&\n                           !in_login) {\n                    before_async_exec();\n                    var level = self.level();\n                    if (level === 1 && self.get_token() || level > 1) {\n                        if (self.get_token(true)) {\n                            self.set_token(undefined, true);\n                        }\n                        self.pop();\n                    }\n                    after_exec();\n                } else if (settings.clear && command.match(/^\\s*clear\\s*$/) &&\n                           !in_login) {\n                    before_async_exec();\n                    self.clear();\n                    after_exec();\n                } else {\n                    var ret = invoke();\n                    if (ret) {\n                        return ret;\n                    }\n                }\n                return deferred.promise();\n            } catch (e) {\n                display_exception(e, 'USER', exec);\n                self.resume();\n                if (exec) {\n                    throw e;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: The logout function removes Storage, disables history and runs\n        // :: the login function. This function is called only when options.login\n        // :: function is defined. The check for this is in the self.pop method\n        // ---------------------------------------------------------------------\n        function global_logout() {\n            if (fire_event('onBeforeLogout', [], true) === false) {\n                return;\n            }\n            clear_loging_storage();\n            fire_event('onAfterlogout', [], true);\n            self.login(global_login_fn, true, initialize);\n        }\n        // ---------------------------------------------------------------------\n        function clear_loging_storage() {\n            var name = self.prefix_name(true) + '_';\n            storage.remove(name + 'token');\n            storage.remove(name + 'login');\n        }\n        // ---------------------------------------------------------------------\n        // :: Save the interpreter name for use with purge\n        // ---------------------------------------------------------------------\n        function maybe_append_name(interpreter_name) {\n            var storage_key = self.prefix_name() + '_interpreters';\n            var names = storage.get(storage_key);\n            if (names) {\n                names = JSON.parse(names);\n            } else {\n                names = [];\n            }\n            if ($.inArray(interpreter_name, names) === -1) {\n                names.push(interpreter_name);\n                storage.set(storage_key, JSON.stringify(names));\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Function enables history, sets prompt, runs interpreter function\n        // ---------------------------------------------------------------------\n        function prepare_top_interpreter(silent) {\n            var interpreter = interpreters.top();\n            var name = self.prefix_name(true);\n            if (!ghost()) {\n                maybe_append_name(name);\n            }\n            var login = self.login_name(true);\n            command_line.name(name + (login ? '_' + login : ''));\n            var prompt = interpreter.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            if (prompt !== command_line.prompt()) {\n                if (is_function(interpreter.prompt)) {\n                    // prevent flicker of old prompt until async prompt finishes\n                    command_line.prompt('');\n                }\n                command_line.prompt(interpreter.prompt);\n            }\n            if (typeof interpreter.history !== 'undefined') {\n                self.history().toggle(interpreter.history);\n            }\n            if ($.isPlainObject(interpreter.keymap)) {\n                command_line.keymap(null).keymap($.extend(\n                    {},\n                    terminal_init_keymap,\n                    $.omap(interpreter.keymap, function(name, fun) {\n                        return function() {\n                            var args = [].slice.call(arguments);\n                            try {\n                                return fun.apply(self, args);\n                            } catch (e) {\n                                display_exception(e, 'USER KEYMAP');\n                            }\n                        };\n                    })\n                ));\n            }\n            command_line.set('');\n            init_queue.resolve();\n            if (!silent && is_function(interpreter.onStart)) {\n                interpreter.onStart.call(self, self);\n            }\n        }\n        // ---------------------------------------------------------------------\n        function fire_event(name, args, skip_local) {\n            args = (args || []).concat([self]); // create new array\n            // even can be fired before interpreters is created\n            var top = interpreters && interpreters.top();\n            if (top && is_function(top[name]) && !skip_local) {\n                try {\n                    return top[name].apply(self, args);\n                } catch (e) {\n                    delete top[name];\n                    display_exception(e, name);\n                }\n            } else if (is_function(settings[name])) {\n                try {\n                    return settings[name].apply(self, args);\n                } catch (e) {\n                    settings[name] = null;\n                    display_exception(e, name);\n                }\n            }\n        }\n        var scroll_to_view = (function() {\n            function scroll_to_view(visible) {\n                if (!visible) {\n                    // try catch for Node.js unit tests\n                    try {\n                        self.scroll_to(self.find('.cmd-cursor-line'));\n                        return true;\n                    } catch (e) {\n                        return true;\n                    }\n                }\n            }\n            // we don't want debounce in Unit Tests\n            if (typeof global !== 'undefined' && typeof global.it === 'function') {\n                return scroll_to_view;\n            }\n            return debounce(scroll_to_view, 100, {\n                leading: true,\n                trailing: false\n            });\n        })();\n        // ---------------------------------------------------------------------\n        function make_cursor_visible() {\n            var cursor = self.find('.cmd-cursor-line');\n            return cursor.is_fully_in_viewport(self).then(scroll_to_view);\n        }\n        // ---------------------------------------------------------------------\n        function replace_hash(state) {\n            if (typeof history !== 'undefined' && history.replaceState) {\n                var new_hash = '#' + JSON.stringify(state);\n                var url = location.href.replace(/#.*$/, new_hash);\n                history.replaceState(null, '', url);\n            }\n        }\n        // ---------------------------------------------------------------------\n        function hashchange() {\n            if (fire_hash_change && settings.execHash) {\n                try {\n                    if (location.hash) {\n                        var hash = location.hash.replace(/^#/, '');\n                        hash_commands = JSON.parse(decodeURIComponent(hash));\n                    } else {\n                        hash_commands = [];\n                    }\n                    if (hash_commands.length) {\n                        restore_state(hash_commands[hash_commands.length - 1]);\n                    } else if (save_state[0]) {\n                        self.import_view(save_state[0]);\n                    }\n                } catch (e) {\n                    display_exception(e, 'TERMINAL');\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function initialize() {\n            prepare_top_interpreter();\n            show_greetings();\n            if (lines.length) {\n                // for case when showing long error before init\n                if (echo_delay.length) {\n                    // for case when greetting is async function\n                    $.when.apply($, echo_delay).then(self.refresh);\n                } else {\n                    self.refresh();\n                }\n            }\n            function next() {\n                onPause = $.noop;\n                if (!was_paused && self.enabled()) {\n                    // resume login if user didn't call pause in onInit\n                    // if user pause in onInit wait with exec until it\n                    // resume\n                    self.resume(true);\n                }\n            }\n            // was_paused flag is workaround for case when user call exec before\n            // login and pause in onInit, 3rd exec will have proper timing (will\n            // execute after onInit resume)\n            var was_paused = false;\n            if (is_function(settings.onInit)) {\n                onPause = function() { // local in terminal\n                    was_paused = true;\n                };\n                var ret;\n                try {\n                    ret = settings.onInit.call(self, self);\n                } catch (e) {\n                    display_exception(e, 'OnInit');\n                } finally {\n                    if (!is_promise(ret)) {\n                        next();\n                    } else {\n                        ret.then(next).catch(function(e) {\n                            display_exception(e, 'OnInit');\n                            next();\n                        });\n                    }\n                }\n            }\n            if (first_instance) {\n                first_instance = false;\n                $(window).on('hashchange', hashchange);\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: If Ghost don't store anything in localstorage\n        // ---------------------------------------------------------------------\n        function ghost() {\n            return in_login || command_line.mask() !== false;\n        }\n        // ---------------------------------------------------------------------\n        // :: Keydown event handler\n        // ---------------------------------------------------------------------\n        function user_key_down(e) {\n            var result, top = interpreters.top();\n            if (is_function(top.keydown)) {\n                result = top.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            } else if (is_function(settings.keydown)) {\n                result = settings.keydown.call(self, e, self);\n                if (result !== undefined) {\n                    return result;\n                }\n            }\n        }\n        var keymap = {\n            'CTRL+D': function(e, original) {\n                if (!in_login) {\n                    if (command_line.get() === '') {\n                        if (interpreters.size() > 1 ||\n                            is_function(global_login_fn)) {\n                            self.pop('');\n                        } else {\n                            self.resume();\n                        }\n                    } else {\n                        original();\n                    }\n                }\n                return false;\n            },\n            'CTRL+C': function() {\n                with_selection(function(html) {\n                    if (html === '') {\n                        var command = self.get_command();\n                        var position = self.get_position();\n                        command = command.slice(0, position) + '^C' +\n                            command.slice(position + 2);\n                        echo_command(command);\n                        self.set_command('');\n                    } else {\n                        var clip = self.find('textarea');\n                        text_to_clipboard(clip, process_selected_html(html));\n                    }\n                });\n                return false;\n            },\n            'CTRL+L': function() {\n                self.clear();\n                return false;\n            },\n            'TAB': function(e, orignal) {\n                // TODO: move this to cmd plugin\n                //       add completion = array | function\n                //       !!! Problem complete more then one key need terminal\n                var top = interpreters.top(), completion, caseSensitive;\n                if (typeof top.caseSensitiveAutocomplete !== 'undefined') {\n                    caseSensitive = top.caseSensitiveAutocomplete;\n                } else {\n                    caseSensitive = settings.caseSensitiveAutocomplete;\n                }\n                if (settings.completion &&\n                    get_type(settings.completion) !== 'boolean' &&\n                    top.completion === undefined) {\n                    completion = settings.completion;\n                } else {\n                    completion = top.completion;\n                }\n                if (completion === 'settings') {\n                    completion = settings.completion;\n                }\n                function resolve(commands) {\n                    // local copy\n                    commands = commands.slice();\n                    // default commands should not match for arguments\n                    if (!self.before_cursor(false).match(/\\s/)) {\n                        if (settings.clear && $.inArray('clear', commands) === -1) {\n                            commands.push('clear');\n                        }\n                        if (settings.exit && $.inArray('exit', commands) === -1) {\n                            commands.push('exit');\n                        }\n                    }\n                    self.complete(commands, {\n                        echo: true,\n                        word: settings.wordAutocomplete,\n                        escape: settings.completionEscape,\n                        caseSensitive: caseSensitive,\n                        echoCommand: settings.doubleTabEchoCommand,\n                        doubleTab: settings.doubleTab\n                    });\n                }\n                if (completion) {\n                    switch (get_type(completion)) {\n                        case 'function':\n                            var string = self.before_cursor(settings.wordAutocomplete);\n                            if (completion.length === 3) {\n                                var error = new Error(strings().comletionParameters);\n                                display_exception(error, 'USER');\n                                return false;\n                            }\n                            var result = completion.call(self, string, resolve);\n                            unpromise(result, resolve, make_label_error('Completion'));\n                            break;\n                        case 'array':\n                            resolve(completion);\n                            break;\n                        default:\n                            throw new $.terminal.Exception(strings().invalidCompletion);\n                    }\n                } else {\n                    orignal();\n                }\n                return false;\n            },\n            'CTRL+V': function(e, original) {\n                original(e);\n                self.oneTime(200, function() {\n                    self.scroll_to_bottom();\n                });\n                return true;\n            },\n            'CTRL+TAB': function() {\n                if (terminals.length() > 1) {\n                    self.focus(false);\n                    return false;\n                }\n            },\n            'PAGEDOWN': function() {\n                self.scroll(self.height());\n            },\n            'PAGEUP': function() {\n                self.scroll(-self.height());\n            }\n        };\n        // ---------------------------------------------------------------------\n        function key_down(e) {\n            // Prevent to be executed by cmd: CTRL+D, TAB, CTRL+TAB (if more\n            // then one terminal)\n            var result, i;\n            if (animating) {\n                return false;\n            }\n            if (self.enabled()) {\n                if (!self.paused()) {\n                    result = user_key_down(e);\n                    if (result !== undefined) {\n                        return result;\n                    }\n                    if (e.which !== 9) { // not a TAB\n                        tab_count = 0;\n                    }\n                } else {\n                    if (!settings.pauseEvents) {\n                        result = user_key_down(e);\n                        if (result !== undefined) {\n                            return result;\n                        }\n                    }\n                    if (e.which === 68 && e.ctrlKey) { // CTRL+D (if paused)\n                        if (settings.pauseEvents) {\n                            result = user_key_down(e);\n                            if (result !== undefined) {\n                                return result;\n                            }\n                        }\n                        if (requests.length) {\n                            for (i = requests.length; i--;) {\n                                var r = requests[i];\n                                if (r.readyState !== 4) {\n                                    try {\n                                        r.abort();\n                                    } catch (error) {\n                                        if (is_function(settings.exceptionHandler)) {\n                                            settings.exceptionHandler.call(\n                                                self,\n                                                e,\n                                                'AJAX ABORT'\n                                            );\n                                        } else {\n                                            self.error(strings().ajaxAbortError);\n                                        }\n                                    }\n                                }\n                            }\n                            requests = [];\n                        }\n                        self.resume();\n                    }\n                    return false;\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        function key_press(e) {\n            var top = interpreters.top();\n            if (enabled && (!paused || !settings.pauseEvents)) {\n                if (is_function(top.keypress)) {\n                    return top.keypress.call(self, e, self);\n                } else if (is_function(settings.keypress)) {\n                    return settings.keypress.call(self, e, self);\n                }\n            }\n        }\n        // ---------------------------------------------------------------------\n        // :: Typing animation generator\n        // ---------------------------------------------------------------------\n        function typed(finish_typing_fn) {\n            return function typing_animation(message, options) {\n                var formattted = $.terminal.apply_formatters(message);\n                animating = true;\n                var prompt = self.get_prompt();\n                var char_i = 0;\n                var len = $.terminal.length(formattted);\n                if (message.length > 0) {\n                    var new_prompt = '';\n                    if (options.prompt) {\n                        new_prompt = options.prompt;\n                    } else {\n                        self.set_prompt('');\n                    }\n                    var bottom = self.is_bottom();\n                    var interval = setInterval(function() {\n                        var chr = $.terminal.substring(formattted, char_i, char_i + 1);\n                        new_prompt += chr;\n                        self.set_prompt(new_prompt);\n                        if (chr === '\\n' && bottom) {\n                            self.scroll_to_bottom();\n                        }\n                        char_i++;\n                        if (char_i === len) {\n                            clearInterval(interval);\n                            setTimeout(function() {\n                                // swap command with prompt\n                                finish_typing_fn(message, prompt, options);\n                                animating = false;\n                            }, options.delay);\n                        }\n                    }, options.delay);\n                }\n            };\n        }\n        // ---------------------------------------------------------------------\n        var typed_prompt = typed(function(message, _, options) {\n            self.set_prompt(message);\n            options.finalize();\n        });\n        // ---------------------------------------------------------------------\n        var typed_message = typed(function(message, prompt, options) {\n            self.set_prompt(prompt);\n            self.echo(message, $.extend({}, options, {typing: false}));\n        });\n        // ---------------------------------------------------------------------\n        var typed_enter = (function() {\n            var helper = typed(function(message, prompt, options) {\n                self.set_prompt(prompt);\n                with_prompt(prompt, function(prompt) {\n                    self.echo(prompt + message, $.extend({}, options, {typing: false}));\n                }, self);\n            });\n            return function(prompt, message, options) {\n                return helper(message, $.extend({}, options, {prompt: prompt}));\n            };\n        })();\n        // ---------------------------------------------------------------------\n        function with_typing(kind, else_fn, finalize_fn) {\n            return function with_typing_fn(string, options) {\n                var d = new $.Deferred();\n                when_ready(function ready() {\n                    var locals = $.extend({\n                        typing: false,\n                        delay: settings.execAnimationDelay\n                    }, options);\n                    if (locals.typing) {\n                        if (typeof string !== 'string') {\n                            return d.reject(kind + ': Typing animation require string');\n                        }\n                        if (typeof locals.delay !== 'number' || isNaN(locals.delay)) {\n                            return d.reject(kind + ': Invalid argument, delay need to' +\n                                            ' be a number');\n                        }\n                        var p = self.typing(kind, locals.delay, string, locals);\n                        p.then(function() {\n                            d.resolve();\n                        });\n                    } else {\n                        else_fn(string, locals);\n                    }\n                    if (is_function(finalize_fn)) {\n                        finalize_fn(string, locals);\n                    }\n                });\n                if (options && options.typing) {\n                    return d.promise();\n                }\n                return self;\n            };\n        }\n        // ---------------------------------------------------------------------\n        function ready(queue) {\n            return function(fun) {\n                queue.add(fun);\n            };\n        }\n        // ---------------------------------------------------------------------\n        function strings() {\n            return $.extend(\n                {},\n                $.terminal.defaults.strings,\n                settings && settings.strings || {}\n            );\n        }\n        // ---------------------------------------------------------------------\n        var self = this;\n        if (this.length > 1) {\n            return this.each(function() {\n                $.fn.terminal.call(\n                    $(this),\n                    init_interpreter,\n                    $.extend({name: self.selector}, options)\n                );\n            });\n        }\n        var body_terminal;\n        if (self.is('body,html')) {\n            // terminal already exists on body\n            if (self.hasClass('full-screen-terminal')) {\n                var data = self.find('> .terminal').data('terminal');\n                if (data) {\n                    return data;\n                }\n            }\n            body_terminal = self;\n            self = $('<div/>').appendTo('body');\n            $('body').addClass('full-screen-terminal');\n        } else if (self.data('terminal')) {\n            // terminal already exists\n            return self.data('terminal');\n        }\n        // -----------------------------------------------------------------\n        // TERMINAL METHODS\n        // -----------------------------------------------------------------\n        var public_api = $.omap({\n            id: function() {\n                return terminal_id;\n            },\n            // -------------------------------------------------------------\n            // :: Clear the output\n            // -------------------------------------------------------------\n            clear: function() {\n                if (fire_event('onClear') !== false) {\n                    buffer.clear();\n                    lines.clear(function(i) {\n                        return get_node(i);\n                    });\n                    output[0].innerHTML = '';\n                    self.prop({scrollTop: 0});\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return an object that can be used with import_view to\n            // :: restore the state\n            // -------------------------------------------------------------\n            export_view: function() {\n                var user_export = fire_event('onExport');\n                user_export = user_export || {};\n                return $.extend({}, {\n                    focus: enabled,\n                    mask: command_line.mask(),\n                    prompt: self.get_prompt(),\n                    command: self.get_command(),\n                    position: command_line.position(),\n                    lines: clone(lines.data()),\n                    interpreters: interpreters.clone(),\n                    history: command_line.history().data\n                }, user_export);\n            },\n            // -------------------------------------------------------------\n            // :: Restore the state of the previous exported view\n            // -------------------------------------------------------------\n            import_view: function(view) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'import_view'));\n                }\n                fire_event('onImport', [view]);\n                when_ready(function ready() {\n                    self.set_prompt(view.prompt);\n                    self.set_command(view.command);\n                    command_line.position(view.position);\n                    command_line.mask(view.mask);\n                    if (view.focus) {\n                        self.focus();\n                    }\n                    lines.import(clone(view.lines).filter(function(line) {\n                        return line[0];\n                    }));\n                    if (view.interpreters instanceof Stack) {\n                        interpreters = view.interpreters;\n                    }\n                    if (settings.importHistory) {\n                        command_line.history().set(view.history);\n                    }\n                    redraw();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Store current terminal state\n            // -------------------------------------------------------------\n            save_state: function(command, ignore_hash, index) {\n                // save_state.push({view:self.export_view(), join:[]});\n                if (typeof index !== 'undefined') {\n                    save_state[index] = self.export_view();\n                } else {\n                    save_state.push(self.export_view());\n                }\n                if (!$.isArray(hash_commands)) {\n                    hash_commands = [];\n                }\n                if (command !== undefined && !ignore_hash) {\n                    var state = [\n                        terminal_id,\n                        save_state.length - 1,\n                        command\n                    ];\n                    hash_commands.push(state);\n                    maybe_update_hash();\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Execute a command, it will handle commands that do AJAX\n            // :: calls and have delays, if the second argument is set to\n            // :: true it will not echo executed command\n            // :: if second argument is object is used as options\n            // -------------------------------------------------------------\n            exec: function(command, silent, options) {\n                function invoke(silent) {\n                    // commands may return promise from user code\n                    // it will resolve exec promise when user promise\n                    // is resolved\n                    var ret = commands(command, silent, true);\n                    unpromise(ret, function() {\n                        // reset prev command for push called after exec\n                        // so push didn't get name/prompt from exec command\n                        prev_command = null;\n                        d.resolve();\n                    }, function() {\n                        prev_command = null;\n                        d.reject();\n                    });\n                }\n                if (silent && typeof silent === 'object') {\n                    options = silent;\n                    silent = null;\n                }\n                var exec_settings = $.extend({\n                    deferred: null,\n                    silent: false,\n                    typing: false,\n                    delay: settings.execAnimationDelay\n                }, options);\n                if (silent === null) {\n                    silent = exec_settings.silent;\n                }\n                if (!is_deferred(exec_settings.deferred)) {\n                    exec_settings.deferred = new $.Deferred();\n                }\n                var d = exec_settings.deferred;\n                cmd_ready(function ready() {\n                    if ($.isArray(command)) {\n                        (function recur() {\n                            var cmd = command.shift();\n                            if (cmd) {\n                                self.exec(cmd, silent, options).done(recur);\n                            } else {\n                                d.resolve();\n                            }\n                        })();\n                    } else if (paused) {\n                        // both commands executed here (resume will call Term::exec)\n                        // delay command multiple time\n                        delayed_commands.push([command, silent, exec_settings]);\n                    } else if (exec_settings.typing && !silent) {\n                        var delay = exec_settings.delay;\n                        paused = true;\n                        var ret = self.typing('enter', delay, command, {\n                            delay: delay\n                        });\n                        ret.then(function() {\n                            paused = false;\n                            invoke(true);\n                        });\n                        d.then(function() {\n                            paused = false;\n                        });\n                    } else {\n                        invoke(silent);\n                    }\n                });\n                // while testing it didn't executed last exec when using this\n                // for resolved deferred\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: bypass login function that wait untill you type user/pass\n            // :: it hide implementation detail\n            // -------------------------------------------------------------\n            autologin: function(user, token, silent) {\n                self.trigger('terminal.autologin', [user, token, silent]);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function changes the prompt of the command line to login\n            // :: with a password and calls the user login function with\n            // :: the callback that expects a token. The login is successful\n            // :: if the user calls it with value that is truthy\n            // -------------------------------------------------------------\n            login: function(auth, infinite, success, error) {\n                logins.push([].slice.call(arguments));\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'login'));\n                }\n                if (!is_function(auth)) {\n                    throw new Error(strings().loginIsNotAFunction);\n                }\n                in_login = true;\n                if (self.token() && self.level() === 1 && !autologin) {\n                    in_login = false; // logout will call login\n                    self.logout(true);\n                } else if (self.token(true) && self.login_name(true)) {\n                    in_login = false;\n                    if (is_function(success)) {\n                        success();\n                    }\n                    return self;\n                }\n                // don't store login data in history\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                function popUserPass() {\n                    while (self.level() > level) {\n                        self.pop(undefined, true);\n                    }\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }\n                // so we know how many times call pop\n                var level = self.level();\n                function login_callback(user, token, silent) {\n                    if (token) {\n                        popUserPass();\n                        var name = self.prefix_name(true) + '_';\n                        storage.set(name + 'token', token);\n                        storage.set(name + 'login', user);\n                        in_login = false;\n                        fire_event('onAfterLogin', [user, token]);\n                        if (is_function(success)) {\n                            // will be used internaly since users know\n                            // when login success (they decide when\n                            // it happen by calling the callback -\n                            // this funtion)\n                            success();\n                        }\n                    } else {\n                        if (infinite) {\n                            if (!silent) {\n                                self.error(strings().wrongPasswordTryAgain);\n                            }\n                            self.pop(undefined, true).set_mask(false);\n                        } else {\n                            in_login = false;\n                            if (!silent) {\n                                self.error(strings().wrongPassword);\n                            }\n                            self.pop(undefined, true).pop(undefined, true);\n                        }\n                        // used only to call pop in push\n                        if (is_function(error)) {\n                            error();\n                        }\n                    }\n                    if (self.paused()) {\n                        self.resume();\n                    }\n                    self.off('terminal.autologin');\n                }\n                self.on('terminal.autologin', function(event, user, token, silent) {\n                    if (fire_event('onBeforeLogin', [user, token]) === false) {\n                        return;\n                    }\n                    login_callback(user, token, silent);\n                });\n                self.push(function(user) {\n                    self.set_mask(settings.maskChar).push(function(pass) {\n                        try {\n                            if (fire_event('onBeforeLogin', [user, pass]) === false) {\n                                popUserPass();\n                                return;\n                            }\n                            self.pause();\n                            var ret = auth.call(self, user, pass, function(\n                                token,\n                                silent) {\n                                login_callback(user, token, silent);\n                            });\n                            if (ret && is_function(ret.then || ret.done)) {\n                                (ret.then || ret.done).call(ret, function(token) {\n                                    login_callback(user, token);\n                                }).catch(function(err) {\n                                    self.pop(undefined, true).pop(undefined, true);\n                                    self.error(err.message);\n                                    if (is_function(error)) {\n                                        error();\n                                    }\n                                    if (self.paused()) {\n                                        self.resume();\n                                    }\n                                    self.off('terminal.autologin');\n                                });\n                            }\n                        } catch (e) {\n                            display_exception(e, 'AUTH');\n                        }\n                    }, {\n                        prompt: strings().password + ': ',\n                        name: 'password'\n                    });\n                }, {\n                    prompt: strings().login + ': ',\n                    name: 'login'\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: User defined settings and defaults as well\n            // -------------------------------------------------------------\n            settings: function() {\n                return settings;\n            },\n            // -------------------------------------------------------------\n            // :: Get string before cursor\n            // -------------------------------------------------------------\n            before_cursor: function(word) {\n                var pos = command_line.position();\n                var command = command_line.get().slice(0, pos);\n                var cmd_strings = command.split(' ');\n                var string; // string before cursor that will be completed\n                if (word) {\n                    if (cmd_strings.length === 1) {\n                        string = cmd_strings[0];\n                    } else {\n                        var m = command.match(/(\\\\?\")/g);\n                        var double_quotes = m ? m.filter(function(chr) {\n                            return !chr.match(/^\\\\/);\n                        }).length : 0;\n                        m = command.match(/'/g);\n                        var single_quote = m ? m.length : 0;\n                        if (single_quote % 2 === 1) {\n                            string = command.match(/('[^']*)$/)[0];\n                        } else if (double_quotes % 2 === 1) {\n                            string = command.match(/(\"(?:[^\"]|\\\\\")*)$/)[0];\n                        } else {\n                            string = cmd_strings[cmd_strings.length - 1];\n                            for (i = cmd_strings.length - 1; i > 0; i--) {\n                                // treat escape space as part of the string\n                                var prev_string = cmd_strings[i - 1];\n                                if (prev_string[prev_string.length - 1] === '\\\\') {\n                                    string = cmd_strings[i - 1] + ' ' + string;\n                                } else {\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    string = command;\n                }\n                return string;\n            },\n            // -------------------------------------------------------------\n            // :: complete word or command based on array of words\n            // -------------------------------------------------------------\n            complete: function(commands, options) {\n                options = $.extend({\n                    word: true,\n                    echo: false,\n                    escape: true,\n                    echoCommand: false,\n                    caseSensitive: true,\n                    doubleTab: null\n                }, options || {});\n                var sensitive = options.caseSensitive;\n                // cursor can be in the middle of the command\n                // so we need to get the text before the cursor\n                var string = self.before_cursor(options.word).replace(/\\\\\"/g, '\"');\n                var quote = false;\n                if (options.word) {\n                    if (string.match(/^\"/)) {\n                        quote = '\"';\n                    } else if (string.match(/^'/)) {\n                        quote = \"'\";\n                    }\n                    if (quote) {\n                        string = string.replace(/^[\"']/, '');\n                    }\n                }\n                if (tab_count % 2 === 0) {\n                    command = self.before_cursor(options.word);\n                } else {\n                    var test = self.before_cursor(options.word);\n                    if (test !== command) {\n                        // command line changed between TABS - ignore\n                        return;\n                    }\n                }\n                var safe = $.terminal.escape_regex(string);\n                if (options.escape) {\n                    safe = safe.replace(/(\\\\+)([\"'() ])/g, function(_, slash, chr) {\n                        if (chr.match(/[()]/)) {\n                            return slash + '\\\\?\\\\' + chr;\n                        } else {\n                            return slash + '?' + chr;\n                        }\n                    });\n                }\n                function escape(string) {\n                    if (quote === '\"') {\n                        string = string.replace(/\"/g, '\\\\\"');\n                    }\n                    if (!quote && options.escape) {\n                        string = string.replace(/([\"'() ])/g, '\\\\$1');\n                    }\n                    return string;\n                }\n                function matched_strings() {\n                    var matched = [];\n                    for (var i = commands.length; i--;) {\n                        if (commands[i].match(/\\n/) && options.word) {\n                            warn('If you use commands with newlines you ' +\n                                 'should use word option for complete or' +\n                                 ' wordAutocomplete terminal option');\n                        }\n                        if (regex.test(commands[i])) {\n                            var match = escape(commands[i]);\n                            if (!sensitive && same_case(match)) {\n                                if (string.toLowerCase() === string) {\n                                    match = match.toLowerCase();\n                                } else if (string.toUpperCase() === string) {\n                                    match = match.toUpperCase();\n                                }\n                            }\n                            matched.push(match);\n                        }\n                    }\n                    return matched;\n                }\n                var flags = sensitive ? '' : 'i';\n                var regex = new RegExp('^' + safe, flags);\n                var matched = matched_strings();\n                function replace(input, replacement) {\n                    var text = self.get_command();\n                    var pos = self.get_position();\n                    var re = new RegExp('^' + input, 'i');\n                    var pre = text.slice(0, pos);\n                    var post = text.slice(pos);\n                    var to_insert = replacement.replace(re, '') + (quote || '');\n                    self.set_command(pre + to_insert + post);\n                    self.set_position((pre + to_insert).length);\n                }\n                if (matched.length === 1) {\n                    if (options.escape) {\n                        replace(safe, matched[0]);\n                    } else {\n                        self.insert(matched[0].replace(regex, '') + (quote || ''));\n                    }\n                    command = self.before_cursor(options.word);\n                    return true;\n                } else if (matched.length > 1) {\n                    if (++tab_count >= 2) {\n                        tab_count = 0;\n                        if (options.echo) {\n                            if (is_function(options.doubleTab)) {\n                                // new API old is keep for backward compatibility\n                                if (options.echoCommand) {\n                                    echo_command();\n                                }\n                                var ret = options.doubleTab.call(\n                                    self,\n                                    string,\n                                    matched,\n                                    echo_command\n                                );\n                                if (typeof ret === 'undefined') {\n                                    return true;\n                                } else {\n                                    return ret;\n                                }\n                            } else if (options.doubleTab !== false) {\n                                echo_command();\n                                var text = matched.slice().reverse().join('\\t\\t');\n                                self.echo($.terminal.escape_brackets(text), {\n                                    keepWords: true,\n                                    formatters: false\n                                });\n                            }\n                            return true;\n                        }\n                    } else {\n                        var common = common_string(escape(string), matched, sensitive);\n                        if (common) {\n                            replace(safe, common);\n                            command = self.before_cursor(options.word);\n                            return true;\n                        }\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return commands function from top interpreter\n            // -------------------------------------------------------------\n            commands: function() {\n                return interpreters.top().interpreter;\n            },\n            // -------------------------------------------------------------\n            // :: Low Level method that overwrites interpreter\n            // -------------------------------------------------------------\n            set_interpreter: function(user_intrp, login) {\n                var defer = $.Deferred();\n                function overwrite_interpreter() {\n                    self.pause(settings.softPause);\n                    make_interpreter(user_intrp, login, function(result) {\n                        self.resume();\n                        var top = interpreters.top();\n                        $.extend(top, result);\n                        prepare_top_interpreter(true);\n                        defer.resolve();\n                    });\n                }\n                if (is_function(login)) {\n                    self.login(login, true, overwrite_interpreter);\n                } else if (get_type(user_intrp) === 'string' && login) {\n                    self.login(\n                        make_json_rpc_login(user_intrp, login),\n                        true,\n                        overwrite_interpreter\n                    );\n                } else {\n                    overwrite_interpreter();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Show user greetings or terminal signature\n            // -------------------------------------------------------------\n            greetings: function() {\n                show_greetings();\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return true if terminal is paused false otherwise\n            // -------------------------------------------------------------\n            paused: function() {\n                return paused;\n            },\n            // -------------------------------------------------------------\n            // :: Pause the terminal, it should be used for ajax calls\n            // -------------------------------------------------------------\n            pause: function(visible) {\n                cmd_ready(function ready() {\n                    onPause();\n                    paused = true;\n                    command_line.disable(visible || is_android);\n                    if (!visible) {\n                        command_line.find('.cmd-prompt').hidden();\n                    }\n                    fire_event('onPause');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Resume the previously paused terminal\n            // -------------------------------------------------------------\n            resume: function(silent) {\n                cmd_ready(function ready() {\n                    paused = false;\n                    if (enabled && terminals.front() === self) {\n                        command_line.enable(silent);\n                    }\n                    command_line.find('.cmd-prompt').visible();\n                    var original = delayed_commands;\n                    delayed_commands = [];\n                    for (var i = 0; i < original.length; ++i) {\n                        self.exec.apply(self, original[i]);\n                    }\n                    self.trigger('resume');\n                    var fn = resume_callbacks.shift();\n                    if (fn) {\n                        fn();\n                    }\n                    self.scroll_to_bottom();\n                    fire_event('onResume');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of characters that fit into the width of\n            // :: the terminal\n            // -------------------------------------------------------------\n            cols: function() {\n                if (settings.numChars) {\n                    return settings.numChars;\n                }\n                if (!num_chars || num_chars === 1000) {\n                    num_chars = get_num_chars(self, char_size);\n                }\n                return num_chars;\n            },\n            // -------------------------------------------------------------\n            // :: Return the number of lines that fit into the height of the\n            // :: terminal\n            // -------------------------------------------------------------\n            rows: function() {\n                if (settings.numRows) {\n                    return settings.numRows;\n                }\n                if (!num_rows) {\n                    num_rows = get_num_rows(self, char_size);\n                }\n                return num_rows;\n            },\n            // -------------------------------------------------------------\n            // :: Return the History object\n            // -------------------------------------------------------------\n            history: function() {\n                return command_line.history();\n            },\n            // -------------------------------------------------------------\n            // :: Return size of the terminal instance\n            // -------------------------------------------------------------\n            geometry: function() {\n                var style = window.getComputedStyle(self[0]);\n                function padding(name) {\n                    return parseInt(style.getPropertyValue('padding-' + name), 10) || 0;\n                }\n                var left = padding('left');\n                var right = padding('right');\n                var top = padding('top');\n                var bottom = padding('bottom');\n                return {\n                    terminal: {\n                        padding: {\n                            left: left,\n                            right: right,\n                            top: top,\n                            bottom: bottom\n                        },\n                        width: old_width + left + right,\n                        height: old_height + top + bottom\n                    },\n                    char: char_size,\n                    cols: this.cols(),\n                    rows: this.rows()\n                };\n            },\n            // -------------------------------------------------------------\n            // :: toggle recording of history state\n            // -------------------------------------------------------------\n            history_state: function(toggle) {\n                function run() {\n                    settings.historyState = true;\n                    if (!save_state.length) {\n                        self.save_state();\n                    } else if (terminals.length() > 1) {\n                        self.save_state(null);\n                    }\n                }\n                if (toggle) {\n                    // if set to true and if set from user command we need\n                    // not to include the command\n                    if (typeof window.setImmediate === 'undefined') {\n                        setTimeout(run, 0);\n                    } else {\n                        setImmediate(run);\n                    }\n                } else {\n                    settings.historyState = false;\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: clear the history state\n            // -------------------------------------------------------------\n            clear_history_state: function() {\n                hash_commands = [];\n                save_state = [];\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Switch to the next terminal\n            // -------------------------------------------------------------\n            next: function() {\n                if (terminals.length() === 1) {\n                    return self;\n                } else {\n                    terminals.front().disable();\n                    var next = terminals.rotate().enable();\n                    // 50 provides buffer in viewport\n                    var x = next.offset().top - 50;\n                    $('html,body').animate({scrollTop: x}, 500);\n                    try {\n                        trigger_terminal_change(next);\n                    } catch (e) {\n                        display_exception(e, 'onTerminalChange');\n                    }\n                    return next;\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Make the terminal in focus or blur depending on the first\n            // :: argument. If there is more then one terminal it will\n            // :: switch to next one, if the second argument is set to true\n            // :: the events will be not fired. Used on init\n            // -------------------------------------------------------------\n            focus: function(toggle, silent) {\n                cmd_ready(function ready() {\n                    if (terminals.length() === 1) {\n                        if (toggle === false) {\n                            self.disable(silent);\n                        } else {\n                            self.enable(silent);\n                        }\n                    } else if (toggle === false) {\n                        self.next();\n                    } else {\n                        var front = terminals.front();\n                        if (front !== self) {\n                            // there should be only from terminal enabled but tests\n                            // sometime fail because there where more them one\n                            // where cursor have blink class\n                            terminals.forEach(function(terminal) {\n                                if (terminal !== self && terminal.enabled()) {\n                                    terminal.disable(silent);\n                                }\n                            });\n                            if (!silent) {\n                                try {\n                                    trigger_terminal_change(self);\n                                } catch (e) {\n                                    display_exception(e, 'onTerminalChange');\n                                }\n                            }\n                        }\n                        terminals.set(self);\n                        self.enable(silent);\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable/Enable terminal that can be enabled by click\n            // -------------------------------------------------------------\n            freeze: function(freeze) {\n                when_ready(function ready() {\n                    if (freeze) {\n                        self.disable();\n                        frozen = true;\n                    } else {\n                        frozen = false;\n                        self.enable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: check if terminal is frozen\n            // -------------------------------------------------------------\n            frozen: function() {\n                return frozen;\n            },\n            // -------------------------------------------------------------\n            // :: Enable the terminal\n            // -------------------------------------------------------------\n            enable: function(silent) {\n                if (!enabled && !frozen) {\n                    if (num_chars === undefined) {\n                        // enabling first time\n                        self.resize();\n                    }\n                    cmd_ready(function ready() {\n                        var ret;\n                        if (!silent && !enabled) {\n                            fire_event('onFocus');\n                        }\n                        if (!silent && ret === undefined || silent) {\n                            enabled = true;\n                            if (!self.paused()) {\n                                command_line.enable(true);\n                            }\n                        }\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: function clear formatting cache if you don't longer need it\n            // :: cache is used if option useCache is set to true\n            // -------------------------------------------------------------\n            clear_cache: 'Map' in root ? function() {\n                buffer.clear_cache();\n                line_cache.clear();\n                return self;\n            } : function() {\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Disable the terminal\n            // -------------------------------------------------------------\n            disable: function(silent) {\n                cmd_ready(function ready() {\n                    var ret;\n                    if (!silent && enabled) {\n                        ret = fire_event('onBlur');\n                    }\n                    if (!silent && ret === undefined || silent) {\n                        enabled = false;\n                        command_line.disable();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if the terminal is enabled\n            // -------------------------------------------------------------\n            enabled: function() {\n                return enabled;\n            },\n            // -------------------------------------------------------------\n            // :: Return the terminal signature depending on the size of the terminal\n            // -------------------------------------------------------------\n            signature: function() {\n                var cols = self.cols();\n                for (var i = signatures.length; i--;) {\n                    var lengths = signatures[i].map(function(line) {\n                        return line.length;\n                    });\n                    if (Math.max.apply(null, lengths) <= cols) {\n                        return signatures[i].join('\\n') + '\\n';\n                    }\n                }\n                return '';\n            },\n            // -------------------------------------------------------------\n            // :: Return the version number\n            // -------------------------------------------------------------\n            version: function() {\n                return $.terminal.version;\n            },\n            // -------------------------------------------------------------\n            // :: Return actual command line object (jquery object with cmd\n            // :: methods)\n            // -------------------------------------------------------------\n            cmd: function() {\n                return command_line;\n            },\n            // -------------------------------------------------------------\n            // :: Return the current command entered by terminal\n            // -------------------------------------------------------------\n            get_command: function() {\n                return command_line.get();\n            },\n            // -------------------------------------------------------------\n            // :: better API than echo_command that supports animation\n            // -------------------------------------------------------------\n            enter: with_typing('enter', echo_command),\n            // -------------------------------------------------------------\n            // :: Change the command line to the new one\n            // -------------------------------------------------------------\n            set_command: function(command, silent) {\n                when_ready(function ready() {\n                    // TODO: refactor to use options - breaking change\n                    if (typeof command !== 'string') {\n                        command = JSON.stringify(command);\n                    }\n                    command_line.set(command, undefined, silent);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change position of the command line\n            // -------------------------------------------------------------\n            set_position: function(position, relative) {\n                when_ready(function ready() {\n                    command_line.position(position, relative);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return position of the command line\n            // -------------------------------------------------------------\n            get_position: function() {\n                return command_line.position();\n            },\n            // -------------------------------------------------------------\n            // :: Insert text into the command line after the cursor\n            // -------------------------------------------------------------\n            insert: function(string, stay) {\n                if (typeof string === 'string') {\n                    when_ready(function ready() {\n                        var bottom = self.is_bottom();\n                        command_line.insert(string, stay);\n                        if (settings.scrollOnEcho || bottom) {\n                            self.scroll_to_bottom();\n                        }\n                    });\n                    return self;\n                } else {\n                    throw new Error(sprintf(strings().notAString, 'insert'));\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Set the prompt of the command line\n            // -------------------------------------------------------------\n            set_prompt: with_typing('prompt', function(prompt) {\n                if (is_function(prompt)) {\n                    command_line.prompt(function(callback) {\n                        return prompt.call(self, callback, self);\n                    });\n                } else {\n                    command_line.prompt(prompt);\n                }\n            }, function(prompt) {\n                interpreters.top().prompt = prompt;\n            }),\n            // -------------------------------------------------------------\n            // :: Return the prompt used by the terminal\n            // -------------------------------------------------------------\n            get_prompt: function() {\n                return interpreters.top().prompt;\n                // command_line.prompt(); - can be a wrapper\n                //return command_line.prompt();\n            },\n            // -------------------------------------------------------------\n            // :: Enable or Disable mask depedning on the passed argument\n            // :: the mask can also be character (in fact it will work with\n            // :: strings longer then one)\n            // -------------------------------------------------------------\n            set_mask: function(mask) {\n                when_ready(function ready() {\n                    command_line.mask(mask === true ? settings.maskChar : mask);\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Return the ouput of the terminal as text\n            // :: the output may contain user terminal formatting\n            // -------------------------------------------------------------\n            get_output: function(raw) {\n                if (raw) {\n                    return lines.data();\n                } else {\n                    return lines.get_snapshot();\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Recalculate and redraw everything\n            // -------------------------------------------------------------\n            resize: function(width, height) {\n                if (!self.is(':visible')) {\n                    // delay resize if terminal not visible\n                    self.stopTime('resize');\n                    self.oneTime(500, 'resize', function() {\n                        self.resize(width, height);\n                    });\n                } else {\n                    if (width && height) {\n                        self.width(width);\n                        self.height(height);\n                    }\n                    width = self.width();\n                    height = self.height();\n                    if (typeof settings.numChars !== 'undefined' ||\n                        typeof settings.numRows !== 'undefined') {\n                        command_line.resize(settings.numChars);\n                        self.refresh();\n                        fire_event('onResize');\n                        return;\n                    }\n                    var new_num_chars = get_num_chars(self, char_size);\n                    var new_num_rows = get_num_rows(self, char_size);\n                    // only if number of chars changed\n                    if (new_num_chars !== num_chars ||\n                        new_num_rows !== num_rows) {\n                        self.clear_cache();\n                        num_chars = new_num_chars;\n                        num_rows = new_num_rows;\n                        command_line.resize(num_chars);\n                        self.refresh();\n                        fire_event('onResize');\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: redraw the terminal and invalidate cache\n            // -------------------------------------------------------------\n            refresh: function() {\n                if (char_size.width !== 0) {\n                    self[0].style.setProperty('--char-width', char_size.width);\n                }\n                self.clear_cache();\n                if (command) {\n                    command_line.resize();\n                }\n                redraw({\n                    scroll: false,\n                    update: true\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Flush the output to the terminal\n            // -------------------------------------------------------------\n            flush: function(options) {\n                options = $.extend({}, {\n                    update: false,\n                    scroll: true\n                }, options || {});\n                when_ready(function ready() {\n                    try {\n                        if (buffer.is_empty()) {\n                            return self;\n                        }\n                        var bottom = self.is_bottom();\n                        var scroll = (settings.scrollOnEcho && options.scroll) || bottom;\n                        var wrapper;\n                        // print all lines\n                        var first = true;\n                        var appending_to_partial = false;\n                        var partial = $();\n                        var snapshot;\n                        if (!options.update) {\n                            partial = self.find('.partial');\n                            snapshot = lines.get_partial();\n                        }\n                        // TODO: refactor buffer.flush(), there is way\n                        //       to many levels of abstractions in one place\n                        buffer.flush(function(data) {\n                            if (!data) {\n                                if (!partial.length) {\n                                    wrapper = $('<div/>');\n                                    snapshot = [];\n                                } else if (first) {\n                                    first = false;\n                                    appending_to_partial = true;\n                                    wrapper = partial;\n                                }\n                            } else if (is_function(data.finalize)) {\n                                if (scroll) {\n                                    wrapper.find('img').on('load', function() {\n                                        self.scroll_to_bottom();\n                                    });\n                                }\n                                // this is finalize function from echo\n                                if (options.update) {\n                                    lines.update_snapshot(data.index, snapshot);\n                                    var selector = '> div[data-index=' + data.index + ']';\n                                    var node = output.find(selector);\n                                    if (node.html() !== wrapper.html()) {\n                                        node.replaceWith(wrapper);\n                                    }\n                                } else {\n                                    wrapper.appendTo(output);\n                                    if (!partial.length) {\n                                        lines.make_snapshot(snapshot);\n                                    }\n                                }\n                                wrapper.attr('data-index', data.index);\n                                appending_to_partial = !data.newline;\n                                wrapper.toggleClass('partial', appending_to_partial);\n                                if (appending_to_partial) {\n                                    partial = wrapper;\n                                }\n                                data.finalize(wrapper);\n                            } else {\n                                var line = data.line;\n                                var div;\n                                if (typeof data.raw === 'string') {\n                                    if (appending_to_partial) {\n                                        snapshot[snapshot.length - 1] += data.raw;\n                                    } else {\n                                        snapshot.push(data.raw);\n                                    }\n                                }\n                                if (appending_to_partial) {\n                                    div = wrapper.children().last().append(line);\n                                    appending_to_partial = false;\n                                } else {\n                                    div = $('<div/>').html(line);\n                                    if (data.newline) {\n                                        div.addClass('cmd-end-line');\n                                    }\n                                    wrapper.append(div);\n                                }\n                                // width = '100%' does some weird extra magic\n                                // that makes the height correct. Any other\n                                // value doesn't work.\n                                div.css('width', '100%');\n                            }\n                        });\n                        var cmd_prompt = self.find('.cmd-prompt');\n                        var cmd_outer = self.find('.cmd');\n                        partial = self.find('.partial');\n                        var last_row;\n                        if (partial.length === 0) {\n                            cmd_prompt.css('margin-left', 0);\n                            cmd_outer.css('top', 0);\n                            command_line.__set_prompt_margin(0);\n                            last_row = self.find('.terminal-output div:last-child' +\n                                                 ' div:last-child');\n                            // check if the div is parital fix #695\n                            if (last_row.css('display') === 'inline-block') {\n                                last_row.css({\n                                    width: '100%',\n                                    display: ''\n                                });\n                            }\n                        } else {\n                            last_row = partial.children().last();\n                            // Remove width='100%' for two reasons:\n                            // 1. so we can measure the width right here\n                            // 2. so that the background of this last line of output\n                            //    doesn't occlude the first line of input to the right\n                            last_row.css({\n                                width: '',\n                                display: 'inline-block'\n                            });\n                            var last_row_rect = last_row[0].getBoundingClientRect();\n                            var partial_width = last_row_rect.width;\n                            // Shift command prompt up one line and to the right\n                            // enough so that it appears directly next to the\n                            // partially constructed output line\n                            cmd_prompt.css('margin-left', partial_width);\n                            cmd_outer.css('top', -last_row_rect.height);\n                            // Measure length of partial line in characters\n                            var char_width = self.geometry().char.width;\n                            var prompt_margin = Math.round(partial_width / char_width);\n                            command_line.__set_prompt_margin(prompt_margin);\n                        }\n                        limit_lines();\n                        fire_event('onFlush');\n                        var cmd_cursor = self.find('.cmd-cursor');\n                        var offset = self.find('.cmd').offset();\n                        var self_offset = self.offset();\n                        setTimeout(function() {\n                            css(self[0], {\n                                '--terminal-height': self.height(),\n                                '--terminal-x': offset.left - self_offset.left,\n                                '--terminal-y': offset.top - self_offset.top,\n                                '--terminal-scroll': self.prop('scrollTop')\n                            });\n                            // Firefox won't reflow the cursor automatically, so\n                            // hide it briefly then reshow it\n                            cmd_cursor.hide();\n                            setTimeout(function() {\n                                cmd_cursor.show();\n                            }, 0);\n                        }, 0);\n                        if (scroll) {\n                            self.scroll_to_bottom();\n                        }\n                    } catch (e1) {\n                        if (is_function(settings.exceptionHandler)) {\n                            try {\n                                settings.exceptionHandler.call(\n                                    self,\n                                    e1,\n                                    'TERMINAL (Flush)'\n                                );\n                            } catch (e2) {\n                                settings.exceptionHandler = $.noop;\n                                alert_exception('[exceptionHandler]', e2);\n                            }\n                        } else {\n                            alert_exception('[Flush]', e1);\n                        }\n                    } finally {\n                        buffer.clear();\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Update the output line - line number can be negative\n            // -------------------------------------------------------------\n            update: function(line, value, options) {\n                when_ready(function ready() {\n                    if (line < 0) {\n                        line = lines.length() + line; // yes +\n                    }\n                    if (!lines.valid_index(line)) {\n                        self.error('Invalid line number ' + line);\n                    } else if (value === null) {\n                        lines.update(line, null);\n                        output.find('[data-index=' + line + ']').remove();\n                    } else {\n                        value = preprocess_value(value, {\n                            update: true,\n                            line: line\n                        });\n                        if (value === false) {\n                            return self;\n                        }\n                        unpromise(value, function(value) {\n                            var ret = prepare_render(value, options);\n                            if (ret) {\n                                value = ret[0];\n                                options = ret[1];\n                            }\n                            options = lines.update(line, value, options);\n                            var next = process_line({\n                                value: value,\n                                index: line,\n                                options: options\n                            });\n                            // process_line can return a promise\n                            // value is function that resolve to promise\n                            unpromise(next, function() {\n                                // trigger flush even if next is undefined\n                                self.flush({\n                                    scroll: false,\n                                    update: true\n                                });\n                            });\n                        });\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: convenience method for removing selected line\n            // -------------------------------------------------------------\n            remove_line: function(line) {\n                return self.update(line, null);\n            },\n            // -------------------------------------------------------------\n            // :: return index of last line in case when you need to update\n            // :: after something is echo on the terminal\n            // -------------------------------------------------------------\n            last_index: function() {\n                return lines.length() - 1;\n            },\n            // -------------------------------------------------------------\n            // :: Print data to the terminal output. It can have options\n            // :: * flush - indicate that arg should be send to DOM\n            // :: * raw - indicate if it should handle input as html\n            // :: * finalize - function call with container div\n            // :: * keepWords - inform how to wrap text\n            // :: * formatters - inform function if it should use formatters\n            // ::   on input string - good to prevent XSS when you want\n            // ::   advanced server side controling of terminal\n            // :: you can echo: promise, function, strings array or string\n            // -------------------------------------------------------------\n            echo: function(arg, options) {\n                var arg_defined = arguments.length > 0;\n                var d = new $.Deferred();\n                function echo(arg) {\n                    try {\n                        var locals = $.extend({\n                            flush: true,\n                            exec: true,\n                            raw: settings.raw,\n                            finalize: $.noop,\n                            unmount: $.noop,\n                            delay: settings.execAnimationDelay,\n                            ansi: false,\n                            typing: false,\n                            keepWords: false,\n                            invokeMethods: settings.invokeMethods,\n                            onClear: null,\n                            formatters: true,\n                            allowedAttributes: settings.allowedAttributes,\n                            newline: true\n                        }, options || {});\n                        // finalize function is passed around and invoked\n                        // in terminal::flush after content is added to DOM\n                        (function(finalize) {\n                            locals.finalize = function(div) {\n                                if (locals.raw) {\n                                    div.addClass('raw');\n                                }\n                                if (locals.ansi) {\n                                    div.addClass('ansi');\n                                }\n                                try {\n                                    if (is_function(finalize)) {\n                                        finalize.call(self, div);\n                                    }\n                                    var $images = div.find('img');\n                                    $images.each(function() {\n                                        var self = $(this);\n                                        var img = new Image();\n                                        img.onerror = function() {\n                                            self.replaceWith(use_broken_image);\n                                        };\n                                        img.src = this.src;\n                                    });\n                                } catch (e) {\n                                    display_exception(e, 'USER:echo(finalize)');\n                                    finalize = null;\n                                }\n                            };\n                        })(locals.finalize);\n                        if (locals.flush) {\n                            // flush buffer if there was no flush after previous echo\n                            if (!buffer.empty()) {\n                                self.flush();\n                            }\n                        }\n                        if (fire_event('onBeforeEcho', [arg]) === false) {\n                            return;\n                        }\n                        if (locals.typing) {\n                            if (typeof arg !== 'string') {\n                                return d.reject('echo: Typing animation require string' +\n                                                ' or promise that resolve to string');\n                            }\n                            if (typeof locals.delay !== 'number' || isNaN(locals.delay)) {\n                                return d.reject('echo: Invalid argument, delay need to' +\n                                                ' be a number');\n                            }\n                            var p = self.typing('echo', locals.delay, arg, locals);\n                            p.then(function() {\n                                d.resolve();\n                            });\n                            return;\n                        }\n                        var value;\n                        if (typeof arg === 'function') {\n                            value = arg.bind(self);\n                        } else if (typeof arg === 'undefined') {\n                            if (arg_defined) {\n                                value = String(arg);\n                            } else {\n                                value = '';\n                            }\n                        } else {\n                            var ret = preprocess_value(arg, {});\n                            if (ret === false) {\n                                return self;\n                            }\n                            value = ret;\n                        }\n                        if (is_promise(value)) {\n                            echo_promise = true;\n                        }\n                        unpromise(value, function(value) {\n                            if (render(value, locals)) {\n                                return self;\n                            }\n                            var index = lines.length();\n                            var last_newline = lines.has_newline();\n                            if (!last_newline) {\n                                index--;\n                            }\n                            if (!locals.newline && value[value.length - 1] === '\\n') {\n                                // This adjusts the value, so that when it updates or\n                                // refresh the lines list it does the right thing.\n                                value = value.slice(0, -1);\n                                locals.newline = true;\n                            }\n                            var next = process_line({\n                                value: value,\n                                options: locals,\n                                index: index\n                            });\n                            // queue async functions in echo\n                            if (is_promise(next)) {\n                                echo_promise = true;\n                            }\n                            lines.push([value, locals]);\n                            unpromise(next, function() {\n                                // extended commands should be processed only\n                                // once in echo and not on redraw\n                                if (locals.flush) {\n                                    self.flush();\n                                    fire_event('onAfterEcho', [arg]);\n                                }\n                                echo_promise = false;\n                                var original = echo_delay;\n                                echo_delay = [];\n                                for (var i = 0; i < original.length; ++i) {\n                                    self.echo.apply(self, original[i]);\n                                }\n                            });\n                        });\n                    } catch (e) {\n                        // if echo throw exception we can't use error to\n                        // display that exception\n                        if (is_function(settings.exceptionHandler)) {\n                            settings.exceptionHandler.call(self, e, 'TERMINAL (echo)');\n                        } else {\n                            alert_exception('[Terminal.echo]', e);\n                        }\n                    }\n                }\n                if (echo_promise) {\n                    echo_delay.push([arg, options]);\n                } else {\n                    echo(arg);\n                }\n                if (options && options.typing) {\n                    return d.promise();\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            typing: function(type, delay, string, options) {\n                var d = new $.Deferred();\n                var settings;\n                var finish;\n                if (typeof options === 'object') {\n                    finish = options.finalize || $.noop;\n                    settings = $.extend({}, options, {\n                        delay: delay,\n                        finalize: done\n                    });\n                } else {\n                    finish = options || $.noop;\n                    settings = {\n                        delay: delay,\n                        finalize: done\n                    };\n                }\n                function done() {\n                    d.resolve();\n                    if (is_function(finish)) {\n                        finish.apply(self, arguments);\n                    }\n                }\n                when_ready(function ready() {\n                    if (['prompt', 'echo', 'enter'].indexOf(type) >= 0) {\n                        if (type === 'prompt') {\n                            typed_prompt(string, settings);\n                        } else if (type === 'echo') {\n                            typed_message(string, settings);\n                        } else if (type === 'enter') {\n                            with_prompt(self.get_prompt(), function(prompt) {\n                                typed_enter(prompt, string, settings);\n                            }, self);\n                        }\n                    } else {\n                        d.reject('Invalid type only `echo` and `prompt` are supported');\n                    }\n                });\n                return d.promise();\n            },\n            // -------------------------------------------------------------\n            // :: echo red text\n            // -------------------------------------------------------------\n            error: function(message, options) {\n                options = $.extend({}, options, {raw: false, formatters: false});\n                function format(string) {\n                    if (typeof string !== 'string') {\n                        string = String(string);\n                    }\n                    // quick hack to fix trailing backslash\n                    var str = $.terminal.escape_brackets(string).\n                        replace(/\\\\$/, '&#92;').\n                        replace(url_re, ']$1[[;;;terminal-error]');\n                    return '[[;;;terminal-error]' + str + ']';\n                }\n                if (typeof message === 'function') {\n                    return self.echo(function() {\n                        return format(message.call(self));\n                    }, options);\n                }\n                if (message && message.then) {\n                    message.then(function(string) {\n                        self.echo(format(string));\n                    }).catch(make_label_error('Echo Error'));\n                    return self;\n                }\n                return self.echo(format(message), options);\n            },\n            // -------------------------------------------------------------\n            // :: Display Exception on terminal\n            // -------------------------------------------------------------\n            exception: function(e, label) {\n                var message = exception_message(e);\n                if (label) {\n                    message = '&#91;' + label + '&#93;: ' + message;\n                }\n                if (message) {\n                    self.error(message, {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-message');\n                        },\n                        keepWords: true\n                    });\n                }\n                if (typeof e.fileName === 'string') {\n                    // display filename and line which throw exeption\n                    self.pause(settings.softPause);\n                    $.get(e.fileName, function(file) {\n                        var num = e.lineNumber - 1;\n                        var line = file.split('\\n')[num];\n                        if (line) {\n                            self.error('[' + e.lineNumber + ']: ' + line);\n                        }\n                        self.resume();\n                    }, 'text');\n                }\n                if (e.stack) {\n                    var stack = $.terminal.escape_brackets(e.stack);\n                    var output = stack.split(/\\n/g).map(function(trace) {\n                        // nested formatting will handle urls but that formatting\n                        // can be removed - this code was created before\n                        // that formatting existed (see commit ce01c3f5)\n                        return '[[;;;terminal-error]' +\n                            trace.replace(url_re, function(url) {\n                                return ']' + url + '[[;;;terminal-error]';\n                            }) + ']';\n                    }).join('\\n');\n                    self.echo(output, {\n                        finalize: function(div) {\n                            div.addClass('terminal-exception terminal-stack-trace');\n                        },\n                        formatters: false\n                    });\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Scroll Div that holds the terminal\n            // -------------------------------------------------------------\n            scroll: function(amount) {\n                var pos;\n                amount = Math.round(amount);\n                if (self.prop) { // work with jQuery > 1.6\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                } else {\n                    if (amount > self.prop('scrollTop') && amount > 0) {\n                        self.prop('scrollTop', 0);\n                    }\n                    pos = self.prop('scrollTop');\n                    self.scrollTop(pos + amount);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Exit all interpreters and logout. The function will throw\n            // :: exception if there is no login provided\n            // -------------------------------------------------------------\n            logout: function(local) {\n                if (in_login) {\n                    throw new Error(sprintf(strings().notWhileLogin, 'logout'));\n                }\n                when_ready(function ready() {\n                    if (local) {\n                        var login = logins.pop();\n                        self.set_token(undefined, true);\n                        self.login.apply(self, login);\n                    } else if (interpreters.size() === 1 && self.token()) {\n                        self.logout(true);\n                    } else {\n                        while (interpreters.size() > 1) {\n                            // pop will call global_logout that will call login\n                            // and size will be > 0; this is workaround the problem\n                            if (self.token()) {\n                                self.logout(true).pop().pop();\n                            } else {\n                                self.pop();\n                            }\n                        }\n                    }\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the token returned by callback function\n            // :: in login function. It does nothing (return undefined) if\n            // :: there is no login\n            // -------------------------------------------------------------\n            token: function(local) {\n                return storage.get(self.prefix_name(local) + '_token');\n            },\n            // -------------------------------------------------------------\n            // :: Function sets the token to the supplied value. This function\n            // :: works regardless of wherer settings.login is supplied\n            // -------------------------------------------------------------\n            set_token: function(token, local) {\n                var name = self.prefix_name(local) + '_token';\n                if (typeof token === 'undefined') {\n                    storage.remove(name);\n                } else {\n                    storage.set(name, token);\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Function get the token either set by the login method or\n            // :: by the set_token method.\n            // -------------------------------------------------------------\n            get_token: function(local) {\n                return self.token(local);\n            },\n            // -------------------------------------------------------------\n            // :: Function return Login name entered by the user\n            // -------------------------------------------------------------\n            login_name: function(local) {\n                return storage.get(self.prefix_name(local) + '_login');\n            },\n            // -------------------------------------------------------------\n            // :: Function returns the name of current interpreter\n            // -------------------------------------------------------------\n            name: function() {\n                return interpreters.top().name;\n            },\n            // -------------------------------------------------------------\n            // :: Function return prefix name for login/token\n            // -------------------------------------------------------------\n            prefix_name: function(local) {\n                var name = (settings.name ? settings.name + '_' : '') +\n                    terminal_id;\n                if (local && interpreters.size() > 1) {\n                    var local_name = interpreters.map(function(intrp) {\n                        return intrp.name || '';\n                    }).slice(1).join('_');\n                    if (local_name) {\n                        name += '_' + local_name;\n                    }\n                }\n                return name;\n            },\n            // -------------------------------------------------------------\n            // :: wrapper for common use case\n            // -------------------------------------------------------------\n            read: function(message, success, cancel) {\n                var options;\n                if (typeof arguments[1] === 'object') {\n                    options = $.extend({\n                        typing: false,\n                        delay: settings.execAnimationDelay,\n                        success: $.noop,\n                        cancel: $.noop\n                    }, arguments[1]);\n                } else {\n                    options = {\n                        typing: false,\n                        success: success || $.noop,\n                        cancel: cancel || $.noop\n                    };\n                }\n                if (options.typing) {\n                    var prompt = self.get_prompt();\n                    options.typing = false;\n                    return self.typing('prompt', options.delay, message).then(function() {\n                        return self.set_prompt(prompt).read(message, options);\n                    });\n                }\n                // return from read() should not pause terminal\n                force_awake = true;\n                var defer = jQuery.Deferred();\n                var read = false;\n                self.push(function(string) {\n                    read = true;\n                    defer.resolve(string);\n                    if (is_function(options.success)) {\n                        options.success(string);\n                    }\n                    self.pop();\n                    if (settings.history) {\n                        command_line.history().enable();\n                    }\n                }, {\n                    name: 'read',\n                    history: false,\n                    prompt: message || '',\n                    onExit: function() {\n                        if (!read) {\n                            defer.reject();\n                            if (is_function(options.cancel)) {\n                                options.cancel();\n                            }\n                        }\n                    }\n                });\n                if (settings.history) {\n                    command_line.history().disable();\n                }\n                return defer.promise();\n            },\n            // -------------------------------------------------------------\n            // :: Push a new interenter on the Stack\n            // -------------------------------------------------------------\n            push: function(interpreter, options) {\n                cmd_ready(function ready() {\n                    options = options || {};\n                    var defaults = {\n                        infiniteLogin: false\n                    };\n                    var push_settings = $.extend({}, defaults, options);\n                    if (!push_settings.name && prev_command) {\n                        // name the interpreter from last command\n                        push_settings.name = prev_command.name;\n                    }\n                    if (push_settings.prompt === undefined) {\n                        push_settings.prompt = (push_settings.name || '>') + ' ';\n                    }\n                    // names.push(options.name);\n                    var top = interpreters.top();\n                    if (top) {\n                        top.mask = command_line.mask();\n                    }\n                    var was_paused = paused;\n                    function init() {\n                        fire_event('onPush', [top, interpreters.top()]);\n                        prepare_top_interpreter();\n                    }\n                    //self.pause();\n                    make_interpreter(interpreter, options.login, function(ret) {\n                        // result is object with interpreter and completion properties\n                        interpreters.push($.extend({}, ret, push_settings));\n                        if (push_settings.completion === true) {\n                            if ($.isArray(ret.completion)) {\n                                interpreters.top().completion = ret.completion;\n                            } else if (!ret.completion) {\n                                interpreters.top().completion = false;\n                            }\n                        }\n                        if (push_settings.login) {\n                            var error;\n                            var type = get_type(push_settings.login);\n                            if (type === 'function') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    push_settings.login,\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            } else if (get_type(interpreter) === 'string' &&\n                                       type === 'string' || type === 'boolean') {\n                                error = push_settings.infiniteLogin ? $.noop : self.pop;\n                                self.login(\n                                    make_json_rpc_login(\n                                        interpreter,\n                                        push_settings.login\n                                    ),\n                                    push_settings.infiniteLogin,\n                                    init,\n                                    error\n                                );\n                            }\n                        } else {\n                            init();\n                        }\n                        if (!was_paused && self.enabled()) {\n                            self.resume();\n                        }\n                    });\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove the last interpreter from the Stack\n            // -------------------------------------------------------------\n            pop: function(string, silent) {\n                if (string !== undefined) {\n                    echo_command(string);\n                }\n                var token = self.token(true);\n                var top;\n                if (interpreters.size() === 1) {\n                    top = interpreters.top();\n                    if (settings.login) {\n                        if (!silent) {\n                            fire_event('onPop', [top, null]);\n                        }\n                        global_logout();\n                        fire_event('onExit');\n                    } else {\n                        self.error(strings().canExitError);\n                    }\n                } else {\n                    if (token) {\n                        clear_loging_storage();\n                    }\n                    var current = interpreters.pop();\n                    top = interpreters.top();\n                    prepare_top_interpreter();\n                    // restore mask\n                    self.set_mask(top.mask);\n                    if (!silent) {\n                        fire_event('onPop', [current, top]);\n                    }\n                    // we check in case if you don't pop from password interpreter\n                    if (in_login && self.get_prompt() !== strings().login + ': ') {\n                        in_login = false;\n                    }\n                    if (is_function(current.onExit)) {\n                        try {\n                            current.onExit.call(self, self);\n                        } catch (e) {\n                            current.onExit = $.noop;\n                            display_exception(e, 'onExit');\n                        }\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Change terminal option(s) at runtime\n            // -------------------------------------------------------------\n            option: function(object_or_name, value) {\n                if (typeof value === 'undefined') {\n                    if (typeof object_or_name === 'string') {\n                        return settings[object_or_name];\n                    } else if (typeof object_or_name === 'object') {\n                        $.each(object_or_name, function(key, value) {\n                            settings[key] = value;\n                        });\n                    }\n                } else {\n                    settings[object_or_name] = value;\n                    if (object_or_name.match(/^num(Chars|Rows)$/)) {\n                        redraw();\n                    }\n                }\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: invoke keydown shorcut\n            // -------------------------------------------------------------\n            invoke_key: function(shortcut) {\n                command_line.invoke_key(shortcut);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: change terminal keymap at runtime\n            // -------------------------------------------------------------\n            keymap: function(keymap, fn) {\n                if (arguments.length === 0) {\n                    return command_line.keymap();\n                }\n                if (typeof fn === 'undefined') {\n                    if (typeof keymap === 'string') {\n                        return command_line.keymap(keymap);\n                    } else if ($.isPlainObject(keymap)) {\n                        // argument is an object\n                        keymap = $.extend(\n                            {},\n                            terminal_init_keymap,\n                            $.omap(keymap || {}, function(key, fn) {\n                                if (!terminal_init_keymap[key]) {\n                                    return fn.bind(self);\n                                }\n                                return function(e, original) {\n                                    // new keymap function will get default as 2nd arg\n                                    return fn.call(self, e, function() {\n                                        return terminal_init_keymap[key](e, original);\n                                    });\n                                };\n                            })\n                        );\n                        command_line.keymap(null).keymap(keymap);\n                    }\n                } else if (typeof fn === 'function') {\n                    var key = keymap;\n                    if (!terminal_init_keymap[key]) {\n                        command_line.keymap(key, fn.bind(self));\n                    } else {\n                        command_line.keymap(key, function(e, original) {\n                            return fn.call(self, e, function() {\n                                return terminal_init_keymap[key](e, original);\n                            });\n                        });\n                    }\n                }\n            },\n            // -------------------------------------------------------------\n            // :: Return how deep you are in nested interpreters\n            // -------------------------------------------------------------\n            level: function() {\n                return interpreters.size();\n            },\n            // -------------------------------------------------------------\n            // :: Reinitialize the terminal\n            // -------------------------------------------------------------\n            reset: function() {\n                when_ready(function ready() {\n                    self.clear();\n                    while (interpreters.size() > 1) {\n                        interpreters.pop();\n                    }\n                    initialize();\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all local storage left by terminal, it will not\n            // :: logout you until you refresh the browser\n            // -------------------------------------------------------------\n            purge: function() {\n                when_ready(function ready() {\n                    var prefix = self.prefix_name() + '_';\n                    var names = storage.get(prefix + 'interpreters');\n                    if (names) {\n                        $.each(JSON.parse(names), function(_, name) {\n                            storage.remove(name + '_commands');\n                            storage.remove(name + '_token');\n                            storage.remove(name + '_login');\n                        });\n                    }\n                    command_line.purge();\n                    storage.remove(prefix + 'interpreters');\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: Remove all events and DOM nodes left by terminal, it will\n            // :: not purge the terminal so you will have the same state\n            // :: when you refresh the browser\n            // -------------------------------------------------------------\n            destroy: function() {\n                when_ready(function ready() {\n                    command_line.destroy().remove();\n                    self.resizer('unbind');\n                    self.touch_scroll('unbind');\n                    font_resizer.resizer('unbind').remove();\n                    $(document).unbind('.terminal_' + self.id());\n                    $(window).unbind('.terminal_' + self.id());\n                    self.unbind('click wheel mousewheel mousedown mouseup');\n                    self.removeData('terminal').removeClass('terminal').\n                        unbind('.terminal');\n                    if (settings.width) {\n                        self.css('width', '');\n                    }\n                    if (settings.height) {\n                        self.css('height', '');\n                    }\n                    $(window).off('blur', blur_terminal).\n                        off('focus', focus_terminal);\n                    self.find('.terminal-fill, .terminal-font').remove();\n                    self.stopTime();\n                    terminals.remove(terminal_id);\n                    if (visibility_observer) {\n                        if (visibility_observer.unobserve) {\n                            visibility_observer.unobserve(self[0]);\n                        } else {\n                            clearInterval(visibility_observer);\n                        }\n                    }\n                    var scroll_marker = self.find('.terminal-scroll-marker');\n                    if (is_bottom_observer) {\n                        is_bottom_observer.unobserve(scroll_marker[0]);\n                    }\n                    scroll_marker.remove();\n                    if (mutation_observer) {\n                        mutation_observer.disconnect();\n                    }\n                    if (!terminals.length()) {\n                        $(window).off('hashchange');\n                    }\n                    if (is_mobile) {\n                        self.off([\n                            'touchstart.terminal',\n                            'touchmove.terminal',\n                            'touchend.terminal'\n                        ].join(' '));\n                    }\n                    output.remove();\n                    wrapper.remove();\n                    if (body_terminal) {\n                        var $body = $(body_terminal);\n                        if ($body.attr('class') === 'full-screen-terminal') {\n                            $body.removeAttr('class');\n                        } else {\n                            $body.removeClass('full-screen-terminal');\n                        }\n                        self.remove();\n                    }\n                    defunct = true;\n                });\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: ref: https://stackoverflow.com/a/18927969/387194\n            // -------------------------------------------------------------\n            scroll_to: function(elem) {\n                var scroll = self.scrollTop() - self.offset().top + $(elem).offset().top;\n                self.scrollTop(scroll);\n                return self;\n            },\n            // -------------------------------------------------------------\n            scroll_to_bottom: function() {\n                var scrollHeight;\n                if (self.prop) {\n                    scrollHeight = self.prop('scrollHeight');\n                } else {\n                    scrollHeight = self.attr('scrollHeight');\n                }\n                self.scrollTop(scrollHeight);\n                return self;\n            },\n            // -------------------------------------------------------------\n            // :: return true if terminal div or body is at the bottom\n            // :: is use scrollBottomOffset option as margin for the check\n            // -------------------------------------------------------------\n            is_bottom: function() {\n                if (settings.scrollBottomOffset === -1) {\n                    return false;\n                } else if (typeof is_bottom_detected === 'boolean') {\n                    return is_bottom_detected;\n                } else {\n                    var scroll_height, scroll_top, height;\n                    scroll_height = self[0].scrollHeight;\n                    scroll_top = self[0].scrollTop;\n                    height = self[0].offsetHeight;\n                    var limit = scroll_height - settings.scrollBottomOffset;\n                    return scroll_top + height > limit;\n                }\n            },\n            // -------------------------------------------------------------\n            // :: create terminal object clone, used by pipe\n            // -------------------------------------------------------------\n            duplicate: function() {\n                var copy = $(self);\n                return $.extend(copy, public_api);\n            },\n            // -------------------------------------------------------------\n            // :: return output flush buffer\n            // -------------------------------------------------------------\n            get_output_buffer: function(options) {\n                var settings = $.extend({\n                    html: false\n                }, options);\n                var result = [];\n                var append = false;\n                buffer.forEach(function(data) {\n                    if (data) {\n                        if (is_function(data.finalize)) {\n                            append = !data.newline;\n                        } else {\n                            var output;\n                            if (settings.html) {\n                                output = data.line;\n                            } else {\n                                output = data.raw;\n                            }\n                            if (append) {\n                                var last = result.length - 1;\n                                result[last] += output;\n                            } else {\n                                result.push(output);\n                            }\n                        }\n                    }\n                });\n                if (settings.html) {\n                    return result.map(function(line) {\n                        return '<div>' + line + '</div>';\n                    }).join('\\n');\n                }\n                return result.join('\\n');\n            },\n            // -------------------------------------------------------------\n            // :: clear flush buffer\n            // -------------------------------------------------------------\n            clear_buffer: function() {\n                buffer.clear();\n                return self;\n            }\n        }, function(name, fun) {\n            // wrap all functions and display execptions\n            return function() {\n                if (defunct) {\n                    if (!settings.exceptionHandler) {\n                        throw new $.terminal.Exception(strings().defunctTerminal);\n                    }\n                }\n                try {\n                    return fun.apply(self, [].slice.apply(arguments));\n                } catch (e) {\n                    // exec catch by command (resume call exec)\n                    if (name !== 'exec' && name !== 'resume') {\n                        display_exception(e, e.type || 'TERMINAL', true);\n                    }\n                    if (!settings.exceptionHandler) {\n                        throw e;\n                    }\n                }\n            };\n        });\n        $.extend(self, public_api);\n        // -----------------------------------------------------------------\n        // :: INIT CODE\n        // -----------------------------------------------------------------\n        if (self.length === 0) {\n            var msg = sprintf(strings().invalidSelector);\n            throw new $.terminal.Exception(msg);\n        }\n        self.data('terminal', self);\n        // synchronize the echo calls (used for async functions) that need\n        // to be called in order\n        var echo_delay = [];\n        var echo_promise = false;\n        // var names = []; // stack if interpreter names\n        var prev_command; // used for name on the terminal if not defined\n        var prev_exec_cmd;\n        var tab_count = 0; // for tab completion\n        var output; // .terminal-output jquery object\n        var terminal_id = terminals.length();\n        var force_awake = false; // flag used to don't pause when user return read() call\n        var num_chars; // numer of chars in line\n        var num_rows; // number of lines that fit without scrollbar\n        var command; // for tab completion\n        var logins = new Stack(); // stack of logins\n        var command_queue = new DelayQueue();\n        var animating = false; // true on typing animation\n        var init_queue = new DelayQueue();\n        var when_ready = ready(init_queue);\n        var cmd_ready = ready(command_queue);\n        var is_bottom_detected;\n        var is_bottom_observer;\n        var in_login = false;// some Methods should not be called when login\n        // TODO: Try to use mutex like counter for pause/resume\n        var onPause = $.noop;// used to indicate that user call pause onInit\n        var old_width, old_height;\n        var delayed_commands = []; // used when exec commands while paused\n        var settings = $.extend(\n            {},\n            $.terminal.defaults,\n            {\n                name: self.selector,\n                exit: !!(options && options.login || !options)\n            },\n            options || {}\n        );\n        if (typeof settings.width === 'number') {\n            self.width(settings.width);\n        }\n        if (typeof settings.height === 'number') {\n            self.height(settings.height);\n        }\n        var char_size = get_char_size(self);\n        // this is needed when terminal have selector with --size that is not\n        // bare .terminal so fake terminal will not get the proper size #602\n        var need_char_size_recalculate = !terminal_ready(self);\n        // so it's the same as in TypeScript definition for options\n        delete settings.formatters;\n        // used to throw error when calling methods on destroyed terminal\n        var defunct = false;\n        // ---------------------------------------------------------------------\n        // :: FormatBuffer is used to to buffer the lines that echoed\n        // :: it have append function that have 2 options raw and finalize\n        // :: raw - will not encode the string and finalize if a function that\n        // :: will have div container of the line as first argument\n        // :: actuall echo to the terminal happen when calling flush\n        // ---------------------------------------------------------------------\n        var buffer = new FormatBuffer(function(options) {\n            return {\n                linksNoReferrer: settings.linksNoReferrer,\n                linksNoFollow: settings.linksNoFollow,\n                anyLinks: settings.anyLinks,\n                charWidth: char_size.width,\n                useCache: settings.useCache,\n                escape: false,\n                allowedAttributes: options.allowedAttributes || []\n            };\n        });\n        var lines = new OutputLines(function() {\n            return settings;\n        });\n        var storage = new StorageHelper(settings.memory);\n        var enabled = settings.enabled;\n        var frozen = false;\n        var paused = false;\n        var autologin = true; // set to false if onBeforeLogin return false\n        var interpreters;\n        var command_line;\n        var old_enabled;\n        var visibility_observer;\n        var mutation_observer;\n        // backward compatibility\n        if (settings.ignoreSystemDescribe === true) {\n            settings.describe = false;\n        }\n        // register ajaxSend for cancel requests on CTRL+D\n        $(document).bind('ajaxSend.terminal_' + self.id(), function(e, xhr) {\n            requests.push(xhr);\n        });\n        var wrapper = $('<div class=\"terminal-wrapper\"/>').appendTo(self);\n        $(broken_image).hide().appendTo(wrapper);\n        var font_resizer = $('<div class=\"terminal-font\">&nbsp;</div>').appendTo(self);\n        var fill = $('<div class=\"terminal-fill\"/>').appendTo(self);\n        output = $('<div>').addClass('terminal-output').attr('role', 'log')\n            .appendTo(wrapper);\n        self.addClass('terminal');\n        // before login event\n        if (settings.login && fire_event('onBeforeLogin') === false) {\n            autologin = false;\n        }\n        // create json-rpc authentication function\n        var base_interpreter;\n        if (typeof init_interpreter === 'string') {\n            base_interpreter = init_interpreter;\n        } else if (is_array(init_interpreter)) {\n            // first JSON-RPC\n            for (var i = 0, len = init_interpreter.length; i < len; ++i) {\n                if (typeof init_interpreter[i] === 'string') {\n                    base_interpreter = init_interpreter[i];\n                    break;\n                }\n            }\n        }\n        var global_login_fn;\n        if (is_function(settings.login)) {\n            global_login_fn = settings.login;\n        } else if (base_interpreter &&\n            (typeof settings.login === 'string' || settings.login === true)) {\n            global_login_fn = make_json_rpc_login(base_interpreter, settings.login);\n        }\n        terminals.append(self);\n        function focus_terminal() {\n            if (old_enabled) {\n                self.focus();\n                self.scroll_to_bottom();\n            }\n        }\n        // -------------------------------------------------------------------------------\n        function blur_terminal() {\n            old_enabled = enabled;\n            self.disable().find('.cmd textarea').trigger('blur', [true]);\n        }\n        // -------------------------------------------------------------------------------\n        function stringify_value(value) {\n            if (is_function(value)) {\n                value = value();\n            }\n            if (value && is_function(value.then)) {\n                return value.then(stringify_value);\n            }\n            if (get_type(value) !== 'string') {\n                if (is_function(settings.parseObject)) {\n                    var ret = settings.parseObject(value);\n                    if (get_type(ret) === 'string') {\n                        value = ret;\n                    }\n                } else if (is_array(value)) {\n                    value = $.terminal.columns(value, self.cols(), settings.tabs);\n                } else {\n                    value = String(value);\n                }\n            }\n            return value;\n        }\n        // -------------------------------------------------------------------------------\n        function context_callback_proxy(fn) {\n            if (fn.proxy) {\n                return fn;\n            }\n            var wrapper = function(callback) {\n                return fn.call(self, callback, self);\n            };\n            wrapper.proxy = true;\n            return wrapper;\n        }\n        // -------------------------------------------------------------------------------\n        // paste event is not testable in node\n        // istanbul ignore next\n        function paste_event(e) {\n            e = e.originalEvent;\n            // we don't care about browser that don't support clipboard data\n            // those browser simple will not have this feature normal paste\n            // is cross-browser and it's handled by cmd plugin\n            function is_type(item, type) {\n                return item.type.indexOf(type) !== -1;\n            }\n            function echo_image(image) {\n                self.echo('<img src=\"' + image + '\"/>', {raw: true});\n            }\n            function data_uri(blob) {\n                var URL = window.URL || window.webkitURL;\n                return URL.createObjectURL(blob);\n            }\n            function echo(object, ignoreEvents) {\n                if (!ignoreEvents) {\n                    var event = {\n                        target: self\n                    };\n                    if (typeof object === 'string') {\n                        event.text = object;\n                    } else if (object instanceof Blob) {\n                        event.image = data_uri(object);\n                    }\n                    var ret = fire_event('onPaste', [event]);\n                    if (ret) {\n                        if (is_function(ret.then || ret.done)) {\n                            return (ret.then || ret.done).call(ret, function(ret) {\n                                echo(ret, true);\n                            });\n                        } else {\n                            echo(ret, true);\n                        }\n                    } else if (ret !== false) {\n                        echo(event.image || event.text, true);\n                    }\n                } else if (object instanceof Blob) {\n                    echo_image(data_uri(object));\n                } else if (typeof object === 'string') {\n                    if (object.match(/^(data:|blob:)/)) {\n                        echo_image(object);\n                    } else {\n                        self.insert(object);\n                    }\n                }\n            }\n            if (e.clipboardData) {\n                if (self.enabled()) {\n                    var items = e.clipboardData.items;\n                    if (items) {\n                        for (var i = 0; i < items.length; i++) {\n                            if (is_type(items[i], 'image') && settings.pasteImage) {\n                                var blob = items[i].getAsFile();\n                                echo(blob);\n                            } else if (is_type(items[i], 'text/plain')) {\n                                items[i].getAsString(function(text) {\n                                    echo(text.replace(/\\r/g, ''));\n                                });\n                            }\n                        }\n                    } else if (e.clipboardData.getData) {\n                        var text = e.clipboardData.getData('text/plain');\n                        echo(text.replace(/\\r/g, ''));\n                    }\n                    return false;\n                }\n            }\n        }\n        $(document).on('paste.terminal_' + self.id(), paste_event);\n        var terminal_init_keymap = $.extend(\n            {},\n            keymap,\n            $.omap(settings.keymap || {}, function(key, fn) {\n                if (!keymap[key]) {\n                    return fn.bind(self);\n                }\n                return function(e, original) {\n                    // new keymap function will get default as 2nd argument\n                    return fn.call(self, e, function() {\n                        return keymap[key](e, original);\n                    });\n                };\n            })\n        );\n        make_interpreter(init_interpreter, settings.login, function(interpreter) {\n            if (settings.completion && typeof settings.completion !== 'boolean' ||\n                !settings.completion) {\n                // overwrite interpreter completion by global setting #224\n                // we use string to indicate that it need to be taken from settings\n                // so we are able to change it using option API method\n                interpreter.completion = 'settings';\n            }\n            var prompt = settings.prompt;\n            if (is_function(prompt)) {\n                prompt = context_callback_proxy(prompt);\n            }\n            interpreters = new Stack($.extend({}, settings.extra, {\n                name: settings.name,\n                prompt: prompt,\n                keypress: settings.keypress,\n                keydown: settings.keydown,\n                resize: settings.onResize,\n                greetings: settings.greetings,\n                mousewheel: settings.mousewheel,\n                history: settings.history,\n                keymap: terminal_init_keymap\n            }, interpreter));\n            // CREATE COMMAND LINE\n            command_line = $('<div/>').appendTo(wrapper).cmd({\n                tabindex: settings.tabindex,\n                mobileDelete: settings.mobileDelete,\n                mobileIngoreAutoSpace: settings.mobileIngoreAutoSpace,\n                prompt: global_login_fn ? false : prompt,\n                history: settings.memory ? 'memory' : settings.history,\n                historyFilter: settings.historyFilter,\n                historySize: settings.historySize,\n                caseSensitiveSearch: settings.caseSensitiveSearch,\n                onPaste: settings.onPaste,\n                width: '100%',\n                enabled: false,\n                charWidth: char_size.width,\n                keydown: key_down,\n                keymap: terminal_init_keymap,\n                clickTimeout: settings.clickTimeout,\n                holdTimeout: settings.holdTimeout,\n                holdRepeatTimeout: settings.holdRepeatTimeout,\n                repeatTimeoutKeys: settings.repeatTimeoutKeys,\n                allowedAttributes: settings.allowedAttributes,\n                keypress: key_press,\n                tabs: settings.tabs,\n                onPositionChange: function() {\n                    var args = [].slice.call(arguments);\n                    make_cursor_visible();\n                    fire_event('onPositionChange', args);\n                },\n                onCommandChange: function(command) {\n                    // resize is not triggered when insert called just after init\n                    //  and scrollbar appear\n                    if (old_width !== fill.width()) {\n                        // resizer handler will update old_width\n                        self.resizer();\n                    }\n                    fire_event('onCommandChange', [command]);\n                    make_cursor_visible();\n                },\n                commands: commands\n            });\n            function disable(e) {\n                if (is_mobile) {\n                    return;\n                }\n                e = e.originalEvent;\n                if (e) {\n                    // e.terget is body when click outside of context menu to close it\n                    // even if you click on terminal\n                    var node = document.elementFromPoint(e.clientX, e.clientY);\n                    if (!$(node).closest('.terminal').length && self.enabled()) {\n                        // we only need to disable when click outside of terminal\n                        // click on other terminal is handled by focus event\n                        self.disable();\n                    }\n                }\n            }\n            self.oneTime(100, function() {\n                $(document).bind('click.terminal_' + self.id(), disable).\n                    bind('contextmenu.terminal_' + self.id(), disable);\n            });\n            var $win = $(window);\n            // cordova application, if keyboard was open and we resume, it will be\n            // closed so we need to disable terminal so you can enable it with tap\n            document.addEventListener(\"resume\", function() {\n                self.disable();\n            });\n            // istanbul ignore next\n            if (is_mobile) {\n                (function() {\n                    self.addClass('terminal-mobile');\n                    var start;\n                    var move;\n                    var enabled;\n                    var SENSITIVITY = 3;\n                    var clip = command_line.clip();\n                    var HOLD_TIME = 200;\n                    var timer;\n                    clip.$node.off('touchstart.cmd');\n                    self.on('touchstart.terminal', function(e) {\n                        e = e.originalEvent;\n                        window.touch_event = e;\n                        if (e.target.tagName.toLowerCase() === 'a') {\n                            return;\n                        }\n                        if (!frozen && e.touches.length === 1) {\n                            enabled = self.enabled();\n                            var point = e.touches[0];\n                            start = {\n                                x: point.clientX,\n                                y: point.clientY\n                            };\n                            timer = setTimeout(function() {\n                                start = null;\n                            }, HOLD_TIME);\n                        }\n                    }).on('touchmove.terminal', function(e) {\n                        if (e.touches.length === 1 && start) {\n                            var point = e.touches[0];\n                            var diff_x = Math.abs(point.clientX - start.x);\n                            var diff_y = Math.abs(point.clientY - start.y);\n                            if (diff_x > SENSITIVITY || diff_y > SENSITIVITY) {\n                                move = true;\n                            }\n                        }\n                    }).on('touchend.terminal', function() {\n                        if (start) {\n                            clearTimeout(timer);\n                            if (!move) {\n                                if (!enabled) {\n                                    clip.focus();\n                                    self.focus();\n                                } else {\n                                    clip.blur();\n                                    self.disable();\n                                }\n                            }\n                        }\n                        move = false;\n                        start = null;\n                    });\n                })();\n            } else {\n                // work weird on mobile\n                $win.on('focus.terminal_' + self.id(), focus_terminal).\n                    on('blur.terminal_' + self.id(), blur_terminal);\n                // context is used to check if terminal should not scroll to bottom\n                // after right click on  e.g. img, canvas, a and then click to hide\n                // the menu. The problem is that right click on those elements don't\n                // move the textarea to show proper context menu like save as on images\n                // or open on links. See #644 bug\n                var was_ctx_event;\n                // detect mouse drag\n                (function() {\n                    var count = 0;\n                    var $target;\n                    var name = 'click_' + self.id();\n                    var textarea = self.find('.cmd textarea');\n                    function click() {\n                        if ($target.is('.terminal') ||\n                            $target.is('.terminal-wrapper')) {\n                            var len = self.get_command().length;\n                            self.set_position(len);\n                        } else if ($target.closest('.cmd-prompt').length) {\n                            self.set_position(0);\n                        }\n                        if (!textarea.is(':focus')) {\n                            textarea.focus();\n                        }\n                        reset();\n                    }\n                    function reset() {\n                        count = 0;\n                        $target = null;\n                    }\n                    var ignore_elements = '.terminal-output textarea,' +\n                        '.terminal-output input';\n                    self.mousedown(function(e) {\n                        if (!scrollbar_event(e, fill)) {\n                            $target = $(e.target);\n                        }\n                    }).mouseup(function() {\n                        if (was_ctx_event) {\n                            was_ctx_event = false;\n                            return;\n                        }\n                        if ($target && $target.closest(ignore_elements).length) {\n                            if (enabled) {\n                                self.disable();\n                            }\n                        } else if (get_selected_html() === '' && $target) {\n                            if (++count === 1) {\n                                if (!frozen) {\n                                    if (!enabled) {\n                                        self.focus();\n                                        self.scroll_to_bottom();\n                                    } else {\n                                        var timeout = settings.clickTimeout;\n                                        self.oneTime(timeout, name, click);\n                                        return;\n                                    }\n                                }\n                            } else {\n                                self.stopTime(name);\n                            }\n                        }\n                        reset();\n                    }).dblclick(function() {\n                        reset();\n                        self.stopTime(name);\n                    });\n                })();\n                (function() {\n                    var $clip = command_line.clip().$node;\n                    function is_context_event(e) {\n                        return e.type === 'mousedown' && e.buttons === 2 ||\n                            e.type === 'contextmenu';\n                    }\n                    var event_name;\n                    if ('oncontextmenu' in window) {\n                        event_name = 'contextmenu.terminal';\n                    } else {\n                        event_name = 'mousedown.terminal';\n                    }\n                    self.on(event_name, function(e) {\n                        was_ctx_event = get_selected_html() === '' && is_context_event(e);\n                        if (was_ctx_event) {\n                            var $target = $(e.target);\n                            if ($target.is('img,value,audio,object,canvas,a')) {\n                                return;\n                            }\n                            if (!self.enabled()) {\n                                self.enable();\n                            }\n                            var cmd_offset = command_line.offset();\n                            var cmd_rect = command_line[0].getBoundingClientRect();\n                            var self_offset = self.offset();\n                            var top_limit = self_offset.top - cmd_offset.top;\n                            var top = Math.max(e.pageY - cmd_offset.top - 20, top_limit);\n                            var left = e.pageX - cmd_offset.left - 20;\n                            var height = 4 * 14;\n                            var width = 5 * 14;\n                            var rect = self[0].getBoundingClientRect();\n                            // we need width without scrollbar\n                            var content_width = fill.outerWidth();\n                            // fix jumping when click near bottom or left edge #592\n                            var diff_h = (top + cmd_rect.top + height);\n                            diff_h = diff_h - rect.height - rect.top;\n                            var diff_w = (left + cmd_rect.left + width);\n                            // in Chrome scrollbar is added even when width\n                            // of textarea is smaller, adding 1px solved the issue\n                            diff_w = diff_w - content_width - rect.left;\n                            if (diff_h > 0) {\n                                height -= Math.ceil(diff_h);\n                            }\n                            if (diff_w > 0) {\n                                width -= Math.ceil(diff_w);\n                            }\n                            $clip.attr('style', [\n                                'left:' + left + 'px !important',\n                                'top:' + top + 'px !important',\n                                'width:' + width + 'px !important',\n                                'height:' + height + 'px !important'\n                            ].join(';'));\n                            if (!$clip.is(':focus')) {\n                                $clip.focus();\n                            }\n                            self.stopTime('textarea');\n                            self.oneTime(100, 'textarea', function() {\n                                var props = {\n                                    left: '',\n                                    top: '',\n                                    width: '',\n                                    height: ''\n                                };\n                                if (!is_css_variables_supported) {\n                                    var in_line = self.find('.cmd .cmd-cursor-line')\n                                        .prevUntil('.cmd-prompt').length;\n                                    props.top = in_line * 14 + 'px';\n                                }\n                                $clip.css(props);\n                            });\n                            self.stopTime('selection');\n                            self.everyTime(20, 'selection', function() {\n                                if ($clip[0].selection !== $clip[0].value) {\n                                    if (get_textarea_selection($clip[0])) {\n                                        clear_textarea_selection($clip[0]);\n                                        select(\n                                            self.find('.terminal-output')[0],\n                                            self.find('.cmd div:last-of-type')[0]\n                                        );\n                                        self.stopTime('selection');\n                                    }\n                                }\n                            });\n                        }\n                    });\n                })();\n                self.on('scroll', function() {\n                    var $textarea = self.find('textarea');\n                    var rect = self[0].getBoundingClientRect();\n                    var height = self[0].scrollHeight;\n                    var scrollTop = self.scrollTop();\n                    var diff = height - (scrollTop + rect.height);\n                    // if scrolled to bottom top need to be aligned with cursor line\n                    // done by CSS file using css variables\n                    if (diff === 0) {\n                        $textarea.css('top', '');\n                    } else {\n                        $textarea.css('top', -diff);\n                    }\n                });\n            }\n            self.on('click', 'a', function(e) {\n                var $this = $(this);\n                if ($this.closest('.terminal-exception').length) {\n                    var href = $this.attr('href');\n                    if (href.match(/:[0-9]+$/)) { // display line if specified\n                        e.preventDefault();\n                        print_line(href, self.cols());\n                    }\n                }\n                // refocus because links have tabindex in case where user want\n                // tab change urls, we can ignore this function on click\n                if (enabled) {\n                    self.find('.cmd textarea').focus();\n                }\n            });\n            function calculate_char_size() {\n                var width = char_size.width;\n                char_size = get_char_size(self);\n                if (width !== char_size.width) {\n                    command_line.option('charWidth', char_size.width).refresh();\n                }\n            }\n            resize();\n            function resize() {\n                if (self.is(':visible')) {\n                    var width = fill.width();\n                    var height = fill.height();\n                    if (need_char_size_recalculate) {\n                        need_char_size_recalculate = !terminal_ready(self);\n                        calculate_char_size();\n                    }\n                    // prevent too many calculations in IE\n                    if (old_height !== height || old_width !== width) {\n                        self.resize();\n                    }\n                    old_height = height;\n                    old_width = width;\n                }\n            }\n            function create_resizers() {\n                var options = {\n                    prefix: 'terminal-'\n                };\n                self.resizer('unbind').resizer(resize, options);\n                font_resizer.resizer('unbind').resizer(function() {\n                    calculate_char_size();\n                    self.resize();\n                }, options);\n            }\n            function bottom_detect(intersections) {\n                is_bottom_detected = intersections[0].intersectionRatio === 1;\n            }\n            function create_bottom_detect() {\n                if (window.IntersectionObserver) {\n                    var top = $('<div class=\"terminal-scroll-marker\"/>').appendTo(self);\n                    var marker = top;\n                    if (settings.scrollBottomOffset !== -1) {\n                        marker = $('<div/>').css({\n                            height: settings.scrollBottomOffset\n                        }).appendTo(top);\n                    }\n                    is_bottom_observer = new IntersectionObserver(bottom_detect, {\n                        root: self[0]\n                    });\n                    is_bottom_observer.observe(marker[0]);\n                }\n            }\n            // this observer can be added imedietely even if terminal is not in the DOM\n            // because both of the elements (root and target) are in same fragment\n            create_bottom_detect();\n            if (self.is(':visible')) {\n                create_resizers();\n            }\n            function observe_visibility() {\n                if (visibility_observer) {\n                    if (visibility_observer.unobserve) {\n                        visibility_observer.unobserve(self[0]);\n                    } else {\n                        clearInterval(visibility_observer);\n                    }\n                }\n                var was_enabled = self.enabled();\n                var visible = self.is(':visible');\n                if (was_enabled && !visible) {\n                    self.disable();\n                }\n                if (visible) {\n                    create_resizers();\n                } else {\n                    // hide terminal content until it's resized (and num chars calculated)\n                    wrapper.css('visibility', 'hidden');\n                }\n                function visibility_checker() {\n                    if (self.is(':visible') && !visible) {\n                        visible = true;\n                        create_resizers();\n                        calculate_char_size();\n                        resize();\n                        if (was_enabled) {\n                            self.enable();\n                        }\n                        wrapper.css('visibility', '');\n                    } else if (visible && !self.is(':visible')) {\n                        visible = false;\n                        was_enabled = $.terminal.active() === self && self.enabled();\n                        self.disable();\n                        wrapper.css('visibility', 'hidden');\n                    }\n                }\n                if (window.IntersectionObserver && self.css('position') !== 'fixed') {\n                    visibility_observer = new IntersectionObserver(visibility_checker, {\n                        root: null\n                    });\n                    visibility_observer.observe(self[0]);\n                } else {\n                    visibility_observer = setInterval(visibility_checker, 100);\n                }\n            }\n            var in_dom = !!self.closest('body').length;\n            var MutationObsrv = window.MutationObserver || window.WebKitMutationObserver;\n            if (MutationObsrv) {\n                mutation_observer = new MutationObsrv(function() {\n                    if (self.closest('body').length) {\n                        if (!in_dom) {\n                            self.scroll_to_bottom();\n                            // this observer need to be added when terminal is in the DOM\n                            observe_visibility();\n                            resize();\n                        }\n                        in_dom = true;\n                    } else if (in_dom) {\n                        in_dom = false;\n                    }\n                });\n                mutation_observer.observe(document.body, {childList: true});\n            }\n            if (in_dom) {\n                // check if element is in the DOM if not running IntersectionObserver\n                // don't make sense\n                observe_visibility();\n            }\n            command_queue.resolve();\n            // touch devices need touch event to get virtual keyboard\n            if (enabled && self.is(':visible') && !is_mobile) {\n                self.focus(undefined, true);\n            } else {\n                self.disable();\n            }\n            // -------------------------------------------------------------\n            // Run Login\n            if (is_function(global_login_fn)) {\n                self.login(global_login_fn, true, initialize);\n            } else {\n                initialize();\n            }\n            // -------------------------------------------------------------\n            // :: helper\n            function exec_spec(spec, options) {\n                var terminal = terminals.get()[spec[0]];\n                // execute if belong to this terminal\n                var defer = $.Deferred();\n                if (terminal && terminal_id === terminal.id()) {\n                    if (!spec[2]) {\n                        defer.resolve();\n                        return defer.promise();\n                    } else if (paused) {\n                        resume_callbacks.push(function() {\n                            return terminal.exec(spec[2], options).done(function() {\n                                terminal.save_state(spec[2], true, spec[1]);\n                                defer.resolve();\n                            });\n                        });\n                        return defer.promise();\n                    } else {\n                        return terminal.exec(spec[2], options).done(function() {\n                            terminal.save_state(spec[2], true, spec[1]);\n                        });\n                    }\n                }\n            }\n            // exec from hash called in each terminal instance\n            if (settings.execHash) {\n                if (location.hash) {\n                    // wait until login is initialized\n                    setTimeout(function() {\n                        try {\n                            var hash = location.hash.replace(/^#/, '');\n                            // yes no var - local inside terminal\n                            hash_commands = JSON.parse(decodeURIComponent(hash));\n                            if (!hash.match(/\\[/)) {\n                                // fix the hash to look like array if it's not\n                                replace_hash(hash_commands);\n                            }\n                            var i = 0;\n                            var options = {\n                                typing: settings.execAnimation,\n                                delay: settings.execAnimationDelay\n                            };\n                            (function recur() {\n                                var spec = hash_commands[i++];\n                                if (spec) {\n                                    exec_spec(spec, options).done(recur);\n                                } else {\n                                    change_hash = true;\n                                }\n                            })();// */\n                        } catch (e) {\n                            // invalid json - ignore\n                        }\n                    });\n                } else {\n                    change_hash = true;\n                }\n            } else {\n                change_hash = true; // if enabled later\n            }\n            // change_hash = true; // exec can now change hash\n            // -------------------------------------------------------------\n            /* istanbul ignore next */\n            (function() {\n                var shift = false;\n                $(document).bind('keydown.terminal_' + self.id(), function(e) {\n                    if (e.shiftKey) {\n                        shift = true;\n                    }\n                }).bind('keyup.terminal_' + self.id(), function(e) {\n                    // in Google Chromium/Linux shiftKey is false\n                    if (e.shiftKey || e.which === 16) {\n                        shift = false;\n                    }\n                });\n                // this could work without calling scroll on wheel event but we\n                // need it for cases where you have mouse wheel work differently\n                // like with less command that scroll text\n                function mousewheel(event, delta) {\n                    if (!shift) {\n                        var interpreter = interpreters.top();\n                        var ret;\n                        if (is_function(interpreter.mousewheel)) {\n                            ret = interpreter.mousewheel(event, delta, self);\n                        } else if (is_function(settings.mousewheel)) {\n                            ret = settings.mousewheel(event, delta, self);\n                        }\n                        if (ret === true) {\n                            return;\n                        }\n                        if ((have_scrollbar() || ret === false) && !event.ctrlKey) {\n                            event.stopPropagation();\n                            event.preventDefault();\n                        }\n                        if (ret === false) {\n                            return false;\n                        }\n                        if (delta > 0) {\n                            self.scroll(-40);\n                        } else {\n                            self.scroll(40);\n                        }\n                    }\n                }\n                if ($.event.special.mousewheel) {\n                    // we keep mousewheel plugin just in case\n                    self.on('mousewheel', mousewheel);\n                } else {\n                    // detection take from:\n                    // https://developer.mozilla.org/en-US/docs/Web/Events/wheel\n                    var event;\n                    var div = document.createElement(\"div\");\n                    if (\"onwheel\" in div) {\n                        event = \"wheel\"; // Modern browsers support \"wheel\"\n                    } else if (document.onmousewheel !== undefined) {\n                        // Webkit and IE support at least \"mousewheel\"\n                        event = \"mousewheel\";\n                    } else {\n                        // let's assume that remaining browsers are older Firefox\n                        event = \"DOMMouseScroll\";\n                    }\n                    div = null;\n                    self.on(event, function(e) {\n                        var delta;\n                        if (event === 'mousewheel') {\n                            delta = - 1 / 40 * e.originalEvent.wheelDelta;\n                        } else {\n                            delta = e.originalEvent.deltaY || e.originalEvent.detail;\n                        }\n                        mousewheel(e, -delta);\n                    });\n                }\n                self.touch_scroll(function(event) {\n                    var delta = event.current.clientY - event.previous.clientY;\n                    var ret;\n                    var interpreter = interpreters.top();\n                    if (is_function(interpreter.touchscroll)) {\n                        ret = interpreter.touchscroll(event, delta, self);\n                    } else if (is_function(settings.touchscroll)) {\n                        ret = settings.touchscroll(event, delta, self);\n                    }\n                    css(self[0], {\n                        '--terminal-scroll': self.prop('scrollTop')\n                    });\n                    if (ret === true) {\n                        return;\n                    }\n                    return false;\n                });\n            })();\n        }); // make_interpreter\n        return self;\n    }; // terminal plugin\n});\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CodePlayground.vue?vue&type=style&index=0&id=770efbd8&lang=sass&scoped=true&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--12-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--12-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--12-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--12-oneOf-1-3!../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../node_modules/cache-loader/dist/cjs.js??ref--1-1!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DataBlock.vue?vue&type=style&index=1&lang=stylus&\"","import Vue from 'vue'\nimport VueI18n from 'vue-i18n'\nimport Quasar from 'quasar/src/vue-plugin.js';\n\nlet lang = document.getElementsByTagName('html')[0].getAttribute('lang')\nif (lang !== null) {\n    lang = lang.split('-', 2)[0]\n}\nVue.use(VueI18n)\n\nfunction loadLocaleMessages() {\n    const locales = require.context('../locales', true, /[A-Za-z0-9-_,\\s]+\\.json$/i)\n    const messages = {}\n    locales.keys().forEach(key => {\n        const matched = key.match(/([A-Za-z0-9-_]+)\\./i)\n        if (matched && matched.length > 1) {\n            const locale = matched[1]\n            messages[locale] = locales(key)\n        }\n    })\n    return messages\n}\n\nexport class I18n extends VueI18n {\n    public readonly $v: typeof VueI18n\n\n    constructor(options: VueI18n.I18nOptions) {\n        super(options)\n        this.$v = VueI18n\n    }\n}\n\nexport const i18n: I18n = new I18n({\n    locale: lang || process.env.VUE_APP_I18N_LOCALE || 'en',\n    fallbackLocale: process.env.VUE_APP_I18N_FALLBACK_LOCALE || 'en',\n    messages: loadLocaleMessages()\n})\n\nexport default i18n\nVue.prototype.$l = (key: string, values?: any[]): string => {\n    const res = i18n.t(key, values)\n    return res.toString()\n}\nVue.$l = Vue.prototype.$l\n"],"sourceRoot":""}